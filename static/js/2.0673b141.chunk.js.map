{"version":3,"sources":["../node_modules/react/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../node_modules/@emotion/memoize/dist/memoize.browser.esm.js","../node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js","../node_modules/@emotion/sheet/dist/sheet.browser.esm.js","../node_modules/@emotion/stylis/dist/stylis.browser.esm.js","../node_modules/@emotion/cache/dist/cache.browser.esm.js","../node_modules/@emotion/utils/dist/utils.browser.esm.js","../node_modules/@emotion/hash/dist/hash.browser.esm.js","../node_modules/@emotion/unitless/dist/unitless.browser.esm.js","../node_modules/@emotion/serialize/dist/serialize.browser.esm.js","../node_modules/@emotion/css/dist/css.browser.esm.js","../node_modules/@emotion/core/dist/core.browser.esm.js","../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js","../node_modules/@emotion/styled/dist/styled.browser.esm.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/tslib/tslib.es6.js","../../index.ts","../../src/constants.ts","../../src/assert.ts","../../src/crypt.ts","../../src/deepCopy.ts","../../src/deferred.ts","../../src/environment.ts","../../src/errors.ts","../../src/json.ts","../../src/jwt.ts","../../src/sha1.ts","../../src/subscribe.ts","../../src/validation.ts","../../src/obj.ts","../../src/query.ts","../../src/utf8.ts","../node_modules/object-assign/index.js","../../src/logger.ts","../../src/firebaseApp.ts","../../src/firebaseNamespace.ts","../../src/firebaseNamespaceCore.ts","../../src/platformLoggerService.ts","../../src/registerCoreComponents.ts","../../src/component.ts","../../src/provider.ts","../../src/component_container.ts","../node_modules/react-dom/index.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/@babel/runtime/helpers/inheritsLoose.js","../node_modules/smoothscroll-polyfill/dist/smoothscroll.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/scheduler/index.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/webpack/buildin/global.js","../../src/core/storage/DOMStorageWrapper.ts","../../src/core/storage/MemoryStorage.ts","../../src/core/storage/storage.ts","../../src/core/util/util.ts","../../src/core/util/Path.ts","../../src/core/RepoInfo.ts","../../src/realtime/Constants.ts","../../src/core/util/libs/parser.ts","../../src/core/snap/indexes/KeyIndex.ts","../../src/core/snap/snap.ts","../../src/core/util/validation.ts","../../src/api/onDisconnect.ts","../../src/api/TransactionResult.ts","../../src/core/util/NextPushId.ts","../../src/core/snap/Node.ts","../../src/core/snap/indexes/Index.ts","../../src/core/snap/LeafNode.ts","../../src/core/snap/indexes/PriorityIndex.ts","../../src/core/snap/IndexMap.ts","../../src/core/snap/ChildrenNode.ts","../../src/core/util/SortedMap.ts","../../src/core/snap/childSet.ts","../../src/core/snap/comparators.ts","../../src/core/snap/nodeFromJSON.ts","../../src/core/snap/indexes/ValueIndex.ts","../../src/api/Query.ts","../../src/core/operation/Operation.ts","../../src/core/snap/indexes/PathIndex.ts","../../src/api/DataSnapshot.ts","../../src/core/view/Event.ts","../../src/core/view/EventRegistration.ts","../../src/core/SparseSnapshotTree.ts","../../src/core/util/ServerValues.ts","../../src/core/util/ImmutableTree.ts","../../src/core/SyncPoint.ts","../../src/core/operation/AckUserWrite.ts","../../src/core/operation/ListenComplete.ts","../../src/core/operation/Overwrite.ts","../../src/core/operation/Merge.ts","../../src/core/view/CacheNode.ts","../../src/core/view/ViewCache.ts","../../src/core/view/Change.ts","../../src/core/view/filter/IndexedFilter.ts","../../src/core/view/ChildChangeAccumulator.ts","../../src/core/view/CompleteChildSource.ts","../../src/core/view/ViewProcessor.ts","../../src/core/view/EventGenerator.ts","../../src/core/view/View.ts","../../src/core/CompoundWrite.ts","../../src/core/WriteTree.ts","../../src/core/SyncTree.ts","../../src/core/SnapshotHolder.ts","../../src/core/AuthTokenProvider.ts","../../src/core/stats/StatsCollection.ts","../../src/core/stats/StatsManager.ts","../../src/core/stats/StatsListener.ts","../../src/core/stats/StatsReporter.ts","../../src/core/view/EventQueue.ts","../../src/core/util/EventEmitter.ts","../../src/core/util/VisibilityMonitor.ts","../../src/core/util/OnlineMonitor.ts","../../src/realtime/polling/PacketReceiver.ts","../../src/realtime/BrowserPollConnection.ts","../../src/core/version.ts","../../src/realtime/WebSocketConnection.ts","../../src/realtime/TransportManager.ts","../../src/realtime/Connection.ts","../../src/core/ServerActions.ts","../../src/core/PersistentConnection.ts","../../src/core/ReadonlyRestClient.ts","../../src/core/Repo.ts","../../src/core/view/filter/RangedFilter.ts","../../src/core/view/filter/LimitedFilter.ts","../../src/core/view/QueryParams.ts","../../src/api/Reference.ts","../../src/core/util/Tree.ts","../../src/core/Repo_transaction.ts","../../src/core/RepoManager.ts","../../src/api/Database.ts","../../src/api/internal.ts","../../src/api/test_access.ts","../node_modules/process/browser.js"],"names":["module","exports","require","_taggedTemplateLiteral","strings","raw","slice","Object","freeze","defineProperties","value","memoize","fn","cache","arg","undefined","reactPropsRegex","index","prop","test","charCodeAt","StyleSheet","options","this","isSpeedy","speedy","tags","ctr","nonce","key","container","before","_proto","prototype","insert","rule","_tag","tag","document","createElement","setAttribute","appendChild","createTextNode","createStyleElement","length","nextSibling","insertBefore","push","sheet","i","styleSheets","ownerNode","sheetForTag","isImportRule","insertRule","cssRules","e","process","flush","forEach","parentNode","removeChild","stylis_min","W","X","d","c","h","trim","split","ia","a","m","b","Z","v","n","replace","F","indexOf","P","substring","w","L","ja","ka","aa","G","ba","la","ma","R","na","ea","oa","H","q","g","x","A","S","call","B","U","prefix","D","z","M","k","y","C","K","u","l","r","I","t","J","f","p","N","charAt","ca","O","join","da","fa","Y","E","ha","Q","use","T","set","toSheet","block","Sheet","current","ruleSheet","context","content","selectors","parents","line","column","ns","depth","at","delimiter","createCache","stylisOptions","stylis","Stylis","inserted","head","_insert","nodes","querySelectorAll","Array","node","getAttribute","id","stylisPlugins","selector","serialized","shouldCache","name","styles","registered","getRegisteredStyles","registeredStyles","classNames","rawClassName","className","insertStyles","isStringTag","next","murmurhash2_32_gc","str","toString","unitlessKeys","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","msGridRow","msGridRowSpan","msGridColumn","msGridColumnSpan","fontWeight","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","WebkitLineClamp","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","hyphenateRegex","animationRegex","isCustomProperty","property","isProcessableValue","processStyleName","styleName","toLowerCase","processStyleValue","match","p1","p2","cursor","unitless","handleInterpolation","mergedProps","interpolation","couldBeSelectorInterpolation","__emotion_styles","anim","obj","string","isArray","_key","interpolated","_i","createStringFromObject","previousCursor","result","cached","labelPattern","serializeStyles","args","stringMode","lastIndex","identifierName","exec","hashString","css","EmotionCacheContext","createContext","HTMLElement","ThemeContext","withEmotionCache","Provider","func","forwardRef","props","ref","Consumer","hasOwnProperty","Component","classnames","len","cls","toAdd","merge","theme","_len","arguments","cx","_len2","_key2","ele","children","testOmitPropsOnStringTag","isPropValid","testOmitPropsOnComponent","getDefaultShouldForwardProp","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","source","_defineProperty","getOwnPropertyDescriptors","defineProperty","newStyled","createStyled","shouldForwardProp","targetClassName","label","__emotion_forwardProp","propName","isReal","__emotion_real","baseTag","__emotion_base","defaultShouldForwardProp","shouldUseAs","Styled","finalTag","as","classInterpolations","concat","finalShouldForwardProp","newProps","innerRef","displayName","defaultProps","withComponent","nextTag","nextOptions","bind","tagName","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","configurable","writable","_createClass","protoProps","staticProps","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_typeof","Symbol","iterator","constructor","_possibleConstructorReturn","self","ReferenceError","_setPrototypeOf","_inherits","subClass","superClass","create","_objectSpread2","extendStatics","__extends","__","__assign","assign","s","__rest","propertyIsEnumerable","__decorate","decorators","desc","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","generator","Promise","resolve","reject","fulfilled","step","rejected","done","then","__generator","body","_","sent","trys","ops","verb","op","pop","__exportStar","__values","__read","ar","error","__spread","__spreadArrays","il","j","jl","__await","__asyncGenerator","asyncIterator","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","__importStar","mod","__esModule","default","__importDefault","assert","assertion","message","assertionError","Error","CONSTANTS","SDK_VERSION","stringToByteArray","out","base64","byteToCharMap_","charToByteMap_","byteToCharMapWebSafe_","charToByteMapWebSafe_","ENCODED_VALS_BASE","HAS_NATIVE_SUPPORT","atob","encodeByteArray","input","webSafe","init_","byteToCharMap","output","byte1","haveByte2","byte2","haveByte3","byte3","outByte1","outByte2","outByte3","outByte4","encodeString","btoa","decodeString","bytes","pos","c1","String","fromCharCode","c2","c3","byteArrayToString","decodeStringToByteArray","charToByteMap","byte4","ENCODED_VALS","ENCODED_VALS_WEBSAFE","base64Decode","console","deepExtend","Date","getTime","promise","wrapCallback","callback","catch","getUA","navigator","jsonEval","JSON","parse","decode","token","header","claims","data","signature","parts","chain_","buf_","W_","pad_","inbuf_","total_","blockSize","reset","compress_","buf","offset","update","lengthMinusBlock","inbuf","digest","totalBits","executor","onNoObservers","observers","unsubscribes","observerCount","task","finalized","forEachObserver","observer","close","complete","subscribe","nextOrObserver","methods","method","implementsAnyMethods","noop","unsub","unsubscribeOne","finalError","sendOne","err","errorPrefix","fnName","argumentNumber","optional","argName","onError","utf8Bytes","proxy","ObserverProxy","window","global","NODE_CLIENT","NODE_ADMIN","now","Math","floor","validSince","validUntil","contextObj","res","querystringParams","params","arrayVal","encodeURIComponent","entries","querystring","high","stringify","minCount","maxCount","argCount","argError","namespace","propIsEnumerable","toObject","val","test1","getOwnPropertyNames","test2","map","test3","letter","shouldUseNative","from","to","ERRORS","ERROR_FACTORY","ErrorFactory","_a","appName","Logger","config","firebase_","isDeleted_","name_","automaticDataCollectionEnabled_","automaticDataCollectionEnabled","options_","deepCopy","ComponentContainer","_addComponent","INTERNAL","components","values","component","checkDestroyed_","delete","removeApp","all","getProviders","provider","_getService","instanceIdentifier","getProvider","getImmediate","identifier","_removeServiceInstance","clearInstance","addComponent","logger","debug","_addOrOverwriteComponent","addOrOverwriteComponent","FirebaseAppImpl","log","firebase","createFirebaseNamespace","firebaseAppImpl","apps","Map","initializeApp","rawConfig","contains","app","registerVersion","libraryKeyOrName","version","variant","library","PLATFORM_LOG_STRING","libraryMismatch","versionMismatch","warning","warn","registerComponent","useAsService","componentName","has","type","serviceNamespace","appArg","serviceProps","serviceFxn","multipleInstances","get","createFirebaseNamespaceCore","extendNamespace","createSubscribe","getPlatformInfoString","getComponent","isVersionServiceProvider","service","logString","isBrowser","firebaseNamespace","isNode","PlatformLoggerService","instanceFactory","instantiationMode","setInstantiationMode","mode","setMultipleInstances","setServiceProps","instances","instancesDeferred","normalizedIdentifier","normalizeInstanceIdentifier","deferred","Deferred","getOrInitializeService","setComponent","isComponentEager","instanceDeferred","services","isComponentSet","normalizeIdentifierForFactory","providers","LogLevel","defaultLogLevel","INFO","defaultLogHandler","logType","logLevel","toISOString","DEBUG","VERBOSE","info","WARN","ERROR","_logLevel","_logHandler","checkDCE","__REACT_DEVTOOLS_GLOBAL_HOOK__","polyfill","documentElement","style","__forceSmoothScrollPolyfill__","userAgent","Element","original","scroll","scrollTo","scrollBy","elementScroll","scrollElement","scrollIntoView","performance","ROUNDING_TOLERANCE","RegExp","shouldBailOut","smoothScroll","left","scrollX","pageXOffset","top","scrollY","pageYOffset","scrollLeft","scrollTop","SyntaxError","behavior","scrollableParent","findScrollableParent","parentRects","getBoundingClientRect","clientRects","getComputedStyle","position","firstArg","hasScrollableSpace","el","axis","clientHeight","scrollHeight","clientWidth","scrollWidth","canOverflow","overflowValue","isScrollable","isScrollableY","isScrollableX","host","currentX","currentY","elapsed","startTime","cos","PI","startX","startY","scrollable","requestAnimationFrame","_toConsumableArray","arr","arr2","iter","_objectWithoutProperties","excluded","sourceKeys","sourceSymbolKeys","for","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","refs","updater","isReactComponent","setState","forceUpdate","isPureReactComponent","suspense","__self","__source","$$typeof","_owner","keyPrefix","count","escape","V","Children","toArray","only","createRef","PureComponent","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","_context","render","lazy","_ctor","_status","_result","memo","compare","useCallback","useContext","useEffect","useImperativeHandle","useDebugValue","useLayoutEffect","useMemo","useReducer","useRef","useState","Fragment","Profiler","StrictMode","Suspense","unstable_SuspenseList","cloneElement","createFactory","isValidElement","unstable_withSuspenseConfig","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentDispatcher","ReactCurrentBatchConfig","ReactCurrentOwner","IsSomeRendererActing","extractEvents","eventTypes","phasedRegistrationNames","registrationName","dependencies","pa","qa","sa","ta","va","wa","currentTarget","ra","xa","ya","za","Aa","_dispatchListeners","_dispatchInstances","isPropagationStopped","isPersistent","release","Ba","Ca","injectEventPluginOrder","injectEventPluginsByName","Da","stateNode","disabled","Ea","random","Fa","Ga","Ha","Ia","Ja","Ka","La","return","Ma","dispatchConfig","Na","_targetInst","Oa","Pa","Qa","Ra","Sa","Ta","animationend","animationiteration","animationstart","transitionend","Ua","Va","Wa","animation","transition","Xa","Ya","Za","ab","bb","cb","db","eb","fb","textContent","gb","hb","nativeEvent","Interface","isDefaultPrevented","defaultPrevented","returnValue","jb","eventPool","kb","destructor","ib","getPooled","preventDefault","stopPropagation","cancelBubble","persist","eventPhase","bubbles","cancelable","timeStamp","isTrusted","extend","lb","mb","nb","ob","pb","documentMode","qb","sb","tb","ub","beforeInput","bubbled","captured","compositionEnd","compositionStart","compositionUpdate","vb","wb","keyCode","xb","detail","yb","Cb","locale","which","Ab","ctrlKey","altKey","metaKey","char","Bb","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Nb","Ob","Pb","color","date","datetime","email","month","number","password","range","search","tel","text","time","url","week","Qb","nodeName","Rb","srcElement","correspondingUseElement","nodeType","Sb","Tb","Vb","_valueTracker","getValue","setValue","stopTracking","Ub","Wb","checked","Xb","Yb","Zb","$b","ac","bc","cc","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","oc","pc","_debugOwner","_debugSource","fileName","lineNumber","qc","rc","sc","tc","acceptsBooleans","attributeName","attributeNamespace","mustUseProperty","propertyName","sanitizeURL","xc","yc","toUpperCase","zc","vc","isNaN","wc","uc","removeAttribute","setAttributeNS","Ac","Bc","defaultChecked","defaultValue","_wrapperState","initialChecked","Cc","initialValue","controlled","Dc","Ec","Fc","Gc","ownerDocument","activeElement","xlinkHref","Hc","change","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","detachEvent","Qc","Rc","attachEvent","Sc","Tc","Uc","Vc","_isInputEventSupported","Wc","view","Xc","Alt","Control","Meta","Shift","Yc","getModifierState","Zc","$c","ad","bd","cd","dd","screenX","screenY","clientX","clientY","pageX","pageY","shiftKey","button","buttons","relatedTarget","fromElement","toElement","movementX","movementY","ed","pointerId","width","height","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","fd","mouseEnter","mouseLeave","pointerEnter","pointerLeave","gd","defaultView","parentWindow","alternate","hd","jd","kd","responder","ld","effectTag","od","qd","child","sibling","pd","Set","rd","animationName","elapsedTime","pseudoElement","sd","clipboardData","td","ud","charCode","vd","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","wd","8","9","12","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","112","113","114","115","116","117","118","119","120","121","122","123","144","145","224","xd","location","repeat","yd","dataTransfer","zd","touches","targetTouches","changedTouches","Ad","Bd","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","Cd","Dd","Ed","Fd","Gd","Hd","Id","Jd","Kd","Ld","eventPriority","Md","getEventPriority","Nd","Od","Pd","targetInst","ancestors","containerInfo","topLevelType","Qd","Rd","Sd","Td","Ud","addEventListener","Vd","WeakMap","Wd","Xd","Yd","firstChild","Zd","ae","HTMLIFrameElement","contentWindow","href","be","contentEditable","ce","de","select","ee","fe","ge","he","ie","start","selectionStart","end","selectionEnd","anchorNode","getSelection","anchorOffset","focusNode","focusOffset","je","onSelect","le","ke","me","selected","defaultSelected","ne","dangerouslySetInnerHTML","oe","pe","qe","SimpleEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin","re","se","te","ue","ve","MSApp","execUnsafeLocalFunction","namespaceURI","innerHTML","we","lastChild","nodeValue","xe","gridArea","lineClamp","ye","ze","Ae","setProperty","Ce","menuitem","area","base","br","col","embed","hr","img","keygen","link","meta","param","track","wbr","De","Ee","is","Fe","add","Ge","He","Ie","Je","autoFocus","Ke","__html","Le","setTimeout","Me","clearTimeout","Ne","Oe","Pe","Qe","Re","Se","contextTypes","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","childContextTypes","Te","Ue","Ve","We","getChildContext","Xe","__reactInternalMemoizedMergedChildContext","Ye","Ze","unstable_runWithPriority","$e","unstable_scheduleCallback","af","unstable_cancelCallback","bf","unstable_shouldYield","cf","unstable_requestPaint","df","unstable_now","ef","unstable_getCurrentPriorityLevel","ff","unstable_ImmediatePriority","hf","unstable_UserBlockingPriority","jf","unstable_NormalPriority","kf","unstable_LowPriority","lf","unstable_IdlePriority","mf","nf","of","pf","qf","rf","sf","tf","uf","vf","wf","xf","yf","zf","Af","Cf","Df","Ef","Ff","Gf","Hf","If","Jf","childExpirationTime","Kf","firstContext","expirationTime","Lf","Mf","observedBits","responders","Nf","Of","baseState","firstUpdate","lastUpdate","firstCapturedUpdate","lastCapturedUpdate","firstEffect","lastEffect","firstCapturedEffect","lastCapturedEffect","Pf","Qf","suspenseConfig","payload","nextEffect","Rf","Sf","updateQueue","memoizedState","Tf","Uf","Vf","Wf","Xf","Yf","Zf","$f","ag","bg","fg","_reactInternalFiber","cg","dg","eg","gg","shouldComponentUpdate","hg","contextType","state","ig","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","jg","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","kg","lg","_stringRef","mg","ng","og","pg","elementType","qg","implementation","rg","sg","rb","Be","tg","ug","vg","wg","xg","yg","zg","Ag","Bg","Cg","Dg","Hg","memoizedProps","revealOrder","Qg","Rg","Sg","Tg","Ug","Vg","Wg","Xg","Yg","Zg","$g","ah","bh","ch","dh","eh","fh","hh","ih","jh","queue","baseUpdate","kh","lh","mh","lastRenderedReducer","dispatch","action","last","lastRenderedState","eagerReducer","eagerState","nh","destroy","deps","oh","ph","qh","rh","sh","readContext","useResponder","Pg","Kg","th","uh","vh","wh","xh","yh","pendingProps","zh","Ah","Bh","Ch","Dh","Eh","Fh","Gh","Hh","Ih","Jh","Kh","Lh","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","Mh","getDerivedStateFromError","Nh","pendingContext","Oh","Ph","fallback","unstable_avoidThisFallback","Qh","isBackwards","rendering","tail","tailExpiration","tailMode","Rh","Sh","Th","Vh","Wh","$h","ai","bi","stack","onClick","onclick","ci","WeakSet","di","gi","fi","hi","ii","ji","componentWillUnmount","ei","ki","li","mi","ni","_reactRootContainer","oi","wasMultiple","multiple","pi","display","qi","ri","si","ti","element","ui","vi","wi","componentDidCatch","xi","componentStack","yi","ceil","zi","Ai","Ji","Ki","Li","Mi","Ni","Pi","Qi","Ri","Si","Ti","Ui","Vi","Wi","timeoutMs","Xi","Yi","pingTime","Zi","firstPendingTime","lastPendingTime","callbackExpirationTime","callbackNode","$i","timeout","aj","bj","cj","ej","fj","gj","hj","finishedWork","finishedExpirationTime","timeoutHandle","ij","jj","pingCache","kj","lj","firstBatch","_defer","_expirationTime","_onComplete","dj","busyMinDurationMs","busyDelayMs","mj","size","createElementNS","nj","rangeCount","zb","focusedElem","selectionRange","ua","gh","oj","__reactInternalSnapshotBeforeUpdate","$d","compareDocumentPosition","min","createRange","setStart","removeAllRanges","addRange","setEnd","focus","$a","nc","md","Fj","Xh","Yh","Gj","nd","Zh","gf","pj","qj","rj","hidden","Bf","sj","hydrate","unstable_observedBits","uj","pendingChildren","vj","wj","xj","yj","zj","Aj","Bj","_root","_callbacks","_next","_hasChildren","_didComplete","_children","Cj","_didCommit","_onCommit","Dj","_internalRoot","Ej","Hj","Jj","hasAttribute","Ij","Kj","form","commit","unmount","createBatch","Nj","createPortal","findDOMNode","unstable_renderSubtreeIntoContainer","unmountComponentAtNode","unstable_createPortal","unstable_batchedUpdates","unstable_interactiveUpdates","unstable_discreteUpdates","unstable_flushDiscreteUpdates","flushSync","unstable_createRoot","unstable_createSyncRoot","unstable_flushControlled","Events","findFiberByHostInstance","isDisabled","supportsFiber","inject","onCommitFiberRoot","onCommitFiberUnmount","tj","overrideHookState","overrideProps","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","bundleType","rendererPackageName","Oj","Pj","unstable_forceFrameRate","MessageChannel","cancelAnimationFrame","postMessage","port2","port1","onmessage","previous","priorityLevel","unstable_next","delay","unstable_wrapCallback","unstable_continueExecution","unstable_pauseExecution","unstable_getFirstCallbackNode","Function","domStorage_","prefix_","removeItem","prefixedName_","setItem","storedVal","getItem","remove","cache_","isInMemoryStorage","createStoragefor","domStorageName","domStorage","DOMStorageWrapper","MemoryStorage","PersistentStorage","SessionStorage","logClient","LUIDGenerator","sha1","Sha1","sha1Bytes","buildLogMessage_","var_args","firstLog_","enableLogging","logger_","persistent","logWrapper","fatal","isInvalidJSONNumber","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","MIN_NAME","MAX_NAME","nameCompare","aAsInt","tryParseInt","bAsInt","stringCompare","requireKey","ObjectToUniqueKey","sort","splitStringBySize","segsize","dataSegs","each","doubleToIEEE754String","ln","bits","Infinity","abs","pow","LN2","round","reverse","hexByteString","hexByte","parseInt","substr","INTEGER_REGEXP_","intVal","exceptionGuard","setTimeoutNonBlocking","pathOrString","pieceNum","pieces_","copyTo","pieceNum_","Path","getFront","getLength","popFront","getBack","pathString","toUrlEncodedString","begin","parent","pieces","childPathObj","childPieces","isEmpty","relativePath","outerPath","innerPath","outer","inner","comparePaths","right","leftKeys","rightKeys","cmp","equals","other","path","errorPrefix_","parts_","byteLength_","max","stringLength","checkValid_","ValidationPath","MAX_PATH_LENGTH_BYTES","MAX_PATH_DEPTH","toErrorString","secure","webSocketOnly","persistenceKey","includeNamespaceInQueryParams","domain","internalHost","needsQueryParam","isCustomHost","isCacheableHost","isDemoHost","updateHost","newHost","connectionURL","connURL","pairs","toURLString","__EMPTY_NODE","MAX_NODE","parseRepoInfo","dataURL","parsedUrl","parseDatabaseURL","protocol","scheme","repoInfo","RepoInfo","subdomain","port","colonInd","slashInd","questionMarkInd","pathStringDecoded","piece","decodeURIComponent","decodePath","queryParams","queryString","results","segment","kv","decodeQuery","INVALID_KEY_REGEX_","INVALID_PATH_REGEX_","isValidKey","isValidPathString","isValidPriority","priority","validateFirebaseDataArg","validateFirebaseData","errorPrefixFxn","path_","validateFirebaseMergeDataArg","mergePaths","curPath","prevPath","validateFirebaseMergePaths","validatePriority","validateEventType","eventType","validateKey","validatePathString","validateRootPathString","validateWritablePath","validateUrl","isValidRootPathString","validateBoolean","bool","repo_","cancel","onComplete","validateArgCount","validateCallback","onDisconnectCancel","onDisconnectSet","setWithPriority","onDisconnectSetWithPriority","objectToMerge","newObjectToMerge","onDisconnectUpdate","committed","snapshot","toJSON","nextPushId","PUSH_CHARS","lastPushTime","lastRandChars","duplicateTime","timeStampChars","Wrap","NamedNode","getCompare","indexedValueChanged","oldNode","newNode","oldWrapped","newWrapped","minPost","MIN","isDefinedOn","maxPost","makePost","indexValue","Index","KEY_INDEX","KeyIndex","__childrenNodeConstructor","nodeFromJSON","priorityHashText","validatePriorityNode","priorityNode","isLeafNode","getPriority","value_","priorityNode_","LeafNode","EMPTY_NODE","lazyHash_","updatePriority","newPriorityNode","getImmediateChild","childName","getChild","hasChild","getPredecessorChildName","childNode","updateImmediateChild","newChildNode","updateChild","front","numChildren","forEachChild","exportFormat","hash","toHash","compareTo","compareToLeafNode_","otherLeaf","otherLeafType","thisLeafType","otherIndex","VALUE_TYPE_ORDER","thisIndex","withIndex","isIndexed","_defaultIndexMap","PRIORITY_INDEX","aPriority","bPriority","indexCmp","startKey","comparator","isReverse_","resultGenerator_","nodeStack_","getNext","hasNext","peek","LLRBNode","RED","SortedMap","copy","inorderTraversal","reverseTraversal","min_","minKey","maxKey","fixUp_","removeMin_","isRed_","moveRedLeft_","smallest","rotateRight_","moveRedRight_","rotateLeft_","colorFlip_","nl","nr","checkMaxDepth_","blackDepth","check_","BLACK","comparator_","root_","getPredecessorKey","rightParent","getIterator","resultGenerator","SortedMapIterator","getIteratorFrom","getReverseIteratorFrom","getReverseIterator","LLRBEmptyNode","LOG_2","num","current_","mask","bits_","nextBitIsOne","buildChildSet","childList","keyFn","mapSortFn","root","base12","buildPennant","chunkSize","low","childTree","buildBalancedTree","namedNode","middle","attachPennant","pennant","isOne","buildFrom12Array","Base12Num","fallbackObject","indexes_","indexSet_","IndexMap","indexKey","sortedMap","safeGet","hasIndex","indexDefinition","addIndex","existingChildren","newIndex","sawIndexedValue","indexName","newIndexSet","newIndexes","addToIndexes","indexedChildren","existingSnap","newChildren","removeFromIndexes","NAME_ONLY_COMPARATOR","NAME_COMPARATOR","children_","indexMap_","ChildrenNode","Default","newPriority","newIndexMap","newImmediateChild","numKeys","allIntegerKeys","array","childHash","idx","resolveIndex_","predecessor","getFirstChildName","getFirstChild","getLastChildName","getLastChild","wrappedNode","startPost","endPost","otherChildrenNode","thisIter","otherIter","thisCurrent","otherCurrent","MAX","setPriorityMaxNode","json","childData","childSet","sortedChildSet","setNodeFromJSON","__referenceConstructor","OperationType","VALUE_INDEX","valueNode","indexPath_","extractChild","snap","aChild","bChild","node_","ref_","index_","exportVal","exists","childPathString","childPath","childRef","DataSnapshot","childrenNode","hasChildren","getKey","getRef","eventRegistration","prevName","getPath","getParent","getEventType","getEventRunner","callback_","cancelCallback_","context_","respondsTo","createEvent","query","getQueryParams","getIndex","DataEvent","snapshotNode","eventData","ctx","createCancelEvent","CancelEvent","matches","ValueEventRegistration","hasAnyCallback","callbacks_","eventToCheck","ChildEventRegistration","otherKeys","thisKeys","otherCount","otherKey","thisKey","every","repo","queryParams_","orderByCalled_","validateQueryEndpoints_","startNode","endNode","hasStart","getIndexStartValue","hasEnd","getIndexEndValue","tooManyArgsError","wrongArgTypeError","getIndexStartName","getIndexEndName","PathIndex","validateLimit_","hasLimit","hasAnchoredLimit","validateNoPreviousOrderByCall_","Query","on","cancelCallbackOrContext","ret","getCancelAndContextArgs_","onValueEvent","callbacks","onChildEvent","cancelCallback","addEventCallbackForQuery","off","validateContextObject","valueCallback","removeEventCallbackForQuery","once","userCallback","failureCallbackOrContext","firstCall","onceCallback","limitToFirst","limit","limitToLast","orderByChild","parsedPath","newParams","orderBy","orderByKey","orderByPriority","orderByValue","startAt","endAt","equalTo","queryObject","getQueryObject","queryIdentifier","isEqual","sameRepo","samePath","sameQueryIdentifier","cancelOrContext","find","childKey","remember","clear","SparseSnapshotTree","forget","tree","forEachTree","prefixPath","resolveDeferredValue","existing","serverValues","resolveScalarDeferredValue","resolveComplexDeferredValue","unused","delta","existingVal","resolveDeferredValueSnapshot","rawPri","leafNode","emptyChildrenSingleton","fromUser","fromServer","queryId","tagged","User","OperationSource","Server","forServerTaggedQuery","affectedTree","revert","ACK_USER_WRITE","operationForChild","subtree","AckUserWrite","Empty","fromObject","ImmutableTree","childSnap","findRootMostMatchingPathAndValue","predicate","childExistingPathAndValue","findRootMostValueAndPath","toSet","newChild","setTree","newTree","fold","fold_","pathSoFar","accum","findOnPath","findOnPath_","pathToFollow","nextChild","foreachOnPath","foreachOnPath_","currentRelativePath","foreach","foreach_","foreachChild","LISTEN_COMPLETE","ListenComplete","OVERWRITE","Overwrite","MERGE","Merge","fullyInitialized_","filtered_","isFullyInitialized","isFiltered","isCompleteForPath","isCompleteForChild","getNode","eventCache_","serverCache_","updateEventSnap","eventSnap","filtered","ViewCache","CacheNode","updateServerSnap","serverSnap","getEventCache","getCompleteEventSnap","getServerCache","getCompleteServerSnap","oldSnap","valueChange","Change","VALUE","childAddedChange","CHILD_ADDED","childRemovedChange","CHILD_REMOVED","childChangedChange","newSnapshot","oldSnapshot","CHILD_CHANGED","childMovedChange","CHILD_MOVED","affectedPath","optChangeAccumulator","oldChild","trackChildChange","updateFullNode","newSnap","filtersNodes","getIndexedFilter","changeMap","oldChange","oldType","getChanges","NO_COMPLETE_CHILD_SOURCE","getCompleteChild","getChildAfterChild","writes_","viewCache_","optCompleteServerCache_","serverNode","calcCompleteChild","completeServerData","calcIndexedSlice","viewCache","changes","filter_","assertIndexed","applyOperation","oldViewCache","operation","writesCache","completeCache","newViewCache","filterServerNode","accumulator","ChildChangeAccumulator","overwrite","applyUserOverwrite_","applyServerOverwrite_","applyUserMerge_","applyServerMerge_","ackUserWrite","revertUserWrite_","ackUserWrite_","listenComplete_","ViewProcessor","maybeAddValueEvent_","ProcessorResult","isLeafOrEmpty","oldCompleteSnap","generateEventCacheAfterServerEvent_","changePath","oldEventSnap","shadowingWrite","newEventCache","serverCache","completeChildren","completeEventChildren","calcCompleteEventChildren","completeNode","calcCompleteEventCache","oldEventNode","updatedPriority","calcEventCacheAfterServerOverwrite","childChangePath","newEventChild","eventChildUpdate","changedSnap","newServerCache","oldServerSnap","serverFilter","newServerNode","WriteTreeCompleteChildSource","newEventSnap","cacheHasChild_","changedChildren","curViewCache","writePath","applyMerge_","viewMergeTree","serverChild","childMergeTree","isUnknownDeepMerge","ackPath","mergePath","serverCachePath","oldServerNode","completeServerCache","oldEventCache","serverChildren","query_","generateEventsForChanges","eventCache","eventRegistrations","events","moves","generateEventsForType_","registrations","filteredChanges","compareChanges_","materializedChange","materializeSingleChange_","registration","aWrapped","bWrapped","initialViewCache","eventRegistrations_","indexFilter","IndexedFilter","getNodeFilter","processor_","initialServerCache","initialEventCache","eventGenerator_","EventGenerator","getQuery","getCompleteServerCache","loadsAllData","addEventRegistration","removeEventRegistration","cancelError","cancelEvents","maybeEvent","remaining","generateEventsForChanges_","getInitialEvents","initialChanges","views","optCompleteServerCache","serverCacheComplete","eventCacheComplete","View","removed","hadCompleteView","hasCompleteView","viewQueryId","SyncPoint","getQueryViews","viewForQuery","getCompleteView","viewExistsForQuery","writeTree_","addWrite","CompoundWrite","rootmost","rootMostPath","addWrites","updates","newWrite","removeWrite","hasCompleteWrite","getCompleteNode","getCompleteChildren","childCompoundWrite","shadowingNode","applySubtreeWrite","writeTree","visibleWrites_","allWrites_","lastWriteId_","childWrites","WriteTreeRef","addOverwrite","writeId","visible","addMerge","getWrite","record","findIndex","writeToRemove","splice","removedWriteWasVisible","removedWriteOverlapsWithOtherWrites","currentWrite","recordContainsPath_","resetTree_","getCompleteWriteData","treePath","writeIdsToExclude","includeHiddenWrites","mergeAtPath","WriteTree","layerTree_","write","layeredCache","subMerge","completeServerChildren","topLevelSet","existingEventSnap","existingServerSnap","childMerge","toIterate","writeRecord","DefaultFilter_","writes","treeRoot","compoundWrite","deepNode","treePath_","existingServerCache","listenProvider_","syncPointTree_","pendingWriteTree_","tagToQueryMap","queryToTagMap","applyUserOverwrite","newData","applyOperationToSyncPoints_","applyUserMerge","changeTree","applyServerOverwrite","applyServerMerge","applyListenComplete","applyTaggedQueryOverwrite","queryKey","queryKeyForTag_","SyncTree","parseQueryKey_","queryPath","applyTaggedOperation_","applyTaggedQueryMerge","applyTaggedListenComplete","foundAncestorDefaultView","pathToSyncPoint","sp","syncPoint","childSyncPoint","viewAlreadyExists","makeQueryKey_","getNextQueryTag_","setupListener_","maybeSyncPoint","removedAndEvents","removingDefault","covered","parentSyncPoint","newViews","collectDistinctViewsForSubTree_","newQuery","listener","createListenerForView_","startListening","queryForListening_","tagForQuery_","hashFn","stopListening","queryToRemove","tagToRemove","removeTags_","maybeChildSyncPoint","childMap","childViews","queries","removedQuery","removedQueryKey","removedQueryTag","isDefault","queriesToStop","childQueries","queryToStop","status","code","reason","errorForServerCode","splitIndex","nextQueryTag_","applyOperationHelper_","syncPointTree","applyOperationDescendantsHelper_","childOperation","childServerCache","childWritesCache","rootNode_","updateSnapshot","newSnapshotNode","app_","authProvider_","auth_","auth","getToken","forceRefresh","addTokenChangeListener","addAuthTokenListener","removeTokenChangeListener","removeAuthTokenListener","notifyForInvalidToken","errorMessage","counters_","incrementCounter","amount","getCollection","collections_","StatsCollection","getOrCreateReporter","creatorFunction","reporters_","collection_","last_","newStats","stat","collection","server_","statsToReport_","statsListener_","StatsListener","reportStats_","includeStat","stats","reportedStats","haveStatsToReport","reportStats","eventLists_","recursionDepth_","queueEvents","eventDataList","currList","eventPath","EventList","raiseEventsAtPath","raiseQueuedEventsMatchingPredicate_","raiseEventsForChangedPath","changedPath","sentAll","eventList","raise","events_","eventFn","allowedEvents_","listeners_","trigger","listeners","validateEventType_","getInitialEvent","et","visibilityChange","visible_","getInstance","VisibilityMonitor","EventEmitter","online_","isMobileCordova","OnlineMonitor","currentlyOnline","onMessage_","pendingResponses","currentResponseNum","closeAfterResponse","onClose","closeAfter","responseNum","handleResponse","requestNum","toProcess","connId","transportSessionId","lastSessionId","bytesSent","bytesReceived","everConnected_","log_","stats_","StatsManager","urlFn","open","onMessage","onDisconnect","curSegmentNum","onDisconnect_","myPacketOrderer","PacketReceiver","isClosed_","connectTimeoutTimer_","onClosed_","isNodeSdk","readyState","executeWhenDOMReady","scriptTagHolder","FirebaseIFrameScriptHolder","command","arg1","arg2","incrementIncomingBytes_","sendNewPolls","pN","urlParams","uniqueCallbackIdentifier","connectURL","addTag","startLongPoll","addDisconnectPingFrame","forceAllow","BrowserPollConnection","forceAllow_","forceDisallow","forceDisallow_","isAvailable","Windows","UI","markConnectionHealthy","shutdown_","myDisconnFrame","send","dataStr","base64data","base64Encode","MAX_URL_DATA_SIZE","enqueueSegment","pw","src","commandCB","onMessageCB","outstandingRequests","pendingSegs","currentSerial","myIFrame","createIFrame_","script","iframeContents","doc","iframe","contentDocument","alive","myID","myPW","newRequest_","theURL","curDataString","theSeg","seg","ts","addLongPollTag_","segnum","totalsegs","serial","doNewRequest","keepaliveTimeout","loadCB","doNodeLongPoll","async","onload","onreadystatechange","rstate","onerror","WebSocketImpl","MozWebSocket","WebSocket","keepaliveTimer","frames","totalFrames","WebSocketConnection","connectionURL_","device","ENV_CONSTANTS","headers","platform","env","origin","mySock","onopen","onclose","handleIncomingFrame","isOldAndroid","oldAndroidMatch","parseFloat","previouslyFailed","appendFrame_","fullMess","jsonMess","handleNewFrameCount_","frameCount","extractFrameCount_","mess","resetKeepAlive","remainingData","sendString_","clearInterval","setInterval","responsesRequiredToBeHealthy","healthyTimeout","initTransports_","isWebSocketsAvailable","isSkipPollConnection","transports_","transports","TransportManager","ALL_TRANSPORTS","transport","initialTransport","upgradeTransport","repoInfo_","onReady_","onKill_","connectionCount","pendingDataMessages","state_","transportManager_","start_","conn","conn_","nextTransportId_","primaryResponsesRequired_","onMessageReceived","connReceiver_","onConnectionLost","disconnReceiver_","tx_","rx_","secondaryConn_","isHealthy_","healthyTimeout_ms","healthyTimeout_","everConnected","onConnectionLost_","onSecondaryConnectionLost_","onPrimaryMessageReceived_","onSecondaryMessageReceived_","sendRequest","dataMsg","msg","sendData_","tryCleanupConnection","onSecondaryControl_","controlData","cmd","upgradeIfSecondaryHealthy_","secondaryResponsesRequired_","parsedData","layer","proceedWithUpgrade_","onControl_","onDataMessage_","onPrimaryResponse_","onHandshake_","onConnectionShutdown_","onReset_","sendPingOnPrimaryIfNecessary_","handshake","timestamp","sessionId","onConnectionEstablished_","tryStartUpgrade_","startUpgrade_","closeConnections_","put","refreshAuthToken","onDisconnectPut","onDisconnectMerge","onDataUpdate_","onConnectStatus_","onServerInfoUpdate_","authTokenProvider_","authOverride_","PersistentConnection","nextPersistentConnectionId_","interruptReasons_","listens","outstandingPuts_","outstandingPutCount_","onDisconnectRequestQueue_","connected_","reconnectDelay_","maxReconnectDelay_","securityDebugCallback_","establishConnectionTimer_","requestCBHash_","requestNumber_","realtime_","authToken_","forceTokenRefresh_","invalidAuthTokenCount_","firstConnection_","lastConnectionAttemptTime_","lastConnectionEstablishedTime_","scheduleConnect_","onVisible_","onOnline_","onResponse","curReqNum","listen","currentHashFn","listenSpec","sendListen_","req","warnOnListenWarnings_","removeListen_","warnings","indexSpec","indexPath","tryAuth","reduceReconnectDelayIfAdminCredential_","credential","isAdmin","authMethod","isValidFormat","requestData","cred","onAuthRevoked_","unlisten","sendUnlisten_","queryObj","sendOnDisconnect_","request","response","putInternal","sendPut_","queued","errorReason","reqNum","onDataPush_","onListenRevoked_","onSecurityDebugPacket_","handleTimestamp_","sendConnectStats_","restoreState_","establishConnection_","online","onRealtimeDisconnect_","cancelSentTransactions_","shouldReconnect_","timeSinceLastConnectAttempt","reconnectDelay","nextConnectionId_","accessToken","Connection","interrupt","serverTimeOffset","normalizedPathString","statusCode","explanation","clientName","isReactNative","ServerActions","listens_","getListenId_","listenId","ReadonlyRestClient","thisListen","queryStringParameters","toRestQueryStringParameters","restRequest_","authTokenData","authToken","xhr","XMLHttpRequest","responseText","forceRestClient","authProvider","dataUpdateCount","eventQueue_","EventQueue","nextWriteId_","interceptServerDataCallback_","persistentConnection_","authTokenProvider","AuthTokenProvider","authOverride","statsReporter_","StatsReporter","transactions_init_","infoData_","SnapshotHolder","infoSyncTree_","infoEvents","updateInfo_","serverSyncTree_","serverTime","generateServerValues","isMerge","taggedChildren","taggedSnap","rerunTransactions_","interceptServerData_","connectStatus","runOnDisconnectEvents_","getNextWriteId_","newVal","newNodeUnresolved","success","clearEvents","callOnCompleteCallback","abortTransactions_","childrenToMerge","empty","changedKey","changedValue","resolvedOnDisconnectTree","syncTree","resolvedTree","resolveDeferredValueTree","showDelta","longestName","reduce","previousValue","currentValue","paddedStat","statsIncrementCounter","metric","__database","Database","indexedFilter_","startPost_","RangedFilter","getStartPost_","endPost_","getEndPost_","getStartPost","getEndPost","startName","endName","rangedFilter_","limit_","getLimit","reverse_","isViewFromLeft","fullLimitUpdateChild_","foundStartPost","changeAccumulator","newChildNamedNode","windowBoundary","inRange","oldChildSnap","compareNext","limitSet_","startSet_","startNameSet_","endSet_","endNameSet_","viewFrom_","indexStartValue_","indexStartName_","indexEndValue_","indexEndName_","QueryParams","WIRE_PROTOCOL_CONSTANTS_","VIEW_FROM_LEFT","copy_","newLimit","VIEW_FROM_RIGHT","WIRE_PROTOCOL_CONSTANTS","INDEX_START_VALUE","INDEX_START_NAME","INDEX_END_VALUE","INDEX_END_NAME","LIMIT","viewFrom","VIEW_FROM","INDEX","LimitedFilter","REST_CONSTANTS","REST_QUERY_CONSTANTS_","qs","ORDER_BY","START_AT","END_AT","LIMIT_TO_FIRST","LIMIT_TO_LAST","DEFAULT","Repo","Reference","parentPath","getRoot","databaseProp","database","transaction","transactionUpdate","applyLocally","promiseComplete","TransactionResult","startTransaction","setPriority","thennablePushRef","pushRef","OnDisconnect","TransactionStatus","childCount","parent_","TreeNode","subTree","pathObj","Tree","updateParents_","forEachDescendant","includeSelf","childrenFirst","forEachAncestor","forEachImmediateDescendantWithValue","updateChild_","childEmpty","childExists","MAX_TRANSACTION_RETRIES_","transactionQueueTree_","watchRef","retryCount","unwatcher","abortReason","currentWriteId","currentInputSnapshot","currentOutputSnapshotRaw","currentOutputSnapshotResolved","currentState","getLatestState_","RUN","queueNode","nodeQueue","priorityForNode","sendReadyTransactions_","excludeSets","pruneCompletedTransactionsBelowNode_","buildTransactionQueue_","sendTransactionQueue_","setsToIgnore","txn","latestState","snapToSend","latestHash","SENT","dataToSend","pathToSend","COMPLETED","SENT_NEEDS_ABORT","NEEDS_ABORT","rootMostTransactionNode","getAncestorTransactionNode_","rerunTransactionQueue_","abortTransaction","currentNode","newDataNode","oldWriteId","newNodeResolved","lastInput","transactionNode","transactionQueue","aggregateTransactionQueuesForNode_","abortTransactionsOnNode_","lastSent","_staticInstance","repos_","useRestClient_","RepoManager","dbUrl","databaseFromApp","dbEmulatorHost","createRepo","deleteRepo","appRepos","DatabaseInternals","checkDeleted_","refFromURL","apiName","parsedURL","goOffline","goOnline","ServerValue","TIMESTAMP","_increment","DataConnection","simpleListen","echo","onEcho","RealTimeConnection","ConnectionTarget","newHash","oldPut","opt_onComplete","opt_hash","registerDatabase","setSDKVersion","TEST_ACCESS","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","nextTick","title","browser","argv","versions","addListener","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask"],"mappings":"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","file":"static/js/2.0673b141.chunk.js","sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","function memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport default memoize;\n","import memoize from '@emotion/memoize';\n\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar index = memoize(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\n\nexport default index;\n","/*\n\nBased off glamor's StyleSheet, thanks Sunil ❤️\n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  return tag;\n}\n\nvar StyleSheet =\n/*#__PURE__*/\nfunction () {\n  function StyleSheet(options) {\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      var _tag = createStyleElement(this);\n\n      var before;\n\n      if (this.tags.length === 0) {\n        before = this.before;\n      } else {\n        before = this.tags[this.tags.length - 1].nextSibling;\n      }\n\n      this.container.insertBefore(_tag, before);\n      this.tags.push(_tag);\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is a really hot path\n        // we check the second character first because having \"i\"\n        // as the second character will happen less often than\n        // having \"@\" as the first character\n        var isImportRule = rule.charCodeAt(1) === 105 && rule.charCodeAt(0) === 64; // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n\n        sheet.insertRule(rule, // we need to insert @import rules before anything else\n        // otherwise there will be an error\n        // technically this means that the @import rules will\n        // _usually_(not always since there could be multiple style tags)\n        // be the first ones in prod and generally later in dev\n        // this shouldn't really matter in the real world though\n        // @import is generally only used for font faces from google fonts and etc.\n        // so while this could be technically correct then it would be slower and larger\n        // for a tiny bit of correctness that won't matter in the real world\n        isImportRule ? 0 : sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n        }\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n","function stylis_min (W) {\n  function M(d, c, e, h, a) {\n    for (var m = 0, b = 0, v = 0, n = 0, q, g, x = 0, K = 0, k, u = k = q = 0, l = 0, r = 0, I = 0, t = 0, B = e.length, J = B - 1, y, f = '', p = '', F = '', G = '', C; l < B;) {\n      g = e.charCodeAt(l);\n      l === J && 0 !== b + n + v + m && (0 !== b && (g = 47 === b ? 10 : 47), n = v = m = 0, B++, J++);\n\n      if (0 === b + n + v + m) {\n        if (l === J && (0 < r && (f = f.replace(N, '')), 0 < f.trim().length)) {\n          switch (g) {\n            case 32:\n            case 9:\n            case 59:\n            case 13:\n            case 10:\n              break;\n\n            default:\n              f += e.charAt(l);\n          }\n\n          g = 59;\n        }\n\n        switch (g) {\n          case 123:\n            f = f.trim();\n            q = f.charCodeAt(0);\n            k = 1;\n\n            for (t = ++l; l < B;) {\n              switch (g = e.charCodeAt(l)) {\n                case 123:\n                  k++;\n                  break;\n\n                case 125:\n                  k--;\n                  break;\n\n                case 47:\n                  switch (g = e.charCodeAt(l + 1)) {\n                    case 42:\n                    case 47:\n                      a: {\n                        for (u = l + 1; u < J; ++u) {\n                          switch (e.charCodeAt(u)) {\n                            case 47:\n                              if (42 === g && 42 === e.charCodeAt(u - 1) && l + 2 !== u) {\n                                l = u + 1;\n                                break a;\n                              }\n\n                              break;\n\n                            case 10:\n                              if (47 === g) {\n                                l = u + 1;\n                                break a;\n                              }\n\n                          }\n                        }\n\n                        l = u;\n                      }\n\n                  }\n\n                  break;\n\n                case 91:\n                  g++;\n\n                case 40:\n                  g++;\n\n                case 34:\n                case 39:\n                  for (; l++ < J && e.charCodeAt(l) !== g;) {\n                  }\n\n              }\n\n              if (0 === k) break;\n              l++;\n            }\n\n            k = e.substring(t, l);\n            0 === q && (q = (f = f.replace(ca, '').trim()).charCodeAt(0));\n\n            switch (q) {\n              case 64:\n                0 < r && (f = f.replace(N, ''));\n                g = f.charCodeAt(1);\n\n                switch (g) {\n                  case 100:\n                  case 109:\n                  case 115:\n                  case 45:\n                    r = c;\n                    break;\n\n                  default:\n                    r = O;\n                }\n\n                k = M(c, r, k, g, a + 1);\n                t = k.length;\n                0 < A && (r = X(O, f, I), C = H(3, k, r, c, D, z, t, g, a, h), f = r.join(''), void 0 !== C && 0 === (t = (k = C.trim()).length) && (g = 0, k = ''));\n                if (0 < t) switch (g) {\n                  case 115:\n                    f = f.replace(da, ea);\n\n                  case 100:\n                  case 109:\n                  case 45:\n                    k = f + '{' + k + '}';\n                    break;\n\n                  case 107:\n                    f = f.replace(fa, '$1 $2');\n                    k = f + '{' + k + '}';\n                    k = 1 === w || 2 === w && L('@' + k, 3) ? '@-webkit-' + k + '@' + k : '@' + k;\n                    break;\n\n                  default:\n                    k = f + k, 112 === h && (k = (p += k, ''));\n                } else k = '';\n                break;\n\n              default:\n                k = M(c, X(c, f, I), k, h, a + 1);\n            }\n\n            F += k;\n            k = I = r = u = q = 0;\n            f = '';\n            g = e.charCodeAt(++l);\n            break;\n\n          case 125:\n          case 59:\n            f = (0 < r ? f.replace(N, '') : f).trim();\n            if (1 < (t = f.length)) switch (0 === u && (q = f.charCodeAt(0), 45 === q || 96 < q && 123 > q) && (t = (f = f.replace(' ', ':')).length), 0 < A && void 0 !== (C = H(1, f, c, d, D, z, p.length, h, a, h)) && 0 === (t = (f = C.trim()).length) && (f = '\\x00\\x00'), q = f.charCodeAt(0), g = f.charCodeAt(1), q) {\n              case 0:\n                break;\n\n              case 64:\n                if (105 === g || 99 === g) {\n                  G += f + e.charAt(l);\n                  break;\n                }\n\n              default:\n                58 !== f.charCodeAt(t - 1) && (p += P(f, q, g, f.charCodeAt(2)));\n            }\n            I = r = u = q = 0;\n            f = '';\n            g = e.charCodeAt(++l);\n        }\n      }\n\n      switch (g) {\n        case 13:\n        case 10:\n          47 === b ? b = 0 : 0 === 1 + q && 107 !== h && 0 < f.length && (r = 1, f += '\\x00');\n          0 < A * Y && H(0, f, c, d, D, z, p.length, h, a, h);\n          z = 1;\n          D++;\n          break;\n\n        case 59:\n        case 125:\n          if (0 === b + n + v + m) {\n            z++;\n            break;\n          }\n\n        default:\n          z++;\n          y = e.charAt(l);\n\n          switch (g) {\n            case 9:\n            case 32:\n              if (0 === n + m + b) switch (x) {\n                case 44:\n                case 58:\n                case 9:\n                case 32:\n                  y = '';\n                  break;\n\n                default:\n                  32 !== g && (y = ' ');\n              }\n              break;\n\n            case 0:\n              y = '\\\\0';\n              break;\n\n            case 12:\n              y = '\\\\f';\n              break;\n\n            case 11:\n              y = '\\\\v';\n              break;\n\n            case 38:\n              0 === n + b + m && (r = I = 1, y = '\\f' + y);\n              break;\n\n            case 108:\n              if (0 === n + b + m + E && 0 < u) switch (l - u) {\n                case 2:\n                  112 === x && 58 === e.charCodeAt(l - 3) && (E = x);\n\n                case 8:\n                  111 === K && (E = K);\n              }\n              break;\n\n            case 58:\n              0 === n + b + m && (u = l);\n              break;\n\n            case 44:\n              0 === b + v + n + m && (r = 1, y += '\\r');\n              break;\n\n            case 34:\n            case 39:\n              0 === b && (n = n === g ? 0 : 0 === n ? g : n);\n              break;\n\n            case 91:\n              0 === n + b + v && m++;\n              break;\n\n            case 93:\n              0 === n + b + v && m--;\n              break;\n\n            case 41:\n              0 === n + b + m && v--;\n              break;\n\n            case 40:\n              if (0 === n + b + m) {\n                if (0 === q) switch (2 * x + 3 * K) {\n                  case 533:\n                    break;\n\n                  default:\n                    q = 1;\n                }\n                v++;\n              }\n\n              break;\n\n            case 64:\n              0 === b + v + n + m + u + k && (k = 1);\n              break;\n\n            case 42:\n            case 47:\n              if (!(0 < n + m + v)) switch (b) {\n                case 0:\n                  switch (2 * g + 3 * e.charCodeAt(l + 1)) {\n                    case 235:\n                      b = 47;\n                      break;\n\n                    case 220:\n                      t = l, b = 42;\n                  }\n\n                  break;\n\n                case 42:\n                  47 === g && 42 === x && t + 2 !== l && (33 === e.charCodeAt(t + 2) && (p += e.substring(t, l + 1)), y = '', b = 0);\n              }\n          }\n\n          0 === b && (f += y);\n      }\n\n      K = x;\n      x = g;\n      l++;\n    }\n\n    t = p.length;\n\n    if (0 < t) {\n      r = c;\n      if (0 < A && (C = H(2, p, r, d, D, z, t, h, a, h), void 0 !== C && 0 === (p = C).length)) return G + p + F;\n      p = r.join(',') + '{' + p + '}';\n\n      if (0 !== w * E) {\n        2 !== w || L(p, 2) || (E = 0);\n\n        switch (E) {\n          case 111:\n            p = p.replace(ha, ':-moz-$1') + p;\n            break;\n\n          case 112:\n            p = p.replace(Q, '::-webkit-input-$1') + p.replace(Q, '::-moz-$1') + p.replace(Q, ':-ms-input-$1') + p;\n        }\n\n        E = 0;\n      }\n    }\n\n    return G + p + F;\n  }\n\n  function X(d, c, e) {\n    var h = c.trim().split(ia);\n    c = h;\n    var a = h.length,\n        m = d.length;\n\n    switch (m) {\n      case 0:\n      case 1:\n        var b = 0;\n\n        for (d = 0 === m ? '' : d[0] + ' '; b < a; ++b) {\n          c[b] = Z(d, c[b], e).trim();\n        }\n\n        break;\n\n      default:\n        var v = b = 0;\n\n        for (c = []; b < a; ++b) {\n          for (var n = 0; n < m; ++n) {\n            c[v++] = Z(d[n] + ' ', h[b], e).trim();\n          }\n        }\n\n    }\n\n    return c;\n  }\n\n  function Z(d, c, e) {\n    var h = c.charCodeAt(0);\n    33 > h && (h = (c = c.trim()).charCodeAt(0));\n\n    switch (h) {\n      case 38:\n        return c.replace(F, '$1' + d.trim());\n\n      case 58:\n        return d.trim() + c.replace(F, '$1' + d.trim());\n\n      default:\n        if (0 < 1 * e && 0 < c.indexOf('\\f')) return c.replace(F, (58 === d.charCodeAt(0) ? '' : '$1') + d.trim());\n    }\n\n    return d + c;\n  }\n\n  function P(d, c, e, h) {\n    var a = d + ';',\n        m = 2 * c + 3 * e + 4 * h;\n\n    if (944 === m) {\n      d = a.indexOf(':', 9) + 1;\n      var b = a.substring(d, a.length - 1).trim();\n      b = a.substring(0, d).trim() + b + ';';\n      return 1 === w || 2 === w && L(b, 1) ? '-webkit-' + b + b : b;\n    }\n\n    if (0 === w || 2 === w && !L(a, 1)) return a;\n\n    switch (m) {\n      case 1015:\n        return 97 === a.charCodeAt(10) ? '-webkit-' + a + a : a;\n\n      case 951:\n        return 116 === a.charCodeAt(3) ? '-webkit-' + a + a : a;\n\n      case 963:\n        return 110 === a.charCodeAt(5) ? '-webkit-' + a + a : a;\n\n      case 1009:\n        if (100 !== a.charCodeAt(4)) break;\n\n      case 969:\n      case 942:\n        return '-webkit-' + a + a;\n\n      case 978:\n        return '-webkit-' + a + '-moz-' + a + a;\n\n      case 1019:\n      case 983:\n        return '-webkit-' + a + '-moz-' + a + '-ms-' + a + a;\n\n      case 883:\n        if (45 === a.charCodeAt(8)) return '-webkit-' + a + a;\n        if (0 < a.indexOf('image-set(', 11)) return a.replace(ja, '$1-webkit-$2') + a;\n        break;\n\n      case 932:\n        if (45 === a.charCodeAt(4)) switch (a.charCodeAt(5)) {\n          case 103:\n            return '-webkit-box-' + a.replace('-grow', '') + '-webkit-' + a + '-ms-' + a.replace('grow', 'positive') + a;\n\n          case 115:\n            return '-webkit-' + a + '-ms-' + a.replace('shrink', 'negative') + a;\n\n          case 98:\n            return '-webkit-' + a + '-ms-' + a.replace('basis', 'preferred-size') + a;\n        }\n        return '-webkit-' + a + '-ms-' + a + a;\n\n      case 964:\n        return '-webkit-' + a + '-ms-flex-' + a + a;\n\n      case 1023:\n        if (99 !== a.charCodeAt(8)) break;\n        b = a.substring(a.indexOf(':', 15)).replace('flex-', '').replace('space-between', 'justify');\n        return '-webkit-box-pack' + b + '-webkit-' + a + '-ms-flex-pack' + b + a;\n\n      case 1005:\n        return ka.test(a) ? a.replace(aa, ':-webkit-') + a.replace(aa, ':-moz-') + a : a;\n\n      case 1e3:\n        b = a.substring(13).trim();\n        c = b.indexOf('-') + 1;\n\n        switch (b.charCodeAt(0) + b.charCodeAt(c)) {\n          case 226:\n            b = a.replace(G, 'tb');\n            break;\n\n          case 232:\n            b = a.replace(G, 'tb-rl');\n            break;\n\n          case 220:\n            b = a.replace(G, 'lr');\n            break;\n\n          default:\n            return a;\n        }\n\n        return '-webkit-' + a + '-ms-' + b + a;\n\n      case 1017:\n        if (-1 === a.indexOf('sticky', 9)) break;\n\n      case 975:\n        c = (a = d).length - 10;\n        b = (33 === a.charCodeAt(c) ? a.substring(0, c) : a).substring(d.indexOf(':', 7) + 1).trim();\n\n        switch (m = b.charCodeAt(0) + (b.charCodeAt(7) | 0)) {\n          case 203:\n            if (111 > b.charCodeAt(8)) break;\n\n          case 115:\n            a = a.replace(b, '-webkit-' + b) + ';' + a;\n            break;\n\n          case 207:\n          case 102:\n            a = a.replace(b, '-webkit-' + (102 < m ? 'inline-' : '') + 'box') + ';' + a.replace(b, '-webkit-' + b) + ';' + a.replace(b, '-ms-' + b + 'box') + ';' + a;\n        }\n\n        return a + ';';\n\n      case 938:\n        if (45 === a.charCodeAt(5)) switch (a.charCodeAt(6)) {\n          case 105:\n            return b = a.replace('-items', ''), '-webkit-' + a + '-webkit-box-' + b + '-ms-flex-' + b + a;\n\n          case 115:\n            return '-webkit-' + a + '-ms-flex-item-' + a.replace(ba, '') + a;\n\n          default:\n            return '-webkit-' + a + '-ms-flex-line-pack' + a.replace('align-content', '').replace(ba, '') + a;\n        }\n        break;\n\n      case 973:\n      case 989:\n        if (45 !== a.charCodeAt(3) || 122 === a.charCodeAt(4)) break;\n\n      case 931:\n      case 953:\n        if (!0 === la.test(d)) return 115 === (b = d.substring(d.indexOf(':') + 1)).charCodeAt(0) ? P(d.replace('stretch', 'fill-available'), c, e, h).replace(':fill-available', ':stretch') : a.replace(b, '-webkit-' + b) + a.replace(b, '-moz-' + b.replace('fill-', '')) + a;\n        break;\n\n      case 962:\n        if (a = '-webkit-' + a + (102 === a.charCodeAt(5) ? '-ms-' + a : '') + a, 211 === e + h && 105 === a.charCodeAt(13) && 0 < a.indexOf('transform', 10)) return a.substring(0, a.indexOf(';', 27) + 1).replace(ma, '$1-webkit-$2') + a;\n    }\n\n    return a;\n  }\n\n  function L(d, c) {\n    var e = d.indexOf(1 === c ? ':' : '{'),\n        h = d.substring(0, 3 !== c ? e : 10);\n    e = d.substring(e + 1, d.length - 1);\n    return R(2 !== c ? h : h.replace(na, '$1'), e, c);\n  }\n\n  function ea(d, c) {\n    var e = P(c, c.charCodeAt(0), c.charCodeAt(1), c.charCodeAt(2));\n    return e !== c + ';' ? e.replace(oa, ' or ($1)').substring(4) : '(' + c + ')';\n  }\n\n  function H(d, c, e, h, a, m, b, v, n, q) {\n    for (var g = 0, x = c, w; g < A; ++g) {\n      switch (w = S[g].call(B, d, x, e, h, a, m, b, v, n, q)) {\n        case void 0:\n        case !1:\n        case !0:\n        case null:\n          break;\n\n        default:\n          x = w;\n      }\n    }\n\n    if (x !== c) return x;\n  }\n\n  function T(d) {\n    switch (d) {\n      case void 0:\n      case null:\n        A = S.length = 0;\n        break;\n\n      default:\n        if ('function' === typeof d) S[A++] = d;else if ('object' === typeof d) for (var c = 0, e = d.length; c < e; ++c) {\n          T(d[c]);\n        } else Y = !!d | 0;\n    }\n\n    return T;\n  }\n\n  function U(d) {\n    d = d.prefix;\n    void 0 !== d && (R = null, d ? 'function' !== typeof d ? w = 1 : (w = 2, R = d) : w = 0);\n    return U;\n  }\n\n  function B(d, c) {\n    var e = d;\n    33 > e.charCodeAt(0) && (e = e.trim());\n    V = e;\n    e = [V];\n\n    if (0 < A) {\n      var h = H(-1, c, e, e, D, z, 0, 0, 0, 0);\n      void 0 !== h && 'string' === typeof h && (c = h);\n    }\n\n    var a = M(O, e, c, 0, 0);\n    0 < A && (h = H(-2, a, e, e, D, z, a.length, 0, 0, 0), void 0 !== h && (a = h));\n    V = '';\n    E = 0;\n    z = D = 1;\n    return a;\n  }\n\n  var ca = /^\\0+/g,\n      N = /[\\0\\r\\f]/g,\n      aa = /: */g,\n      ka = /zoo|gra/,\n      ma = /([,: ])(transform)/g,\n      ia = /,\\r+?/g,\n      F = /([\\t\\r\\n ])*\\f?&/g,\n      fa = /@(k\\w+)\\s*(\\S*)\\s*/,\n      Q = /::(place)/g,\n      ha = /:(read-only)/g,\n      G = /[svh]\\w+-[tblr]{2}/,\n      da = /\\(\\s*(.*)\\s*\\)/g,\n      oa = /([\\s\\S]*?);/g,\n      ba = /-self|flex-/g,\n      na = /[^]*?(:[rp][el]a[\\w-]+)[^]*/,\n      la = /stretch|:\\s*\\w+\\-(?:conte|avail)/,\n      ja = /([^-])(image-set\\()/,\n      z = 1,\n      D = 1,\n      E = 0,\n      w = 1,\n      O = [],\n      S = [],\n      A = 0,\n      R = null,\n      Y = 0,\n      V = '';\n  B.use = T;\n  B.set = U;\n  void 0 !== W && U(W);\n  return B;\n}\n\nexport default stylis_min;\n","import { StyleSheet } from '@emotion/sheet';\nimport Stylis from '@emotion/stylis';\nimport '@emotion/weak-memoize';\n\n// https://github.com/thysultan/stylis.js/tree/master/plugins/rule-sheet\n// inlined to avoid umd wrapper and peerDep warnings/installing stylis\n// since we use stylis after closure compiler\nvar delimiter = '/*|*/';\nvar needle = delimiter + '}';\n\nfunction toSheet(block) {\n  if (block) {\n    Sheet.current.insert(block + '}');\n  }\n}\n\nvar Sheet = {\n  current: null\n};\nvar ruleSheet = function ruleSheet(context, content, selectors, parents, line, column, length, ns, depth, at) {\n  switch (context) {\n    // property\n    case 1:\n      {\n        switch (content.charCodeAt(0)) {\n          case 64:\n            {\n              // @import\n              Sheet.current.insert(content + ';');\n              return '';\n            }\n          // charcode for l\n\n          case 108:\n            {\n              // charcode for b\n              // this ignores label\n              if (content.charCodeAt(2) === 98) {\n                return '';\n              }\n            }\n        }\n\n        break;\n      }\n    // selector\n\n    case 2:\n      {\n        if (ns === 0) return content + delimiter;\n        break;\n      }\n    // at-rule\n\n    case 3:\n      {\n        switch (ns) {\n          // @font-face, @page\n          case 102:\n          case 112:\n            {\n              Sheet.current.insert(selectors[0] + content);\n              return '';\n            }\n\n          default:\n            {\n              return content + (at === 0 ? delimiter : '');\n            }\n        }\n      }\n\n    case -2:\n      {\n        content.split(needle).forEach(toSheet);\n      }\n  }\n};\n\nvar createCache = function createCache(options) {\n  if (options === undefined) options = {};\n  var key = options.key || 'css';\n  var stylisOptions;\n\n  if (options.prefix !== undefined) {\n    stylisOptions = {\n      prefix: options.prefix\n    };\n  }\n\n  var stylis = new Stylis(stylisOptions);\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n    }\n  }\n\n  var inserted = {}; // $FlowFixMe\n\n  var container;\n\n  {\n    container = options.container || document.head;\n    var nodes = document.querySelectorAll(\"style[data-emotion-\" + key + \"]\");\n    Array.prototype.forEach.call(nodes, function (node) {\n      var attrib = node.getAttribute(\"data-emotion-\" + key); // $FlowFixMe\n\n      attrib.split(' ').forEach(function (id) {\n        inserted[id] = true;\n      });\n\n      if (node.parentNode !== container) {\n        container.appendChild(node);\n      }\n    });\n  }\n\n  var _insert;\n\n  {\n    stylis.use(options.stylisPlugins)(ruleSheet);\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      var name = serialized.name;\n      Sheet.current = sheet;\n\n      if (process.env.NODE_ENV !== 'production' && serialized.map !== undefined) {\n        var map = serialized.map;\n        Sheet.current = {\n          insert: function insert(rule) {\n            sheet.insert(rule + map);\n          }\n        };\n      }\n\n      stylis(selector, serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[name] = true;\n      }\n    };\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    // https://esbench.com/bench/5bf7371a4cd7e6009ef61d0a\n    var commentStart = /\\/\\*/g;\n    var commentEnd = /\\*\\//g;\n    stylis.use(function (context, content) {\n      switch (context) {\n        case -1:\n          {\n            while (commentStart.test(content)) {\n              commentEnd.lastIndex = commentStart.lastIndex;\n\n              if (commentEnd.test(content)) {\n                commentStart.lastIndex = commentEnd.lastIndex;\n                continue;\n              }\n\n              throw new Error('Your styles have an unterminated comment (\"/*\" without corresponding \"*/\").');\n            }\n\n            commentStart.lastIndex = 0;\n            break;\n          }\n      }\n    });\n    stylis.use(function (context, content, selectors) {\n      switch (context) {\n        case -1:\n          {\n            var flag = 'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason';\n            var unsafePseudoClasses = content.match(/(:first|:nth|:nth-last)-child/g);\n\n            if (unsafePseudoClasses && cache.compat !== true) {\n              unsafePseudoClasses.forEach(function (unsafePseudoClass) {\n                var ignoreRegExp = new RegExp(unsafePseudoClass + \".*\\\\/\\\\* \" + flag + \" \\\\*\\\\/\");\n                var ignore = ignoreRegExp.test(content);\n\n                if (unsafePseudoClass && !ignore) {\n                  console.error(\"The pseudo class \\\"\" + unsafePseudoClass + \"\\\" is potentially unsafe when doing server-side rendering. Try changing it to \\\"\" + unsafePseudoClass.split('-child')[0] + \"-of-type\\\".\");\n                }\n              });\n            }\n\n            break;\n          }\n      }\n    });\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  return cache;\n};\n\nexport default createCache;\n","var isBrowser = \"object\" !== 'undefined';\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className]);\n    } else {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false && cache.compat !== undefined) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      var maybeStyles = cache.insert(\".\" + className, current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles };\n","/* eslint-disable */\n// murmurhash2 via https://github.com/garycourt/murmurhash-js/blob/master/murmurhash2_gc.js\nfunction murmurhash2_32_gc(str) {\n  var l = str.length,\n      h = l ^ l,\n      i = 0,\n      k;\n\n  while (l >= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k = (k & 0xffff) * 0x5bd1e995 + (((k >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n    k ^= k >>> 24;\n    k = (k & 0xffff) * 0x5bd1e995 + (((k >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n    h = (h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995 & 0xffff) << 16) ^ k;\n    l -= 4;\n    ++i;\n  }\n\n  switch (l) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h = (h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n  }\n\n  h ^= h >>> 13;\n  h = (h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n  h ^= h >>> 15;\n  return (h >>> 0).toString(36);\n}\n\nexport default murmurhash2_32_gc;\n","var unitlessKeys = {\n  animationIterationCount: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport default unitlessKeys;\n","import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\nvar UNDEFINED_AS_OBJECT_KEY_ERROR = \"You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).\";\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  var contentValuePattern = /(attr|calc|counters?|url)\\(/;\n  var contentValues = ['normal', 'none', 'counter', 'open-quote', 'close-quote', 'no-open-quote', 'no-close-quote', 'initial', 'inherit', 'unset'];\n  var oldProcessStyleValue = processStyleValue;\n  var msPattern = /^-ms-/;\n  var hyphenPattern = /-(.)/g;\n  var hyphenatedCache = {};\n\n  processStyleValue = function processStyleValue(key, value) {\n    if (key === 'content') {\n      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n        console.error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n      }\n    }\n\n    var processed = oldProcessStyleValue(key, value);\n\n    if (processed !== '' && !isCustomProperty(key) && key.indexOf('-') !== -1 && hyphenatedCache[key] === undefined) {\n      hyphenatedCache[key] = true;\n      console.error(\"Using kebab-case for css properties in objects is not supported. Did you mean \" + key.replace(msPattern, 'ms-').replace(hyphenPattern, function (str, _char) {\n        return _char.toUpperCase();\n      }) + \"?\");\n    }\n\n    return processed;\n  };\n}\n\nvar shouldWarnAboutInterpolatingClassNameFromCss = true;\n\nfunction handleInterpolation(mergedProps, registered, interpolation, couldBeSelectorInterpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  if (interpolation.__emotion_styles !== undefined) {\n    if (process.env.NODE_ENV !== 'production' && interpolation.toString() === 'NO_COMPONENT_SELECTOR') {\n      throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n    }\n\n    return interpolation;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        if (interpolation.anim === 1) {\n          cursor = {\n            name: interpolation.name,\n            styles: interpolation.styles,\n            next: cursor\n          };\n          return interpolation.name;\n        }\n\n        if (interpolation.styles !== undefined) {\n          var next = interpolation.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = interpolation.styles + \";\";\n\n          if (process.env.NODE_ENV !== 'production' && interpolation.map !== undefined) {\n            styles += interpolation.map;\n          }\n\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result, couldBeSelectorInterpolation);\n        } else if (process.env.NODE_ENV !== 'production') {\n          console.error('Functions that are interpolated in css calls will be stringified.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n        }\n\n        break;\n      }\n\n    case 'string':\n      if (process.env.NODE_ENV !== 'production') {\n        var matched = [];\n        var replaced = interpolation.replace(animationRegex, function (match, p1, p2) {\n          var fakeVarName = \"animation\" + matched.length;\n          matched.push(\"const \" + fakeVarName + \" = keyframes`\" + p2.replace(/^@keyframes animation-\\w+/, '') + \"`\");\n          return \"${\" + fakeVarName + \"}\";\n        });\n\n        if (matched.length) {\n          console.error('`keyframes` output got interpolated into plain string, please wrap it with `css`.\\n\\n' + 'Instead of doing this:\\n\\n' + [].concat(matched, [\"`\" + replaced + \"`\"]).join('\\n') + '\\n\\nYou should wrap it with `css` like this:\\n\\n' + (\"css`\" + replaced + \"`\"));\n        }\n      }\n\n      break;\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  if (registered == null) {\n    return interpolation;\n  }\n\n  var cached = registered[interpolation];\n\n  if (process.env.NODE_ENV !== 'production' && couldBeSelectorInterpolation && shouldWarnAboutInterpolatingClassNameFromCss && cached !== undefined) {\n    console.error('Interpolating a className from css`` is not recommended and will cause problems with composition.\\n' + 'Interpolating a className from css`` will be completely unsupported in a future major version of Emotion');\n    shouldWarnAboutInterpolatingClassNameFromCss = false;\n  }\n\n  return cached !== undefined && !couldBeSelectorInterpolation ? cached : interpolation;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i], false);\n    }\n  } else {\n    for (var _key in obj) {\n      var value = obj[_key];\n\n      if (typeof value !== 'object') {\n        if (registered != null && registered[value] !== undefined) {\n          string += _key + \"{\" + registered[value] + \"}\";\n        } else if (isProcessableValue(value)) {\n          string += processStyleName(_key) + \":\" + processStyleValue(_key, value) + \";\";\n        }\n      } else {\n        if (_key === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n          throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(_key) + \":\" + processStyleValue(_key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value, false);\n\n          switch (_key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(_key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n                if (process.env.NODE_ENV !== 'production' && _key === 'undefined') {\n                  console.error(UNDEFINED_AS_OBJECT_KEY_ERROR);\n                }\n\n                string += _key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*;/g;\nvar sourceMapPattern;\n\nif (process.env.NODE_ENV !== 'production') {\n  sourceMapPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//;\n} // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\n\nvar cursor;\nvar serializeStyles = function serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings, false);\n  } else {\n    if (process.env.NODE_ENV !== 'production' && strings[0] === undefined) {\n      console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n    }\n\n    styles += strings[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i], styles.charCodeAt(styles.length - 1) === 46);\n\n    if (stringMode) {\n      if (process.env.NODE_ENV !== 'production' && strings[i] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles += strings[i];\n    }\n  }\n\n  var sourceMap;\n\n  if (process.env.NODE_ENV !== 'production') {\n    styles = styles.replace(sourceMapPattern, function (match) {\n      sourceMap = match;\n      return '';\n    });\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + // $FlowFixMe we know it's not null\n    match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe SerializedStyles type doesn't have toString property (and we don't want to add it)\n    return {\n      name: name,\n      styles: styles,\n      map: sourceMap,\n      next: cursor,\n      toString: function toString() {\n        return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n      }\n    };\n  }\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n};\n\nexport { serializeStyles };\n","import { serializeStyles } from '@emotion/serialize';\n\nfunction css() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return serializeStyles(args);\n}\n\nexport default css;\n","import _inheritsLoose from '@babel/runtime/helpers/inheritsLoose';\nimport { createContext, forwardRef, createElement, Component } from 'react';\nimport createCache from '@emotion/cache';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\nimport { serializeStyles } from '@emotion/serialize';\nimport { StyleSheet } from '@emotion/sheet';\nimport css from '@emotion/css';\nexport { default as css } from '@emotion/css';\n\nvar EmotionCacheContext = createContext( // we're doing this to avoid preconstruct's dead code elimination in this one case\n// because this module is primarily intended for the browser and node\n// but it's also required in react native and similar environments sometimes\n// and we could have a special build just for that\n// but this is much easier and the native packages\n// might use a different theme context in the future anyway\ntypeof HTMLElement !== 'undefined' ? createCache() : null);\nvar ThemeContext = createContext({});\nvar CacheProvider = EmotionCacheContext.Provider;\n\nvar withEmotionCache = function withEmotionCache(func) {\n  var render = function render(props, ref) {\n    return createElement(EmotionCacheContext.Consumer, null, function (cache) {\n      return func(props, cache, ref);\n    });\n  }; // $FlowFixMe\n\n\n  return forwardRef(render);\n};\n\n// thus we only need to replace what is a valid character for JS, but not for CSS\n\nvar sanitizeIdentifier = function sanitizeIdentifier(identifier) {\n  return identifier.replace(/\\$/g, '-');\n};\n\nvar typePropName = '__EMOTION_TYPE_PLEASE_DO_NOT_USE__';\nvar labelPropName = '__EMOTION_LABEL_PLEASE_DO_NOT_USE__';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar render = function render(cache, props, theme, ref) {\n  var cssProp = theme === null ? props.css : props.css(theme); // so that using `css` from `emotion` and passing the result to the css prop works\n  // not passing the registered cache to serializeStyles because it would\n  // make certain babel optimisations not possible\n\n  if (typeof cssProp === 'string' && cache.registered[cssProp] !== undefined) {\n    cssProp = cache.registered[cssProp];\n  }\n\n  var type = props[typePropName];\n  var registeredStyles = [cssProp];\n  var className = '';\n\n  if (typeof props.className === 'string') {\n    className = getRegisteredStyles(cache.registered, registeredStyles, props.className);\n  } else if (props.className != null) {\n    className = props.className + \" \";\n  }\n\n  var serialized = serializeStyles(registeredStyles);\n\n  if (process.env.NODE_ENV !== 'production' && serialized.name.indexOf('-') === -1) {\n    var labelFromStack = props[labelPropName];\n\n    if (labelFromStack) {\n      serialized = serializeStyles([serialized, 'label:' + labelFromStack + ';']);\n    }\n  }\n\n  var rules = insertStyles(cache, serialized, typeof type === 'string');\n  className += cache.key + \"-\" + serialized.name;\n  var newProps = {};\n\n  for (var key in props) {\n    if (hasOwnProperty.call(props, key) && key !== 'css' && key !== typePropName && (process.env.NODE_ENV === 'production' || key !== labelPropName)) {\n      newProps[key] = props[key];\n    }\n  }\n\n  newProps.ref = ref;\n  newProps.className = className;\n  var ele = createElement(type, newProps);\n\n  return ele;\n};\n\nvar Emotion =\n/* #__PURE__ */\nwithEmotionCache(function (props, cache, ref) {\n  // use Context.read for the theme when it's stable\n  if (typeof props.css === 'function') {\n    return createElement(ThemeContext.Consumer, null, function (theme) {\n      return render(cache, props, theme, ref);\n    });\n  }\n\n  return render(cache, props, null, ref);\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  Emotion.displayName = 'EmotionCssPropInternal';\n} // $FlowFixMe\n\n\nvar jsx = function jsx(type, props) {\n  var args = arguments;\n\n  if (props == null || !hasOwnProperty.call(props, 'css')) {\n    // $FlowFixMe\n    return createElement.apply(undefined, args);\n  }\n\n  if (process.env.NODE_ENV !== 'production' && typeof props.css === 'string' && // check if there is a css declaration\n  props.css.indexOf(':') !== -1) {\n    throw new Error(\"Strings are not allowed as css prop values, please wrap it in a css template literal from '@emotion/css' like this: css`\" + props.css + \"`\");\n  }\n\n  var argsLength = args.length;\n  var createElementArgArray = new Array(argsLength);\n  createElementArgArray[0] = Emotion;\n  var newProps = {};\n\n  for (var key in props) {\n    if (hasOwnProperty.call(props, key)) {\n      newProps[key] = props[key];\n    }\n  }\n\n  newProps[typePropName] = type;\n\n  if (process.env.NODE_ENV !== 'production') {\n    var error = new Error();\n\n    if (error.stack) {\n      // chrome\n      var match = error.stack.match(/at (?:Object\\.|)jsx.*\\n\\s+at ([A-Z][A-Za-z$]+) /);\n\n      if (!match) {\n        // safari and firefox\n        match = error.stack.match(/^.*\\n([A-Z][A-Za-z$]+)@/);\n      }\n\n      if (match) {\n        newProps[labelPropName] = sanitizeIdentifier(match[1]);\n      }\n    }\n  }\n\n  createElementArgArray[1] = newProps;\n\n  for (var i = 2; i < argsLength; i++) {\n    createElementArgArray[i] = args[i];\n  } // $FlowFixMe\n\n\n  return createElement.apply(null, createElementArgArray);\n};\n\nvar warnedAboutCssPropForGlobal = false;\nvar Global =\n/* #__PURE__ */\nwithEmotionCache(function (props, cache) {\n  if (process.env.NODE_ENV !== 'production' && !warnedAboutCssPropForGlobal && ( // check for className as well since the user is\n  // probably using the custom createElement which\n  // means it will be turned into a className prop\n  // $FlowFixMe I don't really want to add it to the type since it shouldn't be used\n  props.className || props.css)) {\n    console.error(\"It looks like you're using the css prop on Global, did you mean to use the styles prop instead?\");\n    warnedAboutCssPropForGlobal = true;\n  }\n\n  var styles = props.styles;\n\n  if (typeof styles === 'function') {\n    return createElement(ThemeContext.Consumer, null, function (theme) {\n      var serialized = serializeStyles([styles(theme)]);\n      return createElement(InnerGlobal, {\n        serialized: serialized,\n        cache: cache\n      });\n    });\n  }\n\n  var serialized = serializeStyles([styles]);\n  return createElement(InnerGlobal, {\n    serialized: serialized,\n    cache: cache\n  });\n});\n\n// maintain place over rerenders.\n// initial render from browser, insertBefore context.sheet.tags[0] or if a style hasn't been inserted there yet, appendChild\n// initial client-side render from SSR, use place of hydrating tag\nvar InnerGlobal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(InnerGlobal, _React$Component);\n\n  function InnerGlobal(props, context, updater) {\n    return _React$Component.call(this, props, context, updater) || this;\n  }\n\n  var _proto = InnerGlobal.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.sheet = new StyleSheet({\n      key: this.props.cache.key + \"-global\",\n      nonce: this.props.cache.sheet.nonce,\n      container: this.props.cache.sheet.container\n    }); // $FlowFixMe\n\n    var node = document.querySelector(\"style[data-emotion-\" + this.props.cache.key + \"=\\\"\" + this.props.serialized.name + \"\\\"]\");\n\n    if (node !== null) {\n      this.sheet.tags.push(node);\n    }\n\n    if (this.props.cache.sheet.tags.length) {\n      this.sheet.before = this.props.cache.sheet.tags[0];\n    }\n\n    this.insertStyles();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (prevProps.serialized.name !== this.props.serialized.name) {\n      this.insertStyles();\n    }\n  };\n\n  _proto.insertStyles = function insertStyles$1() {\n    if (this.props.serialized.next !== undefined) {\n      // insert keyframes\n      insertStyles(this.props.cache, this.props.serialized.next, true);\n    }\n\n    if (this.sheet.tags.length) {\n      // if this doesn't exist then it will be null so the style element will be appended\n      var element = this.sheet.tags[this.sheet.tags.length - 1].nextElementSibling;\n      this.sheet.before = element;\n      this.sheet.flush();\n    }\n\n    this.props.cache.insert(\"\", this.props.serialized, this.sheet, false);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.sheet.flush();\n  };\n\n  _proto.render = function render() {\n\n    return null;\n  };\n\n  return InnerGlobal;\n}(Component);\n\nvar keyframes = function keyframes() {\n  var insertable = css.apply(void 0, arguments);\n  var name = \"animation-\" + insertable.name; // $FlowFixMe\n\n  return {\n    name: name,\n    styles: \"@keyframes \" + name + \"{\" + insertable.styles + \"}\",\n    anim: 1,\n    toString: function toString() {\n      return \"_EMO_\" + this.name + \"_\" + this.styles + \"_EMO_\";\n    }\n  };\n};\n\nvar classnames = function classnames(args) {\n  var len = args.length;\n  var i = 0;\n  var cls = '';\n\n  for (; i < len; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar ClassNames = withEmotionCache(function (props, context) {\n  return createElement(ThemeContext.Consumer, null, function (theme) {\n    var hasRendered = false;\n\n    var css = function css() {\n      if (hasRendered && process.env.NODE_ENV !== 'production') {\n        throw new Error('css can only be used during render');\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var serialized = serializeStyles(args, context.registered);\n\n      {\n        insertStyles(context, serialized, false);\n      }\n\n      return context.key + \"-\" + serialized.name;\n    };\n\n    var cx = function cx() {\n      if (hasRendered && process.env.NODE_ENV !== 'production') {\n        throw new Error('cx can only be used during render');\n      }\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return merge(context.registered, css, classnames(args));\n    };\n\n    var content = {\n      css: css,\n      cx: cx,\n      theme: theme\n    };\n    var ele = props.children(content);\n    hasRendered = true;\n\n    return ele;\n  });\n});\n\nexport { CacheProvider, ClassNames, Global, ThemeContext, jsx, keyframes, withEmotionCache };\n","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { createElement } from 'react';\nimport isPropValid from '@emotion/is-prop-valid';\nimport { withEmotionCache, ThemeContext } from '@emotion/core';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\nimport { serializeStyles } from '@emotion/serialize';\n\nvar testOmitPropsOnStringTag = isPropValid;\n\nvar testOmitPropsOnComponent = function testOmitPropsOnComponent(key) {\n  return key !== 'theme' && key !== 'innerRef';\n};\n\nvar getDefaultShouldForwardProp = function getDefaultShouldForwardProp(tag) {\n  return typeof tag === 'string' && // 96 is one less than the char code\n  // for \"a\" so this is checking that\n  // it's a lowercase character\n  tag.charCodeAt(0) > 96 ? testOmitPropsOnStringTag : testOmitPropsOnComponent;\n};\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\n\nvar createStyled = function createStyled(tag, options) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (tag === undefined) {\n      throw new Error('You are trying to create a styled element with an undefined component.\\nYou may have forgotten to import it.');\n    }\n  }\n\n  var identifierName;\n  var shouldForwardProp;\n  var targetClassName;\n\n  if (options !== undefined) {\n    identifierName = options.label;\n    targetClassName = options.target;\n    shouldForwardProp = tag.__emotion_forwardProp && options.shouldForwardProp ? function (propName) {\n      return tag.__emotion_forwardProp(propName) && // $FlowFixMe\n      options.shouldForwardProp(propName);\n    } : options.shouldForwardProp;\n  }\n\n  var isReal = tag.__emotion_real === tag;\n  var baseTag = isReal && tag.__emotion_base || tag;\n\n  if (typeof shouldForwardProp !== 'function' && isReal) {\n    shouldForwardProp = tag.__emotion_forwardProp;\n  }\n\n  var defaultShouldForwardProp = shouldForwardProp || getDefaultShouldForwardProp(baseTag);\n  var shouldUseAs = !defaultShouldForwardProp('as');\n  return function () {\n    var args = arguments;\n    var styles = isReal && tag.__emotion_styles !== undefined ? tag.__emotion_styles.slice(0) : [];\n\n    if (identifierName !== undefined) {\n      styles.push(\"label:\" + identifierName + \";\");\n    }\n\n    if (args[0] == null || args[0].raw === undefined) {\n      styles.push.apply(styles, args);\n    } else {\n      if (process.env.NODE_ENV !== 'production' && args[0][0] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles.push(args[0][0]);\n      var len = args.length;\n      var i = 1;\n\n      for (; i < len; i++) {\n        if (process.env.NODE_ENV !== 'production' && args[0][i] === undefined) {\n          console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n        }\n\n        styles.push(args[i], args[0][i]);\n      }\n    } // $FlowFixMe: we need to cast StatelessFunctionalComponent to our PrivateStyledComponent class\n\n\n    var Styled = withEmotionCache(function (props, context, ref) {\n      return createElement(ThemeContext.Consumer, null, function (theme) {\n        var finalTag = shouldUseAs && props.as || baseTag;\n        var className = '';\n        var classInterpolations = [];\n        var mergedProps = props;\n\n        if (props.theme == null) {\n          mergedProps = {};\n\n          for (var key in props) {\n            mergedProps[key] = props[key];\n          }\n\n          mergedProps.theme = theme;\n        }\n\n        if (typeof props.className === 'string') {\n          className = getRegisteredStyles(context.registered, classInterpolations, props.className);\n        } else if (props.className != null) {\n          className = props.className + \" \";\n        }\n\n        var serialized = serializeStyles(styles.concat(classInterpolations), context.registered, mergedProps);\n        var rules = insertStyles(context, serialized, typeof finalTag === 'string');\n        className += context.key + \"-\" + serialized.name;\n\n        if (targetClassName !== undefined) {\n          className += \" \" + targetClassName;\n        }\n\n        var finalShouldForwardProp = shouldUseAs && shouldForwardProp === undefined ? getDefaultShouldForwardProp(finalTag) : defaultShouldForwardProp;\n        var newProps = {};\n\n        for (var _key in props) {\n          if (shouldUseAs && _key === 'as') continue;\n\n          if ( // $FlowFixMe\n          finalShouldForwardProp(_key)) {\n            newProps[_key] = props[_key];\n          }\n        }\n\n        newProps.className = className;\n        newProps.ref = ref || props.innerRef;\n\n        if (process.env.NODE_ENV !== 'production' && props.innerRef) {\n          console.error('`innerRef` is deprecated and will be removed in a future major version of Emotion, please use the `ref` prop instead' + (identifierName === undefined ? '' : \" in the usage of `\" + identifierName + \"`\"));\n        }\n\n        var ele = createElement(finalTag, newProps);\n\n        return ele;\n      });\n    });\n    Styled.displayName = identifierName !== undefined ? identifierName : \"Styled(\" + (typeof baseTag === 'string' ? baseTag : baseTag.displayName || baseTag.name || 'Component') + \")\";\n    Styled.defaultProps = tag.defaultProps;\n    Styled.__emotion_real = Styled;\n    Styled.__emotion_base = baseTag;\n    Styled.__emotion_styles = styles;\n    Styled.__emotion_forwardProp = shouldForwardProp;\n    Object.defineProperty(Styled, 'toString', {\n      value: function value() {\n        if (targetClassName === undefined && process.env.NODE_ENV !== 'production') {\n          return 'NO_COMPONENT_SELECTOR';\n        } // $FlowFixMe: coerce undefined to string\n\n\n        return \".\" + targetClassName;\n      }\n    });\n\n    Styled.withComponent = function (nextTag, nextOptions) {\n      return createStyled(nextTag, nextOptions !== undefined ? _objectSpread({}, options || {}, {}, nextOptions) : options).apply(void 0, styles);\n    };\n\n    return Styled;\n  };\n};\n\nexport default createStyled;\n","import styled from '@emotion/styled-base';\n\nvar tags = ['a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base', 'bdi', 'bdo', 'big', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'cite', 'code', 'col', 'colgroup', 'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li', 'link', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meta', 'meter', 'nav', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'script', 'section', 'select', 'small', 'source', 'span', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr', // SVG\n'circle', 'clipPath', 'defs', 'ellipse', 'foreignObject', 'g', 'image', 'line', 'linearGradient', 'mask', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'stop', 'svg', 'text', 'tspan'];\n\nvar newStyled = styled.bind();\ntags.forEach(function (tagName) {\n  newStyled[tagName] = newStyled(tagName);\n});\n\nexport default newStyled;\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport firebase from '@firebase/app';\nimport { FirebaseNamespace } from '@firebase/app-types';\nimport { _FirebaseNamespace } from '@firebase/app-types/private';\nimport { Database } from './src/api/Database';\nimport { DataSnapshot } from './src/api/DataSnapshot';\nimport { Query } from './src/api/Query';\nimport { Reference } from './src/api/Reference';\nimport { enableLogging } from './src/core/util/util';\nimport { RepoManager } from './src/core/RepoManager';\nimport * as INTERNAL from './src/api/internal';\nimport * as TEST_ACCESS from './src/api/test_access';\nimport { isNodeSdk } from '@firebase/util';\nimport * as types from '@firebase/database-types';\nimport { setSDKVersion } from './src/core/version';\nimport { Component, ComponentType } from '@firebase/component';\n\nimport { name, version } from './package.json';\n\nconst ServerValue = Database.ServerValue;\n\nexport function registerDatabase(instance: FirebaseNamespace) {\n  // set SDK_VERSION\n  setSDKVersion(instance.SDK_VERSION);\n\n  // Register the Database Service with the 'firebase' namespace.\n  const namespace = (instance as _FirebaseNamespace).INTERNAL.registerComponent(\n    new Component(\n      'database',\n      (container, url) => {\n        /* Dependencies */\n        // getImmediate for FirebaseApp will always succeed\n        const app = container.getProvider('app').getImmediate();\n        const authProvider = container.getProvider('auth-internal');\n\n        return RepoManager.getInstance().databaseFromApp(\n          app,\n          authProvider,\n          url\n        );\n      },\n      ComponentType.PUBLIC\n    )\n      .setServiceProps(\n        // firebase.database namespace properties\n        {\n          Reference,\n          Query,\n          Database,\n          DataSnapshot,\n          enableLogging,\n          INTERNAL,\n          ServerValue,\n          TEST_ACCESS\n        }\n      )\n      .setMultipleInstances(true)\n  );\n\n  instance.registerVersion(name, version);\n\n  if (isNodeSdk()) {\n    module.exports = namespace;\n  }\n}\n\nregisterDatabase(firebase);\n\n// Types to export for the admin SDK\nexport { Database, Query, Reference, enableLogging, ServerValue };\n\nexport { DataSnapshot } from './src/api/DataSnapshot';\nexport { OnDisconnect } from './src/api/onDisconnect';\n\ndeclare module '@firebase/app-types' {\n  interface FirebaseNamespace {\n    database?: {\n      (app?: FirebaseApp): types.FirebaseDatabase;\n      enableLogging: typeof types.enableLogging;\n      ServerValue: types.ServerValue;\n      Database: typeof types.FirebaseDatabase;\n    };\n  }\n  interface FirebaseApp {\n    database?(databaseURL?: string): types.FirebaseDatabase;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\n\n/**\n * Throws an error if the provided assertion is falsy\n */\nexport const assert = function(assertion: unknown, message: string): void {\n  if (!assertion) {\n    throw assertionError(message);\n  }\n};\n\n/**\n * Returns an Error object suitable for throwing.\n */\nexport const assertionError = function(message: string): Error {\n  return new Error(\n    'Firebase Database (' +\n      CONSTANTS.SDK_VERSION +\n      ') INTERNAL ASSERT FAILED: ' +\n      message\n  );\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst stringToByteArray = function(str: string): number[] {\n  // TODO(user): Use native implementations if/when available\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (\n      (c & 0xfc00) === 0xd800 &&\n      i + 1 < str.length &&\n      (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00\n    ) {\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Turns an array of numbers into the string given by the concatenation of the\n * characters to which the numbers correspond.\n * @param bytes Array of numbers representing characters.\n * @return Stringification of the array.\n */\nconst byteArrayToString = function(bytes: number[]): string {\n  // TODO(user): Use native implementations if/when available\n  const out: string[] = [];\n  let pos = 0,\n    c = 0;\n  while (pos < bytes.length) {\n    const c1 = bytes[pos++];\n    if (c1 < 128) {\n      out[c++] = String.fromCharCode(c1);\n    } else if (c1 > 191 && c1 < 224) {\n      const c2 = bytes[pos++];\n      out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n    } else if (c1 > 239 && c1 < 365) {\n      // Surrogate Pair\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      const c4 = bytes[pos++];\n      const u =\n        (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\n        0x10000;\n      out[c++] = String.fromCharCode(0xd800 + (u >> 10));\n      out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\n    } else {\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      out[c++] = String.fromCharCode(\n        ((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)\n      );\n    }\n  }\n  return out.join('');\n};\n\ninterface Base64 {\n  byteToCharMap_: { [key: number]: string } | null;\n  charToByteMap_: { [key: string]: number } | null;\n  byteToCharMapWebSafe_: { [key: number]: string } | null;\n  charToByteMapWebSafe_: { [key: string]: number } | null;\n  ENCODED_VALS_BASE: string;\n  readonly ENCODED_VALS: string;\n  readonly ENCODED_VALS_WEBSAFE: string;\n  HAS_NATIVE_SUPPORT: boolean;\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string;\n  encodeString(input: string, webSafe?: boolean): string;\n  decodeString(input: string, webSafe: boolean): string;\n  decodeStringToByteArray(input: string, webSafe: boolean): number[];\n  init_(): void;\n}\n\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\n// Static lookup maps, lazily populated by init_()\nexport const base64: Base64 = {\n  /**\n   * Maps bytes to characters.\n   */\n  byteToCharMap_: null,\n\n  /**\n   * Maps characters to bytes.\n   */\n  charToByteMap_: null,\n\n  /**\n   * Maps bytes to websafe characters.\n   * @private\n   */\n  byteToCharMapWebSafe_: null,\n\n  /**\n   * Maps websafe characters to bytes.\n   * @private\n   */\n  charToByteMapWebSafe_: null,\n\n  /**\n   * Our default alphabet, shared between\n   * ENCODED_VALS and ENCODED_VALS_WEBSAFE\n   */\n  ENCODED_VALS_BASE:\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\n\n  /**\n   * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\n   */\n  get ENCODED_VALS() {\n    return this.ENCODED_VALS_BASE + '+/=';\n  },\n\n  /**\n   * Our websafe alphabet.\n   */\n  get ENCODED_VALS_WEBSAFE() {\n    return this.ENCODED_VALS_BASE + '-_.';\n  },\n\n  /**\n   * Whether this browser supports the atob and btoa functions. This extension\n   * started at Mozilla but is now implemented by many browsers. We use the\n   * ASSUME_* variables to avoid pulling in the full useragent detection library\n   * but still allowing the standard per-browser compilations.\n   *\n   */\n  HAS_NATIVE_SUPPORT: typeof atob === 'function',\n\n  /**\n   * Base64-encode an array of bytes.\n   *\n   * @param input An array of bytes (numbers with\n   *     value in [0, 255]) to encode.\n   * @param webSafe Boolean indicating we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string {\n    if (!Array.isArray(input)) {\n      throw Error('encodeByteArray takes an array as a parameter');\n    }\n\n    this.init_();\n\n    const byteToCharMap = webSafe\n      ? this.byteToCharMapWebSafe_!\n      : this.byteToCharMap_!;\n\n    const output = [];\n\n    for (let i = 0; i < input.length; i += 3) {\n      const byte1 = input[i];\n      const haveByte2 = i + 1 < input.length;\n      const byte2 = haveByte2 ? input[i + 1] : 0;\n      const haveByte3 = i + 2 < input.length;\n      const byte3 = haveByte3 ? input[i + 2] : 0;\n\n      const outByte1 = byte1 >> 2;\n      const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n      let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\n      let outByte4 = byte3 & 0x3f;\n\n      if (!haveByte3) {\n        outByte4 = 64;\n\n        if (!haveByte2) {\n          outByte3 = 64;\n        }\n      }\n\n      output.push(\n        byteToCharMap[outByte1],\n        byteToCharMap[outByte2],\n        byteToCharMap[outByte3],\n        byteToCharMap[outByte4]\n      );\n    }\n\n    return output.join('');\n  },\n\n  /**\n   * Base64-encode a string.\n   *\n   * @param input A string to encode.\n   * @param webSafe If true, we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeString(input: string, webSafe?: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return btoa(input);\n    }\n    return this.encodeByteArray(stringToByteArray(input), webSafe);\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * @param input to decode.\n   * @param webSafe True if we should use the\n   *     alternative alphabet.\n   * @return string representing the decoded value.\n   */\n  decodeString(input: string, webSafe: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return atob(input);\n    }\n    return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * In base-64 decoding, groups of four characters are converted into three\n   * bytes.  If the encoder did not apply padding, the input length may not\n   * be a multiple of 4.\n   *\n   * In this case, the last group will have fewer than 4 characters, and\n   * padding will be inferred.  If the group has one or two characters, it decodes\n   * to one byte.  If the group has three characters, it decodes to two bytes.\n   *\n   * @param input Input to decode.\n   * @param webSafe True if we should use the web-safe alphabet.\n   * @return bytes representing the decoded value.\n   */\n  decodeStringToByteArray(input: string, webSafe: boolean): number[] {\n    this.init_();\n\n    const charToByteMap = webSafe\n      ? this.charToByteMapWebSafe_!\n      : this.charToByteMap_!;\n\n    const output: number[] = [];\n\n    for (let i = 0; i < input.length; ) {\n      const byte1 = charToByteMap[input.charAt(i++)];\n\n      const haveByte2 = i < input.length;\n      const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n      ++i;\n\n      const haveByte3 = i < input.length;\n      const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      const haveByte4 = i < input.length;\n      const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\n        throw Error();\n      }\n\n      const outByte1 = (byte1 << 2) | (byte2 >> 4);\n      output.push(outByte1);\n\n      if (byte3 !== 64) {\n        const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\n        output.push(outByte2);\n\n        if (byte4 !== 64) {\n          const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\n          output.push(outByte3);\n        }\n      }\n    }\n\n    return output;\n  },\n\n  /**\n   * Lazy static initialization function. Called before\n   * accessing any of the static map variables.\n   * @private\n   */\n  init_() {\n    if (!this.byteToCharMap_) {\n      this.byteToCharMap_ = {};\n      this.charToByteMap_ = {};\n      this.byteToCharMapWebSafe_ = {};\n      this.charToByteMapWebSafe_ = {};\n\n      // We want quick mappings back and forth, so we precompute two maps.\n      for (let i = 0; i < this.ENCODED_VALS.length; i++) {\n        this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\n        this.charToByteMap_[this.byteToCharMap_[i]] = i;\n        this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\n        this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\n\n        // Be forgiving when decoding and correctly decode both encodings.\n        if (i >= this.ENCODED_VALS_BASE.length) {\n          this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\n          this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\n        }\n      }\n    }\n  }\n};\n\n/**\n * URL-safe base64 encoding\n */\nexport const base64Encode = function(str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  return base64.encodeByteArray(utf8Bytes, true);\n};\n\n/**\n * URL-safe base64 decoding\n *\n * NOTE: DO NOT use the global atob() function - it does NOT support the\n * base64Url variant encoding.\n *\n * @param str To be decoded\n * @return Decoded result, if possible\n */\nexport const base64Decode = function(str: string): string | null {\n  try {\n    return base64.decodeString(str, true);\n  } catch (e) {\n    console.error('base64Decode failed: ', e);\n  }\n  return null;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Do a deep-copy of basic JavaScript Objects or Arrays.\n */\nexport function deepCopy<T>(value: T): T {\n  return deepExtend(undefined, value) as T;\n}\n\n/**\n * Copy properties from source to target (recursively allows extension\n * of Objects and Arrays).  Scalar values in the target are over-written.\n * If target is undefined, an object of the appropriate type will be created\n * (and returned).\n *\n * We recursively copy all child properties of plain Objects in the source- so\n * that namespace- like dictionaries are merged.\n *\n * Note that the target can be a function, in which case the properties in\n * the source Object are copied onto it as static properties of the Function.\n */\nexport function deepExtend(target: unknown, source: unknown): unknown {\n  if (!(source instanceof Object)) {\n    return source;\n  }\n\n  switch (source.constructor) {\n    case Date:\n      // Treat Dates like scalars; if the target date object had any child\n      // properties - they will be lost!\n      const dateValue = source as Date;\n      return new Date(dateValue.getTime());\n\n    case Object:\n      if (target === undefined) {\n        target = {};\n      }\n      break;\n    case Array:\n      // Always copy the array source and overwrite the target.\n      target = [];\n      break;\n\n    default:\n      // Not a plain Object - treat it as a scalar.\n      return source;\n  }\n\n  for (const prop in source) {\n    if (!source.hasOwnProperty(prop)) {\n      continue;\n    }\n    (target as { [key: string]: unknown })[prop] = deepExtend(\n      (target as { [key: string]: unknown })[prop],\n      (source as { [key: string]: unknown })[prop]\n    );\n  }\n\n  return target;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class Deferred<R> {\n  promise: Promise<R>;\n  reject: (value?: unknown) => void = () => {};\n  resolve: (value?: unknown) => void = () => {};\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve as (value?: unknown) => void;\n      this.reject = reject as (value?: unknown) => void;\n    });\n  }\n\n  /**\n   * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\n   * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\n   * and returns a node-style callback which will resolve or reject the Deferred's promise.\n   */\n  wrapCallback(\n    callback?: (error?: unknown, value?: unknown) => void\n  ): (error: unknown, value?: unknown) => void {\n    return (error, value?) => {\n      if (error) {\n        this.reject(error);\n      } else {\n        this.resolve(value);\n      }\n      if (typeof callback === 'function') {\n        // Attaching noop handler just in case developer wasn't expecting\n        // promises\n        this.promise.catch(() => {});\n\n        // Some of our callbacks don't expect a value and our own tests\n        // assert that the parameter length is 1\n        if (callback.length === 1) {\n          callback(error);\n        } else {\n          callback(error, value);\n        }\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\n\n/**\n * Returns navigator.userAgent string or '' if it's not defined.\n * @return user agent string\n */\nexport function getUA(): string {\n  if (\n    typeof navigator !== 'undefined' &&\n    typeof navigator['userAgent'] === 'string'\n  ) {\n    return navigator['userAgent'];\n  } else {\n    return '';\n  }\n}\n\n/**\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\n *\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\n * wait for a callback.\n */\nexport function isMobileCordova(): boolean {\n  return (\n    typeof window !== 'undefined' &&\n    // @ts-ignore Setting up an broadly applicable index signature for Window\n    // just to deal with this case would probably be a bad idea.\n    !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\n    /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())\n  );\n}\n\n/**\n * Detect Node.js.\n *\n * @return true if Node.js environment is detected.\n */\n// Node detection logic from: https://github.com/iliakan/detect-node/\nexport function isNode(): boolean {\n  try {\n    return (\n      Object.prototype.toString.call(global.process) === '[object process]'\n    );\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Detect Browser Environment\n */\nexport function isBrowser(): boolean {\n  return typeof self === 'object' && self.self === self;\n}\n\n/**\n * Detect React Native.\n *\n * @return true if ReactNative environment is detected.\n */\nexport function isReactNative(): boolean {\n  return (\n    typeof navigator === 'object' && navigator['product'] === 'ReactNative'\n  );\n}\n\n/**\n * Detect whether the current SDK build is the Node version.\n *\n * @return true if it's the Node SDK build.\n */\nexport function isNodeSdk(): boolean {\n  return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, ErrorMap } from '@firebase/util';\n\nexport const enum AppError {\n  NO_APP = 'no-app',\n  BAD_APP_NAME = 'bad-app-name',\n  DUPLICATE_APP = 'duplicate-app',\n  APP_DELETED = 'app-deleted',\n  INVALID_APP_ARGUMENT = 'invalid-app-argument'\n}\n\nconst ERRORS: ErrorMap<AppError> = {\n  [AppError.NO_APP]:\n    \"No Firebase App '{$appName}' has been created - \" +\n    'call Firebase App.initializeApp()',\n  [AppError.BAD_APP_NAME]: \"Illegal App name: '{$appName}\",\n  [AppError.DUPLICATE_APP]: \"Firebase App named '{$appName}' already exists\",\n  [AppError.APP_DELETED]: \"Firebase App named '{$appName}' already deleted\",\n  [AppError.INVALID_APP_ARGUMENT]:\n    'firebase.{$appName}() takes either no argument or a ' +\n    'Firebase App instance.'\n};\n\ntype ErrorParams = { [key in AppError]: { appName: string } };\n\nexport const ERROR_FACTORY = new ErrorFactory<AppError, ErrorParams>(\n  'app',\n  'Firebase',\n  ERRORS\n);\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Evaluates a JSON string into a javascript object.\n *\n * @param {string} str A string containing JSON.\n * @return {*} The javascript object representing the specified JSON.\n */\nexport function jsonEval(str: string): unknown {\n  return JSON.parse(str);\n}\n\n/**\n * Returns JSON representing a javascript object.\n * @param {*} data Javascript object to be stringified.\n * @return {string} The JSON contents of the object.\n */\nexport function stringify(data: unknown): string {\n  return JSON.stringify(data);\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Decode } from './crypt';\nimport { jsonEval } from './json';\n\ninterface Claims {\n  [key: string]: {};\n}\n\ninterface DecodedToken {\n  header: object;\n  claims: Claims;\n  data: object;\n  signature: string;\n}\n\n/**\n * Decodes a Firebase auth. token into constituent parts.\n *\n * Notes:\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const decode = function(token: string): DecodedToken {\n  let header = {},\n    claims: Claims = {},\n    data = {},\n    signature = '';\n\n  try {\n    const parts = token.split('.');\n    header = jsonEval(base64Decode(parts[0]) || '') as object;\n    claims = jsonEval(base64Decode(parts[1]) || '') as Claims;\n    signature = parts[2];\n    data = claims['d'] || {};\n    delete claims['d'];\n  } catch (e) {}\n\n  return {\n    header,\n    claims,\n    data,\n    signature\n  };\n};\n\ninterface DecodedToken {\n  header: object;\n  claims: Claims;\n  data: object;\n  signature: string;\n}\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isValidTimestamp = function(token: string): boolean {\n  const claims: Claims = decode(token).claims;\n  const now: number = Math.floor(new Date().getTime() / 1000);\n  let validSince: number = 0,\n    validUntil: number = 0;\n\n  if (typeof claims === 'object') {\n    if (claims.hasOwnProperty('nbf')) {\n      validSince = claims['nbf'] as number;\n    } else if (claims.hasOwnProperty('iat')) {\n      validSince = claims['iat'] as number;\n    }\n\n    if (claims.hasOwnProperty('exp')) {\n      validUntil = claims['exp'] as number;\n    } else {\n      // token will expire after 24h by default\n      validUntil = validSince + 86400;\n    }\n  }\n\n  return (\n    !!now &&\n    !!validSince &&\n    !!validUntil &&\n    now >= validSince &&\n    now <= validUntil\n  );\n};\n\n/**\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\n *\n * Notes:\n * - May return null if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const issuedAtTime = function(token: string): number | null {\n  const claims: Claims = decode(token).claims;\n  if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\n    return claims['iat'] as number;\n  }\n  return null;\n};\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isValidFormat = function(token: string): boolean {\n  const decoded = decode(token),\n    claims = decoded.claims;\n\n  return !!claims && typeof claims === 'object' && claims.hasOwnProperty('iat');\n};\n\n/**\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isAdmin = function(token: string): boolean {\n  const claims: Claims = decode(token).claims;\n  return typeof claims === 'object' && claims['admin'] === true;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview SHA-1 cryptographic hash.\n * Variable names follow the notation in FIPS PUB 180-3:\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\n *\n * Usage:\n *   var sha1 = new sha1();\n *   sha1.update(bytes);\n *   var hash = sha1.digest();\n *\n * Performance:\n *   Chrome 23:   ~400 Mbit/s\n *   Firefox 16:  ~250 Mbit/s\n *\n */\n\n/**\n * SHA-1 cryptographic hash constructor.\n *\n * The properties declared here are discussed in the above algorithm document.\n * @constructor\n * @final\n * @struct\n */\nexport class Sha1 {\n  /**\n   * Holds the previous values of accumulated variables a-e in the compress_\n   * function.\n   * @private\n   */\n  private chain_: number[] = [];\n\n  /**\n   * A buffer holding the partially computed hash result.\n   * @private\n   */\n  private buf_: number[] = [];\n\n  /**\n   * An array of 80 bytes, each a part of the message to be hashed.  Referred to\n   * as the message schedule in the docs.\n   * @private\n   */\n  private W_: number[] = [];\n\n  /**\n   * Contains data needed to pad messages less than 64 bytes.\n   * @private\n   */\n  private pad_: number[] = [];\n\n  /**\n   * @private {number}\n   */\n  private inbuf_: number = 0;\n\n  /**\n   * @private {number}\n   */\n  private total_: number = 0;\n\n  blockSize: number;\n\n  constructor() {\n    this.blockSize = 512 / 8;\n\n    this.pad_[0] = 128;\n    for (let i = 1; i < this.blockSize; ++i) {\n      this.pad_[i] = 0;\n    }\n\n    this.reset();\n  }\n\n  reset(): void {\n    this.chain_[0] = 0x67452301;\n    this.chain_[1] = 0xefcdab89;\n    this.chain_[2] = 0x98badcfe;\n    this.chain_[3] = 0x10325476;\n    this.chain_[4] = 0xc3d2e1f0;\n\n    this.inbuf_ = 0;\n    this.total_ = 0;\n  }\n\n  /**\n   * Internal compress helper function.\n   * @param buf Block to compress.\n   * @param offset Offset of the block in the buffer.\n   * @private\n   */\n  compress_(buf: number[] | Uint8Array | string, offset?: number): void {\n    if (!offset) {\n      offset = 0;\n    }\n\n    const W = this.W_;\n\n    // get 16 big endian words\n    if (typeof buf === 'string') {\n      for (let i = 0; i < 16; i++) {\n        // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\n        // have a bug that turns the post-increment ++ operator into pre-increment\n        // during JIT compilation.  We have code that depends heavily on SHA-1 for\n        // correctness and which is affected by this bug, so I've removed all uses\n        // of post-increment ++ in which the result value is used.  We can revert\n        // this change once the Safari bug\n        // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\n        // most clients have been updated.\n        W[i] =\n          (buf.charCodeAt(offset) << 24) |\n          (buf.charCodeAt(offset + 1) << 16) |\n          (buf.charCodeAt(offset + 2) << 8) |\n          buf.charCodeAt(offset + 3);\n        offset += 4;\n      }\n    } else {\n      for (let i = 0; i < 16; i++) {\n        W[i] =\n          (buf[offset] << 24) |\n          (buf[offset + 1] << 16) |\n          (buf[offset + 2] << 8) |\n          buf[offset + 3];\n        offset += 4;\n      }\n    }\n\n    // expand to 80 words\n    for (let i = 16; i < 80; i++) {\n      const t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n      W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\n    }\n\n    let a = this.chain_[0];\n    let b = this.chain_[1];\n    let c = this.chain_[2];\n    let d = this.chain_[3];\n    let e = this.chain_[4];\n    let f, k;\n\n    // TODO(user): Try to unroll this loop to speed up the computation.\n    for (let i = 0; i < 80; i++) {\n      if (i < 40) {\n        if (i < 20) {\n          f = d ^ (b & (c ^ d));\n          k = 0x5a827999;\n        } else {\n          f = b ^ c ^ d;\n          k = 0x6ed9eba1;\n        }\n      } else {\n        if (i < 60) {\n          f = (b & c) | (d & (b | c));\n          k = 0x8f1bbcdc;\n        } else {\n          f = b ^ c ^ d;\n          k = 0xca62c1d6;\n        }\n      }\n\n      const t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\n      e = d;\n      d = c;\n      c = ((b << 30) | (b >>> 2)) & 0xffffffff;\n      b = a;\n      a = t;\n    }\n\n    this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\n    this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\n    this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\n    this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\n    this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\n  }\n\n  update(bytes?: number[] | Uint8Array | string, length?: number): void {\n    // TODO(johnlenz): tighten the function signature and remove this check\n    if (bytes == null) {\n      return;\n    }\n\n    if (length === undefined) {\n      length = bytes.length;\n    }\n\n    const lengthMinusBlock = length - this.blockSize;\n    let n = 0;\n    // Using local instead of member variables gives ~5% speedup on Firefox 16.\n    const buf = this.buf_;\n    let inbuf = this.inbuf_;\n\n    // The outer while loop should execute at most twice.\n    while (n < length) {\n      // When we have no data in the block to top up, we can directly process the\n      // input buffer (assuming it contains sufficient data). This gives ~25%\n      // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\n      // the data is provided in large chunks (or in multiples of 64 bytes).\n      if (inbuf === 0) {\n        while (n <= lengthMinusBlock) {\n          this.compress_(bytes, n);\n          n += this.blockSize;\n        }\n      }\n\n      if (typeof bytes === 'string') {\n        while (n < length) {\n          buf[inbuf] = bytes.charCodeAt(n);\n          ++inbuf;\n          ++n;\n          if (inbuf === this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      } else {\n        while (n < length) {\n          buf[inbuf] = bytes[n];\n          ++inbuf;\n          ++n;\n          if (inbuf === this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      }\n    }\n\n    this.inbuf_ = inbuf;\n    this.total_ += length;\n  }\n\n  /** @override */\n  digest(): number[] {\n    const digest: number[] = [];\n    let totalBits = this.total_ * 8;\n\n    // Add pad 0x80 0x00*.\n    if (this.inbuf_ < 56) {\n      this.update(this.pad_, 56 - this.inbuf_);\n    } else {\n      this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\n    }\n\n    // Add # bits.\n    for (let i = this.blockSize - 1; i >= 56; i--) {\n      this.buf_[i] = totalBits & 255;\n      totalBits /= 256; // Don't use bit-shifting here!\n    }\n\n    this.compress_(this.buf_);\n\n    let n = 0;\n    for (let i = 0; i < 5; i++) {\n      for (let j = 24; j >= 0; j -= 8) {\n        digest[n] = (this.chain_[i] >> j) & 255;\n        ++n;\n      }\n    }\n    return digest;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport type NextFn<T> = (value: T) => void;\nexport type ErrorFn = (error: Error) => void;\nexport type CompleteFn = () => void;\n\nexport interface Observer<T> {\n  // Called once for each value in a stream of values.\n  next: NextFn<T>;\n\n  // A stream terminates by a single call to EITHER error() or complete().\n  error: ErrorFn;\n\n  // No events will be sent to next() once complete() is called.\n  complete: CompleteFn;\n}\n\nexport type PartialObserver<T> = Partial<Observer<T>>;\n\n// TODO: Support also Unsubscribe.unsubscribe?\nexport type Unsubscribe = () => void;\n\n/**\n * The Subscribe interface has two forms - passing the inline function\n * callbacks, or a object interface with callback properties.\n */\nexport interface Subscribe<T> {\n  (next?: NextFn<T>, error?: ErrorFn, complete?: CompleteFn): Unsubscribe;\n  (observer: PartialObserver<T>): Unsubscribe;\n}\n\nexport interface Observable<T> {\n  // Subscribe method\n  subscribe: Subscribe<T>;\n}\n\nexport type Executor<T> = (observer: Observer<T>) => void;\n\n/**\n * Helper to make a Subscribe function (just like Promise helps make a\n * Thenable).\n *\n * @param executor Function which can make calls to a single Observer\n *     as a proxy.\n * @param onNoObservers Callback when count of Observers goes to zero.\n */\nexport function createSubscribe<T>(\n  executor: Executor<T>,\n  onNoObservers?: Executor<T>\n): Subscribe<T> {\n  const proxy = new ObserverProxy<T>(executor, onNoObservers);\n  return proxy.subscribe.bind(proxy);\n}\n\n/**\n * Implement fan-out for any number of Observers attached via a subscribe\n * function.\n */\nclass ObserverProxy<T> implements Observer<T> {\n  private observers: Array<Observer<T>> | undefined = [];\n  private unsubscribes: Unsubscribe[] = [];\n  private onNoObservers: Executor<T> | undefined;\n  private observerCount = 0;\n  // Micro-task scheduling by calling task.then().\n  private task = Promise.resolve();\n  private finalized = false;\n  private finalError?: Error;\n\n  /**\n   * @param executor Function which can make calls to a single Observer\n   *     as a proxy.\n   * @param onNoObservers Callback when count of Observers goes to zero.\n   */\n  constructor(executor: Executor<T>, onNoObservers?: Executor<T>) {\n    this.onNoObservers = onNoObservers;\n    // Call the executor asynchronously so subscribers that are called\n    // synchronously after the creation of the subscribe function\n    // can still receive the very first value generated in the executor.\n    this.task\n      .then(() => {\n        executor(this);\n      })\n      .catch(e => {\n        this.error(e);\n      });\n  }\n\n  next(value: T): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.next(value);\n    });\n  }\n\n  error(error: Error): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.error(error);\n    });\n    this.close(error);\n  }\n\n  complete(): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.complete();\n    });\n    this.close();\n  }\n\n  /**\n   * Subscribe function that can be used to add an Observer to the fan-out list.\n   *\n   * - We require that no event is sent to a subscriber sychronously to their\n   *   call to subscribe().\n   */\n  subscribe(\n    nextOrObserver?: PartialObserver<T> | Function,\n    error?: ErrorFn,\n    complete?: CompleteFn\n  ): Unsubscribe {\n    let observer: Observer<T>;\n\n    if (\n      nextOrObserver === undefined &&\n      error === undefined &&\n      complete === undefined\n    ) {\n      throw new Error('Missing Observer.');\n    }\n\n    // Assemble an Observer object when passed as callback functions.\n    if (\n      implementsAnyMethods(nextOrObserver as { [key: string]: unknown }, [\n        'next',\n        'error',\n        'complete'\n      ])\n    ) {\n      observer = nextOrObserver as Observer<T>;\n    } else {\n      observer = {\n        next: nextOrObserver as NextFn<T>,\n        error,\n        complete\n      } as Observer<T>;\n    }\n\n    if (observer.next === undefined) {\n      observer.next = noop as NextFn<T>;\n    }\n    if (observer.error === undefined) {\n      observer.error = noop as ErrorFn;\n    }\n    if (observer.complete === undefined) {\n      observer.complete = noop as CompleteFn;\n    }\n\n    const unsub = this.unsubscribeOne.bind(this, this.observers!.length);\n\n    // Attempt to subscribe to a terminated Observable - we\n    // just respond to the Observer with the final error or complete\n    // event.\n    if (this.finalized) {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      this.task.then(() => {\n        try {\n          if (this.finalError) {\n            observer.error(this.finalError);\n          } else {\n            observer.complete();\n          }\n        } catch (e) {\n          // nothing\n        }\n        return;\n      });\n    }\n\n    this.observers!.push(observer as Observer<T>);\n\n    return unsub;\n  }\n\n  // Unsubscribe is synchronous - we guarantee that no events are sent to\n  // any unsubscribed Observer.\n  private unsubscribeOne(i: number): void {\n    if (this.observers === undefined || this.observers[i] === undefined) {\n      return;\n    }\n\n    delete this.observers[i];\n\n    this.observerCount -= 1;\n    if (this.observerCount === 0 && this.onNoObservers !== undefined) {\n      this.onNoObservers(this);\n    }\n  }\n\n  private forEachObserver(fn: (observer: Observer<T>) => void): void {\n    if (this.finalized) {\n      // Already closed by previous event....just eat the additional values.\n      return;\n    }\n\n    // Since sendOne calls asynchronously - there is no chance that\n    // this.observers will become undefined.\n    for (let i = 0; i < this.observers!.length; i++) {\n      this.sendOne(i, fn);\n    }\n  }\n\n  // Call the Observer via one of it's callback function. We are careful to\n  // confirm that the observe has not been unsubscribed since this asynchronous\n  // function had been queued.\n  private sendOne(i: number, fn: (observer: Observer<T>) => void): void {\n    // Execute the callback asynchronously\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.task.then(() => {\n      if (this.observers !== undefined && this.observers[i] !== undefined) {\n        try {\n          fn(this.observers[i]);\n        } catch (e) {\n          // Ignore exceptions raised in Observers or missing methods of an\n          // Observer.\n          // Log error to console. b/31404806\n          if (typeof console !== 'undefined' && console.error) {\n            console.error(e);\n          }\n        }\n      }\n    });\n  }\n\n  private close(err?: Error): void {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    if (err !== undefined) {\n      this.finalError = err;\n    }\n    // Proxy is no longer needed - garbage collect references\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.task.then(() => {\n      this.observers = undefined;\n      this.onNoObservers = undefined;\n    });\n  }\n}\n\n/** Turn synchronous function into one called asynchronously. */\nexport function async(fn: Function, onError?: ErrorFn): Function {\n  return (...args: unknown[]) => {\n    Promise.resolve(true)\n      .then(() => {\n        fn(...args);\n      })\n      .catch((error: Error) => {\n        if (onError) {\n          onError(error);\n        }\n      });\n  };\n}\n\n/**\n * Return true if the object passed in implements any of the named methods.\n */\nfunction implementsAnyMethods(\n  obj: { [key: string]: unknown },\n  methods: string[]\n): boolean {\n  if (typeof obj !== 'object' || obj === null) {\n    return false;\n  }\n\n  for (const method of methods) {\n    if (method in obj && typeof obj[method] === 'function') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction noop(): void {\n  // do nothing\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Check to make sure the appropriate number of arguments are provided for a public function.\n * Throws an error if it fails.\n *\n * @param fnName The function name\n * @param minCount The minimum number of arguments to allow for the function call\n * @param maxCount The maximum number of argument to allow for the function call\n * @param argCount The actual number of arguments provided.\n */\nexport const validateArgCount = function(\n  fnName: string,\n  minCount: number,\n  maxCount: number,\n  argCount: number\n): void {\n  let argError;\n  if (argCount < minCount) {\n    argError = 'at least ' + minCount;\n  } else if (argCount > maxCount) {\n    argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\n  }\n  if (argError) {\n    const error =\n      fnName +\n      ' failed: Was called with ' +\n      argCount +\n      (argCount === 1 ? ' argument.' : ' arguments.') +\n      ' Expects ' +\n      argError +\n      '.';\n    throw new Error(error);\n  }\n};\n\n/**\n * Generates a string to prefix an error message about failed argument validation\n *\n * @param fnName The function name\n * @param argumentNumber The index of the argument\n * @param optional Whether or not the argument is optional\n * @return The prefix to add to the error thrown for validation.\n */\nexport function errorPrefix(\n  fnName: string,\n  argumentNumber: number,\n  optional: boolean\n): string {\n  let argName = '';\n  switch (argumentNumber) {\n    case 1:\n      argName = optional ? 'first' : 'First';\n      break;\n    case 2:\n      argName = optional ? 'second' : 'Second';\n      break;\n    case 3:\n      argName = optional ? 'third' : 'Third';\n      break;\n    case 4:\n      argName = optional ? 'fourth' : 'Fourth';\n      break;\n    default:\n      throw new Error(\n        'errorPrefix called with argumentNumber > 4.  Need to update it?'\n      );\n  }\n\n  let error = fnName + ' failed: ';\n\n  error += argName + ' argument ';\n  return error;\n}\n\n/**\n * @param fnName\n * @param argumentNumber\n * @param namespace\n * @param optional\n */\nexport function validateNamespace(\n  fnName: string,\n  argumentNumber: number,\n  namespace: string,\n  optional: boolean\n): void {\n  if (optional && !namespace) {\n    return;\n  }\n  if (typeof namespace !== 'string') {\n    //TODO: I should do more validation here. We only allow certain chars in namespaces.\n    throw new Error(\n      errorPrefix(fnName, argumentNumber, optional) +\n        'must be a valid firebase namespace.'\n    );\n  }\n}\n\nexport function validateCallback(\n  fnName: string,\n  argumentNumber: number,\n  callback: Function,\n  optional: boolean\n): void {\n  if (optional && !callback) {\n    return;\n  }\n  if (typeof callback !== 'function') {\n    throw new Error(\n      errorPrefix(fnName, argumentNumber, optional) +\n        'must be a valid function.'\n    );\n  }\n}\n\nexport function validateContextObject(\n  fnName: string,\n  argumentNumber: number,\n  context: unknown,\n  optional: boolean\n): void {\n  if (optional && !context) {\n    return;\n  }\n  if (typeof context !== 'object' || context === null) {\n    throw new Error(\n      errorPrefix(fnName, argumentNumber, optional) +\n        'must be a valid context object.'\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function contains<T extends object>(obj: T, key: keyof T): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexport function safeGet<T extends object, K extends keyof T>(\n  obj: T,\n  key: K\n): T[K] | undefined {\n  if (Object.prototype.hasOwnProperty.call(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\nexport function isEmpty(obj: object): obj is {} {\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function map<K extends string, V, U>(\n  obj: { [key in K]: V },\n  fn: (value: V, key: K, obj: { [key in K]: V }) => U,\n  contextObj?: unknown\n): { [key in K]: U } {\n  const res: Partial<{ [key in K]: U }> = {};\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      res[key] = fn.call(contextObj, obj[key], key, obj);\n    }\n  }\n  return res as { [key in K]: U };\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a\n * params object (e.g. {arg: 'val', arg2: 'val2'})\n * Note: You must prepend it with ? when adding it to a URL.\n */\nexport function querystring(querystringParams: {\n  [key: string]: string;\n}): string {\n  const params = [];\n  for (const [key, value] of Object.entries(querystringParams)) {\n    if (Array.isArray(value)) {\n      value.forEach(arrayVal => {\n        params.push(\n          encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal)\n        );\n      });\n    } else {\n      params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    }\n  }\n  return params.length ? '&' + params.join('&') : '';\n}\n\n/**\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object\n * (e.g. {arg: 'val', arg2: 'val2'})\n */\nexport function querystringDecode(querystring: string): object {\n  const obj: { [key: string]: unknown } = {};\n  const tokens = querystring.replace(/^\\?/, '').split('&');\n\n  tokens.forEach(token => {\n    if (token) {\n      const key = token.split('=');\n      obj[key[0]] = key[1];\n    }\n  });\n  return obj;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from './assert';\n\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\n// so it's been modified.\n\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\n// pair).\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\n\n/**\n * @param {string} str\n * @return {Array}\n */\nexport const stringToByteArray = function(str: string): number[] {\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n\n    // Is this the lead surrogate in a surrogate pair?\n    if (c >= 0xd800 && c <= 0xdbff) {\n      const high = c - 0xd800; // the high 10 bits.\n      i++;\n      assert(i < str.length, 'Surrogate pair missing trail surrogate.');\n      const low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\n      c = 0x10000 + (high << 10) + low;\n    }\n\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (c < 65536) {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Calculate length without actually converting; useful for doing cheaper validation.\n * @param {string} str\n * @return {number}\n */\nexport const stringLength = function(str: string): number {\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    const c = str.charCodeAt(i);\n    if (c < 128) {\n      p++;\n    } else if (c < 2048) {\n      p += 2;\n    } else if (c >= 0xd800 && c <= 0xdbff) {\n      // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\n      p += 4;\n      i++; // skip trail surrogate.\n    } else {\n      p += 3;\n    }\n  }\n  return p;\n};\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A container for all of the Logger instances\n */\nexport const instances: Logger[] = [];\n\n/**\n * The JS SDK supports 5 log levels and also allows a user the ability to\n * silence the logs altogether.\n *\n * The order is a follows:\n * DEBUG < VERBOSE < INFO < WARN < ERROR\n *\n * All of the log types above the current log level will be captured (i.e. if\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\n * `VERBOSE` logs will not)\n */\nexport enum LogLevel {\n  DEBUG,\n  VERBOSE,\n  INFO,\n  WARN,\n  ERROR,\n  SILENT\n}\n\n/**\n * The default log level\n */\nconst defaultLogLevel: LogLevel = LogLevel.INFO;\n\n/**\n * We allow users the ability to pass their own log handler. We will pass the\n * type of log, the current log level, and any other arguments passed (i.e. the\n * messages that the user wants to log) to this function.\n */\nexport type LogHandler = (\n  loggerInstance: Logger,\n  logType: LogLevel,\n  ...args: unknown[]\n) => void;\n\n/**\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\n * messages on to their corresponding console counterparts (if the log method\n * is supported by the current log level)\n */\nconst defaultLogHandler: LogHandler = (instance, logType, ...args): void => {\n  if (logType < instance.logLevel) {\n    return;\n  }\n  const now = new Date().toISOString();\n  switch (logType) {\n    /**\n     * By default, `console.debug` is not displayed in the developer console (in\n     * chrome). To avoid forcing users to have to opt-in to these logs twice\n     * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\n     * logs to the `console.log` function.\n     */\n    case LogLevel.DEBUG:\n      console.log(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    case LogLevel.VERBOSE:\n      console.log(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    case LogLevel.INFO:\n      console.info(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    case LogLevel.WARN:\n      console.warn(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    case LogLevel.ERROR:\n      console.error(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    default:\n      throw new Error(\n        `Attempted to log a message with an invalid logType (value: ${logType})`\n      );\n  }\n};\n\nexport class Logger {\n  /**\n   * Gives you an instance of a Logger to capture messages according to\n   * Firebase's logging scheme.\n   *\n   * @param name The name that the logs will be associated with\n   */\n  constructor(public name: string) {\n    /**\n     * Capture the current instance for later use\n     */\n    instances.push(this);\n  }\n\n  /**\n   * The log level of the given Logger instance.\n   */\n  private _logLevel = defaultLogLevel;\n  get logLevel(): LogLevel {\n    return this._logLevel;\n  }\n  set logLevel(val: LogLevel) {\n    if (!(val in LogLevel)) {\n      throw new TypeError('Invalid value assigned to `logLevel`');\n    }\n    this._logLevel = val;\n  }\n\n  /**\n   * The log handler for the Logger instance.\n   */\n  private _logHandler: LogHandler = defaultLogHandler;\n  get logHandler(): LogHandler {\n    return this._logHandler;\n  }\n  set logHandler(val: LogHandler) {\n    if (typeof val !== 'function') {\n      throw new TypeError('Value assigned to `logHandler` must be a function');\n    }\n    this._logHandler = val;\n  }\n\n  /**\n   * The functions below are all based on the `console` interface\n   */\n\n  debug(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.DEBUG, ...args);\n  }\n  log(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.VERBOSE, ...args);\n  }\n  info(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.INFO, ...args);\n  }\n  warn(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.WARN, ...args);\n  }\n  error(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.ERROR, ...args);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppConfig\n} from '@firebase/app-types';\nimport {\n  _FirebaseApp,\n  _FirebaseNamespace,\n  FirebaseService\n} from '@firebase/app-types/private';\nimport { deepCopy } from '@firebase/util';\nimport {\n  ComponentContainer,\n  Component,\n  ComponentType,\n  Name\n} from '@firebase/component';\nimport { AppError, ERROR_FACTORY } from './errors';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport { logger } from './logger';\n\n/**\n * Global context object for a collection of services using\n * a shared authentication state.\n */\nexport class FirebaseAppImpl implements FirebaseApp {\n  private readonly options_: FirebaseOptions;\n  private readonly name_: string;\n  private isDeleted_ = false;\n  private automaticDataCollectionEnabled_: boolean;\n  private container: ComponentContainer;\n\n  constructor(\n    options: FirebaseOptions,\n    config: FirebaseAppConfig,\n    private readonly firebase_: _FirebaseNamespace\n  ) {\n    this.name_ = config.name!;\n    this.automaticDataCollectionEnabled_ =\n      config.automaticDataCollectionEnabled || false;\n    this.options_ = deepCopy<FirebaseOptions>(options);\n    this.container = new ComponentContainer(config.name!);\n\n    // add itself to container\n    this._addComponent(new Component('app', () => this, ComponentType.PUBLIC));\n    // populate ComponentContainer with existing components\n    for (const component of this.firebase_.INTERNAL.components.values()) {\n      this._addComponent(component);\n    }\n  }\n\n  get automaticDataCollectionEnabled(): boolean {\n    this.checkDestroyed_();\n    return this.automaticDataCollectionEnabled_;\n  }\n\n  set automaticDataCollectionEnabled(val) {\n    this.checkDestroyed_();\n    this.automaticDataCollectionEnabled_ = val;\n  }\n\n  get name(): string {\n    this.checkDestroyed_();\n    return this.name_;\n  }\n\n  get options(): FirebaseOptions {\n    this.checkDestroyed_();\n    return this.options_;\n  }\n\n  delete(): Promise<void> {\n    return new Promise(resolve => {\n      this.checkDestroyed_();\n      resolve();\n    })\n      .then(() => {\n        this.firebase_.INTERNAL.removeApp(this.name_);\n\n        return Promise.all(\n          this.container.getProviders().map(provider => provider.delete())\n        );\n      })\n      .then((): void => {\n        this.isDeleted_ = true;\n      });\n  }\n\n  /**\n   * Return a service instance associated with this app (creating it\n   * on demand), identified by the passed instanceIdentifier.\n   *\n   * NOTE: Currently storage and functions are the only ones that are leveraging this\n   * functionality. They invoke it by calling:\n   *\n   * ```javascript\n   * firebase.app().storage('STORAGE BUCKET ID')\n   * ```\n   *\n   * The service name is passed to this already\n   * @internal\n   */\n  _getService(\n    name: string,\n    instanceIdentifier: string = DEFAULT_ENTRY_NAME\n  ): FirebaseService {\n    this.checkDestroyed_();\n\n    // getImmediate will always succeed because _getService is only called for registered components.\n    return (this.container.getProvider(name as Name).getImmediate({\n      identifier: instanceIdentifier\n    }) as unknown) as FirebaseService;\n  }\n  /**\n   * Remove a service instance from the cache, so we will create a new instance for this service\n   * when people try to get this service again.\n   *\n   * NOTE: currently only firestore is using this functionality to support firestore shutdown.\n   *\n   * @param name The service name\n   * @param instanceIdentifier instance identifier in case multiple instances are allowed\n   * @internal\n   */\n  _removeServiceInstance(\n    name: string,\n    instanceIdentifier: string = DEFAULT_ENTRY_NAME\n  ): void {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.container.getProvider(name as any).clearInstance(instanceIdentifier);\n  }\n\n  /**\n   * @param component the component being added to this app's container\n   */\n  _addComponent(component: Component): void {\n    try {\n      this.container.addComponent(component);\n    } catch (e) {\n      logger.debug(\n        `Component ${component.name} failed to register with FirebaseApp ${this.name}`,\n        e\n      );\n    }\n  }\n\n  _addOrOverwriteComponent(component: Component): void {\n    this.container.addOrOverwriteComponent(component);\n  }\n\n  /**\n   * This function will throw an Error if the App has already been deleted -\n   * use before performing API actions on the App.\n   */\n  private checkDestroyed_(): void {\n    if (this.isDeleted_) {\n      throw ERROR_FACTORY.create(AppError.APP_DELETED, { appName: this.name_ });\n    }\n  }\n}\n\n// Prevent dead-code elimination of these methods w/o invalid property\n// copying.\n(FirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options) ||\n  FirebaseAppImpl.prototype.delete ||\n  console.log('dc');\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseNamespace } from '@firebase/app-types';\nimport { _FirebaseApp, _FirebaseNamespace } from '@firebase/app-types/private';\nimport { createSubscribe, deepExtend, ErrorFactory } from '@firebase/util';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { createFirebaseNamespaceCore } from './firebaseNamespaceCore';\n\n/**\n * Return a firebase namespace object.\n *\n * In production, this will be called exactly once and the result\n * assigned to the 'firebase' global.  It may be called multiple times\n * in unit tests.\n */\nexport function createFirebaseNamespace(): FirebaseNamespace {\n  const namespace = createFirebaseNamespaceCore(FirebaseAppImpl);\n  (namespace as _FirebaseNamespace).INTERNAL = {\n    ...(namespace as _FirebaseNamespace).INTERNAL,\n    createFirebaseNamespace,\n    extendNamespace,\n    createSubscribe,\n    ErrorFactory,\n    deepExtend\n  };\n\n  /**\n   * Patch the top-level firebase namespace with additional properties.\n   *\n   * firebase.INTERNAL.extendNamespace()\n   */\n  function extendNamespace(props: { [prop: string]: unknown }): void {\n    deepExtend(namespace, props);\n  }\n\n  return namespace;\n}\n\nexport const firebase = createFirebaseNamespace();\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseNamespace,\n  FirebaseAppConfig\n} from '@firebase/app-types';\nimport {\n  _FirebaseApp,\n  _FirebaseNamespace,\n  FirebaseService,\n  FirebaseServiceNamespace\n} from '@firebase/app-types/private';\nimport { deepExtend, contains } from '@firebase/util';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { ERROR_FACTORY, AppError } from './errors';\nimport { FirebaseAppLiteImpl } from './lite/firebaseAppLite';\nimport { DEFAULT_ENTRY_NAME, PLATFORM_LOG_STRING } from './constants';\nimport { version } from '../../firebase/package.json';\nimport { logger } from './logger';\nimport { Component, ComponentType, Name } from '@firebase/component';\n\n/**\n * Because auth can't share code with other components, we attach the utility functions\n * in an internal namespace to share code.\n * This function return a firebase namespace object without\n * any utility functions, so it can be shared between the regular firebaseNamespace and\n * the lite version.\n */\nexport function createFirebaseNamespaceCore(\n  firebaseAppImpl: typeof FirebaseAppImpl | typeof FirebaseAppLiteImpl\n): FirebaseNamespace {\n  const apps: { [name: string]: FirebaseApp } = {};\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const components = new Map<string, Component<any>>();\n\n  // A namespace is a plain JavaScript Object.\n  const namespace: FirebaseNamespace = {\n    // Hack to prevent Babel from modifying the object returned\n    // as the firebase namespace.\n    // @ts-ignore\n    __esModule: true,\n    initializeApp,\n    // @ts-ignore\n    app,\n    registerVersion,\n    // @ts-ignore\n    apps: null,\n    SDK_VERSION: version,\n    INTERNAL: {\n      registerComponent,\n      removeApp,\n      components,\n      useAsService\n    }\n  };\n\n  // Inject a circular default export to allow Babel users who were previously\n  // using:\n  //\n  //   import firebase from 'firebase';\n  //   which becomes: var firebase = require('firebase').default;\n  //\n  // instead of\n  //\n  //   import * as firebase from 'firebase';\n  //   which becomes: var firebase = require('firebase');\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (namespace as any)['default'] = namespace;\n\n  // firebase.apps is a read-only getter.\n  Object.defineProperty(namespace, 'apps', {\n    get: getApps\n  });\n\n  /**\n   * Called by App.delete() - but before any services associated with the App\n   * are deleted.\n   */\n  function removeApp(name: string): void {\n    delete apps[name];\n  }\n\n  /**\n   * Get the App object for a given name (or DEFAULT).\n   */\n  function app(name?: string): FirebaseApp {\n    name = name || DEFAULT_ENTRY_NAME;\n    if (!contains(apps, name)) {\n      throw ERROR_FACTORY.create(AppError.NO_APP, { appName: name });\n    }\n    return apps[name];\n  }\n\n  // @ts-ignore\n  app['App'] = firebaseAppImpl;\n  /**\n   * Create a new App instance (name must be unique).\n   */\n  function initializeApp(\n    options: FirebaseOptions,\n    config?: FirebaseAppConfig\n  ): FirebaseApp;\n  function initializeApp(options: FirebaseOptions, name?: string): FirebaseApp;\n  function initializeApp(\n    options: FirebaseOptions,\n    rawConfig = {}\n  ): FirebaseApp {\n    if (typeof rawConfig !== 'object' || rawConfig === null) {\n      const name = rawConfig;\n      rawConfig = { name };\n    }\n\n    const config = rawConfig as FirebaseAppConfig;\n\n    if (config.name === undefined) {\n      config.name = DEFAULT_ENTRY_NAME;\n    }\n\n    const { name } = config;\n\n    if (typeof name !== 'string' || !name) {\n      throw ERROR_FACTORY.create(AppError.BAD_APP_NAME, {\n        appName: String(name)\n      });\n    }\n\n    if (contains(apps, name)) {\n      throw ERROR_FACTORY.create(AppError.DUPLICATE_APP, { appName: name });\n    }\n\n    const app = new firebaseAppImpl(\n      options,\n      config,\n      namespace as _FirebaseNamespace\n    );\n\n    apps[name] = app;\n\n    return app;\n  }\n\n  /*\n   * Return an array of all the non-deleted FirebaseApps.\n   */\n  function getApps(): FirebaseApp[] {\n    // Make a copy so caller cannot mutate the apps list.\n    return Object.keys(apps).map(name => apps[name]);\n  }\n\n  function registerComponent(\n    component: Component\n  ): FirebaseServiceNamespace<FirebaseService> | null {\n    const componentName = component.name;\n    if (components.has(componentName)) {\n      logger.debug(\n        `There were multiple attempts to register component ${componentName}.`\n      );\n\n      return component.type === ComponentType.PUBLIC\n        ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (namespace as any)[componentName]\n        : null;\n    }\n\n    components.set(componentName, component);\n\n    // create service namespace for public components\n    if (component.type === ComponentType.PUBLIC) {\n      // The Service namespace is an accessor function ...\n      const serviceNamespace = (\n        appArg: FirebaseApp = app()\n      ): FirebaseService => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (typeof (appArg as any)[componentName] !== 'function') {\n          // Invalid argument.\n          // This happens in the following case: firebase.storage('gs:/')\n          throw ERROR_FACTORY.create(AppError.INVALID_APP_ARGUMENT, {\n            appName: componentName\n          });\n        }\n\n        // Forward service instance lookup to the FirebaseApp.\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return (appArg as any)[componentName]();\n      };\n\n      // ... and a container for service-level properties.\n      if (component.serviceProps !== undefined) {\n        deepExtend(serviceNamespace, component.serviceProps);\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (namespace as any)[componentName] = serviceNamespace;\n\n      // Patch the FirebaseAppImpl prototype\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (firebaseAppImpl.prototype as any)[componentName] =\n        // TODO: The eslint disable can be removed and the 'ignoreRestArgs'\n        // option added to the no-explicit-any rule when ESlint releases it.\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        function(...args: any) {\n          const serviceFxn = this._getService.bind(this, componentName);\n          return serviceFxn.apply(\n            this,\n            component.multipleInstances ? args : []\n          );\n        };\n    }\n\n    // add the component to existing app instances\n    for (const appName of Object.keys(apps)) {\n      (apps[appName] as _FirebaseApp)._addComponent(component);\n    }\n\n    return component.type === ComponentType.PUBLIC\n      ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (namespace as any)[componentName]\n      : null;\n  }\n\n  function registerVersion(\n    libraryKeyOrName: string,\n    version: string,\n    variant?: string\n  ): void {\n    // TODO: We can use this check to whitelist strings when/if we set up\n    // a good whitelist system.\n    let library = PLATFORM_LOG_STRING[libraryKeyOrName] ?? libraryKeyOrName;\n    if (variant) {\n      library += `-${variant}`;\n    }\n    const libraryMismatch = library.match(/\\s|\\//);\n    const versionMismatch = version.match(/\\s|\\//);\n    if (libraryMismatch || versionMismatch) {\n      const warning = [\n        `Unable to register library \"${library}\" with version \"${version}\":`\n      ];\n      if (libraryMismatch) {\n        warning.push(\n          `library name \"${library}\" contains illegal characters (whitespace or \"/\")`\n        );\n      }\n      if (libraryMismatch && versionMismatch) {\n        warning.push('and');\n      }\n      if (versionMismatch) {\n        warning.push(\n          `version name \"${version}\" contains illegal characters (whitespace or \"/\")`\n        );\n      }\n      logger.warn(warning.join(' '));\n      return;\n    }\n    registerComponent(\n      new Component(\n        `${library}-version` as Name,\n        () => ({ library, version }),\n        ComponentType.VERSION\n      )\n    );\n  }\n\n  // Map the requested service to a registered service name\n  // (used to map auth to serverAuth service when needed).\n  function useAsService(app: FirebaseApp, name: string): string | null {\n    if (name === 'serverAuth') {\n      return null;\n    }\n\n    const useService = name;\n\n    return useService;\n  }\n\n  return namespace;\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ComponentContainer,\n  ComponentType,\n  Provider,\n  Name\n} from '@firebase/component';\n\nexport class PlatformLoggerService {\n  constructor(private readonly container: ComponentContainer) {}\n  // In initial implementation, this will be called by installations on\n  // auth token refresh, and installations will send this string.\n  getPlatformInfoString(): string {\n    const providers = this.container.getProviders();\n    // Loop through providers and get library/version pairs from any that are\n    // version components.\n    return providers\n      .map(provider => {\n        if (isVersionServiceProvider(provider)) {\n          const service = provider.getImmediate();\n          return `${service.library}/${service.version}`;\n        } else {\n          return null;\n        }\n      })\n      .filter(logString => logString)\n      .join(' ');\n  }\n}\n/**\n *\n * @param provider check if this provider provides a VersionService\n *\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\n * provides VersionService. The provider is not necessarily a 'app-version'\n * provider.\n */\nfunction isVersionServiceProvider(\n  provider: Provider<Name>\n): provider is Provider<'app-version'> {\n  const component = provider.getComponent();\n  return component?.type === ComponentType.VERSION;\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseNamespace } from '@firebase/app-types';\nimport { _FirebaseNamespace } from '@firebase/app-types/private';\nimport { Component, ComponentType } from '@firebase/component';\nimport { PlatformLoggerService } from './platformLoggerService';\nimport { name, version } from '../package.json';\n\nexport function registerCoreComponents(\n  firebase: FirebaseNamespace,\n  variant?: string\n): void {\n  (firebase as _FirebaseNamespace).INTERNAL.registerComponent(\n    new Component(\n      'platform-logger',\n      container => new PlatformLoggerService(container),\n      ComponentType.PRIVATE\n    )\n  );\n  // Register `app` package.\n  firebase.registerVersion(name, version, variant);\n  // Register platform SDK identifier (no version).\n  firebase.registerVersion('fire-js', '');\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  InstantiationMode,\n  InstanceFactory,\n  ComponentType,\n  Dictionary,\n  Name\n} from './types';\n\n/**\n * Component for service name T, e.g. `auth`, `auth-internal`\n */\nexport class Component<T extends Name = Name> {\n  multipleInstances = false;\n  /**\n   * Properties to be added to the service namespace\n   */\n  serviceProps: Dictionary = {};\n\n  instantiationMode = InstantiationMode.LAZY;\n\n  /**\n   *\n   * @param name The public service name, e.g. app, auth, firestore, database\n   * @param instanceFactory Service factory responsible for creating the public interface\n   * @param type whehter the service provided by the component is public or private\n   */\n  constructor(\n    readonly name: T,\n    readonly instanceFactory: InstanceFactory<T>,\n    readonly type: ComponentType\n  ) {}\n\n  setInstantiationMode(mode: InstantiationMode): this {\n    this.instantiationMode = mode;\n    return this;\n  }\n\n  setMultipleInstances(multipleInstances: boolean): this {\n    this.multipleInstances = multipleInstances;\n    return this;\n  }\n\n  setServiceProps(props: Dictionary): this {\n    this.serviceProps = props;\n    return this;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Deferred } from '@firebase/util';\nimport { ComponentContainer } from './component_container';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport { InstantiationMode, Name, NameServiceMapping } from './types';\nimport { Component } from './component';\n\n/**\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\n * NameServiceMapping[T] is an alias for the type of the instance\n */\nexport class Provider<T extends Name> {\n  private component: Component<T> | null = null;\n  private readonly instances: Map<string, NameServiceMapping[T]> = new Map();\n  private readonly instancesDeferred: Map<\n    string,\n    Deferred<NameServiceMapping[T]>\n  > = new Map();\n\n  constructor(\n    private readonly name: T,\n    private readonly container: ComponentContainer\n  ) {}\n\n  /**\n   * @param identifier A provider can provide mulitple instances of a service\n   * if this.component.multipleInstances is true.\n   */\n  get(identifier: string = DEFAULT_ENTRY_NAME): Promise<NameServiceMapping[T]> {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n\n    if (!this.instancesDeferred.has(normalizedIdentifier)) {\n      const deferred = new Deferred<NameServiceMapping[T]>();\n      this.instancesDeferred.set(normalizedIdentifier, deferred);\n      // If the service instance is available, resolve the promise with it immediately\n      try {\n        const instance = this.getOrInitializeService(normalizedIdentifier);\n        if (instance) {\n          deferred.resolve(instance);\n        }\n      } catch (e) {\n        // when the instance factory throws an exception during get(), it should not cause\n        // a fatal error. We just return the unresolved promise in this case.\n      }\n    }\n\n    return this.instancesDeferred.get(normalizedIdentifier)!.promise;\n  }\n\n  /**\n   *\n   * @param options.identifier A provider can provide mulitple instances of a service\n   * if this.component.multipleInstances is true.\n   * @param options.optional If optional is false or not provided, the method throws an error when\n   * the service is not immediately available.\n   * If optional is true, the method returns null if the service is not immediately available.\n   */\n  getImmediate(options: {\n    identifier?: string;\n    optional: true;\n  }): NameServiceMapping[T] | null;\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: false;\n  }): NameServiceMapping[T];\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: boolean;\n  }): NameServiceMapping[T] | null {\n    const { identifier, optional } = {\n      identifier: DEFAULT_ENTRY_NAME,\n      optional: false,\n      ...options\n    };\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n    try {\n      const instance = this.getOrInitializeService(normalizedIdentifier);\n\n      if (!instance) {\n        if (optional) {\n          return null;\n        }\n        throw Error(`Service ${this.name} is not available`);\n      }\n      return instance;\n    } catch (e) {\n      if (optional) {\n        return null;\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  getComponent(): Component<T> | null {\n    return this.component;\n  }\n\n  setComponent(component: Component<T>): void {\n    if (component.name !== this.name) {\n      throw Error(\n        `Mismatching Component ${component.name} for Provider ${this.name}.`\n      );\n    }\n\n    if (this.component) {\n      throw Error(`Component for ${this.name} has already been provided`);\n    }\n\n    this.component = component;\n    // if the service is eager, initialize the default instance\n    if (isComponentEager(component)) {\n      try {\n        this.getOrInitializeService(DEFAULT_ENTRY_NAME);\n      } catch (e) {\n        // when the instance factory for an eager Component throws an exception during the eager\n        // initialization, it should not cause a fatal error.\n        // TODO: Investigate if we need to make it configurable, because some component may want to cause\n        // a fatal error in this case?\n      }\n    }\n\n    // Create service instances for the pending promises and resolve them\n    // NOTE: if this.multipleInstances is false, only the default instance will be created\n    // and all promises with resolve with it regardless of the identifier.\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedIdentifier = this.normalizeInstanceIdentifier(\n        instanceIdentifier\n      );\n\n      try {\n        // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\n        const instance = this.getOrInitializeService(normalizedIdentifier)!;\n        instanceDeferred.resolve(instance);\n      } catch (e) {\n        // when the instance factory throws an exception, it should not cause\n        // a fatal error. We just leave the promise unresolved.\n      }\n    }\n  }\n\n  clearInstance(identifier: string = DEFAULT_ENTRY_NAME): void {\n    this.instancesDeferred.delete(identifier);\n    this.instances.delete(identifier);\n  }\n\n  // app.delete() will call this method on every provider to delete the services\n  // TODO: should we mark the provider as deleted?\n  async delete(): Promise<void> {\n    const services = Array.from(this.instances.values());\n\n    await Promise.all(\n      services\n        .filter(service => 'INTERNAL' in service)\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any).INTERNAL!.delete())\n    );\n  }\n\n  isComponentSet(): boolean {\n    return this.component != null;\n  }\n\n  private getOrInitializeService(\n    identifier: string\n  ): NameServiceMapping[T] | null {\n    let instance = this.instances.get(identifier);\n    if (!instance && this.component) {\n      instance = this.component.instanceFactory(\n        this.container,\n        normalizeIdentifierForFactory(identifier)\n      ) as NameServiceMapping[T];\n      this.instances.set(identifier, instance);\n    }\n\n    return instance || null;\n  }\n\n  private normalizeInstanceIdentifier(identifier: string): string {\n    if (this.component) {\n      return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\n    } else {\n      return identifier; // assume multiple instances are supported before the component is provided.\n    }\n  }\n}\n\n// undefined should be passed to the service factory for the default instance\nfunction normalizeIdentifierForFactory(identifier: string): string | undefined {\n  return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\n}\n\nfunction isComponentEager(component: Component<Name>): boolean {\n  return component.instantiationMode === InstantiationMode.EAGER;\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Provider } from './provider';\nimport { Component } from './component';\nimport { Name } from './types';\n\n/**\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\n */\nexport class ComponentContainer {\n  private readonly providers = new Map<string, Provider<Name>>();\n\n  constructor(private readonly name: string) {}\n\n  /**\n   *\n   * @param component Component being added\n   * @param overwrite When a component with the same name has already been registered,\n   * if overwrite is true: overwrite the existing component with the new component and create a new\n   * provider with the new component. It can be useful in tests where you want to use different mocks\n   * for different tests.\n   * if overwrite is false: throw an exception\n   */\n  addComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      throw new Error(\n        `Component ${component.name} has already been registered with ${this.name}`\n      );\n    }\n\n    provider.setComponent(component);\n  }\n\n  addOrOverwriteComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      // delete the existing provider from the container, so we can register the new component\n      this.providers.delete(component.name);\n    }\n\n    this.addComponent(component);\n  }\n\n  /**\n   * getProvider provides a type safe interface where it can only be called with a field name\n   * present in NameServiceMapping interface.\n   *\n   * Firebase SDKs providing services should extend NameServiceMapping interface to register\n   * themselves.\n   */\n  getProvider<T extends Name>(name: T): Provider<T> {\n    if (this.providers.has(name)) {\n      return this.providers.get(name) as Provider<T>;\n    }\n\n    // create a Provider for a service that hasn't registered with Firebase\n    const provider = new Provider<T>(name, this);\n    this.providers.set(name, provider);\n\n    return provider as Provider<T>;\n  }\n\n  getProviders(): Array<Provider<Name>> {\n    return Array.from(this.providers.values());\n  }\n}\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nmodule.exports = _inheritsLoose;","/* smoothscroll v0.4.4 - 2019 - Dustan Kasten, Jeremias Menichelli - MIT License */\n(function () {\n  'use strict';\n\n  // polyfill\n  function polyfill() {\n    // aliases\n    var w = window;\n    var d = document;\n\n    // return if scroll behavior is supported and polyfill is not forced\n    if (\n      'scrollBehavior' in d.documentElement.style &&\n      w.__forceSmoothScrollPolyfill__ !== true\n    ) {\n      return;\n    }\n\n    // globals\n    var Element = w.HTMLElement || w.Element;\n    var SCROLL_TIME = 468;\n\n    // object gathering original scroll methods\n    var original = {\n      scroll: w.scroll || w.scrollTo,\n      scrollBy: w.scrollBy,\n      elementScroll: Element.prototype.scroll || scrollElement,\n      scrollIntoView: Element.prototype.scrollIntoView\n    };\n\n    // define timing method\n    var now =\n      w.performance && w.performance.now\n        ? w.performance.now.bind(w.performance)\n        : Date.now;\n\n    /**\n     * indicates if a the current browser is made by Microsoft\n     * @method isMicrosoftBrowser\n     * @param {String} userAgent\n     * @returns {Boolean}\n     */\n    function isMicrosoftBrowser(userAgent) {\n      var userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\n\n      return new RegExp(userAgentPatterns.join('|')).test(userAgent);\n    }\n\n    /*\n     * IE has rounding bug rounding down clientHeight and clientWidth and\n     * rounding up scrollHeight and scrollWidth causing false positives\n     * on hasScrollableSpace\n     */\n    var ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\n\n    /**\n     * changes scroll position inside an element\n     * @method scrollElement\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {undefined}\n     */\n    function scrollElement(x, y) {\n      this.scrollLeft = x;\n      this.scrollTop = y;\n    }\n\n    /**\n     * returns result of applying ease math function to a number\n     * @method ease\n     * @param {Number} k\n     * @returns {Number}\n     */\n    function ease(k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n\n    /**\n     * indicates if a smooth behavior should be applied\n     * @method shouldBailOut\n     * @param {Number|Object} firstArg\n     * @returns {Boolean}\n     */\n    function shouldBailOut(firstArg) {\n      if (\n        firstArg === null ||\n        typeof firstArg !== 'object' ||\n        firstArg.behavior === undefined ||\n        firstArg.behavior === 'auto' ||\n        firstArg.behavior === 'instant'\n      ) {\n        // first argument is not an object/null\n        // or behavior is auto, instant or undefined\n        return true;\n      }\n\n      if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\n        // first argument is an object and behavior is smooth\n        return false;\n      }\n\n      // throw error when behavior is not supported\n      throw new TypeError(\n        'behavior member of ScrollOptions ' +\n          firstArg.behavior +\n          ' is not a valid value for enumeration ScrollBehavior.'\n      );\n    }\n\n    /**\n     * indicates if an element has scrollable space in the provided axis\n     * @method hasScrollableSpace\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function hasScrollableSpace(el, axis) {\n      if (axis === 'Y') {\n        return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\n      }\n\n      if (axis === 'X') {\n        return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\n      }\n    }\n\n    /**\n     * indicates if an element has a scrollable overflow property in the axis\n     * @method canOverflow\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function canOverflow(el, axis) {\n      var overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\n\n      return overflowValue === 'auto' || overflowValue === 'scroll';\n    }\n\n    /**\n     * indicates if an element can be scrolled in either axis\n     * @method isScrollable\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function isScrollable(el) {\n      var isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\n      var isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\n\n      return isScrollableY || isScrollableX;\n    }\n\n    /**\n     * finds scrollable parent of an element\n     * @method findScrollableParent\n     * @param {Node} el\n     * @returns {Node} el\n     */\n    function findScrollableParent(el) {\n      while (el !== d.body && isScrollable(el) === false) {\n        el = el.parentNode || el.host;\n      }\n\n      return el;\n    }\n\n    /**\n     * self invoked function that, given a context, steps through scrolling\n     * @method step\n     * @param {Object} context\n     * @returns {undefined}\n     */\n    function step(context) {\n      var time = now();\n      var value;\n      var currentX;\n      var currentY;\n      var elapsed = (time - context.startTime) / SCROLL_TIME;\n\n      // avoid elapsed times higher than one\n      elapsed = elapsed > 1 ? 1 : elapsed;\n\n      // apply easing to elapsed time\n      value = ease(elapsed);\n\n      currentX = context.startX + (context.x - context.startX) * value;\n      currentY = context.startY + (context.y - context.startY) * value;\n\n      context.method.call(context.scrollable, currentX, currentY);\n\n      // scroll more if we have not reached our destination\n      if (currentX !== context.x || currentY !== context.y) {\n        w.requestAnimationFrame(step.bind(w, context));\n      }\n    }\n\n    /**\n     * scrolls window or element with a smooth behavior\n     * @method smoothScroll\n     * @param {Object|Node} el\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {undefined}\n     */\n    function smoothScroll(el, x, y) {\n      var scrollable;\n      var startX;\n      var startY;\n      var method;\n      var startTime = now();\n\n      // define scroll context\n      if (el === d.body) {\n        scrollable = w;\n        startX = w.scrollX || w.pageXOffset;\n        startY = w.scrollY || w.pageYOffset;\n        method = original.scroll;\n      } else {\n        scrollable = el;\n        startX = el.scrollLeft;\n        startY = el.scrollTop;\n        method = scrollElement;\n      }\n\n      // scroll looping over a frame\n      step({\n        scrollable: scrollable,\n        method: method,\n        startTime: startTime,\n        startX: startX,\n        startY: startY,\n        x: x,\n        y: y\n      });\n    }\n\n    // ORIGINAL METHODS OVERRIDES\n    // w.scroll and w.scrollTo\n    w.scroll = w.scrollTo = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.scroll.call(\n          w,\n          arguments[0].left !== undefined\n            ? arguments[0].left\n            : typeof arguments[0] !== 'object'\n              ? arguments[0]\n              : w.scrollX || w.pageXOffset,\n          // use top prop, second argument if present or fallback to scrollY\n          arguments[0].top !== undefined\n            ? arguments[0].top\n            : arguments[1] !== undefined\n              ? arguments[1]\n              : w.scrollY || w.pageYOffset\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        arguments[0].left !== undefined\n          ? ~~arguments[0].left\n          : w.scrollX || w.pageXOffset,\n        arguments[0].top !== undefined\n          ? ~~arguments[0].top\n          : w.scrollY || w.pageYOffset\n      );\n    };\n\n    // w.scrollBy\n    w.scrollBy = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.scrollBy.call(\n          w,\n          arguments[0].left !== undefined\n            ? arguments[0].left\n            : typeof arguments[0] !== 'object' ? arguments[0] : 0,\n          arguments[0].top !== undefined\n            ? arguments[0].top\n            : arguments[1] !== undefined ? arguments[1] : 0\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        ~~arguments[0].left + (w.scrollX || w.pageXOffset),\n        ~~arguments[0].top + (w.scrollY || w.pageYOffset)\n      );\n    };\n\n    // Element.prototype.scroll and Element.prototype.scrollTo\n    Element.prototype.scroll = Element.prototype.scrollTo = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        // if one number is passed, throw error to match Firefox implementation\n        if (typeof arguments[0] === 'number' && arguments[1] === undefined) {\n          throw new SyntaxError('Value could not be converted');\n        }\n\n        original.elementScroll.call(\n          this,\n          // use left prop, first number argument or fallback to scrollLeft\n          arguments[0].left !== undefined\n            ? ~~arguments[0].left\n            : typeof arguments[0] !== 'object' ? ~~arguments[0] : this.scrollLeft,\n          // use top prop, second argument or fallback to scrollTop\n          arguments[0].top !== undefined\n            ? ~~arguments[0].top\n            : arguments[1] !== undefined ? ~~arguments[1] : this.scrollTop\n        );\n\n        return;\n      }\n\n      var left = arguments[0].left;\n      var top = arguments[0].top;\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        this,\n        this,\n        typeof left === 'undefined' ? this.scrollLeft : ~~left,\n        typeof top === 'undefined' ? this.scrollTop : ~~top\n      );\n    };\n\n    // Element.prototype.scrollBy\n    Element.prototype.scrollBy = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.elementScroll.call(\n          this,\n          arguments[0].left !== undefined\n            ? ~~arguments[0].left + this.scrollLeft\n            : ~~arguments[0] + this.scrollLeft,\n          arguments[0].top !== undefined\n            ? ~~arguments[0].top + this.scrollTop\n            : ~~arguments[1] + this.scrollTop\n        );\n\n        return;\n      }\n\n      this.scroll({\n        left: ~~arguments[0].left + this.scrollLeft,\n        top: ~~arguments[0].top + this.scrollTop,\n        behavior: arguments[0].behavior\n      });\n    };\n\n    // Element.prototype.scrollIntoView\n    Element.prototype.scrollIntoView = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.scrollIntoView.call(\n          this,\n          arguments[0] === undefined ? true : arguments[0]\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      var scrollableParent = findScrollableParent(this);\n      var parentRects = scrollableParent.getBoundingClientRect();\n      var clientRects = this.getBoundingClientRect();\n\n      if (scrollableParent !== d.body) {\n        // reveal element inside parent\n        smoothScroll.call(\n          this,\n          scrollableParent,\n          scrollableParent.scrollLeft + clientRects.left - parentRects.left,\n          scrollableParent.scrollTop + clientRects.top - parentRects.top\n        );\n\n        // reveal parent in viewport unless is fixed\n        if (w.getComputedStyle(scrollableParent).position !== 'fixed') {\n          w.scrollBy({\n            left: parentRects.left,\n            top: parentRects.top,\n            behavior: 'smooth'\n          });\n        }\n      } else {\n        // reveal element in viewport\n        w.scrollBy({\n          left: clientRects.left,\n          top: clientRects.top,\n          behavior: 'smooth'\n        });\n      }\n    };\n  }\n\n  if (typeof exports === 'object' && typeof module !== 'undefined') {\n    // commonjs\n    module.exports = { polyfill: polyfill };\n  } else {\n    // global\n    polyfill();\n  }\n\n}());\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","/** @license React v16.9.0\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var h=require(\"object-assign\"),n=\"function\"===typeof Symbol&&Symbol.for,p=n?Symbol.for(\"react.element\"):60103,q=n?Symbol.for(\"react.portal\"):60106,r=n?Symbol.for(\"react.fragment\"):60107,t=n?Symbol.for(\"react.strict_mode\"):60108,u=n?Symbol.for(\"react.profiler\"):60114,v=n?Symbol.for(\"react.provider\"):60109,w=n?Symbol.for(\"react.context\"):60110,x=n?Symbol.for(\"react.forward_ref\"):60112,y=n?Symbol.for(\"react.suspense\"):60113,aa=n?Symbol.for(\"react.suspense_list\"):60120,ba=n?Symbol.for(\"react.memo\"):\n60115,ca=n?Symbol.for(\"react.lazy\"):60116;n&&Symbol.for(\"react.fundamental\");n&&Symbol.for(\"react.responder\");var z=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction A(a){for(var b=a.message,d=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+b,c=1;c<arguments.length;c++)d+=\"&args[]=\"+encodeURIComponent(arguments[c]);a.message=\"Minified React error #\"+b+\"; visit \"+d+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \";return a}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C={};\nfunction D(a,b,d){this.props=a;this.context=b;this.refs=C;this.updater=d||B}D.prototype.isReactComponent={};D.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw A(Error(85));this.updater.enqueueSetState(this,a,b,\"setState\")};D.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function E(){}E.prototype=D.prototype;function F(a,b,d){this.props=a;this.context=b;this.refs=C;this.updater=d||B}var G=F.prototype=new E;\nG.constructor=F;h(G,D.prototype);G.isPureReactComponent=!0;var H={current:null},I={suspense:null},J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,d){var c=void 0,e={},g=null,k=null;if(null!=b)for(c in void 0!==b.ref&&(k=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)K.call(b,c)&&!L.hasOwnProperty(c)&&(e[c]=b[c]);var f=arguments.length-2;if(1===f)e.children=d;else if(1<f){for(var l=Array(f),m=0;m<f;m++)l[m]=arguments[m+2];e.children=l}if(a&&a.defaultProps)for(c in f=a.defaultProps,f)void 0===e[c]&&(e[c]=f[c]);return{$$typeof:p,type:a,key:g,ref:k,props:e,_owner:J.current}}\nfunction da(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===p}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var O=/\\/+/g,P=[];function Q(a,b,d,c){if(P.length){var e=P.pop();e.result=a;e.keyPrefix=b;e.func=d;e.context=c;e.count=0;return e}return{result:a,keyPrefix:b,func:d,context:c,count:0}}\nfunction R(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>P.length&&P.push(a)}\nfunction S(a,b,d,c){var e=typeof a;if(\"undefined\"===e||\"boolean\"===e)a=null;var g=!1;if(null===a)g=!0;else switch(e){case \"string\":case \"number\":g=!0;break;case \"object\":switch(a.$$typeof){case p:case q:g=!0}}if(g)return d(c,a,\"\"===b?\".\"+T(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var k=0;k<a.length;k++){e=a[k];var f=b+T(e,k);g+=S(e,f,d,c)}else if(null===a||\"object\"!==typeof a?f=null:(f=z&&a[z]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=f.call(a),k=\n0;!(e=a.next()).done;)e=e.value,f=b+T(e,k++),g+=S(e,f,d,c);else if(\"object\"===e)throw d=\"\"+a,A(Error(31),\"[object Object]\"===d?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":d,\"\");return g}function U(a,b,d){return null==a?0:S(a,\"\",b,d)}function T(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function ea(a,b){a.func.call(a.context,b,a.count++)}\nfunction fa(a,b,d){var c=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?V(a,c,d,function(a){return a}):null!=a&&(N(a)&&(a=da(a,e+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(O,\"$&/\")+\"/\")+d)),c.push(a))}function V(a,b,d,c,e){var g=\"\";null!=d&&(g=(\"\"+d).replace(O,\"$&/\")+\"/\");b=Q(b,g,c,e);U(a,fa,b);R(b)}function W(){var a=H.current;if(null===a)throw A(Error(321));return a}\nvar X={Children:{map:function(a,b,d){if(null==a)return a;var c=[];V(a,c,null,b,d);return c},forEach:function(a,b,d){if(null==a)return a;b=Q(null,null,b,d);U(a,ea,b);R(b)},count:function(a){return U(a,function(){return null},null)},toArray:function(a){var b=[];V(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw A(Error(143));return a}},createRef:function(){return{current:null}},Component:D,PureComponent:F,createContext:function(a,b){void 0===b&&(b=null);a={$$typeof:w,_calculateChangedBits:b,\n_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:v,_context:a};return a.Consumer=a},forwardRef:function(a){return{$$typeof:x,render:a}},lazy:function(a){return{$$typeof:ca,_ctor:a,_status:-1,_result:null}},memo:function(a,b){return{$$typeof:ba,type:a,compare:void 0===b?null:b}},useCallback:function(a,b){return W().useCallback(a,b)},useContext:function(a,b){return W().useContext(a,b)},useEffect:function(a,b){return W().useEffect(a,b)},useImperativeHandle:function(a,\nb,d){return W().useImperativeHandle(a,b,d)},useDebugValue:function(){},useLayoutEffect:function(a,b){return W().useLayoutEffect(a,b)},useMemo:function(a,b){return W().useMemo(a,b)},useReducer:function(a,b,d){return W().useReducer(a,b,d)},useRef:function(a){return W().useRef(a)},useState:function(a){return W().useState(a)},Fragment:r,Profiler:u,StrictMode:t,Suspense:y,unstable_SuspenseList:aa,createElement:M,cloneElement:function(a,b,d){if(null===a||void 0===a)throw A(Error(267),a);var c=void 0,e=\nh({},a.props),g=a.key,k=a.ref,f=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,f=J.current);void 0!==b.key&&(g=\"\"+b.key);var l=void 0;a.type&&a.type.defaultProps&&(l=a.type.defaultProps);for(c in b)K.call(b,c)&&!L.hasOwnProperty(c)&&(e[c]=void 0===b[c]&&void 0!==l?l[c]:b[c])}c=arguments.length-2;if(1===c)e.children=d;else if(1<c){l=Array(c);for(var m=0;m<c;m++)l[m]=arguments[m+2];e.children=l}return{$$typeof:p,type:a.type,key:g,ref:k,props:e,_owner:f}},createFactory:function(a){var b=M.bind(null,a);\nb.type=a;return b},isValidElement:N,version:\"16.9.0\",unstable_withSuspenseConfig:function(a,b){var d=I.suspense;I.suspense=void 0===b?null:b;try{a()}finally{I.suspense=d}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:H,ReactCurrentBatchConfig:I,ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:h}},Y={default:X},Z=Y&&X||Y;module.exports=Z.default||Z;\n","/** @license React v16.9.0\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),m=require(\"object-assign\"),q=require(\"scheduler\");function t(a){for(var b=a.message,c=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+b,d=1;d<arguments.length;d++)c+=\"&args[]=\"+encodeURIComponent(arguments[d]);a.message=\"Minified React error #\"+b+\"; visit \"+c+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \";return a}if(!aa)throw t(Error(227));var ba=null,ca={};\nfunction da(){if(ba)for(var a in ca){var b=ca[a],c=ba.indexOf(a);if(!(-1<c))throw t(Error(96),a);if(!ea[c]){if(!b.extractEvents)throw t(Error(97),a);ea[c]=b;c=b.eventTypes;for(var d in c){var e=void 0;var f=c[d],h=b,g=d;if(fa.hasOwnProperty(g))throw t(Error(99),g);fa[g]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&ha(k[e],h,g);e=!0}else f.registrationName?(ha(f.registrationName,h,g),e=!0):e=!1;if(!e)throw t(Error(98),d,a);}}}}\nfunction ha(a,b,c){if(ia[a])throw t(Error(100),a);ia[a]=b;ja[a]=b.eventTypes[c].dependencies}var ea=[],fa={},ia={},ja={};function ka(a,b,c,d,e,f,h,g,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(n){this.onError(n)}}var la=!1,ma=null,na=!1,oa=null,pa={onError:function(a){la=!0;ma=a}};function qa(a,b,c,d,e,f,h,g,k){la=!1;ma=null;ka.apply(pa,arguments)}\nfunction ra(a,b,c,d,e,f,h,g,k){qa.apply(this,arguments);if(la){if(la){var l=ma;la=!1;ma=null}else throw t(Error(198));na||(na=!0,oa=l)}}var sa=null,ta=null,va=null;function wa(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=va(c);ra(d,b,void 0,a);a.currentTarget=null}function xa(a,b){if(null==b)throw t(Error(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}\nfunction ya(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var za=null;function Aa(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)wa(a,b[d],c[d]);else b&&wa(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}}function Ba(a){null!==a&&(za=xa(za,a));a=za;za=null;if(a){ya(a,Aa);if(za)throw t(Error(95));if(na)throw a=oa,na=!1,oa=null,a;}}\nvar Ca={injectEventPluginOrder:function(a){if(ba)throw t(Error(101));ba=Array.prototype.slice.call(a);da()},injectEventPluginsByName:function(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!ca.hasOwnProperty(c)||ca[c]!==d){if(ca[c])throw t(Error(102),c);ca[c]=d;b=!0}}b&&da()}};\nfunction Da(a,b){var c=a.stateNode;if(!c)return null;var d=sa(c);if(!d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==typeof c)throw t(Error(231),b,typeof c);\nreturn c}var Ea=Math.random().toString(36).slice(2),Fa=\"__reactInternalInstance$\"+Ea,Ga=\"__reactEventHandlers$\"+Ea;function Ha(a){if(a[Fa])return a[Fa];for(;!a[Fa];)if(a.parentNode)a=a.parentNode;else return null;a=a[Fa];return 5===a.tag||6===a.tag?a:null}function Ia(a){a=a[Fa];return!a||5!==a.tag&&6!==a.tag?null:a}function Ja(a){if(5===a.tag||6===a.tag)return a.stateNode;throw t(Error(33));}function Ka(a){return a[Ga]||null}function La(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction Ma(a,b,c){if(b=Da(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=xa(c._dispatchListeners,b),c._dispatchInstances=xa(c._dispatchInstances,a)}function Na(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=La(b);for(b=c.length;0<b--;)Ma(c[b],\"captured\",a);for(b=0;b<c.length;b++)Ma(c[b],\"bubbled\",a)}}\nfunction Oa(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Da(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=xa(c._dispatchListeners,b),c._dispatchInstances=xa(c._dispatchInstances,a))}function Pa(a){a&&a.dispatchConfig.registrationName&&Oa(a._targetInst,null,a)}function Qa(a){ya(a,Na)}var Ra=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement);\nfunction Sa(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var Ta={animationend:Sa(\"Animation\",\"AnimationEnd\"),animationiteration:Sa(\"Animation\",\"AnimationIteration\"),animationstart:Sa(\"Animation\",\"AnimationStart\"),transitionend:Sa(\"Transition\",\"TransitionEnd\")},Ua={},Va={};\nRa&&(Va=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),\"TransitionEvent\"in window||delete Ta.transitionend.transition);function Wa(a){if(Ua[a])return Ua[a];if(!Ta[a])return a;var b=Ta[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Va)return Ua[a]=b[c];return a}\nvar Xa=Wa(\"animationend\"),Ya=Wa(\"animationiteration\"),Za=Wa(\"animationstart\"),ab=Wa(\"transitionend\"),bb=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),cb=null,db=null,eb=null;\nfunction fb(){if(eb)return eb;var a,b=db,c=b.length,d,e=\"value\"in cb?cb.value:cb.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var h=c-a;for(d=1;d<=h&&b[c-d]===e[f-d];d++);return eb=e.slice(a,1<d?1-d:void 0)}function gb(){return!0}function hb(){return!1}\nfunction y(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):\"target\"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?gb:hb;this.isPropagationStopped=hb;return this}\nm(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=gb)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=gb)},persist:function(){this.isPersistent=gb},isPersistent:hb,destructor:function(){var a=this.constructor.Interface,\nb;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=hb;this._dispatchInstances=this._dispatchListeners=null}});y.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};\ny.extend=function(a){function b(){}function c(){return d.apply(this,arguments)}var d=this;b.prototype=d.prototype;var e=new b;m(e,c.prototype);c.prototype=e;c.prototype.constructor=c;c.Interface=m({},d.Interface,a);c.extend=d.extend;ib(c);return c};ib(y);function jb(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}\nfunction kb(a){if(!(a instanceof this))throw t(Error(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function ib(a){a.eventPool=[];a.getPooled=jb;a.release=kb}var lb=y.extend({data:null}),mb=y.extend({data:null}),nb=[9,13,27,32],ob=Ra&&\"CompositionEvent\"in window,pb=null;Ra&&\"documentMode\"in document&&(pb=document.documentMode);\nvar qb=Ra&&\"TextEvent\"in window&&!pb,sb=Ra&&(!ob||pb&&8<pb&&11>=pb),tb=String.fromCharCode(32),ub={beforeInput:{phasedRegistrationNames:{bubbled:\"onBeforeInput\",captured:\"onBeforeInputCapture\"},dependencies:[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]},compositionEnd:{phasedRegistrationNames:{bubbled:\"onCompositionEnd\",captured:\"onCompositionEndCapture\"},dependencies:\"blur compositionend keydown keypress keyup mousedown\".split(\" \")},compositionStart:{phasedRegistrationNames:{bubbled:\"onCompositionStart\",\ncaptured:\"onCompositionStartCapture\"},dependencies:\"blur compositionstart keydown keypress keyup mousedown\".split(\" \")},compositionUpdate:{phasedRegistrationNames:{bubbled:\"onCompositionUpdate\",captured:\"onCompositionUpdateCapture\"},dependencies:\"blur compositionupdate keydown keypress keyup mousedown\".split(\" \")}},vb=!1;\nfunction wb(a,b){switch(a){case \"keyup\":return-1!==nb.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"blur\":return!0;default:return!1}}function xb(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var yb=!1;function Ab(a,b){switch(a){case \"compositionend\":return xb(b);case \"keypress\":if(32!==b.which)return null;vb=!0;return tb;case \"textInput\":return a=b.data,a===tb&&vb?null:a;default:return null}}\nfunction Bb(a,b){if(yb)return\"compositionend\"===a||!ob&&wb(a,b)?(a=fb(),eb=db=cb=null,yb=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return sb&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar Cb={eventTypes:ub,extractEvents:function(a,b,c,d){var e=void 0;var f=void 0;if(ob)b:{switch(a){case \"compositionstart\":e=ub.compositionStart;break b;case \"compositionend\":e=ub.compositionEnd;break b;case \"compositionupdate\":e=ub.compositionUpdate;break b}e=void 0}else yb?wb(a,c)&&(e=ub.compositionEnd):\"keydown\"===a&&229===c.keyCode&&(e=ub.compositionStart);e?(sb&&\"ko\"!==c.locale&&(yb||e!==ub.compositionStart?e===ub.compositionEnd&&yb&&(f=fb()):(cb=d,db=\"value\"in cb?cb.value:cb.textContent,yb=\n!0)),e=lb.getPooled(e,b,c,d),f?e.data=f:(f=xb(c),null!==f&&(e.data=f)),Qa(e),f=e):f=null;(a=qb?Ab(a,c):Bb(a,c))?(b=mb.getPooled(ub.beforeInput,b,c,d),b.data=a,Qa(b)):b=null;return null===f?b:null===b?f:[f,b]}},Db=null,Eb=null,Fb=null;function Gb(a){if(a=ta(a)){if(\"function\"!==typeof Db)throw t(Error(280));var b=sa(a.stateNode);Db(a.stateNode,a.type,b)}}function Hb(a){Eb?Fb?Fb.push(a):Fb=[a]:Eb=a}function Ib(){if(Eb){var a=Eb,b=Fb;Fb=Eb=null;Gb(a);if(b)for(a=0;a<b.length;a++)Gb(b[a])}}\nfunction Jb(a,b){return a(b)}function Kb(a,b,c,d){return a(b,c,d)}function Lb(){}var Mb=Jb,Nb=!1;function Ob(){if(null!==Eb||null!==Fb)Lb(),Ib()}var Pb={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qb(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!Pb[a.type]:\"textarea\"===b?!0:!1}\nfunction Rb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}function Sb(a){if(!Ra)return!1;a=\"on\"+a;var b=a in document;b||(b=document.createElement(\"div\"),b.setAttribute(a,\"return;\"),b=\"function\"===typeof b[a]);return b}function Tb(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ub(a){var b=Tb(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Vb(a){a._valueTracker||(a._valueTracker=Ub(a))}function Wb(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Tb(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}var Xb=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Xb.hasOwnProperty(\"ReactCurrentDispatcher\")||(Xb.ReactCurrentDispatcher={current:null});Xb.hasOwnProperty(\"ReactCurrentBatchConfig\")||(Xb.ReactCurrentBatchConfig={suspense:null});\nvar Yb=/^(.*)[\\\\\\/]/,B=\"function\"===typeof Symbol&&Symbol.for,Zb=B?Symbol.for(\"react.element\"):60103,$b=B?Symbol.for(\"react.portal\"):60106,ac=B?Symbol.for(\"react.fragment\"):60107,bc=B?Symbol.for(\"react.strict_mode\"):60108,cc=B?Symbol.for(\"react.profiler\"):60114,dc=B?Symbol.for(\"react.provider\"):60109,ec=B?Symbol.for(\"react.context\"):60110,fc=B?Symbol.for(\"react.concurrent_mode\"):60111,gc=B?Symbol.for(\"react.forward_ref\"):60112,hc=B?Symbol.for(\"react.suspense\"):60113,ic=B?Symbol.for(\"react.suspense_list\"):\n60120,jc=B?Symbol.for(\"react.memo\"):60115,kc=B?Symbol.for(\"react.lazy\"):60116;B&&Symbol.for(\"react.fundamental\");B&&Symbol.for(\"react.responder\");var lc=\"function\"===typeof Symbol&&Symbol.iterator;function mc(a){if(null===a||\"object\"!==typeof a)return null;a=lc&&a[lc]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nfunction oc(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ac:return\"Fragment\";case $b:return\"Portal\";case cc:return\"Profiler\";case bc:return\"StrictMode\";case hc:return\"Suspense\";case ic:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case ec:return\"Context.Consumer\";case dc:return\"Context.Provider\";case gc:var b=a.render;b=b.displayName||b.name||\"\";return a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\n\"ForwardRef\");case jc:return oc(a.type);case kc:if(a=1===a._status?a._result:null)return oc(a)}return null}function pc(a){var b=\"\";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c=\"\";break a;default:var d=a._debugOwner,e=a._debugSource,f=oc(a.type);c=null;d&&(c=oc(d.type));d=f;f=\"\";e?f=\" (at \"+e.fileName.replace(Yb,\"\")+\":\"+e.lineNumber+\")\":c&&(f=\" (created by \"+c+\")\");c=\"\\n    in \"+(d||\"Unknown\")+f}b+=c;a=a.return}while(a);return b}\nvar qc=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,rc=Object.prototype.hasOwnProperty,sc={},tc={};\nfunction uc(a){if(rc.call(tc,a))return!0;if(rc.call(sc,a))return!1;if(qc.test(a))return tc[a]=!0;sc[a]=!0;return!1}function vc(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction wc(a,b,c,d){if(null===b||\"undefined\"===typeof b||vc(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function D(a,b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}var F={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){F[a]=new D(a,0,!1,a,null,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];F[b]=new D(b,1,!1,a[1],null,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){F[a]=new D(a,2,!1,a.toLowerCase(),null,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){F[a]=new D(a,2,!1,a,null,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){F[a]=new D(a,3,!1,a.toLowerCase(),null,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){F[a]=new D(a,3,!0,a,null,!1)});[\"capture\",\"download\"].forEach(function(a){F[a]=new D(a,4,!1,a,null,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){F[a]=new D(a,6,!1,a,null,!1)});[\"rowSpan\",\"start\"].forEach(function(a){F[a]=new D(a,5,!1,a.toLowerCase(),null,!1)});var xc=/[\\-:]([a-z])/g;function yc(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(xc,\nyc);F[b]=new D(b,1,!1,a,null,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(xc,yc);F[b]=new D(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(xc,yc);F[b]=new D(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){F[a]=new D(a,1,!1,a.toLowerCase(),null,!1)});\nF.xlinkHref=new D(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){F[a]=new D(a,1,!1,a.toLowerCase(),null,!0)});\nfunction zc(a,b,c,d){var e=F.hasOwnProperty(b)?F[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(wc(b,c,e,d)&&(c=null),d||null===e?uc(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nfunction Ac(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}function Bc(a,b){var c=b.checked;return m({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}\nfunction Cc(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Ac(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function Dc(a,b){b=b.checked;null!=b&&zc(a,\"checked\",b,!1)}\nfunction Ec(a,b){Dc(a,b);var c=Ac(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?Fc(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&Fc(a,b.type,Ac(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction Gc(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!a.defaultChecked;a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction Fc(a,b,c){if(\"number\"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}var Hc={change:{phasedRegistrationNames:{bubbled:\"onChange\",captured:\"onChangeCapture\"},dependencies:\"blur change click focus input keydown keyup selectionchange\".split(\" \")}};function Ic(a,b,c){a=y.getPooled(Hc.change,a,b,c);a.type=\"change\";Hb(c);Qa(a);return a}var Jc=null,Kc=null;function Lc(a){Ba(a)}\nfunction Mc(a){var b=Ja(a);if(Wb(b))return a}function Nc(a,b){if(\"change\"===a)return b}var Oc=!1;Ra&&(Oc=Sb(\"input\")&&(!document.documentMode||9<document.documentMode));function Pc(){Jc&&(Jc.detachEvent(\"onpropertychange\",Qc),Kc=Jc=null)}function Qc(a){if(\"value\"===a.propertyName&&Mc(Kc))if(a=Ic(Kc,a,Rb(a)),Nb)Ba(a);else{Nb=!0;try{Jb(Lc,a)}finally{Nb=!1,Ob()}}}function Rc(a,b,c){\"focus\"===a?(Pc(),Jc=b,Kc=c,Jc.attachEvent(\"onpropertychange\",Qc)):\"blur\"===a&&Pc()}\nfunction Sc(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return Mc(Kc)}function Tc(a,b){if(\"click\"===a)return Mc(b)}function Uc(a,b){if(\"input\"===a||\"change\"===a)return Mc(b)}\nvar Vc={eventTypes:Hc,_isInputEventSupported:Oc,extractEvents:function(a,b,c,d){var e=b?Ja(b):window,f=void 0,h=void 0,g=e.nodeName&&e.nodeName.toLowerCase();\"select\"===g||\"input\"===g&&\"file\"===e.type?f=Nc:Qb(e)?Oc?f=Uc:(f=Sc,h=Rc):(g=e.nodeName)&&\"input\"===g.toLowerCase()&&(\"checkbox\"===e.type||\"radio\"===e.type)&&(f=Tc);if(f&&(f=f(a,b)))return Ic(f,c,d);h&&h(a,e,b);\"blur\"===a&&(a=e._wrapperState)&&a.controlled&&\"number\"===e.type&&Fc(e,\"number\",e.value)}},Wc=y.extend({view:null,detail:null}),Xc={Alt:\"altKey\",\nControl:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Yc(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Xc[a])?!!b[a]:!1}function Zc(){return Yc}\nvar $c=0,ad=0,bd=!1,cd=!1,dd=Wc.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Zc,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if(\"movementX\"in a)return a.movementX;var b=$c;$c=a.screenX;return bd?\"mousemove\"===a.type?a.screenX-b:0:(bd=!0,0)},movementY:function(a){if(\"movementY\"in a)return a.movementY;\nvar b=ad;ad=a.screenY;return cd?\"mousemove\"===a.type?a.screenY-b:0:(cd=!0,0)}}),ed=dd.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fd={mouseEnter:{registrationName:\"onMouseEnter\",dependencies:[\"mouseout\",\"mouseover\"]},mouseLeave:{registrationName:\"onMouseLeave\",dependencies:[\"mouseout\",\"mouseover\"]},pointerEnter:{registrationName:\"onPointerEnter\",dependencies:[\"pointerout\",\"pointerover\"]},pointerLeave:{registrationName:\"onPointerLeave\",\ndependencies:[\"pointerout\",\"pointerover\"]}},gd={eventTypes:fd,extractEvents:function(a,b,c,d){var e=\"mouseover\"===a||\"pointerover\"===a,f=\"mouseout\"===a||\"pointerout\"===a;if(e&&(c.relatedTarget||c.fromElement)||!f&&!e)return null;e=d.window===d?d:(e=d.ownerDocument)?e.defaultView||e.parentWindow:window;f?(f=b,b=(b=c.relatedTarget||c.toElement)?Ha(b):null):f=null;if(f===b)return null;var h=void 0,g=void 0,k=void 0,l=void 0;if(\"mouseout\"===a||\"mouseover\"===a)h=dd,g=fd.mouseLeave,k=fd.mouseEnter,l=\"mouse\";\nelse if(\"pointerout\"===a||\"pointerover\"===a)h=ed,g=fd.pointerLeave,k=fd.pointerEnter,l=\"pointer\";var n=null==f?e:Ja(f);e=null==b?e:Ja(b);a=h.getPooled(g,f,c,d);a.type=l+\"leave\";a.target=n;a.relatedTarget=e;c=h.getPooled(k,b,c,d);c.type=l+\"enter\";c.target=e;c.relatedTarget=n;d=b;if(f&&d)a:{b=f;e=d;l=0;for(h=b;h;h=La(h))l++;h=0;for(k=e;k;k=La(k))h++;for(;0<l-h;)b=La(b),l--;for(;0<h-l;)e=La(e),h--;for(;l--;){if(b===e||b===e.alternate)break a;b=La(b);e=La(e)}b=null}else b=null;e=b;for(b=[];f&&f!==e;){l=\nf.alternate;if(null!==l&&l===e)break;b.push(f);f=La(f)}for(f=[];d&&d!==e;){l=d.alternate;if(null!==l&&l===e)break;f.push(d);d=La(d)}for(d=0;d<b.length;d++)Oa(b[d],\"bubbled\",a);for(d=f.length;0<d--;)Oa(f[d],\"captured\",c);return[a,c]}};function hd(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var id=Object.prototype.hasOwnProperty;\nfunction jd(a,b){if(hd(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!id.call(b,c[d])||!hd(a[c[d]],b[c[d]]))return!1;return!0}function kd(a,b){return{responder:a,props:b}}new Map;new Map;new Set;new Map;\nfunction ld(a){var b=a;if(a.alternate)for(;b.return;)b=b.return;else{if(0!==(b.effectTag&2))return 1;for(;b.return;)if(b=b.return,0!==(b.effectTag&2))return 1}return 3===b.tag?2:3}function od(a){if(2!==ld(a))throw t(Error(188));}\nfunction pd(a){var b=a.alternate;if(!b){b=ld(a);if(3===b)throw t(Error(188));return 1===b?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return od(e),a;if(f===d)return od(e),b;f=f.sibling}throw t(Error(188));}if(c.return!==d.return)c=e,d=f;else{for(var h=!1,g=e.child;g;){if(g===c){h=!0;c=e;d=f;break}if(g===d){h=!0;d=e;c=f;break}g=g.sibling}if(!h){for(g=f.child;g;){if(g===\nc){h=!0;c=f;d=e;break}if(g===d){h=!0;d=f;c=e;break}g=g.sibling}if(!h)throw t(Error(189));}}if(c.alternate!==d)throw t(Error(190));}if(3!==c.tag)throw t(Error(188));return c.stateNode.current===c?a:b}function qd(a){a=pd(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nvar rd=y.extend({animationName:null,elapsedTime:null,pseudoElement:null}),sd=y.extend({clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),td=Wc.extend({relatedTarget:null});function ud(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}\nvar vd={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},wd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",\n116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},xd=Wc.extend({key:function(a){if(a.key){var b=vd[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=ud(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?wd[a.keyCode]||\"Unidentified\":\"\"},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Zc,charCode:function(a){return\"keypress\"===\na.type?ud(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===a.type?ud(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),yd=dd.extend({dataTransfer:null}),zd=Wc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Zc}),Ad=y.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Bd=dd.extend({deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in\na?-a.wheelDeltaX:0},deltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),Cd=[[\"blur\",\"blur\",0],[\"cancel\",\"cancel\",0],[\"click\",\"click\",0],[\"close\",\"close\",0],[\"contextmenu\",\"contextMenu\",0],[\"copy\",\"copy\",0],[\"cut\",\"cut\",0],[\"auxclick\",\"auxClick\",0],[\"dblclick\",\"doubleClick\",0],[\"dragend\",\"dragEnd\",0],[\"dragstart\",\"dragStart\",0],[\"drop\",\"drop\",0],[\"focus\",\"focus\",0],[\"input\",\"input\",0],[\"invalid\",\"invalid\",0],\n[\"keydown\",\"keyDown\",0],[\"keypress\",\"keyPress\",0],[\"keyup\",\"keyUp\",0],[\"mousedown\",\"mouseDown\",0],[\"mouseup\",\"mouseUp\",0],[\"paste\",\"paste\",0],[\"pause\",\"pause\",0],[\"play\",\"play\",0],[\"pointercancel\",\"pointerCancel\",0],[\"pointerdown\",\"pointerDown\",0],[\"pointerup\",\"pointerUp\",0],[\"ratechange\",\"rateChange\",0],[\"reset\",\"reset\",0],[\"seeked\",\"seeked\",0],[\"submit\",\"submit\",0],[\"touchcancel\",\"touchCancel\",0],[\"touchend\",\"touchEnd\",0],[\"touchstart\",\"touchStart\",0],[\"volumechange\",\"volumeChange\",0],[\"drag\",\"drag\",\n1],[\"dragenter\",\"dragEnter\",1],[\"dragexit\",\"dragExit\",1],[\"dragleave\",\"dragLeave\",1],[\"dragover\",\"dragOver\",1],[\"mousemove\",\"mouseMove\",1],[\"mouseout\",\"mouseOut\",1],[\"mouseover\",\"mouseOver\",1],[\"pointermove\",\"pointerMove\",1],[\"pointerout\",\"pointerOut\",1],[\"pointerover\",\"pointerOver\",1],[\"scroll\",\"scroll\",1],[\"toggle\",\"toggle\",1],[\"touchmove\",\"touchMove\",1],[\"wheel\",\"wheel\",1],[\"abort\",\"abort\",2],[Xa,\"animationEnd\",2],[Ya,\"animationIteration\",2],[Za,\"animationStart\",2],[\"canplay\",\"canPlay\",2],[\"canplaythrough\",\n\"canPlayThrough\",2],[\"durationchange\",\"durationChange\",2],[\"emptied\",\"emptied\",2],[\"encrypted\",\"encrypted\",2],[\"ended\",\"ended\",2],[\"error\",\"error\",2],[\"gotpointercapture\",\"gotPointerCapture\",2],[\"load\",\"load\",2],[\"loadeddata\",\"loadedData\",2],[\"loadedmetadata\",\"loadedMetadata\",2],[\"loadstart\",\"loadStart\",2],[\"lostpointercapture\",\"lostPointerCapture\",2],[\"playing\",\"playing\",2],[\"progress\",\"progress\",2],[\"seeking\",\"seeking\",2],[\"stalled\",\"stalled\",2],[\"suspend\",\"suspend\",2],[\"timeupdate\",\"timeUpdate\",\n2],[ab,\"transitionEnd\",2],[\"waiting\",\"waiting\",2]],Dd={},Ed={},Fd=0;for(;Fd<Cd.length;Fd++){var Gd=Cd[Fd],Hd=Gd[0],Id=Gd[1],Jd=Gd[2],Kd=\"on\"+(Id[0].toUpperCase()+Id.slice(1)),Ld={phasedRegistrationNames:{bubbled:Kd,captured:Kd+\"Capture\"},dependencies:[Hd],eventPriority:Jd};Dd[Id]=Ld;Ed[Hd]=Ld}\nvar Md={eventTypes:Dd,getEventPriority:function(a){a=Ed[a];return void 0!==a?a.eventPriority:2},extractEvents:function(a,b,c,d){var e=Ed[a];if(!e)return null;switch(a){case \"keypress\":if(0===ud(c))return null;case \"keydown\":case \"keyup\":a=xd;break;case \"blur\":case \"focus\":a=td;break;case \"click\":if(2===c.button)return null;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":a=dd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":a=\nyd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":a=zd;break;case Xa:case Ya:case Za:a=rd;break;case ab:a=Ad;break;case \"scroll\":a=Wc;break;case \"wheel\":a=Bd;break;case \"copy\":case \"cut\":case \"paste\":a=sd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":a=ed;break;default:a=y}b=a.getPooled(e,b,c,d);Qa(b);return b}},Nd=Md.getEventPriority,Od=[];\nfunction Pd(a){var b=a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d;for(d=c;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo;if(!d)break;a.ancestors.push(c);c=Ha(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Rb(a.nativeEvent);d=a.topLevelType;for(var f=a.nativeEvent,h=null,g=0;g<ea.length;g++){var k=ea[g];k&&(k=k.extractEvents(d,b,f,e))&&(h=xa(h,k))}Ba(h)}}var Qd=!0;function G(a,b){Rd(b,a,!1)}\nfunction Rd(a,b,c){switch(Nd(b)){case 0:var d=Sd.bind(null,b,1);break;case 1:d=Td.bind(null,b,1);break;default:d=Ud.bind(null,b,1)}c?a.addEventListener(b,d,!0):a.addEventListener(b,d,!1)}function Sd(a,b,c){Nb||Lb();var d=Ud,e=Nb;Nb=!0;try{Kb(d,a,b,c)}finally{(Nb=e)||Ob()}}function Td(a,b,c){Ud(a,b,c)}\nfunction Ud(a,b,c){if(Qd){b=Rb(c);b=Ha(b);null===b||\"number\"!==typeof b.tag||2===ld(b)||(b=null);if(Od.length){var d=Od.pop();d.topLevelType=a;d.nativeEvent=c;d.targetInst=b;a=d}else a={topLevelType:a,nativeEvent:c,targetInst:b,ancestors:[]};try{if(c=a,Nb)Pd(c,void 0);else{Nb=!0;try{Mb(Pd,c,void 0)}finally{Nb=!1,Ob()}}}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>Od.length&&Od.push(a)}}}var Vd=new (\"function\"===typeof WeakMap?WeakMap:Map);\nfunction Wd(a){var b=Vd.get(a);void 0===b&&(b=new Set,Vd.set(a,b));return b}function Xd(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function Yd(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Zd(a,b){var c=Yd(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Yd(c)}}function $d(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?$d(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction ae(){for(var a=window,b=Xd();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xd(a.document)}return b}function be(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nvar ce=Ra&&\"documentMode\"in document&&11>=document.documentMode,de={select:{phasedRegistrationNames:{bubbled:\"onSelect\",captured:\"onSelectCapture\"},dependencies:\"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange\".split(\" \")}},ee=null,fe=null,ge=null,he=!1;\nfunction ie(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(he||null==ee||ee!==Xd(c))return null;c=ee;\"selectionStart\"in c&&be(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return ge&&jd(ge,c)?null:(ge=c,a=y.getPooled(de.select,fe,a,b),a.type=\"select\",a.target=ee,Qa(a),a)}\nvar je={eventTypes:de,extractEvents:function(a,b,c,d){var e=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument,f;if(!(f=!e)){a:{e=Wd(e);f=ja.onSelect;for(var h=0;h<f.length;h++)if(!e.has(f[h])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Ja(b):window;switch(a){case \"focus\":if(Qb(e)||\"true\"===e.contentEditable)ee=e,fe=b,ge=null;break;case \"blur\":ge=fe=ee=null;break;case \"mousedown\":he=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":return he=!1,ie(c,d);case \"selectionchange\":if(ce)break;\ncase \"keydown\":case \"keyup\":return ie(c,d)}return null}};Ca.injectEventPluginOrder(\"ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin\".split(\" \"));sa=Ka;ta=Ia;va=Ja;Ca.injectEventPluginsByName({SimpleEventPlugin:Md,EnterLeaveEventPlugin:gd,ChangeEventPlugin:Vc,SelectEventPlugin:je,BeforeInputEventPlugin:Cb});function ke(a){var b=\"\";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}\nfunction le(a,b){a=m({children:void 0},b);if(b=ke(b.children))a.children=b;return a}function me(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Ac(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction ne(a,b){if(null!=b.dangerouslySetInnerHTML)throw t(Error(91));return m({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function oe(a,b){var c=b.value;if(null==c){c=b.defaultValue;b=b.children;if(null!=b){if(null!=c)throw t(Error(92));if(Array.isArray(b)){if(!(1>=b.length))throw t(Error(93));b=b[0]}c=b}null==c&&(c=\"\")}a._wrapperState={initialValue:Ac(c)}}\nfunction pe(a,b){var c=Ac(b.value),d=Ac(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function qe(a){var b=a.textContent;b===a._wrapperState.initialValue&&(a.value=b)}var re={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction se(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function te(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?se(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar ue=void 0,ve=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==re.svg||\"innerHTML\"in a)a.innerHTML=b;else{ue=ue||document.createElement(\"div\");ue.innerHTML=\"<svg>\"+b+\"</svg>\";for(b=ue.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction we(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar xe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,\nfloodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ye=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(xe).forEach(function(a){ye.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);xe[b]=xe[a]})});function ze(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||xe.hasOwnProperty(a)&&xe[a]?(\"\"+b).trim():b+\"px\"}\nfunction Ae(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=ze(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var Ce=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction De(a,b){if(b){if(Ce[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw t(Error(137),a,\"\");if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw t(Error(60));if(!(\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML))throw t(Error(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw t(Error(62),\"\");}}\nfunction Ee(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}\nfunction Fe(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Wd(a);b=ja[b];for(var d=0;d<b.length;d++){var e=b[d];if(!c.has(e)){switch(e){case \"scroll\":Rd(a,\"scroll\",!0);break;case \"focus\":case \"blur\":Rd(a,\"focus\",!0);Rd(a,\"blur\",!0);c.add(\"blur\");c.add(\"focus\");break;case \"cancel\":case \"close\":Sb(e)&&Rd(a,e,!0);break;case \"invalid\":case \"submit\":case \"reset\":break;default:-1===bb.indexOf(e)&&G(e,a)}c.add(e)}}}function Ge(){}var He=null,Ie=null;\nfunction Je(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}function Ke(a,b){return\"textarea\"===a||\"option\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var Le=\"function\"===typeof setTimeout?setTimeout:void 0,Me=\"function\"===typeof clearTimeout?clearTimeout:void 0;\nfunction Ne(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}new Set;var Oe=[],Pe=-1;function H(a){0>Pe||(a.current=Oe[Pe],Oe[Pe]=null,Pe--)}function J(a,b){Pe++;Oe[Pe]=a.current;a.current=b}var Qe={},L={current:Qe},M={current:!1},Re=Qe;\nfunction Se(a,b){var c=a.type.contextTypes;if(!c)return Qe;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Te(a){H(M,a);H(L,a)}function Ue(a){H(M,a);H(L,a)}\nfunction Ve(a,b,c){if(L.current!==Qe)throw t(Error(168));J(L,b,a);J(M,c,a)}function We(a,b,c){var d=a.stateNode;a=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw t(Error(108),oc(b)||\"Unknown\",e);return m({},c,d)}function Xe(a){var b=a.stateNode;b=b&&b.__reactInternalMemoizedMergedChildContext||Qe;Re=L.current;J(L,b,a);J(M,M.current,a);return!0}\nfunction Ye(a,b,c){var d=a.stateNode;if(!d)throw t(Error(169));c?(b=We(a,b,Re),d.__reactInternalMemoizedMergedChildContext=b,H(M,a),H(L,a),J(L,b,a)):H(M,a);J(M,c,a)}\nvar Ze=q.unstable_runWithPriority,$e=q.unstable_scheduleCallback,af=q.unstable_cancelCallback,bf=q.unstable_shouldYield,cf=q.unstable_requestPaint,df=q.unstable_now,ef=q.unstable_getCurrentPriorityLevel,ff=q.unstable_ImmediatePriority,hf=q.unstable_UserBlockingPriority,jf=q.unstable_NormalPriority,kf=q.unstable_LowPriority,lf=q.unstable_IdlePriority,mf={},nf=void 0!==cf?cf:function(){},of=null,pf=null,qf=!1,rf=df(),sf=1E4>rf?df:function(){return df()-rf};\nfunction tf(){switch(ef()){case ff:return 99;case hf:return 98;case jf:return 97;case kf:return 96;case lf:return 95;default:throw t(Error(332));}}function uf(a){switch(a){case 99:return ff;case 98:return hf;case 97:return jf;case 96:return kf;case 95:return lf;default:throw t(Error(332));}}function vf(a,b){a=uf(a);return Ze(a,b)}function wf(a,b,c){a=uf(a);return $e(a,b,c)}function xf(a){null===of?(of=[a],pf=$e(ff,yf)):of.push(a);return mf}function O(){null!==pf&&af(pf);yf()}\nfunction yf(){if(!qf&&null!==of){qf=!0;var a=0;try{var b=of;vf(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});of=null}catch(c){throw null!==of&&(of=of.slice(a+1)),$e(ff,O),c;}finally{qf=!1}}}function zf(a,b){if(1073741823===b)return 99;if(1===b)return 95;a=10*(1073741821-b)-10*(1073741821-a);return 0>=a?99:250>=a?98:5250>=a?97:95}function Af(a,b){if(a&&a.defaultProps){b=m({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}\nfunction Bf(a){var b=a._result;switch(a._status){case 1:return b;case 2:throw b;case 0:throw b;default:a._status=0;b=a._ctor;b=b();b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)});switch(a._status){case 1:return a._result;case 2:throw a._result;}a._result=b;throw b;}}var Cf={current:null},Df=null,Ef=null,Ff=null;function Gf(){Ff=Ef=Df=null}\nfunction Hf(a,b){var c=a.type._context;J(Cf,c._currentValue,a);c._currentValue=b}function If(a){var b=Cf.current;H(Cf,a);a.type._context._currentValue=b}function Jf(a,b){for(;null!==a;){var c=a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}\nfunction Kf(a,b){Df=a;Ff=Ef=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(Lf=!0),a.firstContext=null)}function Mf(a,b){if(Ff!==a&&!1!==b&&0!==b){if(\"number\"!==typeof b||1073741823===b)Ff=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===Ef){if(null===Df)throw t(Error(308));Ef=b;Df.dependencies={expirationTime:0,firstContext:b,responders:null}}else Ef=Ef.next=b}return a._currentValue}var Nf=!1;\nfunction Of(a){return{baseState:a,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Pf(a){return{baseState:a.baseState,firstUpdate:a.firstUpdate,lastUpdate:a.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}\nfunction Qf(a,b){return{expirationTime:a,suspenseConfig:b,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Rf(a,b){null===a.lastUpdate?a.firstUpdate=a.lastUpdate=b:(a.lastUpdate.next=b,a.lastUpdate=b)}\nfunction Sf(a,b){var c=a.alternate;if(null===c){var d=a.updateQueue;var e=null;null===d&&(d=a.updateQueue=Of(a.memoizedState))}else d=a.updateQueue,e=c.updateQueue,null===d?null===e?(d=a.updateQueue=Of(a.memoizedState),e=c.updateQueue=Of(c.memoizedState)):d=a.updateQueue=Pf(e):null===e&&(e=c.updateQueue=Pf(d));null===e||d===e?Rf(d,b):null===d.lastUpdate||null===e.lastUpdate?(Rf(d,b),Rf(e,b)):(Rf(d,b),e.lastUpdate=b)}\nfunction Tf(a,b){var c=a.updateQueue;c=null===c?a.updateQueue=Of(a.memoizedState):Uf(a,c);null===c.lastCapturedUpdate?c.firstCapturedUpdate=c.lastCapturedUpdate=b:(c.lastCapturedUpdate.next=b,c.lastCapturedUpdate=b)}function Uf(a,b){var c=a.alternate;null!==c&&b===c.updateQueue&&(b=a.updateQueue=Pf(b));return b}\nfunction Vf(a,b,c,d,e,f){switch(c.tag){case 1:return a=c.payload,\"function\"===typeof a?a.call(f,d,e):a;case 3:a.effectTag=a.effectTag&-2049|64;case 0:a=c.payload;e=\"function\"===typeof a?a.call(f,d,e):a;if(null===e||void 0===e)break;return m({},d,e);case 2:Nf=!0}return d}\nfunction Wf(a,b,c,d,e){Nf=!1;b=Uf(a,b);for(var f=b.baseState,h=null,g=0,k=b.firstUpdate,l=f;null!==k;){var n=k.expirationTime;n<e?(null===h&&(h=k,f=l),g<n&&(g=n)):(Xf(n,k.suspenseConfig),l=Vf(a,b,k,l,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastEffect?b.firstEffect=b.lastEffect=k:(b.lastEffect.nextEffect=k,b.lastEffect=k)));k=k.next}n=null;for(k=b.firstCapturedUpdate;null!==k;){var z=k.expirationTime;z<e?(null===n&&(n=k,null===h&&(f=l)),g<z&&(g=z)):(l=Vf(a,b,k,l,c,d),null!==\nk.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastCapturedEffect?b.firstCapturedEffect=b.lastCapturedEffect=k:(b.lastCapturedEffect.nextEffect=k,b.lastCapturedEffect=k)));k=k.next}null===h&&(b.lastUpdate=null);null===n?b.lastCapturedUpdate=null:a.effectTag|=32;null===h&&null===n&&(f=l);b.baseState=f;b.firstUpdate=h;b.firstCapturedUpdate=n;a.expirationTime=g;a.memoizedState=l}\nfunction Yf(a,b,c){null!==b.firstCapturedUpdate&&(null!==b.lastUpdate&&(b.lastUpdate.next=b.firstCapturedUpdate,b.lastUpdate=b.lastCapturedUpdate),b.firstCapturedUpdate=b.lastCapturedUpdate=null);Zf(b.firstEffect,c);b.firstEffect=b.lastEffect=null;Zf(b.firstCapturedEffect,c);b.firstCapturedEffect=b.lastCapturedEffect=null}function Zf(a,b){for(;null!==a;){var c=a.callback;if(null!==c){a.callback=null;var d=b;if(\"function\"!==typeof c)throw t(Error(191),c);c.call(d)}a=a.nextEffect}}\nvar $f=Xb.ReactCurrentBatchConfig,ag=(new aa.Component).refs;function bg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:m({},b,c);a.memoizedState=c;d=a.updateQueue;null!==d&&0===a.expirationTime&&(d.baseState=c)}\nvar fg={isMounted:function(a){return(a=a._reactInternalFiber)?2===ld(a):!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=cg(),e=$f.suspense;d=dg(d,a,e);e=Qf(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Sf(a,e);eg(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=cg(),e=$f.suspense;d=dg(d,a,e);e=Qf(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Sf(a,e);eg(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=cg(),d=$f.suspense;\nc=dg(c,a,d);d=Qf(c,d);d.tag=2;void 0!==b&&null!==b&&(d.callback=b);Sf(a,d);eg(a,c)}};function gg(a,b,c,d,e,f,h){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,h):b.prototype&&b.prototype.isPureReactComponent?!jd(c,d)||!jd(e,f):!0}\nfunction hg(a,b,c){var d=!1,e=Qe;var f=b.contextType;\"object\"===typeof f&&null!==f?f=Mf(f):(e=N(b)?Re:L.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Se(a,e):Qe);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=fg;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction ig(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&fg.enqueueReplaceState(b,b.state,null)}\nfunction jg(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=ag;var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=Mf(f):(f=N(b)?Re:L.current,e.context=Se(a,f));f=a.updateQueue;null!==f&&(Wf(a,f,c,e,d),e.state=a.memoizedState);f=b.getDerivedStateFromProps;\"function\"===typeof f&&(bg(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==\ntypeof e.componentWillMount||(b=e.state,\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&fg.enqueueReplaceState(e,e.state,null),f=a.updateQueue,null!==f&&(Wf(a,f,c,e,d),e.state=a.memoizedState));\"function\"===typeof e.componentDidMount&&(a.effectTag|=4)}var kg=Array.isArray;\nfunction lg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;var d=void 0;if(c){if(1!==c.tag)throw t(Error(309));d=c.stateNode}if(!d)throw t(Error(147),a);var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===ag&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if(\"string\"!==typeof a)throw t(Error(284));if(!c._owner)throw t(Error(290),a);}return a}\nfunction mg(a,b){if(\"textarea\"!==a.type)throw t(Error(31),\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b,\"\");}\nfunction ng(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b,c){a=og(a,b,c);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=\n2,c):d;b.effectTag=2;return c}function h(b){a&&null===b.alternate&&(b.effectTag=2);return b}function g(a,b,c,d){if(null===b||6!==b.tag)return b=pg(c,a.mode,d),b.return=a,b;b=e(b,c,d);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props,d),d.ref=lg(a,b,c),d.return=a,d;d=qg(c.type,c.key,c.props,null,a.mode,d);d.ref=lg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==\nc.implementation)return b=rg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[],d);b.return=a;return b}function n(a,b,c,d,f){if(null===b||7!==b.tag)return b=sg(c,a.mode,d,f),b.return=a,b;b=e(b,c,d);b.return=a;return b}function z(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=pg(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case Zb:return c=qg(b.type,b.key,b.props,null,a.mode,c),c.ref=lg(a,null,b),c.return=a,c;case $b:return b=rg(b,a.mode,c),b.return=a,b}if(kg(b)||\nmc(b))return b=sg(b,a.mode,c,null),b.return=a,b;mg(a,b)}return null}function x(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:g(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case Zb:return c.key===e?c.type===ac?n(a,b,c.props.children,d,e):k(a,b,c,d):null;case $b:return c.key===e?l(a,b,c,d):null}if(kg(c)||mc(c))return null!==e?null:n(a,b,c,d,null);mg(a,c)}return null}function v(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=\na.get(c)||null,g(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case Zb:return a=a.get(null===d.key?c:d.key)||null,d.type===ac?n(b,a,d.props.children,e,d.key):k(b,a,d,e);case $b:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(kg(d)||mc(d))return a=a.get(c)||null,n(b,a,d,e,null);mg(b,d)}return null}function rb(e,h,g,k){for(var l=null,u=null,n=h,w=h=0,C=null;null!==n&&w<g.length;w++){n.index>w?(C=n,n=null):C=n.sibling;var p=x(e,n,g[w],k);if(null===p){null===n&&(n=C);break}a&&\nn&&null===p.alternate&&b(e,n);h=f(p,h,w);null===u?l=p:u.sibling=p;u=p;n=C}if(w===g.length)return c(e,n),l;if(null===n){for(;w<g.length;w++)n=z(e,g[w],k),null!==n&&(h=f(n,h,w),null===u?l=n:u.sibling=n,u=n);return l}for(n=d(e,n);w<g.length;w++)C=v(n,e,w,g[w],k),null!==C&&(a&&null!==C.alternate&&n.delete(null===C.key?w:C.key),h=f(C,h,w),null===u?l=C:u.sibling=C,u=C);a&&n.forEach(function(a){return b(e,a)});return l}function Be(e,h,g,k){var l=mc(g);if(\"function\"!==typeof l)throw t(Error(150));g=l.call(g);\nif(null==g)throw t(Error(151));for(var n=l=null,u=h,w=h=0,C=null,p=g.next();null!==u&&!p.done;w++,p=g.next()){u.index>w?(C=u,u=null):C=u.sibling;var r=x(e,u,p.value,k);if(null===r){null===u&&(u=C);break}a&&u&&null===r.alternate&&b(e,u);h=f(r,h,w);null===n?l=r:n.sibling=r;n=r;u=C}if(p.done)return c(e,u),l;if(null===u){for(;!p.done;w++,p=g.next())p=z(e,p.value,k),null!==p&&(h=f(p,h,w),null===n?l=p:n.sibling=p,n=p);return l}for(u=d(e,u);!p.done;w++,p=g.next())p=v(u,e,w,p.value,k),null!==p&&(a&&null!==\np.alternate&&u.delete(null===p.key?w:p.key),h=f(p,h,w),null===n?l=p:n.sibling=p,n=p);a&&u.forEach(function(a){return b(e,a)});return l}return function(a,d,f,g){var k=\"object\"===typeof f&&null!==f&&f.type===ac&&null===f.key;k&&(f=f.props.children);var l=\"object\"===typeof f&&null!==f;if(l)switch(f.$$typeof){case Zb:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){if(7===k.tag?f.type===ac:k.elementType===f.type){c(a,k.sibling);d=e(k,f.type===ac?f.props.children:f.props,g);d.ref=lg(a,k,f);d.return=a;a=d;break a}c(a,\nk);break}else b(a,k);k=k.sibling}f.type===ac?(d=sg(f.props.children,a.mode,g,f.key),d.return=a,a=d):(g=qg(f.type,f.key,f.props,null,a.mode,g),g.ref=lg(a,d,f),g.return=a,a=g)}return h(a);case $b:a:{for(k=f.key;null!==d;){if(d.key===k){if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[],g);d.return=a;a=d;break a}c(a,d);break}else b(a,d);d=d.sibling}d=rg(f,a.mode,g);d.return=a;a=d}return h(a)}if(\"string\"===typeof f||\n\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f,g),d.return=a,a=d):(c(a,d),d=pg(f,a.mode,g),d.return=a,a=d),h(a);if(kg(f))return rb(a,d,f,g);if(mc(f))return Be(a,d,f,g);l&&mg(a,f);if(\"undefined\"===typeof f&&!k)switch(a.tag){case 1:case 0:throw a=a.type,t(Error(152),a.displayName||a.name||\"Component\");}return c(a,d)}}var tg=ng(!0),ug=ng(!1),vg={},wg={current:vg},xg={current:vg},yg={current:vg};function zg(a){if(a===vg)throw t(Error(174));return a}\nfunction Ag(a,b){J(yg,b,a);J(xg,a,a);J(wg,vg,a);var c=b.nodeType;switch(c){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:te(null,\"\");break;default:c=8===c?b.parentNode:b,b=c.namespaceURI||null,c=c.tagName,b=te(b,c)}H(wg,a);J(wg,b,a)}function Bg(a){H(wg,a);H(xg,a);H(yg,a)}function Cg(a){zg(yg.current);var b=zg(wg.current);var c=te(b,a.type);b!==c&&(J(xg,a,a),J(wg,c,a))}function Dg(a){xg.current===a&&(H(wg,a),H(xg,a))}var Eg=1,Fg=1,Gg=2,P={current:0};\nfunction Hg(a){for(var b=a;null!==b;){if(13===b.tag){if(null!==b.memoizedState)return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}\nvar Ig=0,Jg=2,Kg=4,Lg=8,Mg=16,Ng=32,Og=64,Pg=128,Qg=Xb.ReactCurrentDispatcher,Rg=0,Sg=null,Q=null,Tg=null,Ug=null,R=null,Vg=null,Wg=0,Xg=null,Yg=0,Zg=!1,$g=null,ah=0;function bh(){throw t(Error(321));}function ch(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!hd(a[c],b[c]))return!1;return!0}\nfunction dh(a,b,c,d,e,f){Rg=f;Sg=b;Tg=null!==a?a.memoizedState:null;Qg.current=null===Tg?eh:fh;b=c(d,e);if(Zg){do Zg=!1,ah+=1,Tg=null!==a?a.memoizedState:null,Vg=Ug,Xg=R=Q=null,Qg.current=fh,b=c(d,e);while(Zg);$g=null;ah=0}Qg.current=hh;a=Sg;a.memoizedState=Ug;a.expirationTime=Wg;a.updateQueue=Xg;a.effectTag|=Yg;a=null!==Q&&null!==Q.next;Rg=0;Vg=R=Ug=Tg=Q=Sg=null;Wg=0;Xg=null;Yg=0;if(a)throw t(Error(300));return b}\nfunction ih(){Qg.current=hh;Rg=0;Vg=R=Ug=Tg=Q=Sg=null;Wg=0;Xg=null;Yg=0;Zg=!1;$g=null;ah=0}function jh(){var a={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};null===R?Ug=R=a:R=R.next=a;return R}function kh(){if(null!==Vg)R=Vg,Vg=R.next,Q=Tg,Tg=null!==Q?Q.next:null;else{if(null===Tg)throw t(Error(310));Q=Tg;var a={memoizedState:Q.memoizedState,baseState:Q.baseState,queue:Q.queue,baseUpdate:Q.baseUpdate,next:null};R=null===R?Ug=a:R.next=a;Tg=Q.next}return R}\nfunction lh(a,b){return\"function\"===typeof b?b(a):b}\nfunction mh(a){var b=kh(),c=b.queue;if(null===c)throw t(Error(311));c.lastRenderedReducer=a;if(0<ah){var d=c.dispatch;if(null!==$g){var e=$g.get(c);if(void 0!==e){$g.delete(c);var f=b.memoizedState;do f=a(f,e.action),e=e.next;while(null!==e);hd(f,b.memoizedState)||(Lf=!0);b.memoizedState=f;b.baseUpdate===c.last&&(b.baseState=f);c.lastRenderedState=f;return[f,d]}}return[b.memoizedState,d]}d=c.last;var h=b.baseUpdate;f=b.baseState;null!==h?(null!==d&&(d.next=null),d=h.next):d=null!==d?d.next:null;if(null!==\nd){var g=e=null,k=d,l=!1;do{var n=k.expirationTime;n<Rg?(l||(l=!0,g=h,e=f),n>Wg&&(Wg=n)):(Xf(n,k.suspenseConfig),f=k.eagerReducer===a?k.eagerState:a(f,k.action));h=k;k=k.next}while(null!==k&&k!==d);l||(g=h,e=f);hd(f,b.memoizedState)||(Lf=!0);b.memoizedState=f;b.baseUpdate=g;b.baseState=e;c.lastRenderedState=f}return[b.memoizedState,c.dispatch]}\nfunction nh(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};null===Xg?(Xg={lastEffect:null},Xg.lastEffect=a.next=a):(b=Xg.lastEffect,null===b?Xg.lastEffect=a.next=a:(c=b.next,b.next=a,a.next=c,Xg.lastEffect=a));return a}function oh(a,b,c,d){var e=jh();Yg|=a;e.memoizedState=nh(b,c,void 0,void 0===d?null:d)}\nfunction ph(a,b,c,d){var e=kh();d=void 0===d?null:d;var f=void 0;if(null!==Q){var h=Q.memoizedState;f=h.destroy;if(null!==d&&ch(d,h.deps)){nh(Ig,c,f,d);return}}Yg|=a;e.memoizedState=nh(b,c,f,d)}function qh(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function rh(){}\nfunction sh(a,b,c){if(!(25>ah))throw t(Error(301));var d=a.alternate;if(a===Sg||null!==d&&d===Sg)if(Zg=!0,a={expirationTime:Rg,suspenseConfig:null,action:c,eagerReducer:null,eagerState:null,next:null},null===$g&&($g=new Map),c=$g.get(b),void 0===c)$g.set(b,a);else{for(b=c;null!==b.next;)b=b.next;b.next=a}else{var e=cg(),f=$f.suspense;e=dg(e,a,f);f={expirationTime:e,suspenseConfig:f,action:c,eagerReducer:null,eagerState:null,next:null};var h=b.last;if(null===h)f.next=f;else{var g=h.next;null!==g&&\n(f.next=g);h.next=f}b.last=f;if(0===a.expirationTime&&(null===d||0===d.expirationTime)&&(d=b.lastRenderedReducer,null!==d))try{var k=b.lastRenderedState,l=d(k,c);f.eagerReducer=d;f.eagerState=l;if(hd(l,k))return}catch(n){}finally{}eg(a,e)}}\nvar hh={readContext:Mf,useCallback:bh,useContext:bh,useEffect:bh,useImperativeHandle:bh,useLayoutEffect:bh,useMemo:bh,useReducer:bh,useRef:bh,useState:bh,useDebugValue:bh,useResponder:bh},eh={readContext:Mf,useCallback:function(a,b){jh().memoizedState=[a,void 0===b?null:b];return a},useContext:Mf,useEffect:function(a,b){return oh(516,Pg|Og,a,b)},useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return oh(4,Kg|Ng,qh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return oh(4,\nKg|Ng,a,b)},useMemo:function(a,b){var c=jh();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=jh();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={last:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=sh.bind(null,Sg,a);return[d.memoizedState,a]},useRef:function(a){var b=jh();a={current:a};return b.memoizedState=a},useState:function(a){var b=jh();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue=\n{last:null,dispatch:null,lastRenderedReducer:lh,lastRenderedState:a};a=a.dispatch=sh.bind(null,Sg,a);return[b.memoizedState,a]},useDebugValue:rh,useResponder:kd},fh={readContext:Mf,useCallback:function(a,b){var c=kh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ch(b,d[1]))return d[0];c.memoizedState=[a,b];return a},useContext:Mf,useEffect:function(a,b){return ph(516,Pg|Og,a,b)},useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ph(4,Kg|Ng,qh.bind(null,\nb,a),c)},useLayoutEffect:function(a,b){return ph(4,Kg|Ng,a,b)},useMemo:function(a,b){var c=kh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ch(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a},useReducer:mh,useRef:function(){return kh().memoizedState},useState:function(a){return mh(lh,a)},useDebugValue:rh,useResponder:kd},th=null,uh=null,vh=!1;\nfunction wh(a,b){var c=xh(5,null,null,0);c.elementType=\"DELETED\";c.type=\"DELETED\";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function yh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}\nfunction zh(a){if(vh){var b=uh;if(b){var c=b;if(!yh(a,b)){b=Ne(c.nextSibling);if(!b||!yh(a,b)){a.effectTag|=2;vh=!1;th=a;return}wh(th,c)}th=a;uh=Ne(b.firstChild)}else a.effectTag|=2,vh=!1,th=a}}function Ah(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&18!==a.tag;)a=a.return;th=a}\nfunction Bh(a){if(a!==th)return!1;if(!vh)return Ah(a),vh=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!Ke(b,a.memoizedProps))for(b=uh;b;)wh(a,b),b=Ne(b.nextSibling);Ah(a);uh=th?Ne(a.stateNode.nextSibling):null;return!0}function Ch(){uh=th=null;vh=!1}var Dh=Xb.ReactCurrentOwner,Lf=!1;function S(a,b,c,d){b.child=null===a?ug(b,null,c,d):tg(b,a.child,c,d)}\nfunction Eh(a,b,c,d,e){c=c.render;var f=b.ref;Kf(b,e);d=dh(a,b,c,d,f,e);if(null!==a&&!Lf)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),Fh(a,b,e);b.effectTag|=1;S(a,b,d,e);return b.child}\nfunction Gh(a,b,c,d,e,f){if(null===a){var h=c.type;if(\"function\"===typeof h&&!Hh(h)&&void 0===h.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=h,Ih(a,b,h,d,e,f);a=qg(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}h=a.child;if(e<f&&(e=h.memoizedProps,c=c.compare,c=null!==c?c:jd,c(e,d)&&a.ref===b.ref))return Fh(a,b,f);b.effectTag|=1;a=og(h,d,f);a.ref=b.ref;a.return=b;return b.child=a}\nfunction Ih(a,b,c,d,e,f){return null!==a&&jd(a.memoizedProps,d)&&a.ref===b.ref&&(Lf=!1,e<f)?Fh(a,b,f):Jh(a,b,c,d,f)}function Kh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function Jh(a,b,c,d,e){var f=N(c)?Re:L.current;f=Se(b,f);Kf(b,e);c=dh(a,b,c,d,f,e);if(null!==a&&!Lf)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),Fh(a,b,e);b.effectTag|=1;S(a,b,c,e);return b.child}\nfunction Lh(a,b,c,d,e){if(N(c)){var f=!0;Xe(b)}else f=!1;Kf(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),hg(b,c,d,e),jg(b,c,d,e),d=!0;else if(null===a){var h=b.stateNode,g=b.memoizedProps;h.props=g;var k=h.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=Mf(l):(l=N(c)?Re:L.current,l=Se(b,l));var n=c.getDerivedStateFromProps,z=\"function\"===typeof n||\"function\"===typeof h.getSnapshotBeforeUpdate;z||\"function\"!==typeof h.UNSAFE_componentWillReceiveProps&&\n\"function\"!==typeof h.componentWillReceiveProps||(g!==d||k!==l)&&ig(b,h,d,l);Nf=!1;var x=b.memoizedState;k=h.state=x;var v=b.updateQueue;null!==v&&(Wf(b,v,d,h,e),k=b.memoizedState);g!==d||x!==k||M.current||Nf?(\"function\"===typeof n&&(bg(b,c,n,d),k=b.memoizedState),(g=Nf||gg(b,c,g,d,x,k,l))?(z||\"function\"!==typeof h.UNSAFE_componentWillMount&&\"function\"!==typeof h.componentWillMount||(\"function\"===typeof h.componentWillMount&&h.componentWillMount(),\"function\"===typeof h.UNSAFE_componentWillMount&&\nh.UNSAFE_componentWillMount()),\"function\"===typeof h.componentDidMount&&(b.effectTag|=4)):(\"function\"===typeof h.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=k),h.props=d,h.state=k,h.context=l,d=g):(\"function\"===typeof h.componentDidMount&&(b.effectTag|=4),d=!1)}else h=b.stateNode,g=b.memoizedProps,h.props=b.type===b.elementType?g:Af(b.type,g),k=h.context,l=c.contextType,\"object\"===typeof l&&null!==l?l=Mf(l):(l=N(c)?Re:L.current,l=Se(b,l)),n=c.getDerivedStateFromProps,(z=\n\"function\"===typeof n||\"function\"===typeof h.getSnapshotBeforeUpdate)||\"function\"!==typeof h.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof h.componentWillReceiveProps||(g!==d||k!==l)&&ig(b,h,d,l),Nf=!1,k=b.memoizedState,x=h.state=k,v=b.updateQueue,null!==v&&(Wf(b,v,d,h,e),x=b.memoizedState),g!==d||k!==x||M.current||Nf?(\"function\"===typeof n&&(bg(b,c,n,d),x=b.memoizedState),(n=Nf||gg(b,c,g,d,k,x,l))?(z||\"function\"!==typeof h.UNSAFE_componentWillUpdate&&\"function\"!==typeof h.componentWillUpdate||\n(\"function\"===typeof h.componentWillUpdate&&h.componentWillUpdate(d,x,l),\"function\"===typeof h.UNSAFE_componentWillUpdate&&h.UNSAFE_componentWillUpdate(d,x,l)),\"function\"===typeof h.componentDidUpdate&&(b.effectTag|=4),\"function\"===typeof h.getSnapshotBeforeUpdate&&(b.effectTag|=256)):(\"function\"!==typeof h.componentDidUpdate||g===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),\"function\"!==typeof h.getSnapshotBeforeUpdate||g===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),b.memoizedProps=\nd,b.memoizedState=x),h.props=d,h.state=x,h.context=l,d=n):(\"function\"!==typeof h.componentDidUpdate||g===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),\"function\"!==typeof h.getSnapshotBeforeUpdate||g===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),d=!1);return Mh(a,b,c,d,f,e)}\nfunction Mh(a,b,c,d,e,f){Kh(a,b);var h=0!==(b.effectTag&64);if(!d&&!h)return e&&Ye(b,c,!1),Fh(a,b,f);d=b.stateNode;Dh.current=b;var g=h&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.effectTag|=1;null!==a&&h?(b.child=tg(b,a.child,null,f),b.child=tg(b,null,g,f)):S(a,b,g,f);b.memoizedState=d.state;e&&Ye(b,c,!0);return b.child}function Nh(a){var b=a.stateNode;b.pendingContext?Ve(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Ve(a,b.context,!1);Ag(a,b.containerInfo)}\nvar Oh={};\nfunction Ph(a,b,c){var d=b.mode,e=b.pendingProps,f=P.current,h=null,g=!1,k;(k=0!==(b.effectTag&64))||(k=0!==(f&Gg)&&(null===a||null!==a.memoizedState));k?(h=Oh,g=!0,b.effectTag&=-65):null!==a&&null===a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=Fg);f&=Eg;J(P,f,b);if(null===a)if(g){e=e.fallback;a=sg(null,d,0,null);a.return=b;if(0===(b.mode&2))for(g=null!==b.memoizedState?b.child.child:b.child,a.child=g;null!==g;)g.return=a,g=g.sibling;c=sg(e,d,c,null);c.return=b;a.sibling=\nc;d=a}else d=c=ug(b,null,e.children,c);else{if(null!==a.memoizedState)if(f=a.child,d=f.sibling,g){e=e.fallback;c=og(f,f.pendingProps,0);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==f.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;e=og(d,e,d.expirationTime);e.return=b;c.sibling=e;d=c;c.childExpirationTime=0;c=e}else d=c=tg(b,f.child,e.children,c);else if(f=a.child,g){g=e.fallback;e=sg(null,d,0,null);e.return=b;e.child=f;null!==f&&(f.return=e);if(0===(b.mode&\n2))for(f=null!==b.memoizedState?b.child.child:b.child,e.child=f;null!==f;)f.return=e,f=f.sibling;c=sg(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;d=e;e.childExpirationTime=0}else c=d=tg(b,f,e.children,c);b.stateNode=a.stateNode}b.memoizedState=h;b.child=d;return c}function Qh(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,last:d,tail:c,tailExpiration:0,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.last=d,f.tail=c,f.tailExpiration=0,f.tailMode=e)}\nfunction Rh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;S(a,b,d.children,c);d=P.current;if(0!==(d&Gg))d=d&Eg|Gg,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag){if(null!==a.memoizedState){a.expirationTime<c&&(a.expirationTime=c);var h=a.alternate;null!==h&&h.expirationTime<c&&(h.expirationTime=c);Jf(a.return,c)}}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===\nb)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=Eg}J(P,d,b);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)d=c.alternate,null!==d&&null===Hg(d)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Qh(b,!1,e,c,f);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){d=e.alternate;if(null!==d&&null===Hg(d)){b.child=e;break}d=e.sibling;e.sibling=c;c=e;e=d}Qh(b,!0,c,null,f);break;case \"together\":Qh(b,\n!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function Fh(a,b,c){null!==a&&(b.dependencies=a.dependencies);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw t(Error(153));if(null!==b.child){a=b.child;c=og(a,a.pendingProps,a.expirationTime);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=og(a,a.pendingProps,a.expirationTime),c.return=b;c.sibling=null}return b.child}function Sh(a){a.effectTag|=4}\nvar Th=void 0,Uh=void 0,Vh=void 0,Wh=void 0;Th=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(20===c.tag)a.appendChild(c.stateNode.instance);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Uh=function(){};\nVh=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var h=b.stateNode;zg(wg.current);a=null;switch(c){case \"input\":f=Bc(h,f);d=Bc(h,d);a=[];break;case \"option\":f=le(h,f);d=le(h,d);a=[];break;case \"select\":f=m({},f,{value:void 0});d=m({},d,{value:void 0});a=[];break;case \"textarea\":f=ne(h,f);d=ne(h,d);a=[];break;default:\"function\"!==typeof f.onClick&&\"function\"===typeof d.onClick&&(h.onclick=Ge)}De(c,d);h=c=void 0;var g=null;for(c in f)if(!d.hasOwnProperty(c)&&f.hasOwnProperty(c)&&null!=f[c])if(\"style\"===\nc){var k=f[c];for(h in k)k.hasOwnProperty(h)&&(g||(g={}),g[h]=\"\")}else\"dangerouslySetInnerHTML\"!==c&&\"children\"!==c&&\"suppressContentEditableWarning\"!==c&&\"suppressHydrationWarning\"!==c&&\"autoFocus\"!==c&&(ia.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in d){var l=d[c];k=null!=f?f[c]:void 0;if(d.hasOwnProperty(c)&&l!==k&&(null!=l||null!=k))if(\"style\"===c)if(k){for(h in k)!k.hasOwnProperty(h)||l&&l.hasOwnProperty(h)||(g||(g={}),g[h]=\"\");for(h in l)l.hasOwnProperty(h)&&k[h]!==l[h]&&(g||\n(g={}),g[h]=l[h])}else g||(a||(a=[]),a.push(c,g)),g=l;else\"dangerouslySetInnerHTML\"===c?(l=l?l.__html:void 0,k=k?k.__html:void 0,null!=l&&k!==l&&(a=a||[]).push(c,\"\"+l)):\"children\"===c?k===l||\"string\"!==typeof l&&\"number\"!==typeof l||(a=a||[]).push(c,\"\"+l):\"suppressContentEditableWarning\"!==c&&\"suppressHydrationWarning\"!==c&&(ia.hasOwnProperty(c)?(null!=l&&Fe(e,c),a||k===l||(a=[])):(a=a||[]).push(c,l))}g&&(a=a||[]).push(\"style\",g);e=a;(b.updateQueue=e)&&Sh(b)}};Wh=function(a,b,c,d){c!==d&&Sh(b)};\nfunction $h(a,b){switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction ai(a){switch(a.tag){case 1:N(a.type)&&Te(a);var b=a.effectTag;return b&2048?(a.effectTag=b&-2049|64,a):null;case 3:Bg(a);Ue(a);b=a.effectTag;if(0!==(b&64))throw t(Error(285));a.effectTag=b&-2049|64;return a;case 5:return Dg(a),null;case 13:return H(P,a),b=a.effectTag,b&2048?(a.effectTag=b&-2049|64,a):null;case 18:return null;case 19:return H(P,a),null;case 4:return Bg(a),null;case 10:return If(a),null;default:return null}}function bi(a,b){return{value:a,source:b,stack:pc(b)}}\nvar ci=\"function\"===typeof WeakSet?WeakSet:Set;function di(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=pc(c));null!==c&&oc(c.type);b=b.value;null!==a&&1===a.tag&&oc(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function ei(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){fi(a,c)}}function gi(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){fi(a,c)}else b.current=null}\nfunction hi(a,b,c){c=c.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do{if((d.tag&a)!==Ig){var e=d.destroy;d.destroy=void 0;void 0!==e&&e()}(d.tag&b)!==Ig&&(e=d.create,d.destroy=e());d=d.next}while(d!==c)}}\nfunction ii(a,b){\"function\"===typeof ji&&ji(a);switch(a.tag){case 0:case 11:case 14:case 15:var c=a.updateQueue;if(null!==c&&(c=c.lastEffect,null!==c)){var d=c.next;vf(97<b?97:b,function(){var b=d;do{var c=b.destroy;if(void 0!==c){var h=a;try{c()}catch(g){fi(h,g)}}b=b.next}while(b!==d)})}break;case 1:gi(a);b=a.stateNode;\"function\"===typeof b.componentWillUnmount&&ei(a,b);break;case 5:gi(a);break;case 4:ki(a,b)}}\nfunction li(a,b){for(var c=a;;)if(ii(c,b),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}function mi(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction ni(a){a:{for(var b=a.return;null!==b;){if(mi(b)){var c=b;break a}b=b.return}throw t(Error(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw t(Error(161));}c.effectTag&16&&(we(b,\"\"),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||mi(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;\nif(null===c.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}for(var e=a;;){var f=5===e.tag||6===e.tag;if(f||20===e.tag){var h=f?e.stateNode:e.stateNode.instance;if(c)if(d){f=b;var g=h;h=c;8===f.nodeType?f.parentNode.insertBefore(g,h):f.insertBefore(g,h)}else b.insertBefore(h,c);else d?(g=b,8===g.nodeType?(f=g.parentNode,f.insertBefore(h,g)):(f=g,f.appendChild(h)),g=g._reactRootContainer,null!==g&&void 0!==g||null!==f.onclick||(f.onclick=Ge)):\nb.appendChild(h)}else if(4!==e.tag&&null!==e.child){e.child.return=e;e=e.child;continue}if(e===a)break;for(;null===e.sibling;){if(null===e.return||e.return===a)return;e=e.return}e.sibling.return=e.return;e=e.sibling}}\nfunction ki(a,b){for(var c=a,d=!1,e=void 0,f=void 0;;){if(!d){d=c.return;a:for(;;){if(null===d)throw t(Error(160));e=d.stateNode;switch(d.tag){case 5:f=!1;break a;case 3:e=e.containerInfo;f=!0;break a;case 4:e=e.containerInfo;f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag)if(li(c,b),f){var h=e,g=c.stateNode;8===h.nodeType?h.parentNode.removeChild(g):h.removeChild(g)}else e.removeChild(c.stateNode);else if(20===c.tag)g=c.stateNode.instance,li(c,b),f?(h=e,8===h.nodeType?h.parentNode.removeChild(g):\nh.removeChild(g)):e.removeChild(g);else if(4===c.tag){if(null!==c.child){e=c.stateNode.containerInfo;f=!0;c.child.return=c;c=c.child;continue}}else if(ii(c,b),null!==c.child){c.child.return=c;c=c.child;continue}if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return;4===c.tag&&(d=!1)}c.sibling.return=c.return;c=c.sibling}}\nfunction oi(a,b){switch(b.tag){case 0:case 11:case 14:case 15:hi(Kg,Lg,b);break;case 1:break;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[Ga]=d;\"input\"===a&&\"radio\"===d.type&&null!=d.name&&Dc(c,d);Ee(a,e);b=Ee(a,d);for(e=0;e<f.length;e+=2){var h=f[e],g=f[e+1];\"style\"===h?Ae(c,g):\"dangerouslySetInnerHTML\"===h?ve(c,g):\"children\"===h?we(c,g):zc(c,h,g,b)}switch(a){case \"input\":Ec(c,d);break;case \"textarea\":pe(c,\nd);break;case \"select\":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?me(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?me(c,!!d.multiple,d.defaultValue,!0):me(c,!!d.multiple,d.multiple?[]:\"\",!1))}}}break;case 6:if(null===b.stateNode)throw t(Error(162));b.stateNode.nodeValue=b.memoizedProps;break;case 3:break;case 12:break;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,pi=sf());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=\nf.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty(\"display\")?e.display:null,f.style.display=ze(\"display\",e));else if(6===a.tag)a.stateNode.nodeValue=d?\"\":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break a;for(;null===a.sibling;){if(null===\na.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}qi(b);break;case 19:qi(b);break;case 17:break;case 20:break;default:throw t(Error(163));}}function qi(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new ci);b.forEach(function(b){var d=ri.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}var si=\"function\"===typeof WeakMap?WeakMap:Map;\nfunction ti(a,b,c){c=Qf(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){ui||(ui=!0,vi=d);di(a,b)};return c}\nfunction wi(a,b,c){c=Qf(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){di(a,b);return d(e)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){\"function\"!==typeof d&&(null===xi?xi=new Set([this]):xi.add(this),di(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nvar yi=Math.ceil,zi=Xb.ReactCurrentDispatcher,Ai=Xb.ReactCurrentOwner,T=0,Bi=8,Ci=16,Di=32,Ei=0,Fi=1,Gi=2,Hi=3,Ii=4,U=T,Ji=null,V=null,W=0,X=Ei,Ki=1073741823,Li=1073741823,Mi=null,Ni=!1,pi=0,Oi=500,Y=null,ui=!1,vi=null,xi=null,Pi=!1,Qi=null,Ri=90,Si=0,Ti=null,Ui=0,Vi=null,Wi=0;function cg(){return(U&(Ci|Di))!==T?1073741821-(sf()/10|0):0!==Wi?Wi:Wi=1073741821-(sf()/10|0)}\nfunction dg(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=tf();if(0===(b&4))return 99===d?1073741823:1073741822;if((U&Ci)!==T)return W;if(null!==c)a=1073741821-25*(((1073741821-a+(c.timeoutMs|0||5E3)/10)/25|0)+1);else switch(d){case 99:a=1073741823;break;case 98:a=1073741821-10*(((1073741821-a+15)/10|0)+1);break;case 97:case 96:a=1073741821-25*(((1073741821-a+500)/25|0)+1);break;case 95:a=1;break;default:throw t(Error(326));}null!==Ji&&a===W&&--a;return a}var Xi=0;\nfunction eg(a,b){if(50<Ui)throw Ui=0,Vi=null,t(Error(185));a=Yi(a,b);if(null!==a){a.pingTime=0;var c=tf();if(1073741823===b)if((U&Bi)!==T&&(U&(Ci|Di))===T)for(var d=Z(a,1073741823,!0);null!==d;)d=d(!0);else Zi(a,99,1073741823),U===T&&O();else Zi(a,c,b);(U&4)===T||98!==c&&99!==c||(null===Ti?Ti=new Map([[a,b]]):(c=Ti.get(a),(void 0===c||c>b)&&Ti.set(a,b)))}}\nfunction Yi(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&(b>e.firstPendingTime&&(e.firstPendingTime=b),a=e.lastPendingTime,0===a||b<a)&&(e.lastPendingTime=\nb);return e}function Zi(a,b,c){if(a.callbackExpirationTime<c){var d=a.callbackNode;null!==d&&d!==mf&&af(d);a.callbackExpirationTime=c;1073741823===c?a.callbackNode=xf($i.bind(null,a,Z.bind(null,a,c))):(d=null,1!==c&&(d={timeout:10*(1073741821-c)-sf()}),a.callbackNode=wf(b,$i.bind(null,a,Z.bind(null,a,c)),d))}}function $i(a,b,c){var d=a.callbackNode,e=null;try{return e=b(c),null!==e?$i.bind(null,a,e):null}finally{null===e&&d===a.callbackNode&&(a.callbackNode=null,a.callbackExpirationTime=0)}}\nfunction aj(){(U&(1|Ci|Di))===T&&(bj(),cj())}function dj(a,b){var c=a.firstBatch;return null!==c&&c._defer&&c._expirationTime>=b?(wf(97,function(){c._onComplete();return null}),!0):!1}function bj(){if(null!==Ti){var a=Ti;Ti=null;a.forEach(function(a,c){xf(Z.bind(null,c,a))});O()}}function ej(a,b){var c=U;U|=1;try{return a(b)}finally{U=c,U===T&&O()}}function fj(a,b,c,d){var e=U;U|=4;try{return vf(98,a.bind(null,b,c,d))}finally{U=e,U===T&&O()}}\nfunction gj(a,b){var c=U;U&=-2;U|=Bi;try{return a(b)}finally{U=c,U===T&&O()}}\nfunction hj(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Me(c));if(null!==V)for(c=V.return;null!==c;){var d=c;switch(d.tag){case 1:var e=d.type.childContextTypes;null!==e&&void 0!==e&&Te(d);break;case 3:Bg(d);Ue(d);break;case 5:Dg(d);break;case 4:Bg(d);break;case 13:H(P,d);break;case 19:H(P,d);break;case 10:If(d)}c=c.return}Ji=a;V=og(a.current,null,b);W=b;X=Ei;Li=Ki=1073741823;Mi=null;Ni=!1}\nfunction Z(a,b,c){if((U&(Ci|Di))!==T)throw t(Error(327));if(a.firstPendingTime<b)return null;if(c&&a.finishedExpirationTime===b)return ij.bind(null,a);cj();if(a!==Ji||b!==W)hj(a,b);else if(X===Hi)if(Ni)hj(a,b);else{var d=a.lastPendingTime;if(d<b)return Z.bind(null,a,d)}if(null!==V){d=U;U|=Ci;var e=zi.current;null===e&&(e=hh);zi.current=hh;if(c){if(1073741823!==b){var f=cg();if(f<b)return U=d,Gf(),zi.current=e,Z.bind(null,a,f)}}else Wi=0;do try{if(c)for(;null!==V;)V=jj(V);else for(;null!==V&&!bf();)V=\njj(V);break}catch(rb){Gf();ih();f=V;if(null===f||null===f.return)throw hj(a,b),U=d,rb;a:{var h=a,g=f.return,k=f,l=rb,n=W;k.effectTag|=1024;k.firstEffect=k.lastEffect=null;if(null!==l&&\"object\"===typeof l&&\"function\"===typeof l.then){var z=l,x=0!==(P.current&Fg);l=g;do{var v;if(v=13===l.tag)null!==l.memoizedState?v=!1:(v=l.memoizedProps,v=void 0===v.fallback?!1:!0!==v.unstable_avoidThisFallback?!0:x?!1:!0);if(v){g=l.updateQueue;null===g?(g=new Set,g.add(z),l.updateQueue=g):g.add(z);if(0===(l.mode&\n2)){l.effectTag|=64;k.effectTag&=-1957;1===k.tag&&(null===k.alternate?k.tag=17:(n=Qf(1073741823,null),n.tag=2,Sf(k,n)));k.expirationTime=1073741823;break a}k=h;h=n;x=k.pingCache;null===x?(x=k.pingCache=new si,g=new Set,x.set(z,g)):(g=x.get(z),void 0===g&&(g=new Set,x.set(z,g)));g.has(h)||(g.add(h),k=kj.bind(null,k,z,h),z.then(k,k));l.effectTag|=2048;l.expirationTime=n;break a}l=l.return}while(null!==l);l=Error((oc(k.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\"+\npc(k))}X!==Ii&&(X=Fi);l=bi(l,k);k=g;do{switch(k.tag){case 3:k.effectTag|=2048;k.expirationTime=n;n=ti(k,l,n);Tf(k,n);break a;case 1:if(z=l,h=k.type,g=k.stateNode,0===(k.effectTag&64)&&(\"function\"===typeof h.getDerivedStateFromError||null!==g&&\"function\"===typeof g.componentDidCatch&&(null===xi||!xi.has(g)))){k.effectTag|=2048;k.expirationTime=n;n=wi(k,z,n);Tf(k,n);break a}}k=k.return}while(null!==k)}V=lj(f)}while(1);U=d;Gf();zi.current=e;if(null!==V)return Z.bind(null,a,b)}a.finishedWork=a.current.alternate;\na.finishedExpirationTime=b;if(dj(a,b))return null;Ji=null;switch(X){case Ei:throw t(Error(328));case Fi:return d=a.lastPendingTime,d<b?Z.bind(null,a,d):c?ij.bind(null,a):(hj(a,b),xf(Z.bind(null,a,b)),null);case Gi:if(1073741823===Ki&&!c&&(c=pi+Oi-sf(),10<c)){if(Ni)return hj(a,b),Z.bind(null,a,b);d=a.lastPendingTime;if(d<b)return Z.bind(null,a,d);a.timeoutHandle=Le(ij.bind(null,a),c);return null}return ij.bind(null,a);case Hi:if(!c){if(Ni)return hj(a,b),Z.bind(null,a,b);c=a.lastPendingTime;if(c<b)return Z.bind(null,\na,c);1073741823!==Li?c=10*(1073741821-Li)-sf():1073741823===Ki?c=0:(c=10*(1073741821-Ki)-5E3,d=sf(),b=10*(1073741821-b)-d,c=d-c,0>c&&(c=0),c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3E3>c?3E3:4320>c?4320:1960*yi(c/1960))-c,b<c&&(c=b));if(10<c)return a.timeoutHandle=Le(ij.bind(null,a),c),null}return ij.bind(null,a);case Ii:return!c&&1073741823!==Ki&&null!==Mi&&(d=Ki,e=Mi,b=e.busyMinDurationMs|0,0>=b?b=0:(c=e.busyDelayMs|0,d=sf()-(10*(1073741821-d)-(e.timeoutMs|0||5E3)),b=d<=c?0:c+b-d),10<b)?(a.timeoutHandle=\nLe(ij.bind(null,a),b),null):ij.bind(null,a);default:throw t(Error(329));}}function Xf(a,b){a<Ki&&1<a&&(Ki=a);null!==b&&a<Li&&1<a&&(Li=a,Mi=b)}function jj(a){var b=mj(a.alternate,a,W);a.memoizedProps=a.pendingProps;null===b&&(b=lj(a));Ai.current=null;return b}\nfunction lj(a){V=a;do{var b=V.alternate;a=V.return;if(0===(V.effectTag&1024)){a:{var c=b;b=V;var d=W,e=b.pendingProps;switch(b.tag){case 2:break;case 16:break;case 15:case 0:break;case 1:N(b.type)&&Te(b);break;case 3:Bg(b);Ue(b);d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===c||null===c.child)Bh(b),b.effectTag&=-3;Uh(b);break;case 5:Dg(b);d=zg(yg.current);var f=b.type;if(null!==c&&null!=b.stateNode)Vh(c,b,f,e,d),c.ref!==b.ref&&(b.effectTag|=128);else if(e){var h=\nzg(wg.current);if(Bh(b)){c=b;e=void 0;f=c.stateNode;var g=c.type,k=c.memoizedProps;f[Fa]=c;f[Ga]=k;switch(g){case \"iframe\":case \"object\":case \"embed\":G(\"load\",f);break;case \"video\":case \"audio\":for(var l=0;l<bb.length;l++)G(bb[l],f);break;case \"source\":G(\"error\",f);break;case \"img\":case \"image\":case \"link\":G(\"error\",f);G(\"load\",f);break;case \"form\":G(\"reset\",f);G(\"submit\",f);break;case \"details\":G(\"toggle\",f);break;case \"input\":Cc(f,k);G(\"invalid\",f);Fe(d,\"onChange\");break;case \"select\":f._wrapperState=\n{wasMultiple:!!k.multiple};G(\"invalid\",f);Fe(d,\"onChange\");break;case \"textarea\":oe(f,k),G(\"invalid\",f),Fe(d,\"onChange\")}De(g,k);l=null;for(e in k)k.hasOwnProperty(e)&&(h=k[e],\"children\"===e?\"string\"===typeof h?f.textContent!==h&&(l=[\"children\",h]):\"number\"===typeof h&&f.textContent!==\"\"+h&&(l=[\"children\",\"\"+h]):ia.hasOwnProperty(e)&&null!=h&&Fe(d,e));switch(g){case \"input\":Vb(f);Gc(f,k,!0);break;case \"textarea\":Vb(f);qe(f,k);break;case \"select\":case \"option\":break;default:\"function\"===typeof k.onClick&&\n(f.onclick=Ge)}d=l;c.updateQueue=d;null!==d&&Sh(b)}else{k=f;c=e;g=b;l=9===d.nodeType?d:d.ownerDocument;h===re.html&&(h=se(k));h===re.html?\"script\"===k?(k=l.createElement(\"div\"),k.innerHTML=\"<script>\\x3c/script>\",l=k.removeChild(k.firstChild)):\"string\"===typeof c.is?l=l.createElement(k,{is:c.is}):(l=l.createElement(k),\"select\"===k&&(k=l,c.multiple?k.multiple=!0:c.size&&(k.size=c.size))):l=l.createElementNS(h,k);k=l;k[Fa]=g;k[Ga]=c;c=k;Th(c,b,!1,!1);g=c;var n=d,z=Ee(f,e);switch(f){case \"iframe\":case \"object\":case \"embed\":G(\"load\",\ng);d=e;break;case \"video\":case \"audio\":for(d=0;d<bb.length;d++)G(bb[d],g);d=e;break;case \"source\":G(\"error\",g);d=e;break;case \"img\":case \"image\":case \"link\":G(\"error\",g);G(\"load\",g);d=e;break;case \"form\":G(\"reset\",g);G(\"submit\",g);d=e;break;case \"details\":G(\"toggle\",g);d=e;break;case \"input\":Cc(g,e);d=Bc(g,e);G(\"invalid\",g);Fe(n,\"onChange\");break;case \"option\":d=le(g,e);break;case \"select\":g._wrapperState={wasMultiple:!!e.multiple};d=m({},e,{value:void 0});G(\"invalid\",g);Fe(n,\"onChange\");break;case \"textarea\":oe(g,\ne);d=ne(g,e);G(\"invalid\",g);Fe(n,\"onChange\");break;default:d=e}De(f,d);k=void 0;l=f;h=g;var x=d;for(k in x)if(x.hasOwnProperty(k)){var v=x[k];\"style\"===k?Ae(h,v):\"dangerouslySetInnerHTML\"===k?(v=v?v.__html:void 0,null!=v&&ve(h,v)):\"children\"===k?\"string\"===typeof v?(\"textarea\"!==l||\"\"!==v)&&we(h,v):\"number\"===typeof v&&we(h,\"\"+v):\"suppressContentEditableWarning\"!==k&&\"suppressHydrationWarning\"!==k&&\"autoFocus\"!==k&&(ia.hasOwnProperty(k)?null!=v&&Fe(n,k):null!=v&&zc(h,k,v,z))}switch(f){case \"input\":Vb(g);\nGc(g,e,!1);break;case \"textarea\":Vb(g);qe(g,e);break;case \"option\":null!=e.value&&g.setAttribute(\"value\",\"\"+Ac(e.value));break;case \"select\":d=g;g=e;d.multiple=!!g.multiple;k=g.value;null!=k?me(d,!!g.multiple,k,!1):null!=g.defaultValue&&me(d,!!g.multiple,g.defaultValue,!0);break;default:\"function\"===typeof d.onClick&&(g.onclick=Ge)}Je(f,e)&&Sh(b);b.stateNode=c}null!==b.ref&&(b.effectTag|=128)}else if(null===b.stateNode)throw t(Error(166));break;case 6:if(c&&null!=b.stateNode)Wh(c,b,c.memoizedProps,\ne);else{if(\"string\"!==typeof e&&null===b.stateNode)throw t(Error(166));c=zg(yg.current);zg(wg.current);Bh(b)?(d=b.stateNode,c=b.memoizedProps,d[Fa]=b,d.nodeValue!==c&&Sh(b)):(d=b,c=(9===c.nodeType?c:c.ownerDocument).createTextNode(e),c[Fa]=b,d.stateNode=c)}break;case 11:break;case 13:H(P,b);e=b.memoizedState;if(0!==(b.effectTag&64)){b.expirationTime=d;break a}d=null!==e;e=!1;null===c?Bh(b):(f=c.memoizedState,e=null!==f,d||null===f||(f=c.child.sibling,null!==f&&(g=b.firstEffect,null!==g?(b.firstEffect=\nf,f.nextEffect=g):(b.firstEffect=b.lastEffect=f,f.nextEffect=null),f.effectTag=8)));if(d&&!e&&0!==(b.mode&2))if(null===c&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(P.current&Fg))X===Ei&&(X=Gi);else if(X===Ei||X===Gi)X=Hi;if(d||e)b.effectTag|=4;break;case 7:break;case 8:break;case 12:break;case 4:Bg(b);Uh(b);break;case 10:If(b);break;case 9:break;case 14:break;case 17:N(b.type)&&Te(b);break;case 18:break;case 19:H(P,b);e=b.memoizedState;if(null===e)break;f=0!==(b.effectTag&64);g=e.rendering;\nif(null===g)if(f)$h(e,!1);else{if(X!==Ei||null!==c&&0!==(c.effectTag&64))for(c=b.child;null!==c;){g=Hg(c);if(null!==g){b.effectTag|=64;$h(e,!1);c=g.updateQueue;null!==c&&(b.updateQueue=c,b.effectTag|=4);b.firstEffect=b.lastEffect=null;for(c=b.child;null!==c;)e=c,f=d,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,g=e.alternate,null===g?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=\ng.childExpirationTime,e.expirationTime=g.expirationTime,e.child=g.child,e.memoizedProps=g.memoizedProps,e.memoizedState=g.memoizedState,e.updateQueue=g.updateQueue,f=g.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),c=c.sibling;J(P,P.current&Eg|Gg,b);b=b.child;break a}c=c.sibling}}else{if(!f)if(c=Hg(g),null!==c){if(b.effectTag|=64,f=!0,$h(e,!0),null===e.tail&&\"hidden\"===e.tailMode){d=c.updateQueue;null!==d&&(b.updateQueue=\nd,b.effectTag|=4);b=b.lastEffect=e.lastEffect;null!==b&&(b.nextEffect=null);break}}else sf()>e.tailExpiration&&1<d&&(b.effectTag|=64,f=!0,$h(e,!1),b.expirationTime=b.childExpirationTime=d-1);e.isBackwards?(g.sibling=b.child,b.child=g):(d=e.last,null!==d?d.sibling=g:b.child=g,e.last=g)}if(null!==e.tail){0===e.tailExpiration&&(e.tailExpiration=sf()+500);d=e.tail;e.rendering=d;e.tail=d.sibling;e.lastEffect=b.lastEffect;d.sibling=null;c=P.current;c=f?c&Eg|Gg:c&Eg;J(P,c,b);b=d;break a}break;case 20:break;\ndefault:throw t(Error(156));}b=null}d=V;if(1===W||1!==d.childExpirationTime){c=0;for(e=d.child;null!==e;)f=e.expirationTime,g=e.childExpirationTime,f>c&&(c=f),g>c&&(c=g),e=e.sibling;d.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&1024)&&(null===a.firstEffect&&(a.firstEffect=V.firstEffect),null!==V.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=V.firstEffect),a.lastEffect=V.lastEffect),1<V.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=V:a.firstEffect=V,\na.lastEffect=V))}else{b=ai(V,W);if(null!==b)return b.effectTag&=1023,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=1024)}b=V.sibling;if(null!==b)return b;V=a}while(null!==V);X===Ei&&(X=Ii);return null}function ij(a){var b=tf();vf(99,nj.bind(null,a,b));null!==Qi&&wf(97,function(){cj();return null});return null}\nfunction nj(a,b){cj();if((U&(Ci|Di))!==T)throw t(Error(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw t(Error(177));a.callbackNode=null;a.callbackExpirationTime=0;var e=c.expirationTime,f=c.childExpirationTime;e=f>e?f:e;a.firstPendingTime=e;e<a.lastPendingTime&&(a.lastPendingTime=e);a===Ji&&(V=Ji=null,W=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;\nif(null!==e){f=U;U|=Di;Ai.current=null;He=Qd;var h=ae();if(be(h)){if(\"selectionStart\"in h)var g={start:h.selectionStart,end:h.selectionEnd};else a:{g=(g=h.ownerDocument)&&g.defaultView||window;var k=g.getSelection&&g.getSelection();if(k&&0!==k.rangeCount){g=k.anchorNode;var l=k.anchorOffset,n=k.focusNode;k=k.focusOffset;try{g.nodeType,n.nodeType}catch(zb){g=null;break a}var z=0,x=-1,v=-1,rb=0,Be=0,u=h,w=null;b:for(;;){for(var C;;){u!==g||0!==l&&3!==u.nodeType||(x=z+l);u!==n||0!==k&&3!==u.nodeType||\n(v=z+k);3===u.nodeType&&(z+=u.nodeValue.length);if(null===(C=u.firstChild))break;w=u;u=C}for(;;){if(u===h)break b;w===g&&++rb===l&&(x=z);w===n&&++Be===k&&(v=z);if(null!==(C=u.nextSibling))break;u=w;w=u.parentNode}u=C}g=-1===x||-1===v?null:{start:x,end:v}}else g=null}g=g||{start:0,end:0}}else g=null;Ie={focusedElem:h,selectionRange:g};Qd=!1;Y=e;do try{for(;null!==Y;){if(0!==(Y.effectTag&256)){var I=Y.alternate;h=Y;switch(h.tag){case 0:case 11:case 15:hi(Jg,Ig,h);break;case 1:if(h.effectTag&256&&null!==\nI){var E=I.memoizedProps,ua=I.memoizedState,gh=h.stateNode,oj=gh.getSnapshotBeforeUpdate(h.elementType===h.type?E:Af(h.type,E),ua);gh.__reactInternalSnapshotBeforeUpdate=oj}break;case 3:case 5:case 6:case 4:case 17:break;default:throw t(Error(163));}}Y=Y.nextEffect}}catch(zb){if(null===Y)throw t(Error(330));fi(Y,zb);Y=Y.nextEffect}while(null!==Y);Y=e;do try{for(I=b;null!==Y;){var A=Y.effectTag;A&16&&we(Y.stateNode,\"\");if(A&128){var p=Y.alternate;if(null!==p){var r=p.ref;null!==r&&(\"function\"===typeof r?\nr(null):r.current=null)}}switch(A&14){case 2:ni(Y);Y.effectTag&=-3;break;case 6:ni(Y);Y.effectTag&=-3;oi(Y.alternate,Y);break;case 4:oi(Y.alternate,Y);break;case 8:E=Y;ki(E,I);E.return=null;E.child=null;E.memoizedState=null;E.updateQueue=null;E.dependencies=null;var K=E.alternate;null!==K&&(K.return=null,K.child=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null)}Y=Y.nextEffect}}catch(zb){if(null===Y)throw t(Error(330));fi(Y,zb);Y=Y.nextEffect}while(null!==Y);r=Ie;p=ae();A=r.focusedElem;\nI=r.selectionRange;if(p!==A&&A&&A.ownerDocument&&$d(A.ownerDocument.documentElement,A)){null!==I&&be(A)&&(p=I.start,r=I.end,void 0===r&&(r=p),\"selectionStart\"in A?(A.selectionStart=p,A.selectionEnd=Math.min(r,A.value.length)):(r=(p=A.ownerDocument||document)&&p.defaultView||window,r.getSelection&&(r=r.getSelection(),E=A.textContent.length,K=Math.min(I.start,E),I=void 0===I.end?K:Math.min(I.end,E),!r.extend&&K>I&&(E=I,I=K,K=E),E=Zd(A,K),ua=Zd(A,I),E&&ua&&(1!==r.rangeCount||r.anchorNode!==E.node||r.anchorOffset!==\nE.offset||r.focusNode!==ua.node||r.focusOffset!==ua.offset)&&(p=p.createRange(),p.setStart(E.node,E.offset),r.removeAllRanges(),K>I?(r.addRange(p),r.extend(ua.node,ua.offset)):(p.setEnd(ua.node,ua.offset),r.addRange(p))))));p=[];for(r=A;r=r.parentNode;)1===r.nodeType&&p.push({element:r,left:r.scrollLeft,top:r.scrollTop});\"function\"===typeof A.focus&&A.focus();for(A=0;A<p.length;A++)r=p[A],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}Ie=null;Qd=!!He;He=null;a.current=c;Y=e;do try{for(A=d;null!==\nY;){var $a=Y.effectTag;if($a&36){var nc=Y.alternate;p=Y;r=A;switch(p.tag){case 0:case 11:case 15:hi(Mg,Ng,p);break;case 1:var md=p.stateNode;if(p.effectTag&4)if(null===nc)md.componentDidMount();else{var Fj=p.elementType===p.type?nc.memoizedProps:Af(p.type,nc.memoizedProps);md.componentDidUpdate(Fj,nc.memoizedState,md.__reactInternalSnapshotBeforeUpdate)}var Xh=p.updateQueue;null!==Xh&&Yf(p,Xh,md,r);break;case 3:var Yh=p.updateQueue;if(null!==Yh){K=null;if(null!==p.child)switch(p.child.tag){case 5:K=\np.child.stateNode;break;case 1:K=p.child.stateNode}Yf(p,Yh,K,r)}break;case 5:var Gj=p.stateNode;null===nc&&p.effectTag&4&&(r=Gj,Je(p.type,p.memoizedProps)&&r.focus());break;case 6:break;case 4:break;case 12:break;case 13:case 19:case 17:case 20:break;default:throw t(Error(163));}}if($a&128){var nd=Y.ref;if(null!==nd){var Zh=Y.stateNode;switch(Y.tag){case 5:var gf=Zh;break;default:gf=Zh}\"function\"===typeof nd?nd(gf):nd.current=gf}}$a&512&&(Pi=!0);Y=Y.nextEffect}}catch(zb){if(null===Y)throw t(Error(330));\nfi(Y,zb);Y=Y.nextEffect}while(null!==Y);Y=null;nf();U=f}else a.current=c;if(Pi)Pi=!1,Qi=a,Si=d,Ri=b;else for(Y=e;null!==Y;)b=Y.nextEffect,Y.nextEffect=null,Y=b;b=a.firstPendingTime;0!==b?($a=cg(),$a=zf($a,b),Zi(a,$a,b)):xi=null;\"function\"===typeof pj&&pj(c.stateNode,d);1073741823===b?a===Vi?Ui++:(Ui=0,Vi=a):Ui=0;if(ui)throw ui=!1,a=vi,vi=null,a;if((U&Bi)!==T)return null;O();return null}\nfunction cj(){if(null===Qi)return!1;var a=Qi,b=Si,c=Ri;Qi=null;Si=0;Ri=90;return vf(97<c?97:c,qj.bind(null,a,b))}function qj(a){if((U&(Ci|Di))!==T)throw t(Error(331));var b=U;U|=Di;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:hi(Pg,Ig,c),hi(Ig,Og,c)}}catch(d){if(null===a)throw t(Error(330));fi(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}U=b;O();return!0}\nfunction rj(a,b,c){b=bi(c,b);b=ti(a,b,1073741823);Sf(a,b);a=Yi(a,1073741823);null!==a&&Zi(a,99,1073741823)}function fi(a,b){if(3===a.tag)rj(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){rj(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===xi||!xi.has(d))){a=bi(b,a);a=wi(c,a,1073741823);Sf(c,a);c=Yi(c,1073741823);null!==c&&Zi(c,99,1073741823);break}}c=c.return}}\nfunction kj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);Ji===a&&W===c?X===Hi||X===Gi&&1073741823===Ki&&sf()-pi<Oi?hj(a,W):Ni=!0:a.lastPendingTime<c||(b=a.pingTime,0!==b&&b<c||(a.pingTime=c,a.finishedExpirationTime===c&&(a.finishedExpirationTime=0,a.finishedWork=null),b=cg(),b=zf(b,c),Zi(a,b,c)))}function ri(a,b){var c=a.stateNode;null!==c&&c.delete(b);c=cg();b=dg(c,a,null);c=zf(c,b);a=Yi(a,b);null!==a&&Zi(a,c,b)}var mj=void 0;\nmj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||M.current)Lf=!0;else if(d<c){Lf=!1;switch(b.tag){case 3:Nh(b);Ch();break;case 5:Cg(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Xe(b);break;case 4:Ag(b,b.stateNode.containerInfo);break;case 10:Hf(b,b.memoizedProps.value);break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;if(0!==d&&d>=c)return Ph(a,b,c);J(P,P.current&\nEg,b);b=Fh(a,b,c);return null!==b?b.sibling:null}J(P,P.current&Eg,b);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return Rh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);J(P,P.current,b);if(!d)return null}return Fh(a,b,c)}}else Lf=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=Se(b,L.current);Kf(b,c);e=dh(null,b,d,a,e,c);b.effectTag|=1;if(\"object\"===typeof e&&\nnull!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof){b.tag=1;ih();if(N(d)){var f=!0;Xe(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;var h=d.getDerivedStateFromProps;\"function\"===typeof h&&bg(b,d,h,a);e.updater=fg;b.stateNode=e;e._reactInternalFiber=b;jg(b,d,a,c);b=Mh(null,b,d,!0,f,c)}else b.tag=0,S(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=Bf(e);b.type=e;f=b.tag=sj(e);\na=Af(e,a);switch(f){case 0:b=Jh(null,b,e,a,c);break;case 1:b=Lh(null,b,e,a,c);break;case 11:b=Eh(null,b,e,a,c);break;case 14:b=Gh(null,b,e,Af(e.type,a),d,c);break;default:throw t(Error(306),e,\"\");}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Af(d,e),Jh(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Af(d,e),Lh(a,b,d,e,c);case 3:Nh(b);d=b.updateQueue;if(null===d)throw t(Error(282));e=b.memoizedState;e=null!==e?e.element:null;Wf(b,d,b.pendingProps,\nnull,c);d=b.memoizedState.element;if(d===e)Ch(),b=Fh(a,b,c);else{e=b.stateNode;if(e=(null===a||null===a.child)&&e.hydrate)uh=Ne(b.stateNode.containerInfo.firstChild),th=b,e=vh=!0;e?(b.effectTag|=2,b.child=ug(b,null,d,c)):(S(a,b,d,c),Ch());b=b.child}return b;case 5:return Cg(b),null===a&&zh(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,h=e.children,Ke(d,e)?h=null:null!==f&&Ke(d,f)&&(b.effectTag|=16),Kh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):\n(S(a,b,h,c),b=b.child),b;case 6:return null===a&&zh(b),null;case 13:return Ph(a,b,c);case 4:return Ag(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=tg(b,null,d,c):S(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Af(d,e),Eh(a,b,d,e,c);case 7:return S(a,b,b.pendingProps,c),b.child;case 8:return S(a,b,b.pendingProps.children,c),b.child;case 12:return S(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;h=b.memoizedProps;\nf=e.value;Hf(b,f);if(null!==h){var g=h.value;f=hd(g,f)?0:(\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(g,f):1073741823)|0;if(0===f){if(h.children===e.children&&!M.current){b=Fh(a,b,c);break a}}else for(g=b.child,null!==g&&(g.return=b);null!==g;){var k=g.dependencies;if(null!==k){h=g.child;for(var l=k.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===g.tag&&(l=Qf(c,null),l.tag=2,Sf(g,l));g.expirationTime<c&&(g.expirationTime=c);l=g.alternate;null!==l&&l.expirationTime<\nc&&(l.expirationTime=c);Jf(g.return,c);k.expirationTime<c&&(k.expirationTime=c);break}l=l.next}}else h=10===g.tag?g.type===b.type?null:g.child:g.child;if(null!==h)h.return=g;else for(h=g;null!==h;){if(h===b){h=null;break}g=h.sibling;if(null!==g){g.return=h.return;h=g;break}h=h.return}g=h}}S(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,Kf(b,c),e=Mf(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,S(a,b,d,c),b.child;case 14:return e=b.type,f=Af(e,b.pendingProps),\nf=Af(e.type,f),Gh(a,b,e,f,d,c);case 15:return Ih(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Af(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Xe(b)):a=!1,Kf(b,c),hg(b,d,e,c),jg(b,d,e,c),Mh(null,b,d,!0,a,c);case 19:return Rh(a,b,c)}throw t(Error(156));};var pj=null,ji=null;\nfunction tj(a){if(\"undefined\"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);pj=function(a){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(e){}};ji=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}\nfunction uj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function xh(a,b,c,d){return new uj(a,b,c,d)}\nfunction Hh(a){a=a.prototype;return!(!a||!a.isReactComponent)}function sj(a){if(\"function\"===typeof a)return Hh(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===gc)return 11;if(a===jc)return 14}return 2}\nfunction og(a,b){var c=a.alternate;null===c?(c=xh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,\nfirstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction qg(a,b,c,d,e,f){var h=2;d=a;if(\"function\"===typeof a)Hh(a)&&(h=1);else if(\"string\"===typeof a)h=5;else a:switch(a){case ac:return sg(c.children,e,f,b);case fc:h=8;e|=7;break;case bc:h=8;e|=1;break;case cc:return a=xh(12,c,b,e|8),a.elementType=cc,a.type=cc,a.expirationTime=f,a;case hc:return a=xh(13,c,b,e),a.type=hc,a.elementType=hc,a.expirationTime=f,a;case ic:return a=xh(19,c,b,e),a.elementType=ic,a.expirationTime=f,a;default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case dc:h=\n10;break a;case ec:h=9;break a;case gc:h=11;break a;case jc:h=14;break a;case kc:h=16;d=null;break a}throw t(Error(130),null==a?a:typeof a,\"\");}b=xh(h,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function sg(a,b,c,d){a=xh(7,a,d,b);a.expirationTime=c;return a}function pg(a,b,c){a=xh(6,a,null,b);a.expirationTime=c;return a}\nfunction rg(a,b,c){b=xh(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction vj(a,b,c){this.tag=b;this.current=null;this.containerInfo=a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=this.firstBatch=null;this.pingTime=this.lastPendingTime=this.firstPendingTime=this.callbackExpirationTime=0}function wj(a,b,c){a=new vj(a,b,c);b=xh(3,null,null,2===b?7:1===b?3:0);a.current=b;return b.stateNode=a}\nfunction xj(a,b,c,d,e,f){var h=b.current;a:if(c){c=c._reactInternalFiber;b:{if(2!==ld(c)||1!==c.tag)throw t(Error(170));var g=c;do{switch(g.tag){case 3:g=g.stateNode.context;break b;case 1:if(N(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break b}}g=g.return}while(null!==g);throw t(Error(171));}if(1===c.tag){var k=c.type;if(N(k)){c=We(c,k,g);break a}}c=g}else c=Qe;null===b.context?b.context=c:b.pendingContext=c;b=f;e=Qf(d,e);e.payload={element:a};b=void 0===b?null:b;null!==b&&\n(e.callback=b);Sf(h,e);eg(h,d);return d}function yj(a,b,c,d){var e=b.current,f=cg(),h=$f.suspense;e=dg(f,e,h);return xj(a,b,c,e,h,d)}function zj(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Aj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$b,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nDb=function(a,b,c){switch(b){case \"input\":Ec(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Ka(d);if(!e)throw t(Error(90));Wb(d);Ec(d,e)}}}break;case \"textarea\":pe(a,c);break;case \"select\":b=c.value,null!=b&&me(a,!!c.multiple,b,!1)}};\nfunction Bj(a){var b=1073741821-25*(((1073741821-cg()+500)/25|0)+1);b<=Xi&&--b;this._expirationTime=Xi=b;this._root=a;this._callbacks=this._next=null;this._hasChildren=this._didComplete=!1;this._children=null;this._defer=!0}Bj.prototype.render=function(a){if(!this._defer)throw t(Error(250));this._hasChildren=!0;this._children=a;var b=this._root._internalRoot,c=this._expirationTime,d=new Cj;xj(a,b,null,c,null,d._onCommit);return d};\nBj.prototype.then=function(a){if(this._didComplete)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]);b.push(a)}};\nBj.prototype.commit=function(){var a=this._root._internalRoot,b=a.firstBatch;if(!this._defer||null===b)throw t(Error(251));if(this._hasChildren){var c=this._expirationTime;if(b!==this){this._hasChildren&&(c=this._expirationTime=b._expirationTime,this.render(this._children));for(var d=null,e=b;e!==this;)d=e,e=e._next;if(null===d)throw t(Error(251));d._next=e._next;this._next=b;a.firstBatch=this}this._defer=!1;b=c;if((U&(Ci|Di))!==T)throw t(Error(253));xf(Z.bind(null,a,b));O();b=this._next;this._next=\nnull;b=a.firstBatch=b;null!==b&&b._hasChildren&&b.render(b._children)}else this._next=null,this._defer=!1};Bj.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++)(0,a[b])()}};function Cj(){this._callbacks=null;this._didCommit=!1;this._onCommit=this._onCommit.bind(this)}Cj.prototype.then=function(a){if(this._didCommit)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]);b.push(a)}};\nCj.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++){var c=a[b];if(\"function\"!==typeof c)throw t(Error(191),c);c()}}};function Dj(a,b,c){this._internalRoot=wj(a,b,c)}function Ej(a,b){this._internalRoot=wj(a,2,b)}Ej.prototype.render=Dj.prototype.render=function(a,b){var c=this._internalRoot,d=new Cj;b=void 0===b?null:b;null!==b&&d.then(b);yj(a,c,null,d._onCommit);return d};\nEj.prototype.unmount=Dj.prototype.unmount=function(a){var b=this._internalRoot,c=new Cj;a=void 0===a?null:a;null!==a&&c.then(a);yj(null,b,null,c._onCommit);return c};Ej.prototype.createBatch=function(){var a=new Bj(this),b=a._expirationTime,c=this._internalRoot,d=c.firstBatch;if(null===d)c.firstBatch=a,a._next=null;else{for(c=null;null!==d&&d._expirationTime>=b;)c=d,d=d._next;a._next=d;null!==c&&(c._next=a)}return a};\nfunction Hj(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}Jb=ej;Kb=fj;Lb=aj;Mb=function(a,b){var c=U;U|=2;try{return a(b)}finally{U=c,U===T&&O()}};function Ij(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new Dj(a,0,b)}\nfunction Jj(a,b,c,d,e){var f=c._reactRootContainer,h=void 0;if(f){h=f._internalRoot;if(\"function\"===typeof e){var g=e;e=function(){var a=zj(h);g.call(a)}}yj(b,h,a,e)}else{f=c._reactRootContainer=Ij(c,d);h=f._internalRoot;if(\"function\"===typeof e){var k=e;e=function(){var a=zj(h);k.call(a)}}gj(function(){yj(b,h,a,e)})}return zj(h)}function Kj(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Hj(b))throw t(Error(200));return Aj(a,b,null,c)}\nvar Nj={createPortal:Kj,findDOMNode:function(a){if(null==a)a=null;else if(1!==a.nodeType){var b=a._reactInternalFiber;if(void 0===b){if(\"function\"===typeof a.render)throw t(Error(188));throw t(Error(268),Object.keys(a));}a=qd(b);a=null===a?null:a.stateNode}return a},hydrate:function(a,b,c){if(!Hj(b))throw t(Error(200));return Jj(null,a,b,!0,c)},render:function(a,b,c){if(!Hj(b))throw t(Error(200));return Jj(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,b,c,d){if(!Hj(c))throw t(Error(200));\nif(null==a||void 0===a._reactInternalFiber)throw t(Error(38));return Jj(a,b,c,!1,d)},unmountComponentAtNode:function(a){if(!Hj(a))throw t(Error(40));return a._reactRootContainer?(gj(function(){Jj(null,null,a,!1,function(){a._reactRootContainer=null})}),!0):!1},unstable_createPortal:function(){return Kj.apply(void 0,arguments)},unstable_batchedUpdates:ej,unstable_interactiveUpdates:function(a,b,c,d){aj();return fj(a,b,c,d)},unstable_discreteUpdates:fj,unstable_flushDiscreteUpdates:aj,flushSync:function(a,\nb){if((U&(Ci|Di))!==T)throw t(Error(187));var c=U;U|=1;try{return vf(99,a.bind(null,b))}finally{U=c,O()}},unstable_createRoot:Lj,unstable_createSyncRoot:Mj,unstable_flushControlled:function(a){var b=U;U|=1;try{vf(99,a)}finally{U=b,U===T&&O()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Ia,Ja,Ka,Ca.injectEventPluginsByName,fa,Qa,function(a){ya(a,Pa)},Hb,Ib,Ud,Ba,cj,{current:!1}]}};\nfunction Lj(a,b){if(!Hj(a))throw t(Error(299),\"unstable_createRoot\");return new Ej(a,null!=b&&!0===b.hydrate)}function Mj(a,b){if(!Hj(a))throw t(Error(299),\"unstable_createRoot\");return new Dj(a,1,null!=b&&!0===b.hydrate)}\n(function(a){var b=a.findFiberByHostInstance;return tj(m({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xb.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=qd(a);return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Ha,bundleType:0,version:\"16.9.0\",\nrendererPackageName:\"react-dom\"});var Oj={default:Nj},Pj=Oj&&Nj||Oj;module.exports=Pj.default||Pj;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/** @license React v0.15.0\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:!0});var d=void 0,e=void 0,g=void 0,m=void 0,n=void 0;exports.unstable_now=void 0;exports.unstable_forceFrameRate=void 0;\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var p=null,q=null,r=function(){if(null!==p)try{var a=exports.unstable_now();p(!0,a);p=null}catch(b){throw setTimeout(r,0),b;}};exports.unstable_now=function(){return Date.now()};d=function(a){null!==p?setTimeout(d,0,a):(p=a,setTimeout(r,0))};e=function(a,b){q=setTimeout(a,b)};g=function(){clearTimeout(q)};m=function(){return!1};n=exports.unstable_forceFrameRate=function(){}}else{var t=window.performance,u=window.Date,v=window.setTimeout,\nw=window.clearTimeout,x=window.requestAnimationFrame,y=window.cancelAnimationFrame;\"undefined\"!==typeof console&&(\"function\"!==typeof x&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\"),\"function\"!==typeof y&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\"));exports.unstable_now=\"object\"===typeof t&&\n\"function\"===typeof t.now?function(){return t.now()}:function(){return u.now()};var z=!1,A=null,B=-1,C=-1,D=33.33,E=-1,F=-1,G=0,H=!1;m=function(){return exports.unstable_now()>=G};n=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported\"):0<a?(D=Math.floor(1E3/a),H=!0):(D=33.33,H=!1)};var J=function(){if(null!==A){var a=exports.unstable_now(),b=0<G-a;try{A(b,\na)||(A=null)}catch(c){throw I.postMessage(null),c;}}},K=new MessageChannel,I=K.port2;K.port1.onmessage=J;var L=function(a){if(null===A)F=E=-1,z=!1;else{z=!0;x(function(a){w(B);L(a)});var b=function(){G=exports.unstable_now()+D/2;J();B=v(b,3*D)};B=v(b,3*D);if(-1!==E&&.1<a-E){var c=a-E;!H&&-1!==F&&c<D&&F<D&&(D=c<F?F:c,8.33>D&&(D=8.33));F=c}E=a;G=a+D;I.postMessage(null)}};d=function(a){A=a;z||(z=!0,x(function(a){L(a)}))};e=function(a,b){C=v(function(){a(exports.unstable_now())},b)};g=function(){w(C);\nC=-1}}var M=null,N=null,O=null,P=3,Q=!1,R=!1,S=!1;\nfunction T(a,b){var c=a.next;if(c===a)M=null;else{a===M&&(M=c);var f=a.previous;f.next=c;c.previous=f}a.next=a.previous=null;c=a.callback;f=P;var l=O;P=a.priorityLevel;O=a;try{var h=a.expirationTime<=b;switch(P){case 1:var k=c(h);break;case 2:k=c(h);break;case 3:k=c(h);break;case 4:k=c(h);break;case 5:k=c(h)}}catch(Z){throw Z;}finally{P=f,O=l}if(\"function\"===typeof k)if(b=a.expirationTime,a.callback=k,null===M)M=a.next=a.previous=a;else{k=null;h=M;do{if(b<=h.expirationTime){k=h;break}h=h.next}while(h!==\nM);null===k?k=M:k===M&&(M=a);b=k.previous;b.next=k.previous=a;a.next=k;a.previous=b}}function U(a){if(null!==N&&N.startTime<=a){do{var b=N,c=b.next;if(b===c)N=null;else{N=c;var f=b.previous;f.next=c;c.previous=f}b.next=b.previous=null;V(b,b.expirationTime)}while(null!==N&&N.startTime<=a)}}function W(a){S=!1;U(a);R||(null!==M?(R=!0,d(X)):null!==N&&e(W,N.startTime-a))}\nfunction X(a,b){R=!1;S&&(S=!1,g());U(b);Q=!0;try{if(!a)for(;null!==M&&M.expirationTime<=b;)T(M,b),b=exports.unstable_now(),U(b);else if(null!==M){do T(M,b),b=exports.unstable_now(),U(b);while(null!==M&&!m())}if(null!==M)return!0;null!==N&&e(W,N.startTime-b);return!1}finally{Q=!1}}function Y(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}\nfunction V(a,b){if(null===M)M=a.next=a.previous=a;else{var c=null,f=M;do{if(b<f.expirationTime){c=f;break}f=f.next}while(f!==M);null===c?c=M:c===M&&(M=a);b=c.previous;b.next=c.previous=a;a.next=c;a.previous=b}}var aa=n;exports.unstable_ImmediatePriority=1;exports.unstable_UserBlockingPriority=2;exports.unstable_NormalPriority=3;exports.unstable_IdlePriority=5;exports.unstable_LowPriority=4;\nexports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=P;P=a;try{return b()}finally{P=c}};exports.unstable_next=function(a){switch(P){case 1:case 2:case 3:var b=3;break;default:b=P}var c=P;P=b;try{return a()}finally{P=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var f=exports.unstable_now();if(\"object\"===typeof c&&null!==c){var l=c.delay;l=\"number\"===typeof l&&0<l?f+l:f;c=\"number\"===typeof c.timeout?c.timeout:Y(a)}else c=Y(a),l=f;c=l+c;a={callback:b,priorityLevel:a,startTime:l,expirationTime:c,next:null,previous:null};if(l>f){c=l;if(null===N)N=a.next=a.previous=a;else{b=null;var h=N;do{if(c<h.startTime){b=h;break}h=h.next}while(h!==N);null===b?b=N:b===N&&(N=a);c=b.previous;c.next=b.previous=a;a.next=b;a.previous=\nc}null===M&&N===a&&(S?g():S=!0,e(W,l-f))}else V(a,c),R||Q||(R=!0,d(X));return a};exports.unstable_cancelCallback=function(a){var b=a.next;if(null!==b){if(a===b)a===M?M=null:a===N&&(N=null);else{a===M?M=b:a===N&&(N=b);var c=a.previous;c.next=b;b.previous=c}a.next=a.previous=null}};exports.unstable_wrapCallback=function(a){var b=P;return function(){var c=P;P=b;try{return a.apply(this,arguments)}finally{P=c}}};exports.unstable_getCurrentPriorityLevel=function(){return P};\nexports.unstable_shouldYield=function(){var a=exports.unstable_now();U(a);return null!==O&&null!==M&&M.startTime<=a&&M.expirationTime<O.expirationTime||m()};exports.unstable_requestPaint=aa;exports.unstable_continueExecution=function(){R||Q||(R=!0,d(X))};exports.unstable_pauseExecution=function(){};exports.unstable_getFirstCallbackNode=function(){return M};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { jsonEval, stringify } from '@firebase/util';\n\n/**\n * Wraps a DOM Storage object and:\n * - automatically encode objects as JSON strings before storing them to allow us to store arbitrary types.\n * - prefixes names with \"firebase:\" to avoid collisions with app data.\n *\n * We automatically (see storage.js) create two such wrappers, one for sessionStorage,\n * and one for localStorage.\n *\n * @constructor\n */\nexport class DOMStorageWrapper {\n  // Use a prefix to avoid collisions with other stuff saved by the app.\n  private prefix_ = 'firebase:';\n\n  /**\n   * @param {Storage} domStorage_ The underlying storage object (e.g. localStorage or sessionStorage)\n   */\n  constructor(private domStorage_: Storage) {}\n\n  /**\n   * @param {string} key The key to save the value under\n   * @param {?Object} value The value being stored, or null to remove the key.\n   */\n  set(key: string, value: any | null) {\n    if (value == null) {\n      this.domStorage_.removeItem(this.prefixedName_(key));\n    } else {\n      this.domStorage_.setItem(this.prefixedName_(key), stringify(value));\n    }\n  }\n\n  /**\n   * @param {string} key\n   * @return {*} The value that was stored under this key, or null\n   */\n  get(key: string): any {\n    const storedVal = this.domStorage_.getItem(this.prefixedName_(key));\n    if (storedVal == null) {\n      return null;\n    } else {\n      return jsonEval(storedVal);\n    }\n  }\n\n  /**\n   * @param {string} key\n   */\n  remove(key: string) {\n    this.domStorage_.removeItem(this.prefixedName_(key));\n  }\n\n  isInMemoryStorage: boolean;\n\n  /**\n   * @param {string} name\n   * @return {string}\n   */\n  prefixedName_(name: string): string {\n    return this.prefix_ + name;\n  }\n\n  toString(): string {\n    return this.domStorage_.toString();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { contains } from '@firebase/util';\n\n/**\n * An in-memory storage implementation that matches the API of DOMStorageWrapper\n * (TODO: create interface for both to implement).\n *\n * @constructor\n */\nexport class MemoryStorage {\n  private cache_: { [k: string]: any } = {};\n\n  set(key: string, value: any | null) {\n    if (value == null) {\n      delete this.cache_[key];\n    } else {\n      this.cache_[key] = value;\n    }\n  }\n\n  get(key: string): any {\n    if (contains(this.cache_, key)) {\n      return this.cache_[key];\n    }\n    return null;\n  }\n\n  remove(key: string) {\n    delete this.cache_[key];\n  }\n\n  isInMemoryStorage = true;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DOMStorageWrapper } from './DOMStorageWrapper';\nimport { MemoryStorage } from './MemoryStorage';\n\ndeclare const window: any;\n\n/**\n * Helper to create a DOMStorageWrapper or else fall back to MemoryStorage.\n * TODO: Once MemoryStorage and DOMStorageWrapper have a shared interface this method annotation should change\n * to reflect this type\n *\n * @param {string} domStorageName Name of the underlying storage object\n *   (e.g. 'localStorage' or 'sessionStorage').\n * @return {?} Turning off type information until a common interface is defined.\n */\nconst createStoragefor = function(\n  domStorageName: string\n): DOMStorageWrapper | MemoryStorage {\n  try {\n    // NOTE: just accessing \"localStorage\" or \"window['localStorage']\" may throw a security exception,\n    // so it must be inside the try/catch.\n    if (\n      typeof window !== 'undefined' &&\n      typeof window[domStorageName] !== 'undefined'\n    ) {\n      // Need to test cache. Just because it's here doesn't mean it works\n      const domStorage = window[domStorageName];\n      domStorage.setItem('firebase:sentinel', 'cache');\n      domStorage.removeItem('firebase:sentinel');\n      return new DOMStorageWrapper(domStorage);\n    }\n  } catch (e) {}\n\n  // Failed to create wrapper.  Just return in-memory storage.\n  // TODO: log?\n  return new MemoryStorage();\n};\n\n/** A storage object that lasts across sessions */\nexport const PersistentStorage = createStoragefor('localStorage');\n\n/** A storage object that only lasts one session */\nexport const SessionStorage = createStoragefor('sessionStorage');\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Query } from '../../api/Query';\n\ndeclare const window: any;\ndeclare const Windows: any;\n\nimport { assert } from '@firebase/util';\nimport { base64 } from '@firebase/util';\nimport { Sha1 } from '@firebase/util';\nimport { stringToByteArray } from '@firebase/util';\nimport { stringify } from '@firebase/util';\nimport { SessionStorage } from '../storage/storage';\nimport { isNodeSdk } from '@firebase/util';\nimport { Logger, LogLevel } from '@firebase/logger';\n\nconst logClient = new Logger('@firebase/database');\n\n/**\n * Returns a locally-unique ID (generated by just incrementing up from 0 each time its called).\n * @type {function(): number} Generated ID.\n */\nexport const LUIDGenerator: () => number = (function() {\n  let id = 1;\n  return function() {\n    return id++;\n  };\n})();\n\n/**\n * Sha1 hash of the input string\n * @param {!string} str The string to hash\n * @return {!string} The resulting hash\n */\nexport const sha1 = function(str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  const sha1 = new Sha1();\n  sha1.update(utf8Bytes);\n  const sha1Bytes = sha1.digest();\n  return base64.encodeByteArray(sha1Bytes);\n};\n\n/**\n * @param {...*} var_args\n * @return {string}\n * @private\n */\nconst buildLogMessage_ = function(...var_args: any[]): string {\n  let message = '';\n  for (let i = 0; i < var_args.length; i++) {\n    if (\n      Array.isArray(var_args[i]) ||\n      (var_args[i] &&\n        typeof var_args[i] === 'object' &&\n        typeof var_args[i].length === 'number')\n    ) {\n      message += buildLogMessage_.apply(null, var_args[i]);\n    } else if (typeof var_args[i] === 'object') {\n      message += stringify(var_args[i]);\n    } else {\n      message += var_args[i];\n    }\n    message += ' ';\n  }\n\n  return message;\n};\n\n/**\n * Use this for all debug messages in Firebase.\n * @type {?function(string)}\n */\nexport let logger: ((a: string) => void) | null = null;\n\n/**\n * Flag to check for log availability on first log message\n * @type {boolean}\n * @private\n */\nlet firstLog_ = true;\n\n/**\n * The implementation of Firebase.enableLogging (defined here to break dependencies)\n * @param {boolean|?function(string)} logger_ A flag to turn on logging, or a custom logger\n * @param {boolean=} persistent Whether or not to persist logging settings across refreshes\n */\nexport const enableLogging = function(\n  logger_?: boolean | ((a: string) => void) | null,\n  persistent?: boolean\n) {\n  assert(\n    !persistent || logger_ === true || logger_ === false,\n    \"Can't turn on custom loggers persistently.\"\n  );\n  if (logger_ === true) {\n    logClient.logLevel = LogLevel.VERBOSE;\n    logger = logClient.log.bind(logClient);\n    if (persistent) SessionStorage.set('logging_enabled', true);\n  } else if (typeof logger_ === 'function') {\n    logger = logger_;\n  } else {\n    logger = null;\n    SessionStorage.remove('logging_enabled');\n  }\n};\n\n/**\n *\n * @param {...(string|Arguments)} var_args\n */\nexport const log = function(...var_args: string[]) {\n  if (firstLog_ === true) {\n    firstLog_ = false;\n    if (logger === null && SessionStorage.get('logging_enabled') === true)\n      enableLogging(true);\n  }\n\n  if (logger) {\n    const message = buildLogMessage_.apply(null, var_args);\n    logger(message);\n  }\n};\n\n/**\n * @param {!string} prefix\n * @return {function(...[*])}\n */\nexport const logWrapper = function(\n  prefix: string\n): (...var_args: any[]) => void {\n  return function(...var_args: any[]) {\n    log(prefix, ...var_args);\n  };\n};\n\n/**\n * @param {...string} var_args\n */\nexport const error = function(...var_args: string[]) {\n  const message = 'FIREBASE INTERNAL ERROR: ' + buildLogMessage_(...var_args);\n  logClient.error(message);\n};\n\n/**\n * @param {...string} var_args\n */\nexport const fatal = function(...var_args: string[]) {\n  const message = `FIREBASE FATAL ERROR: ${buildLogMessage_(...var_args)}`;\n  logClient.error(message);\n  throw new Error(message);\n};\n\n/**\n * @param {...*} var_args\n */\nexport const warn = function(...var_args: any[]) {\n  const message = 'FIREBASE WARNING: ' + buildLogMessage_(...var_args);\n  logClient.warn(message);\n};\n\n/**\n * Logs a warning if the containing page uses https. Called when a call to new Firebase\n * does not use https.\n */\nexport const warnIfPageIsSecure = function() {\n  // Be very careful accessing browser globals. Who knows what may or may not exist.\n  if (\n    typeof window !== 'undefined' &&\n    window.location &&\n    window.location.protocol &&\n    window.location.protocol.indexOf('https:') !== -1\n  ) {\n    warn(\n      'Insecure Firebase access from a secure page. ' +\n        'Please use https in calls to new Firebase().'\n    );\n  }\n};\n\n/**\n * @param {!String} methodName\n */\nexport const warnAboutUnsupportedMethod = function(methodName: string) {\n  warn(\n    methodName +\n      ' is unsupported and will likely change soon.  ' +\n      'Please do not use.'\n  );\n};\n\n/**\n * Returns true if data is NaN, or +/- Infinity.\n * @param {*} data\n * @return {boolean}\n */\nexport const isInvalidJSONNumber = function(data: any): boolean {\n  return (\n    typeof data === 'number' &&\n    (data != data || // NaN\n      data == Number.POSITIVE_INFINITY ||\n      data == Number.NEGATIVE_INFINITY)\n  );\n};\n\n/**\n * @param {function()} fn\n */\nexport const executeWhenDOMReady = function(fn: () => void) {\n  if (isNodeSdk() || document.readyState === 'complete') {\n    fn();\n  } else {\n    // Modeled after jQuery. Try DOMContentLoaded and onreadystatechange (which\n    // fire before onload), but fall back to onload.\n\n    let called = false;\n    let wrappedFn = function() {\n      if (!document.body) {\n        setTimeout(wrappedFn, Math.floor(10));\n        return;\n      }\n\n      if (!called) {\n        called = true;\n        fn();\n      }\n    };\n\n    if (document.addEventListener) {\n      document.addEventListener('DOMContentLoaded', wrappedFn, false);\n      // fallback to onload.\n      window.addEventListener('load', wrappedFn, false);\n    } else if ((document as any).attachEvent) {\n      // IE.\n      (document as any).attachEvent('onreadystatechange', function() {\n        if (document.readyState === 'complete') wrappedFn();\n      });\n      // fallback to onload.\n      (window as any).attachEvent('onload', wrappedFn);\n\n      // jQuery has an extra hack for IE that we could employ (based on\n      // http://javascript.nwbox.com/IEContentLoaded/) But it looks really old.\n      // I'm hoping we don't need it.\n    }\n  }\n};\n\n/**\n * Minimum key name. Invalid for actual data, used as a marker to sort before any valid names\n * @type {!string}\n */\nexport const MIN_NAME = '[MIN_NAME]';\n\n/**\n * Maximum key name. Invalid for actual data, used as a marker to sort above any valid names\n * @type {!string}\n */\nexport const MAX_NAME = '[MAX_NAME]';\n\n/**\n * Compares valid Firebase key names, plus min and max name\n * @param {!string} a\n * @param {!string} b\n * @return {!number}\n */\nexport const nameCompare = function(a: string, b: string): number {\n  if (a === b) {\n    return 0;\n  } else if (a === MIN_NAME || b === MAX_NAME) {\n    return -1;\n  } else if (b === MIN_NAME || a === MAX_NAME) {\n    return 1;\n  } else {\n    const aAsInt = tryParseInt(a),\n      bAsInt = tryParseInt(b);\n\n    if (aAsInt !== null) {\n      if (bAsInt !== null) {\n        return aAsInt - bAsInt == 0 ? a.length - b.length : aAsInt - bAsInt;\n      } else {\n        return -1;\n      }\n    } else if (bAsInt !== null) {\n      return 1;\n    } else {\n      return a < b ? -1 : 1;\n    }\n  }\n};\n\n/**\n * @param {!string} a\n * @param {!string} b\n * @return {!number} comparison result.\n */\nexport const stringCompare = function(a: string, b: string): number {\n  if (a === b) {\n    return 0;\n  } else if (a < b) {\n    return -1;\n  } else {\n    return 1;\n  }\n};\n\n/**\n * @param {string} key\n * @param {Object} obj\n * @return {*}\n */\nexport const requireKey = function(\n  key: string,\n  obj: { [k: string]: any }\n): any {\n  if (obj && key in obj) {\n    return obj[key];\n  } else {\n    throw new Error(\n      'Missing required key (' + key + ') in object: ' + stringify(obj)\n    );\n  }\n};\n\n/**\n * @param {*} obj\n * @return {string}\n */\nexport const ObjectToUniqueKey = function(obj: any): string {\n  if (typeof obj !== 'object' || obj === null) return stringify(obj);\n\n  const keys = [];\n  for (let k in obj) {\n    keys.push(k);\n  }\n\n  // Export as json, but with the keys sorted.\n  keys.sort();\n  let key = '{';\n  for (let i = 0; i < keys.length; i++) {\n    if (i !== 0) key += ',';\n    key += stringify(keys[i]);\n    key += ':';\n    key += ObjectToUniqueKey(obj[keys[i]]);\n  }\n\n  key += '}';\n  return key;\n};\n\n/**\n * Splits a string into a number of smaller segments of maximum size\n * @param {!string} str The string\n * @param {!number} segsize The maximum number of chars in the string.\n * @return {Array.<string>} The string, split into appropriately-sized chunks\n */\nexport const splitStringBySize = function(\n  str: string,\n  segsize: number\n): string[] {\n  const len = str.length;\n\n  if (len <= segsize) {\n    return [str];\n  }\n\n  const dataSegs = [];\n  for (let c = 0; c < len; c += segsize) {\n    if (c + segsize > len) {\n      dataSegs.push(str.substring(c, len));\n    } else {\n      dataSegs.push(str.substring(c, c + segsize));\n    }\n  }\n  return dataSegs;\n};\n\n/**\n * Apply a function to each (key, value) pair in an object or\n * apply a function to each (index, value) pair in an array\n * @param obj The object or array to iterate over\n * @param fn The function to apply\n */\nexport function each(obj: object, fn: (k: string, v: any) => void) {\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      fn(key, obj[key]);\n    }\n  }\n}\n\n/**\n * Like goog.bind, but doesn't bother to create a closure if opt_context is null/undefined.\n * @param {function(*)} callback Callback function.\n * @param {?Object=} context Optional context to bind to.\n * @return {function(*)}\n */\nexport const bindCallback = function(\n  callback: (a: any) => void,\n  context?: object | null\n): Function {\n  return context ? callback.bind(context) : callback;\n};\n\n/**\n * Borrowed from http://hg.secondlife.com/llsd/src/tip/js/typedarray.js (MIT License)\n * I made one modification at the end and removed the NaN / Infinity\n * handling (since it seemed broken [caused an overflow] and we don't need it).  See MJL comments.\n * @param {!number} v A double\n * @return {string}\n */\nexport const doubleToIEEE754String = function(v: number): string {\n  assert(!isInvalidJSONNumber(v), 'Invalid JSON number'); // MJL\n\n  const ebits = 11,\n    fbits = 52;\n  let bias = (1 << (ebits - 1)) - 1,\n    s,\n    e,\n    f,\n    ln,\n    i,\n    bits,\n    str;\n\n  // Compute sign, exponent, fraction\n  // Skip NaN / Infinity handling --MJL.\n  if (v === 0) {\n    e = 0;\n    f = 0;\n    s = 1 / v === -Infinity ? 1 : 0;\n  } else {\n    s = v < 0;\n    v = Math.abs(v);\n\n    if (v >= Math.pow(2, 1 - bias)) {\n      // Normalized\n      ln = Math.min(Math.floor(Math.log(v) / Math.LN2), bias);\n      e = ln + bias;\n      f = Math.round(v * Math.pow(2, fbits - ln) - Math.pow(2, fbits));\n    } else {\n      // Denormalized\n      e = 0;\n      f = Math.round(v / Math.pow(2, 1 - bias - fbits));\n    }\n  }\n\n  // Pack sign, exponent, fraction\n  bits = [];\n  for (i = fbits; i; i -= 1) {\n    bits.push(f % 2 ? 1 : 0);\n    f = Math.floor(f / 2);\n  }\n  for (i = ebits; i; i -= 1) {\n    bits.push(e % 2 ? 1 : 0);\n    e = Math.floor(e / 2);\n  }\n  bits.push(s ? 1 : 0);\n  bits.reverse();\n  str = bits.join('');\n\n  // Return the data as a hex string. --MJL\n  let hexByteString = '';\n  for (i = 0; i < 64; i += 8) {\n    let hexByte = parseInt(str.substr(i, 8), 2).toString(16);\n    if (hexByte.length === 1) hexByte = '0' + hexByte;\n    hexByteString = hexByteString + hexByte;\n  }\n  return hexByteString.toLowerCase();\n};\n\n/**\n * Used to detect if we're in a Chrome content script (which executes in an\n * isolated environment where long-polling doesn't work).\n * @return {boolean}\n */\nexport const isChromeExtensionContentScript = function(): boolean {\n  return !!(\n    typeof window === 'object' &&\n    window['chrome'] &&\n    window['chrome']['extension'] &&\n    !/^chrome/.test(window.location.href)\n  );\n};\n\n/**\n * Used to detect if we're in a Windows 8 Store app.\n * @return {boolean}\n */\nexport const isWindowsStoreApp = function(): boolean {\n  // Check for the presence of a couple WinRT globals\n  return typeof Windows === 'object' && typeof Windows.UI === 'object';\n};\n\n/**\n * Converts a server error code to a Javascript Error\n * @param {!string} code\n * @param {!Query} query\n * @return {Error}\n */\nexport const errorForServerCode = function(code: string, query: Query): Error {\n  let reason = 'Unknown Error';\n  if (code === 'too_big') {\n    reason =\n      'The data requested exceeds the maximum size ' +\n      'that can be accessed with a single request.';\n  } else if (code == 'permission_denied') {\n    reason = \"Client doesn't have permission to access the desired data.\";\n  } else if (code == 'unavailable') {\n    reason = 'The service is unavailable';\n  }\n\n  const error = new Error(\n    code + ' at ' + query.path.toString() + ': ' + reason\n  );\n  (error as any).code = code.toUpperCase();\n  return error;\n};\n\n/**\n * Used to test for integer-looking strings\n * @type {RegExp}\n * @private\n */\nexport const INTEGER_REGEXP_ = new RegExp('^-?(0*)\\\\d{1,10}$');\n\n/**\n * If the string contains a 32-bit integer, return it.  Else return null.\n * @param {!string} str\n * @return {?number}\n */\nexport const tryParseInt = function(str: string): number | null {\n  if (INTEGER_REGEXP_.test(str)) {\n    const intVal = Number(str);\n    if (intVal >= -2147483648 && intVal <= 2147483647) {\n      return intVal;\n    }\n  }\n  return null;\n};\n\n/**\n * Helper to run some code but catch any exceptions and re-throw them later.\n * Useful for preventing user callbacks from breaking internal code.\n *\n * Re-throwing the exception from a setTimeout is a little evil, but it's very\n * convenient (we don't have to try to figure out when is a safe point to\n * re-throw it), and the behavior seems reasonable:\n *\n * * If you aren't pausing on exceptions, you get an error in the console with\n *   the correct stack trace.\n * * If you're pausing on all exceptions, the debugger will pause on your\n *   exception and then again when we rethrow it.\n * * If you're only pausing on uncaught exceptions, the debugger will only pause\n *   on us re-throwing it.\n *\n * @param {!function()} fn The code to guard.\n */\nexport const exceptionGuard = function(fn: () => void) {\n  try {\n    fn();\n  } catch (e) {\n    // Re-throw exception when it's safe.\n    setTimeout(function() {\n      // It used to be that \"throw e\" would result in a good console error with\n      // relevant context, but as of Chrome 39, you just get the firebase.js\n      // file/line number where we re-throw it, which is useless. So we log\n      // e.stack explicitly.\n      const stack = e.stack || '';\n      warn('Exception was thrown by user callback.', stack);\n      throw e;\n    }, Math.floor(0));\n  }\n};\n\n/**\n * Helper function to safely call opt_callback with the specified arguments.  It:\n * 1. Turns into a no-op if opt_callback is null or undefined.\n * 2. Wraps the call inside exceptionGuard to prevent exceptions from breaking our state.\n *\n * @param {?Function=} callback Optional onComplete callback.\n * @param {...*} var_args Arbitrary args to be passed to opt_onComplete\n */\nexport const callUserCallback = function(\n  callback?: Function | null,\n  ...var_args: any[]\n) {\n  if (typeof callback === 'function') {\n    exceptionGuard(function() {\n      callback(...var_args);\n    });\n  }\n};\n\n/**\n * @return {boolean} true if we think we're currently being crawled.\n */\nexport const beingCrawled = function(): boolean {\n  const userAgent =\n    (typeof window === 'object' &&\n      window['navigator'] &&\n      window['navigator']['userAgent']) ||\n    '';\n\n  // For now we whitelist the most popular crawlers.  We should refine this to be the set of crawlers we\n  // believe to support JavaScript/AJAX rendering.\n  // NOTE: Google Webmaster Tools doesn't really belong, but their \"This is how a visitor to your website\n  // would have seen the page\" is flaky if we don't treat it as a crawler.\n  return (\n    userAgent.search(\n      /googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i\n    ) >= 0\n  );\n};\n\n/**\n * Export a property of an object using a getter function.\n *\n * @param {!Object} object\n * @param {string} name\n * @param {!function(): *} fnGet\n */\nexport const exportPropGetter = function(\n  object: Object,\n  name: string,\n  fnGet: () => any\n) {\n  Object.defineProperty(object, name, { get: fnGet });\n};\n\n/**\n * Same as setTimeout() except on Node.JS it will /not/ prevent the process from exiting.\n *\n * It is removed with clearTimeout() as normal.\n *\n * @param {Function} fn Function to run.\n * @param {number} time Milliseconds to wait before running.\n * @return {number|Object} The setTimeout() return value.\n */\nexport const setTimeoutNonBlocking = function(\n  fn: Function,\n  time: number\n): number | Object {\n  const timeout: number | Object = setTimeout(fn, time);\n  if (typeof timeout === 'object' && (timeout as any)['unref']) {\n    (timeout as any)['unref']();\n  }\n  return timeout;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { nameCompare } from './util';\nimport { stringLength } from '@firebase/util';\n/**\n * An immutable object representing a parsed path.  It's immutable so that you\n * can pass them around to other functions without worrying about them changing\n * it.\n */\n\nexport class Path {\n  private pieces_: string[];\n  private pieceNum_: number;\n\n  /**\n   * Singleton to represent an empty path\n   *\n   * @const\n   */\n  static get Empty() {\n    return new Path('');\n  }\n\n  /**\n   * @param {string|Array.<string>} pathOrString Path string to parse,\n   *      or another path, or the raw tokens array\n   * @param {number=} pieceNum\n   */\n  constructor(pathOrString: string | string[], pieceNum?: number) {\n    if (pieceNum === void 0) {\n      this.pieces_ = (pathOrString as string).split('/');\n\n      // Remove empty pieces.\n      let copyTo = 0;\n      for (let i = 0; i < this.pieces_.length; i++) {\n        if (this.pieces_[i].length > 0) {\n          this.pieces_[copyTo] = this.pieces_[i];\n          copyTo++;\n        }\n      }\n      this.pieces_.length = copyTo;\n\n      this.pieceNum_ = 0;\n    } else {\n      this.pieces_ = pathOrString as string[];\n      this.pieceNum_ = pieceNum;\n    }\n  }\n\n  getFront(): string | null {\n    if (this.pieceNum_ >= this.pieces_.length) return null;\n\n    return this.pieces_[this.pieceNum_];\n  }\n\n  /**\n   * @return {number} The number of segments in this path\n   */\n  getLength(): number {\n    return this.pieces_.length - this.pieceNum_;\n  }\n\n  /**\n   * @return {!Path}\n   */\n  popFront(): Path {\n    let pieceNum = this.pieceNum_;\n    if (pieceNum < this.pieces_.length) {\n      pieceNum++;\n    }\n    return new Path(this.pieces_, pieceNum);\n  }\n\n  /**\n   * @return {?string}\n   */\n  getBack(): string | null {\n    if (this.pieceNum_ < this.pieces_.length)\n      return this.pieces_[this.pieces_.length - 1];\n\n    return null;\n  }\n\n  toString(): string {\n    let pathString = '';\n    for (let i = this.pieceNum_; i < this.pieces_.length; i++) {\n      if (this.pieces_[i] !== '') pathString += '/' + this.pieces_[i];\n    }\n\n    return pathString || '/';\n  }\n\n  toUrlEncodedString(): string {\n    let pathString = '';\n    for (let i = this.pieceNum_; i < this.pieces_.length; i++) {\n      if (this.pieces_[i] !== '')\n        pathString += '/' + encodeURIComponent(String(this.pieces_[i]));\n    }\n\n    return pathString || '/';\n  }\n\n  /**\n   * Shallow copy of the parts of the path.\n   *\n   * @param {number=} begin\n   * @return {!Array<string>}\n   */\n  slice(begin: number = 0): string[] {\n    return this.pieces_.slice(this.pieceNum_ + begin);\n  }\n\n  /**\n   * @return {?Path}\n   */\n  parent(): Path | null {\n    if (this.pieceNum_ >= this.pieces_.length) return null;\n\n    const pieces = [];\n    for (let i = this.pieceNum_; i < this.pieces_.length - 1; i++)\n      pieces.push(this.pieces_[i]);\n\n    return new Path(pieces, 0);\n  }\n\n  /**\n   * @param {string|!Path} childPathObj\n   * @return {!Path}\n   */\n  child(childPathObj: string | Path): Path {\n    const pieces = [];\n    for (let i = this.pieceNum_; i < this.pieces_.length; i++)\n      pieces.push(this.pieces_[i]);\n\n    if (childPathObj instanceof Path) {\n      for (\n        let i = childPathObj.pieceNum_;\n        i < childPathObj.pieces_.length;\n        i++\n      ) {\n        pieces.push(childPathObj.pieces_[i]);\n      }\n    } else {\n      const childPieces = childPathObj.split('/');\n      for (let i = 0; i < childPieces.length; i++) {\n        if (childPieces[i].length > 0) pieces.push(childPieces[i]);\n      }\n    }\n\n    return new Path(pieces, 0);\n  }\n\n  /**\n   * @return {boolean} True if there are no segments in this path\n   */\n  isEmpty(): boolean {\n    return this.pieceNum_ >= this.pieces_.length;\n  }\n\n  /**\n   * @param {!Path} outerPath\n   * @param {!Path} innerPath\n   * @return {!Path} The path from outerPath to innerPath\n   */\n  static relativePath(outerPath: Path, innerPath: Path): Path {\n    const outer = outerPath.getFront(),\n      inner = innerPath.getFront();\n    if (outer === null) {\n      return innerPath;\n    } else if (outer === inner) {\n      return Path.relativePath(outerPath.popFront(), innerPath.popFront());\n    } else {\n      throw new Error(\n        'INTERNAL ERROR: innerPath (' +\n          innerPath +\n          ') is not within ' +\n          'outerPath (' +\n          outerPath +\n          ')'\n      );\n    }\n  }\n\n  /**\n   * @param {!Path} left\n   * @param {!Path} right\n   * @return {number} -1, 0, 1 if left is less, equal, or greater than the right.\n   */\n  static comparePaths(left: Path, right: Path): number {\n    const leftKeys = left.slice();\n    const rightKeys = right.slice();\n    for (let i = 0; i < leftKeys.length && i < rightKeys.length; i++) {\n      const cmp = nameCompare(leftKeys[i], rightKeys[i]);\n      if (cmp !== 0) return cmp;\n    }\n    if (leftKeys.length === rightKeys.length) return 0;\n    return leftKeys.length < rightKeys.length ? -1 : 1;\n  }\n\n  /**\n   *\n   * @param {Path} other\n   * @return {boolean} true if paths are the same.\n   */\n  equals(other: Path): boolean {\n    if (this.getLength() !== other.getLength()) {\n      return false;\n    }\n\n    for (\n      let i = this.pieceNum_, j = other.pieceNum_;\n      i <= this.pieces_.length;\n      i++, j++\n    ) {\n      if (this.pieces_[i] !== other.pieces_[j]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   *\n   * @param {!Path} other\n   * @return {boolean} True if this path is a parent (or the same as) other\n   */\n  contains(other: Path): boolean {\n    let i = this.pieceNum_;\n    let j = other.pieceNum_;\n    if (this.getLength() > other.getLength()) {\n      return false;\n    }\n    while (i < this.pieces_.length) {\n      if (this.pieces_[i] !== other.pieces_[j]) {\n        return false;\n      }\n      ++i;\n      ++j;\n    }\n    return true;\n  }\n} // end Path\n\n/**\n * Dynamic (mutable) path used to count path lengths.\n *\n * This class is used to efficiently check paths for valid\n * length (in UTF8 bytes) and depth (used in path validation).\n *\n * Throws Error exception if path is ever invalid.\n *\n * The definition of a path always begins with '/'.\n */\nexport class ValidationPath {\n  /** @type {!Array<string>} */\n  private parts_: string[];\n  /** @type {number} Initialize to number of '/' chars needed in path. */\n  private byteLength_: number;\n\n  /**\n   * @param {!Path} path Initial Path.\n   * @param {string} errorPrefix_ Prefix for any error messages.\n   */\n  constructor(path: Path, private errorPrefix_: string) {\n    /** @type {!Array<string>} */\n    this.parts_ = path.slice();\n    /** @type {number} Initialize to number of '/' chars needed in path. */\n    this.byteLength_ = Math.max(1, this.parts_.length);\n\n    for (let i = 0; i < this.parts_.length; i++) {\n      this.byteLength_ += stringLength(this.parts_[i]);\n    }\n    this.checkValid_();\n  }\n\n  /** @const {number} Maximum key depth. */\n  static get MAX_PATH_DEPTH() {\n    return 32;\n  }\n\n  /** @const {number} Maximum number of (UTF8) bytes in a Firebase path. */\n  static get MAX_PATH_LENGTH_BYTES() {\n    return 768;\n  }\n\n  /** @param {string} child */\n  push(child: string) {\n    // Count the needed '/'\n    if (this.parts_.length > 0) {\n      this.byteLength_ += 1;\n    }\n    this.parts_.push(child);\n    this.byteLength_ += stringLength(child);\n    this.checkValid_();\n  }\n\n  pop() {\n    const last = this.parts_.pop();\n    this.byteLength_ -= stringLength(last);\n    // Un-count the previous '/'\n    if (this.parts_.length > 0) {\n      this.byteLength_ -= 1;\n    }\n  }\n\n  private checkValid_() {\n    if (this.byteLength_ > ValidationPath.MAX_PATH_LENGTH_BYTES) {\n      throw new Error(\n        this.errorPrefix_ +\n          'has a key path longer than ' +\n          ValidationPath.MAX_PATH_LENGTH_BYTES +\n          ' bytes (' +\n          this.byteLength_ +\n          ').'\n      );\n    }\n    if (this.parts_.length > ValidationPath.MAX_PATH_DEPTH) {\n      throw new Error(\n        this.errorPrefix_ +\n          'path specified exceeds the maximum depth that can be written (' +\n          ValidationPath.MAX_PATH_DEPTH +\n          ') or object contains a cycle ' +\n          this.toErrorString()\n      );\n    }\n  }\n\n  /**\n   * String for use in error messages - uses '.' notation for path.\n   *\n   * @return {string}\n   */\n  toErrorString(): string {\n    if (this.parts_.length == 0) {\n      return '';\n    }\n    return \"in property '\" + this.parts_.join('.') + \"'\";\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { PersistentStorage } from './storage/storage';\nimport { LONG_POLLING, WEBSOCKET } from '../realtime/Constants';\nimport { each } from './util/util';\n\n/**\n * A class that holds metadata about a Repo object\n *\n * @constructor\n */\nexport class RepoInfo {\n  host: string;\n  domain: string;\n  internalHost: string;\n\n  /**\n   * @param {string} host Hostname portion of the url for the repo\n   * @param {boolean} secure Whether or not this repo is accessed over ssl\n   * @param {string} namespace The namespace represented by the repo\n   * @param {boolean} webSocketOnly Whether to prefer websockets over all other transports (used by Nest).\n   * @param {string=} persistenceKey Override the default session persistence storage key\n   */\n  constructor(\n    host: string,\n    public secure: boolean,\n    public namespace: string,\n    public webSocketOnly: boolean,\n    public persistenceKey: string = '',\n    public includeNamespaceInQueryParams: boolean = false\n  ) {\n    this.host = host.toLowerCase();\n    this.domain = this.host.substr(this.host.indexOf('.') + 1);\n    this.internalHost = PersistentStorage.get('host:' + host) || this.host;\n  }\n\n  needsQueryParam(): boolean {\n    return (\n      this.host !== this.internalHost ||\n      this.isCustomHost() ||\n      this.includeNamespaceInQueryParams\n    );\n  }\n\n  isCacheableHost(): boolean {\n    return this.internalHost.substr(0, 2) === 's-';\n  }\n\n  isDemoHost() {\n    return this.domain === 'firebaseio-demo.com';\n  }\n\n  isCustomHost() {\n    return (\n      this.domain !== 'firebaseio.com' && this.domain !== 'firebaseio-demo.com'\n    );\n  }\n\n  updateHost(newHost: string) {\n    if (newHost !== this.internalHost) {\n      this.internalHost = newHost;\n      if (this.isCacheableHost()) {\n        PersistentStorage.set('host:' + this.host, this.internalHost);\n      }\n    }\n  }\n\n  /**\n   * Returns the websocket URL for this repo\n   * @param {string} type of connection\n   * @param {Object} params list\n   * @return {string} The URL for this repo\n   */\n  connectionURL(type: string, params: { [k: string]: string }): string {\n    assert(typeof type === 'string', 'typeof type must == string');\n    assert(typeof params === 'object', 'typeof params must == object');\n\n    let connURL: string;\n    if (type === WEBSOCKET) {\n      connURL =\n        (this.secure ? 'wss://' : 'ws://') + this.internalHost + '/.ws?';\n    } else if (type === LONG_POLLING) {\n      connURL =\n        (this.secure ? 'https://' : 'http://') + this.internalHost + '/.lp?';\n    } else {\n      throw new Error('Unknown connection type: ' + type);\n    }\n    if (this.needsQueryParam()) {\n      params['ns'] = this.namespace;\n    }\n\n    const pairs: string[] = [];\n\n    each(params, (key: string, value: string) => {\n      pairs.push(key + '=' + value);\n    });\n\n    return connURL + pairs.join('&');\n  }\n\n  /** @return {string} */\n  toString(): string {\n    let str = this.toURLString();\n    if (this.persistenceKey) {\n      str += '<' + this.persistenceKey + '>';\n    }\n    return str;\n  }\n\n  /** @return {string} */\n  toURLString(): string {\n    return (this.secure ? 'https://' : 'http://') + this.host;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const PROTOCOL_VERSION = '5';\n\nexport const VERSION_PARAM = 'v';\n\nexport const TRANSPORT_SESSION_PARAM = 's';\n\nexport const REFERER_PARAM = 'r';\n\nexport const FORGE_REF = 'f';\n\nexport const FORGE_DOMAIN = 'firebaseio.com';\n\nexport const LAST_SESSION_PARAM = 'ls';\n\nexport const WEBSOCKET = 'websocket';\n\nexport const LONG_POLLING = 'long_polling';\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../Path';\nimport { RepoInfo } from '../../RepoInfo';\nimport { warnIfPageIsSecure, warn, fatal } from '../util';\n\n/**\n * @param {!string} pathString\n * @return {string}\n */\nfunction decodePath(pathString: string): string {\n  let pathStringDecoded = '';\n  const pieces = pathString.split('/');\n  for (let i = 0; i < pieces.length; i++) {\n    if (pieces[i].length > 0) {\n      let piece = pieces[i];\n      try {\n        piece = decodeURIComponent(piece.replace(/\\+/g, ' '));\n      } catch (e) {}\n      pathStringDecoded += '/' + piece;\n    }\n  }\n  return pathStringDecoded;\n}\n\n/**\n * @param {!string} queryString\n * @return {!{[key:string]:string}} key value hash\n */\nfunction decodeQuery(queryString: string): { [key: string]: string } {\n  let results = {};\n  if (queryString.charAt(0) === '?') {\n    queryString = queryString.substring(1);\n  }\n  for (const segment of queryString.split('&')) {\n    if (segment.length === 0) {\n      continue;\n    }\n    const kv = segment.split('=');\n    if (kv.length === 2) {\n      results[decodeURIComponent(kv[0])] = decodeURIComponent(kv[1]);\n    } else {\n      warn(`Invalid query segment '${segment}' in query '${queryString}'`);\n    }\n  }\n  return results;\n}\n\n/**\n *\n * @param {!string} dataURL\n * @return {{repoInfo: !RepoInfo, path: !Path}}\n */\nexport const parseRepoInfo = function(\n  dataURL: string\n): { repoInfo: RepoInfo; path: Path } {\n  const parsedUrl = parseDatabaseURL(dataURL),\n    namespace = parsedUrl.namespace;\n\n  if (parsedUrl.domain === 'firebase') {\n    fatal(\n      parsedUrl.host +\n        ' is no longer supported. ' +\n        'Please use <YOUR FIREBASE>.firebaseio.com instead'\n    );\n  }\n\n  // Catch common error of uninitialized namespace value.\n  if (\n    (!namespace || namespace == 'undefined') &&\n    parsedUrl.domain !== 'localhost'\n  ) {\n    fatal(\n      'Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com'\n    );\n  }\n\n  if (!parsedUrl.secure) {\n    warnIfPageIsSecure();\n  }\n\n  const webSocketOnly = parsedUrl.scheme === 'ws' || parsedUrl.scheme === 'wss';\n\n  return {\n    repoInfo: new RepoInfo(\n      parsedUrl.host,\n      parsedUrl.secure,\n      namespace,\n      webSocketOnly,\n      /*persistenceKey=*/ '',\n      /*includeNamespaceInQueryParams=*/ namespace != parsedUrl.subdomain\n    ),\n    path: new Path(parsedUrl.pathString)\n  };\n};\n\n/**\n *\n * @param {!string} dataURL\n * @return {{host: string, port: number, domain: string, subdomain: string, secure: boolean, scheme: string, pathString: string, namespace: string}}\n */\nexport const parseDatabaseURL = function(\n  dataURL: string\n): {\n  host: string;\n  port: number;\n  domain: string;\n  subdomain: string;\n  secure: boolean;\n  scheme: string;\n  pathString: string;\n  namespace: string;\n} {\n  // Default to empty strings in the event of a malformed string.\n  let host = '',\n    domain = '',\n    subdomain = '',\n    pathString = '',\n    namespace = '';\n\n  // Always default to SSL, unless otherwise specified.\n  let secure = true,\n    scheme = 'https',\n    port = 443;\n\n  // Don't do any validation here. The caller is responsible for validating the result of parsing.\n  if (typeof dataURL === 'string') {\n    // Parse scheme.\n    let colonInd = dataURL.indexOf('//');\n    if (colonInd >= 0) {\n      scheme = dataURL.substring(0, colonInd - 1);\n      dataURL = dataURL.substring(colonInd + 2);\n    }\n\n    // Parse host, path, and query string.\n    let slashInd = dataURL.indexOf('/');\n    if (slashInd === -1) {\n      slashInd = dataURL.length;\n    }\n    let questionMarkInd = dataURL.indexOf('?');\n    if (questionMarkInd === -1) {\n      questionMarkInd = dataURL.length;\n    }\n    host = dataURL.substring(0, Math.min(slashInd, questionMarkInd));\n    if (slashInd < questionMarkInd) {\n      // For pathString, questionMarkInd will always come after slashInd\n      pathString = decodePath(dataURL.substring(slashInd, questionMarkInd));\n    }\n    let queryParams = decodeQuery(\n      dataURL.substring(Math.min(dataURL.length, questionMarkInd))\n    );\n\n    // If we have a port, use scheme for determining if it's secure.\n    colonInd = host.indexOf(':');\n    if (colonInd >= 0) {\n      secure = scheme === 'https' || scheme === 'wss';\n      port = parseInt(host.substring(colonInd + 1), 10);\n    } else {\n      colonInd = dataURL.length;\n    }\n\n    const parts = host.split('.');\n    if (parts.length === 3) {\n      // Normalize namespaces to lowercase to share storage / connection.\n      domain = parts[1];\n      subdomain = parts[0].toLowerCase();\n      // We interpret the subdomain of a 3 component URL as the namespace name.\n      namespace = subdomain;\n    } else if (parts.length === 2) {\n      domain = parts[0];\n    } else if (parts[0].slice(0, colonInd).toLowerCase() === 'localhost') {\n      domain = 'localhost';\n    }\n    // Always treat the value of the `ns` as the namespace name if it is present.\n    if ('ns' in queryParams) {\n      namespace = queryParams['ns'];\n    }\n  }\n\n  return {\n    host,\n    port,\n    domain,\n    subdomain,\n    secure,\n    scheme,\n    pathString,\n    namespace\n  };\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Index } from './Index';\nimport { Node, NamedNode } from '../Node';\nimport { nameCompare, MAX_NAME } from '../../util/util';\nimport { assert, assertionError } from '@firebase/util';\nimport { ChildrenNode } from '../ChildrenNode';\n\nlet __EMPTY_NODE: ChildrenNode;\n\nexport class KeyIndex extends Index {\n  static get __EMPTY_NODE() {\n    return __EMPTY_NODE;\n  }\n\n  static set __EMPTY_NODE(val) {\n    __EMPTY_NODE = val;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  compare(a: NamedNode, b: NamedNode): number {\n    return nameCompare(a.name, b.name);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isDefinedOn(node: Node): boolean {\n    // We could probably return true here (since every node has a key), but it's never called\n    // so just leaving unimplemented for now.\n    throw assertionError('KeyIndex.isDefinedOn not expected to be called.');\n  }\n\n  /**\n   * @inheritDoc\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    return false; // The key for a node never changes.\n  }\n\n  /**\n   * @inheritDoc\n   */\n  minPost() {\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  maxPost(): NamedNode {\n    // TODO: This should really be created once and cached in a static property, but\n    // NamedNode isn't defined yet, so I can't use it in a static.  Bleh.\n    return new NamedNode(MAX_NAME, __EMPTY_NODE);\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {string} name\n   * @return {!NamedNode}\n   */\n  makePost(indexValue: string, name: string): NamedNode {\n    assert(\n      typeof indexValue === 'string',\n      'KeyIndex indexValue must always be a string.'\n    );\n    // We just use empty node, but it'll never be compared, since our comparator only looks at name.\n    return new NamedNode(indexValue, __EMPTY_NODE);\n  }\n\n  /**\n   * @return {!string} String representation for inclusion in a query spec\n   */\n  toString(): string {\n    return '.key';\n  }\n}\n\nexport const KEY_INDEX = new KeyIndex();\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { doubleToIEEE754String } from '../util/util';\nimport { contains } from '@firebase/util';\nimport { Node } from './Node';\n\nlet MAX_NODE: Node;\n\nexport function setMaxNode(val: Node) {\n  MAX_NODE = val;\n}\n\n/**\n * @param {(!string|!number)} priority\n * @return {!string}\n */\nexport const priorityHashText = function(priority: string | number): string {\n  if (typeof priority === 'number')\n    return 'number:' + doubleToIEEE754String(priority);\n  else return 'string:' + priority;\n};\n\n/**\n * Validates that a priority snapshot Node is valid.\n *\n * @param {!Node} priorityNode\n */\nexport const validatePriorityNode = function(priorityNode: Node) {\n  if (priorityNode.isLeafNode()) {\n    const val = priorityNode.val();\n    assert(\n      typeof val === 'string' ||\n        typeof val === 'number' ||\n        (typeof val === 'object' &&\n          contains(val as { [key: string]: unknown }, '.sv')),\n      'Priority must be a string or number.'\n    );\n  } else {\n    assert(\n      priorityNode === MAX_NODE || priorityNode.isEmpty(),\n      'priority of unexpected type.'\n    );\n  }\n  // Don't call getPriority() on MAX_NODE to avoid hitting assertion.\n  assert(\n    priorityNode === MAX_NODE || priorityNode.getPriority().isEmpty(),\n    \"Priority nodes can't have a priority of their own.\"\n  );\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path, ValidationPath } from './Path';\nimport { contains, safeGet } from '@firebase/util';\nimport { isInvalidJSONNumber, each } from './util';\nimport { errorPrefix as errorPrefixFxn } from '@firebase/util';\nimport { stringLength } from '@firebase/util';\nimport { RepoInfo } from '../RepoInfo';\n\n/**\n * True for invalid Firebase keys\n * @type {RegExp}\n * @private\n */\nexport const INVALID_KEY_REGEX_ = /[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/;\n\n/**\n * True for invalid Firebase paths.\n * Allows '/' in paths.\n * @type {RegExp}\n * @private\n */\nexport const INVALID_PATH_REGEX_ = /[\\[\\].#$\\u0000-\\u001F\\u007F]/;\n\n/**\n * Maximum number of characters to allow in leaf value\n * @type {number}\n * @private\n */\nexport const MAX_LEAF_SIZE_ = 10 * 1024 * 1024;\n\n/**\n * @param {*} key\n * @return {boolean}\n */\nexport const isValidKey = function(key: any): boolean {\n  return (\n    typeof key === 'string' && key.length !== 0 && !INVALID_KEY_REGEX_.test(key)\n  );\n};\n\n/**\n * @param {string} pathString\n * @return {boolean}\n */\nexport const isValidPathString = function(pathString: string): boolean {\n  return (\n    typeof pathString === 'string' &&\n    pathString.length !== 0 &&\n    !INVALID_PATH_REGEX_.test(pathString)\n  );\n};\n\n/**\n * @param {string} pathString\n * @return {boolean}\n */\nexport const isValidRootPathString = function(pathString: string): boolean {\n  if (pathString) {\n    // Allow '/.info/' at the beginning.\n    pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\n  }\n\n  return isValidPathString(pathString);\n};\n\n/**\n * @param {*} priority\n * @return {boolean}\n */\nexport const isValidPriority = function(priority: any): boolean {\n  return (\n    priority === null ||\n    typeof priority === 'string' ||\n    (typeof priority === 'number' && !isInvalidJSONNumber(priority)) ||\n    (priority && typeof priority === 'object' && contains(priority, '.sv'))\n  );\n};\n\n/**\n * Pre-validate a datum passed as an argument to Firebase function.\n *\n * @param {string} fnName\n * @param {number} argumentNumber\n * @param {*} data\n * @param {!Path} path\n * @param {boolean} optional\n */\nexport const validateFirebaseDataArg = function(\n  fnName: string,\n  argumentNumber: number,\n  data: any,\n  path: Path,\n  optional: boolean\n) {\n  if (optional && data === undefined) return;\n\n  validateFirebaseData(\n    errorPrefixFxn(fnName, argumentNumber, optional),\n    data,\n    path\n  );\n};\n\n/**\n * Validate a data object client-side before sending to server.\n *\n * @param {string} errorPrefix\n * @param {*} data\n * @param {!Path|!ValidationPath} path_\n */\nexport const validateFirebaseData = function(\n  errorPrefix: string,\n  data: any,\n  path_: Path | ValidationPath\n) {\n  const path =\n    path_ instanceof Path ? new ValidationPath(path_, errorPrefix) : path_;\n\n  if (data === undefined) {\n    throw new Error(errorPrefix + 'contains undefined ' + path.toErrorString());\n  }\n  if (typeof data === 'function') {\n    throw new Error(\n      errorPrefix +\n        'contains a function ' +\n        path.toErrorString() +\n        ' with contents = ' +\n        data.toString()\n    );\n  }\n  if (isInvalidJSONNumber(data)) {\n    throw new Error(\n      errorPrefix + 'contains ' + data.toString() + ' ' + path.toErrorString()\n    );\n  }\n\n  // Check max leaf size, but try to avoid the utf8 conversion if we can.\n  if (\n    typeof data === 'string' &&\n    data.length > MAX_LEAF_SIZE_ / 3 &&\n    stringLength(data) > MAX_LEAF_SIZE_\n  ) {\n    throw new Error(\n      errorPrefix +\n        'contains a string greater than ' +\n        MAX_LEAF_SIZE_ +\n        ' utf8 bytes ' +\n        path.toErrorString() +\n        \" ('\" +\n        data.substring(0, 50) +\n        \"...')\"\n    );\n  }\n\n  // TODO = Perf = Consider combining the recursive validation of keys into NodeFromJSON\n  // to save extra walking of large objects.\n  if (data && typeof data === 'object') {\n    let hasDotValue = false;\n    let hasActualChild = false;\n    each(data, function(key: string, value: any) {\n      if (key === '.value') {\n        hasDotValue = true;\n      } else if (key !== '.priority' && key !== '.sv') {\n        hasActualChild = true;\n        if (!isValidKey(key)) {\n          throw new Error(\n            errorPrefix +\n              ' contains an invalid key (' +\n              key +\n              ') ' +\n              path.toErrorString() +\n              '.  Keys must be non-empty strings ' +\n              'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"'\n          );\n        }\n      }\n\n      path.push(key);\n      validateFirebaseData(errorPrefix, value, path);\n      path.pop();\n    });\n\n    if (hasDotValue && hasActualChild) {\n      throw new Error(\n        errorPrefix +\n          ' contains \".value\" child ' +\n          path.toErrorString() +\n          ' in addition to actual children.'\n      );\n    }\n  }\n};\n\n/**\n * Pre-validate paths passed in the firebase function.\n *\n * @param {string} errorPrefix\n * @param {Array<!Path>} mergePaths\n */\nexport const validateFirebaseMergePaths = function(\n  errorPrefix: string,\n  mergePaths: Path[]\n) {\n  let i, curPath;\n  for (i = 0; i < mergePaths.length; i++) {\n    curPath = mergePaths[i];\n    const keys = curPath.slice();\n    for (let j = 0; j < keys.length; j++) {\n      if (keys[j] === '.priority' && j === keys.length - 1) {\n        // .priority is OK\n      } else if (!isValidKey(keys[j])) {\n        throw new Error(\n          errorPrefix +\n            'contains an invalid key (' +\n            keys[j] +\n            ') in path ' +\n            curPath.toString() +\n            '. Keys must be non-empty strings ' +\n            'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"'\n        );\n      }\n    }\n  }\n\n  // Check that update keys are not descendants of each other.\n  // We rely on the property that sorting guarantees that ancestors come\n  // right before descendants.\n  mergePaths.sort(Path.comparePaths);\n  let prevPath: Path | null = null;\n  for (i = 0; i < mergePaths.length; i++) {\n    curPath = mergePaths[i];\n    if (prevPath !== null && prevPath.contains(curPath)) {\n      throw new Error(\n        errorPrefix +\n          'contains a path ' +\n          prevPath.toString() +\n          ' that is ancestor of another path ' +\n          curPath.toString()\n      );\n    }\n    prevPath = curPath;\n  }\n};\n\n/**\n * pre-validate an object passed as an argument to firebase function (\n * must be an object - e.g. for firebase.update()).\n *\n * @param {string} fnName\n * @param {number} argumentNumber\n * @param {*} data\n * @param {!Path} path\n * @param {boolean} optional\n */\nexport const validateFirebaseMergeDataArg = function(\n  fnName: string,\n  argumentNumber: number,\n  data: any,\n  path: Path,\n  optional: boolean\n) {\n  if (optional && data === undefined) return;\n\n  const errorPrefix = errorPrefixFxn(fnName, argumentNumber, optional);\n\n  if (!(data && typeof data === 'object') || Array.isArray(data)) {\n    throw new Error(\n      errorPrefix + ' must be an object containing the children to replace.'\n    );\n  }\n\n  const mergePaths: Path[] = [];\n  each(data, function(key: string, value: any) {\n    const curPath = new Path(key);\n    validateFirebaseData(errorPrefix, value, path.child(curPath));\n    if (curPath.getBack() === '.priority') {\n      if (!isValidPriority(value)) {\n        throw new Error(\n          errorPrefix +\n            \"contains an invalid value for '\" +\n            curPath.toString() +\n            \"', which must be a valid \" +\n            'Firebase priority (a string, finite number, server value, or null).'\n        );\n      }\n    }\n    mergePaths.push(curPath);\n  });\n  validateFirebaseMergePaths(errorPrefix, mergePaths);\n};\n\nexport const validatePriority = function(\n  fnName: string,\n  argumentNumber: number,\n  priority: any,\n  optional: boolean\n) {\n  if (optional && priority === undefined) return;\n  if (isInvalidJSONNumber(priority))\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'is ' +\n        priority.toString() +\n        ', but must be a valid Firebase priority (a string, finite number, ' +\n        'server value, or null).'\n    );\n  // Special case to allow importing data with a .sv.\n  if (!isValidPriority(priority))\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'must be a valid Firebase priority ' +\n        '(a string, finite number, server value, or null).'\n    );\n};\n\nexport const validateEventType = function(\n  fnName: string,\n  argumentNumber: number,\n  eventType: string,\n  optional: boolean\n) {\n  if (optional && eventType === undefined) return;\n\n  switch (eventType) {\n    case 'value':\n    case 'child_added':\n    case 'child_removed':\n    case 'child_changed':\n    case 'child_moved':\n      break;\n    default:\n      throw new Error(\n        errorPrefixFxn(fnName, argumentNumber, optional) +\n          'must be a valid event type = \"value\", \"child_added\", \"child_removed\", ' +\n          '\"child_changed\", or \"child_moved\".'\n      );\n  }\n};\n\nexport const validateKey = function(\n  fnName: string,\n  argumentNumber: number,\n  key: string,\n  optional: boolean\n) {\n  if (optional && key === undefined) return;\n  if (!isValidKey(key))\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'was an invalid key = \"' +\n        key +\n        '\".  Firebase keys must be non-empty strings and ' +\n        'can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").'\n    );\n};\n\nexport const validatePathString = function(\n  fnName: string,\n  argumentNumber: number,\n  pathString: string,\n  optional: boolean\n) {\n  if (optional && pathString === undefined) return;\n\n  if (!isValidPathString(pathString))\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'was an invalid path = \"' +\n        pathString +\n        '\". Paths must be non-empty strings and ' +\n        'can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"'\n    );\n};\n\nexport const validateRootPathString = function(\n  fnName: string,\n  argumentNumber: number,\n  pathString: string,\n  optional: boolean\n) {\n  if (pathString) {\n    // Allow '/.info/' at the beginning.\n    pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\n  }\n\n  validatePathString(fnName, argumentNumber, pathString, optional);\n};\n\nexport const validateWritablePath = function(fnName: string, path: Path) {\n  if (path.getFront() === '.info') {\n    throw new Error(fnName + \" failed = Can't modify data under /.info/\");\n  }\n};\n\nexport const validateUrl = function(\n  fnName: string,\n  argumentNumber: number,\n  parsedUrl: { repoInfo: RepoInfo; path: Path }\n) {\n  // TODO = Validate server better.\n  const pathString = parsedUrl.path.toString();\n  if (\n    !(typeof parsedUrl.repoInfo.host === 'string') ||\n    parsedUrl.repoInfo.host.length === 0 ||\n    (!isValidKey(parsedUrl.repoInfo.namespace) &&\n      parsedUrl.repoInfo.host.split(':')[0] !== 'localhost') ||\n    (pathString.length !== 0 && !isValidRootPathString(pathString))\n  ) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, false) +\n        'must be a valid firebase URL and ' +\n        'the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".'\n    );\n  }\n};\n\nexport const validateCredential = function(\n  fnName: string,\n  argumentNumber: number,\n  cred: any,\n  optional: boolean\n) {\n  if (optional && cred === undefined) return;\n  if (!(typeof cred === 'string'))\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'must be a valid credential (a string).'\n    );\n};\n\nexport const validateBoolean = function(\n  fnName: string,\n  argumentNumber: number,\n  bool: any,\n  optional: boolean\n) {\n  if (optional && bool === undefined) return;\n  if (typeof bool !== 'boolean')\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) + 'must be a boolean.'\n    );\n};\n\nexport const validateString = function(\n  fnName: string,\n  argumentNumber: number,\n  string: any,\n  optional: boolean\n) {\n  if (optional && string === undefined) return;\n  if (!(typeof string === 'string')) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'must be a valid string.'\n    );\n  }\n};\n\nexport const validateObject = function(\n  fnName: string,\n  argumentNumber: number,\n  obj: any,\n  optional: boolean\n) {\n  if (optional && obj === undefined) return;\n  if (!(obj && typeof obj === 'object') || obj === null) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'must be a valid object.'\n    );\n  }\n};\n\nexport const validateObjectContainsKey = function(\n  fnName: string,\n  argumentNumber: number,\n  obj: any,\n  key: string,\n  optional: boolean,\n  opt_type?: string\n) {\n  const objectContainsKey =\n    obj && typeof obj === 'object' && contains(obj, key);\n\n  if (!objectContainsKey) {\n    if (optional) {\n      return;\n    } else {\n      throw new Error(\n        errorPrefixFxn(fnName, argumentNumber, optional) +\n          'must contain the key \"' +\n          key +\n          '\"'\n      );\n    }\n  }\n\n  if (opt_type) {\n    const val = safeGet(obj, key);\n    if (\n      (opt_type === 'number' && !(typeof val === 'number')) ||\n      (opt_type === 'string' && !(typeof val === 'string')) ||\n      (opt_type === 'boolean' && !(typeof val === 'boolean')) ||\n      (opt_type === 'function' && !(typeof val === 'function')) ||\n      (opt_type === 'object' && !(typeof val === 'object') && val)\n    ) {\n      if (optional) {\n        throw new Error(\n          errorPrefixFxn(fnName, argumentNumber, optional) +\n            'contains invalid value for key \"' +\n            key +\n            '\" (must be of type \"' +\n            opt_type +\n            '\")'\n        );\n      } else {\n        throw new Error(\n          errorPrefixFxn(fnName, argumentNumber, optional) +\n            'must contain the key \"' +\n            key +\n            '\" with type \"' +\n            opt_type +\n            '\"'\n        );\n      }\n    }\n  }\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { validateArgCount, validateCallback } from '@firebase/util';\nimport {\n  validateWritablePath,\n  validateFirebaseDataArg,\n  validatePriority,\n  validateFirebaseMergeDataArg\n} from '../core/util/validation';\nimport { warn } from '../core/util/util';\nimport { Deferred } from '@firebase/util';\nimport { Repo } from '../core/Repo';\nimport { Path } from '../core/util/Path';\n\n/**\n * @constructor\n */\nexport class OnDisconnect {\n  /**\n   * @param {!Repo} repo_\n   * @param {!Path} path_\n   */\n  constructor(private repo_: Repo, private path_: Path) {}\n\n  /**\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  cancel(onComplete?: (a: Error | null) => void): Promise<void> {\n    validateArgCount('OnDisconnect.cancel', 0, 1, arguments.length);\n    validateCallback('OnDisconnect.cancel', 1, onComplete, true);\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectCancel(\n      this.path_,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  remove(onComplete?: (a: Error | null) => void): Promise<void> {\n    validateArgCount('OnDisconnect.remove', 0, 1, arguments.length);\n    validateWritablePath('OnDisconnect.remove', this.path_);\n    validateCallback('OnDisconnect.remove', 1, onComplete, true);\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectSet(\n      this.path_,\n      null,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {*} value\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  set(value: any, onComplete?: (a: Error | null) => void): Promise<void> {\n    validateArgCount('OnDisconnect.set', 1, 2, arguments.length);\n    validateWritablePath('OnDisconnect.set', this.path_);\n    validateFirebaseDataArg('OnDisconnect.set', 1, value, this.path_, false);\n    validateCallback('OnDisconnect.set', 2, onComplete, true);\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectSet(\n      this.path_,\n      value,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {*} value\n   * @param {number|string|null} priority\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  setWithPriority(\n    value: any,\n    priority: number | string | null,\n    onComplete?: (a: Error | null) => void\n  ): Promise<void> {\n    validateArgCount('OnDisconnect.setWithPriority', 2, 3, arguments.length);\n    validateWritablePath('OnDisconnect.setWithPriority', this.path_);\n    validateFirebaseDataArg(\n      'OnDisconnect.setWithPriority',\n      1,\n      value,\n      this.path_,\n      false\n    );\n    validatePriority('OnDisconnect.setWithPriority', 2, priority, false);\n    validateCallback('OnDisconnect.setWithPriority', 3, onComplete, true);\n\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectSetWithPriority(\n      this.path_,\n      value,\n      priority,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {!Object} objectToMerge\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  update(\n    objectToMerge: object,\n    onComplete?: (a: Error | null) => void\n  ): Promise<void> {\n    validateArgCount('OnDisconnect.update', 1, 2, arguments.length);\n    validateWritablePath('OnDisconnect.update', this.path_);\n    if (Array.isArray(objectToMerge)) {\n      const newObjectToMerge: { [k: string]: any } = {};\n      for (let i = 0; i < objectToMerge.length; ++i) {\n        newObjectToMerge['' + i] = objectToMerge[i];\n      }\n      objectToMerge = newObjectToMerge;\n      warn(\n        'Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the ' +\n          'existing data, or an Object with integer keys if you really do want to only update some of the children.'\n      );\n    }\n    validateFirebaseMergeDataArg(\n      'OnDisconnect.update',\n      1,\n      objectToMerge,\n      this.path_,\n      false\n    );\n    validateCallback('OnDisconnect.update', 2, onComplete, true);\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectUpdate(\n      this.path_,\n      objectToMerge,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DataSnapshot } from './DataSnapshot';\nimport { validateArgCount } from '@firebase/util';\n\nexport class TransactionResult {\n  /**\n   * A type for the resolve value of Firebase.transaction.\n   * @constructor\n   * @dict\n   * @param {boolean} committed\n   * @param {DataSnapshot} snapshot\n   */\n  constructor(public committed: boolean, public snapshot: DataSnapshot) {}\n\n  // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\n  // for end-users\n  toJSON(): object {\n    validateArgCount('TransactionResult.toJSON', 0, 1, arguments.length);\n    return { committed: this.committed, snapshot: this.snapshot.toJSON() };\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\n/**\n * Fancy ID generator that creates 20-character string identifiers with the\n * following properties:\n *\n * 1. They're based on timestamp so that they sort *after* any existing ids.\n * 2. They contain 72-bits of random data after the timestamp so that IDs won't\n *    collide with other clients' IDs.\n * 3. They sort *lexicographically* (so the timestamp is converted to characters\n *    that will sort properly).\n * 4. They're monotonically increasing. Even if you generate more than one in\n *    the same timestamp, the latter ones will sort after the former ones. We do\n *    this by using the previous random bits but \"incrementing\" them by 1 (only\n *    in the case of a timestamp collision).\n */\nexport const nextPushId = (function() {\n  // Modeled after base64 web-safe chars, but ordered by ASCII.\n  const PUSH_CHARS =\n    '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz';\n\n  // Timestamp of last push, used to prevent local collisions if you push twice\n  // in one ms.\n  let lastPushTime = 0;\n\n  // We generate 72-bits of randomness which get turned into 12 characters and\n  // appended to the timestamp to prevent collisions with other clients. We\n  // store the last characters we generated because in the event of a collision,\n  // we'll use those same characters except \"incremented\" by one.\n  const lastRandChars: number[] = [];\n\n  return function(now: number) {\n    const duplicateTime = now === lastPushTime;\n    lastPushTime = now;\n\n    let i;\n    const timeStampChars = new Array(8);\n    for (i = 7; i >= 0; i--) {\n      timeStampChars[i] = PUSH_CHARS.charAt(now % 64);\n      // NOTE: Can't use << here because javascript will convert to int and lose\n      // the upper bits.\n      now = Math.floor(now / 64);\n    }\n    assert(now === 0, 'Cannot push at time == 0');\n\n    let id = timeStampChars.join('');\n\n    if (!duplicateTime) {\n      for (i = 0; i < 12; i++) {\n        lastRandChars[i] = Math.floor(Math.random() * 64);\n      }\n    } else {\n      // If the timestamp hasn't changed since last push, use the same random\n      // number, except incremented by 1.\n      for (i = 11; i >= 0 && lastRandChars[i] === 63; i--) {\n        lastRandChars[i] = 0;\n      }\n      lastRandChars[i]++;\n    }\n    for (i = 0; i < 12; i++) {\n      id += PUSH_CHARS.charAt(lastRandChars[i]);\n    }\n    assert(id.length === 20, 'nextPushId: Length should be 20.');\n\n    return id;\n  };\n})();\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../util/Path';\nimport { Index } from './indexes/Index';\n\n/**\n * Node is an interface defining the common functionality for nodes in\n * a DataSnapshot.\n *\n * @interface\n */\nexport interface Node {\n  /**\n   * Whether this node is a leaf node.\n   * @return {boolean} Whether this is a leaf node.\n   */\n  isLeafNode(): boolean;\n\n  /**\n   * Gets the priority of the node.\n   * @return {!Node} The priority of the node.\n   */\n  getPriority(): Node;\n\n  /**\n   * Returns a duplicate node with the new priority.\n   * @param {!Node} newPriorityNode New priority to set for the node.\n   * @return {!Node} Node with new priority.\n   */\n  updatePriority(newPriorityNode: Node): Node;\n\n  /**\n   * Returns the specified immediate child, or null if it doesn't exist.\n   * @param {string} childName The name of the child to retrieve.\n   * @return {!Node} The retrieved child, or an empty node.\n   */\n  getImmediateChild(childName: string): Node;\n\n  /**\n   * Returns a child by path, or null if it doesn't exist.\n   * @param {!Path} path The path of the child to retrieve.\n   * @return {!Node} The retrieved child or an empty node.\n   */\n  getChild(path: Path): Node;\n\n  /**\n   * Returns the name of the child immediately prior to the specified childNode, or null.\n   * @param {!string} childName The name of the child to find the predecessor of.\n   * @param {!Node} childNode The node to find the predecessor of.\n   * @param {!Index} index The index to use to determine the predecessor\n   * @return {?string} The name of the predecessor child, or null if childNode is the first child.\n   */\n  getPredecessorChildName(\n    childName: String,\n    childNode: Node,\n    index: Index\n  ): string | null;\n\n  /**\n   * Returns a duplicate node, with the specified immediate child updated.\n   * Any value in the node will be removed.\n   * @param {string} childName The name of the child to update.\n   * @param {!Node} newChildNode The new child node\n   * @return {!Node} The updated node.\n   */\n  updateImmediateChild(childName: string, newChildNode: Node): Node;\n\n  /**\n   * Returns a duplicate node, with the specified child updated.  Any value will\n   * be removed.\n   * @param {!Path} path The path of the child to update.\n   * @param {!Node} newChildNode The new child node, which may be an empty node\n   * @return {!Node} The updated node.\n   */\n  updateChild(path: Path, newChildNode: Node): Node;\n\n  /**\n   * True if the immediate child specified exists\n   * @param {!string} childName\n   * @return {boolean}\n   */\n  hasChild(childName: string): boolean;\n\n  /**\n   * @return {boolean} True if this node has no value or children.\n   */\n  isEmpty(): boolean;\n\n  /**\n   * @return {number} The number of children of this node.\n   */\n  numChildren(): number;\n\n  /**\n   * Calls action for each child.\n   * @param {!Index} index\n   * @param {function(string, !Node)} action Action to be called for\n   * each child.  It's passed the child name and the child node.\n   * @return {*} The first truthy value return by action, or the last falsey one\n   */\n  forEachChild(index: Index, action: (a: string, b: Node) => void): any;\n\n  /**\n   * @param exportFormat True for export format (also wire protocol format).\n   * @return Value of this node as JSON.\n   */\n  val(exportFormat?: boolean): unknown;\n\n  /**\n   * @return {string} hash representing the node contents.\n   */\n  hash(): string;\n\n  /**\n   * @param {!Node} other Another node\n   * @return {!number} -1 for less than, 0 for equal, 1 for greater than other\n   */\n  compareTo(other: Node): number;\n\n  /**\n   * @param {!Node} other\n   * @return {boolean} Whether or not this snapshot equals other\n   */\n  equals(other: Node): boolean;\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {!Node} This node, with the specified index now available\n   */\n  withIndex(indexDefinition: Index): Node;\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {boolean}\n   */\n  isIndexed(indexDefinition: Index): boolean;\n}\n\n/**\n *\n * @param {!string} name\n * @param {!Node} node\n * @constructor\n * @struct\n */\nexport class NamedNode {\n  constructor(public name: string, public node: Node) {}\n\n  /**\n   *\n   * @param {!string} name\n   * @param {!Node} node\n   * @return {NamedNode}\n   */\n  static Wrap(name: string, node: Node) {\n    return new NamedNode(name, node);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node, NamedNode } from '../Node';\nimport { MIN_NAME, MAX_NAME } from '../../util/util';\nimport { Comparator } from '../../util/SortedMap';\n\n/**\n *\n * @constructor\n */\nexport abstract class Index {\n  /**\n   * @param {!NamedNode} a\n   * @param {!NamedNode} b\n   * @return {number}\n   */\n  abstract compare(a: NamedNode, b: NamedNode): number;\n\n  /**\n   * @param {!Node} node\n   * @return {boolean}\n   */\n  abstract isDefinedOn(node: Node): boolean;\n\n  /**\n   * @return {function(!NamedNode, !NamedNode):number} A standalone comparison function for\n   * this index\n   */\n  getCompare(): Comparator<NamedNode> {\n    return this.compare.bind(this);\n  }\n\n  /**\n   * Given a before and after value for a node, determine if the indexed value has changed. Even if they are different,\n   * it's possible that the changes are isolated to parts of the snapshot that are not indexed.\n   *\n   * @param {!Node} oldNode\n   * @param {!Node} newNode\n   * @return {boolean} True if the portion of the snapshot being indexed changed between oldNode and newNode\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    const oldWrapped = new NamedNode(MIN_NAME, oldNode);\n    const newWrapped = new NamedNode(MIN_NAME, newNode);\n    return this.compare(oldWrapped, newWrapped) !== 0;\n  }\n\n  /**\n   * @return {!NamedNode} a node wrapper that will sort equal to or less than\n   * any other node wrapper, using this index\n   */\n  minPost(): NamedNode {\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @return {!NamedNode} a node wrapper that will sort greater than or equal to\n   * any other node wrapper, using this index\n   */\n  abstract maxPost(): NamedNode;\n\n  /**\n   * @param {*} indexValue\n   * @param {string} name\n   * @return {!NamedNode}\n   */\n  abstract makePost(indexValue: any, name: string): NamedNode;\n\n  /**\n   * @return {!string} String representation for inclusion in a query spec\n   */\n  abstract toString(): string;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { doubleToIEEE754String, sha1 } from '../util/util';\nimport { priorityHashText, validatePriorityNode } from './snap';\nimport { Node } from './Node';\nimport { Path } from '../util/Path';\nimport { Index } from './indexes/Index';\nimport { ChildrenNodeConstructor } from './ChildrenNode';\n\nlet __childrenNodeConstructor: ChildrenNodeConstructor;\n\n/**\n * LeafNode is a class for storing leaf nodes in a DataSnapshot.  It\n * implements Node and stores the value of the node (a string,\n * number, or boolean) accessible via getValue().\n */\nexport class LeafNode implements Node {\n  static set __childrenNodeConstructor(val: ChildrenNodeConstructor) {\n    __childrenNodeConstructor = val;\n  }\n\n  static get __childrenNodeConstructor() {\n    return __childrenNodeConstructor;\n  }\n\n  /**\n   * The sort order for comparing leaf nodes of different types. If two leaf nodes have\n   * the same type, the comparison falls back to their value\n   * @type {Array.<!string>}\n   * @const\n   */\n  static VALUE_TYPE_ORDER = ['object', 'boolean', 'number', 'string'];\n\n  private lazyHash_: string | null = null;\n\n  /**\n   * @implements {Node}\n   * @param {!(string|number|boolean|Object)} value_ The value to store in this leaf node.\n   *                                         The object type is possible in the event of a deferred value\n   * @param {!Node=} priorityNode_ The priority of this node.\n   */\n  constructor(\n    private readonly value_: string | number | boolean | object,\n    private priorityNode_: Node = LeafNode.__childrenNodeConstructor.EMPTY_NODE\n  ) {\n    assert(\n      this.value_ !== undefined && this.value_ !== null,\n      \"LeafNode shouldn't be created with null/undefined value.\"\n    );\n\n    validatePriorityNode(this.priorityNode_);\n  }\n\n  /** @inheritDoc */\n  isLeafNode(): boolean {\n    return true;\n  }\n\n  /** @inheritDoc */\n  getPriority(): Node {\n    return this.priorityNode_;\n  }\n\n  /** @inheritDoc */\n  updatePriority(newPriorityNode: Node): Node {\n    return new LeafNode(this.value_, newPriorityNode);\n  }\n\n  /** @inheritDoc */\n  getImmediateChild(childName: string): Node {\n    // Hack to treat priority as a regular child\n    if (childName === '.priority') {\n      return this.priorityNode_;\n    } else {\n      return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\n    }\n  }\n\n  /** @inheritDoc */\n  getChild(path: Path): Node {\n    if (path.isEmpty()) {\n      return this;\n    } else if (path.getFront() === '.priority') {\n      return this.priorityNode_;\n    } else {\n      return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  hasChild(): boolean {\n    return false;\n  }\n\n  /** @inheritDoc */\n  getPredecessorChildName(childName: String, childNode: Node): null {\n    return null;\n  }\n\n  /** @inheritDoc */\n  updateImmediateChild(childName: string, newChildNode: Node): Node {\n    if (childName === '.priority') {\n      return this.updatePriority(newChildNode);\n    } else if (newChildNode.isEmpty() && childName !== '.priority') {\n      return this;\n    } else {\n      return LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(\n        childName,\n        newChildNode\n      ).updatePriority(this.priorityNode_);\n    }\n  }\n\n  /** @inheritDoc */\n  updateChild(path: Path, newChildNode: Node): Node {\n    const front = path.getFront();\n    if (front === null) {\n      return newChildNode;\n    } else if (newChildNode.isEmpty() && front !== '.priority') {\n      return this;\n    } else {\n      assert(\n        front !== '.priority' || path.getLength() === 1,\n        '.priority must be the last token in a path'\n      );\n\n      return this.updateImmediateChild(\n        front,\n        LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(\n          path.popFront(),\n          newChildNode\n        )\n      );\n    }\n  }\n\n  /** @inheritDoc */\n  isEmpty(): boolean {\n    return false;\n  }\n\n  /** @inheritDoc */\n  numChildren(): number {\n    return 0;\n  }\n\n  /** @inheritDoc */\n  forEachChild(index: Index, action: (s: string, n: Node) => void): any {\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  val(exportFormat?: boolean): Object {\n    if (exportFormat && !this.getPriority().isEmpty())\n      return {\n        '.value': this.getValue(),\n        '.priority': this.getPriority().val()\n      };\n    else return this.getValue();\n  }\n\n  /** @inheritDoc */\n  hash(): string {\n    if (this.lazyHash_ === null) {\n      let toHash = '';\n      if (!this.priorityNode_.isEmpty())\n        toHash +=\n          'priority:' +\n          priorityHashText(this.priorityNode_.val() as number | string) +\n          ':';\n\n      const type = typeof this.value_;\n      toHash += type + ':';\n      if (type === 'number') {\n        toHash += doubleToIEEE754String(this.value_ as number);\n      } else {\n        toHash += this.value_;\n      }\n      this.lazyHash_ = sha1(toHash);\n    }\n    return this.lazyHash_;\n  }\n\n  /**\n   * Returns the value of the leaf node.\n   * @return {Object|string|number|boolean} The value of the node.\n   */\n  getValue(): object | string | number | boolean {\n    return this.value_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  compareTo(other: Node): number {\n    if (other === LeafNode.__childrenNodeConstructor.EMPTY_NODE) {\n      return 1;\n    } else if (other instanceof LeafNode.__childrenNodeConstructor) {\n      return -1;\n    } else {\n      assert(other.isLeafNode(), 'Unknown node type');\n      return this.compareToLeafNode_(other as LeafNode);\n    }\n  }\n\n  /**\n   * Comparison specifically for two leaf nodes\n   * @param {!LeafNode} otherLeaf\n   * @return {!number}\n   * @private\n   */\n  private compareToLeafNode_(otherLeaf: LeafNode): number {\n    const otherLeafType = typeof otherLeaf.value_;\n    const thisLeafType = typeof this.value_;\n    const otherIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(otherLeafType);\n    const thisIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(thisLeafType);\n    assert(otherIndex >= 0, 'Unknown leaf type: ' + otherLeafType);\n    assert(thisIndex >= 0, 'Unknown leaf type: ' + thisLeafType);\n    if (otherIndex === thisIndex) {\n      // Same type, compare values\n      if (thisLeafType === 'object') {\n        // Deferred value nodes are all equal, but we should also never get to this point...\n        return 0;\n      } else {\n        // Note that this works because true > false, all others are number or string comparisons\n        if (this.value_ < otherLeaf.value_) {\n          return -1;\n        } else if (this.value_ === otherLeaf.value_) {\n          return 0;\n        } else {\n          return 1;\n        }\n      }\n    } else {\n      return thisIndex - otherIndex;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  withIndex(): Node {\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isIndexed(): boolean {\n    return true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  equals(other: Node): boolean {\n    /**\n     * @inheritDoc\n     */\n    if (other === this) {\n      return true;\n    } else if (other.isLeafNode()) {\n      const otherLeaf = other as LeafNode;\n      return (\n        this.value_ === otherLeaf.value_ &&\n        this.priorityNode_.equals(otherLeaf.priorityNode_)\n      );\n    } else {\n      return false;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Index } from './Index';\nimport { nameCompare, MAX_NAME } from '../../util/util';\nimport { NamedNode, Node } from '../Node';\nimport { LeafNode } from '../LeafNode';\n\nlet nodeFromJSON: (a: any) => Node;\nlet MAX_NODE: Node;\n\nexport function setNodeFromJSON(val: (a: any) => Node) {\n  nodeFromJSON = val;\n}\n\nexport function setMaxNode(val: Node) {\n  MAX_NODE = val;\n}\n\n/**\n * @constructor\n * @extends {Index}\n * @private\n */\nexport class PriorityIndex extends Index {\n  /**\n   * @inheritDoc\n   */\n  compare(a: NamedNode, b: NamedNode): number {\n    const aPriority = a.node.getPriority();\n    const bPriority = b.node.getPriority();\n    const indexCmp = aPriority.compareTo(bPriority);\n    if (indexCmp === 0) {\n      return nameCompare(a.name, b.name);\n    } else {\n      return indexCmp;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isDefinedOn(node: Node): boolean {\n    return !node.getPriority().isEmpty();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    return !oldNode.getPriority().equals(newNode.getPriority());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  minPost(): NamedNode {\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  maxPost(): NamedNode {\n    return new NamedNode(MAX_NAME, new LeafNode('[PRIORITY-POST]', MAX_NODE));\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {string} name\n   * @return {!NamedNode}\n   */\n  makePost(indexValue: any, name: string): NamedNode {\n    const priorityNode = nodeFromJSON(indexValue);\n    return new NamedNode(name, new LeafNode('[PRIORITY-POST]', priorityNode));\n  }\n\n  /**\n   * @return {!string} String representation for inclusion in a query spec\n   */\n  toString(): string {\n    return '.priority';\n  }\n}\n\nexport const PRIORITY_INDEX = new PriorityIndex();\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { buildChildSet } from './childSet';\nimport { contains, map, safeGet } from '@firebase/util';\nimport { NamedNode, Node } from './Node';\nimport { PRIORITY_INDEX } from './indexes/PriorityIndex';\nimport { KEY_INDEX } from './indexes/KeyIndex';\nimport { SortedMap } from '../util/SortedMap';\nimport { Index } from './indexes/Index';\n\nlet _defaultIndexMap: IndexMap;\n\nconst fallbackObject = {};\n\nexport class IndexMap {\n  /**\n   * The default IndexMap for nodes without a priority\n   */\n  static get Default(): IndexMap {\n    assert(\n      fallbackObject && PRIORITY_INDEX,\n      'ChildrenNode.ts has not been loaded'\n    );\n    _defaultIndexMap =\n      _defaultIndexMap ||\n      new IndexMap(\n        { '.priority': fallbackObject },\n        { '.priority': PRIORITY_INDEX }\n      );\n    return _defaultIndexMap;\n  }\n\n  constructor(\n    private indexes_: {\n      [k: string]: SortedMap<NamedNode, Node> | /*FallbackType*/ object;\n    },\n    private indexSet_: { [k: string]: Index }\n  ) {}\n\n  get(indexKey: string): SortedMap<NamedNode, Node> | null {\n    const sortedMap = safeGet(this.indexes_, indexKey);\n    if (!sortedMap) throw new Error('No index defined for ' + indexKey);\n\n    if (sortedMap instanceof SortedMap) {\n      return sortedMap;\n    } else {\n      // The index exists, but it falls back to just name comparison. Return null so that the calling code uses the\n      // regular child map\n      return null;\n    }\n  }\n\n  hasIndex(indexDefinition: Index): boolean {\n    return contains(this.indexSet_, indexDefinition.toString());\n  }\n\n  addIndex(\n    indexDefinition: Index,\n    existingChildren: SortedMap<string, Node>\n  ): IndexMap {\n    assert(\n      indexDefinition !== KEY_INDEX,\n      \"KeyIndex always exists and isn't meant to be added to the IndexMap.\"\n    );\n    const childList = [];\n    let sawIndexedValue = false;\n    const iter = existingChildren.getIterator(NamedNode.Wrap);\n    let next = iter.getNext();\n    while (next) {\n      sawIndexedValue =\n        sawIndexedValue || indexDefinition.isDefinedOn(next.node);\n      childList.push(next);\n      next = iter.getNext();\n    }\n    let newIndex;\n    if (sawIndexedValue) {\n      newIndex = buildChildSet(childList, indexDefinition.getCompare());\n    } else {\n      newIndex = fallbackObject;\n    }\n    const indexName = indexDefinition.toString();\n    const newIndexSet = { ...this.indexSet_ };\n    newIndexSet[indexName] = indexDefinition;\n    const newIndexes = { ...this.indexes_ };\n    newIndexes[indexName] = newIndex;\n    return new IndexMap(newIndexes, newIndexSet);\n  }\n\n  /**\n   * Ensure that this node is properly tracked in any indexes that we're maintaining\n   */\n  addToIndexes(\n    namedNode: NamedNode,\n    existingChildren: SortedMap<string, Node>\n  ): IndexMap {\n    const newIndexes = map(\n      this.indexes_,\n      (indexedChildren: SortedMap<NamedNode, Node>, indexName: string) => {\n        const index = safeGet(this.indexSet_, indexName);\n        assert(index, 'Missing index implementation for ' + indexName);\n        if (indexedChildren === fallbackObject) {\n          // Check to see if we need to index everything\n          if (index.isDefinedOn(namedNode.node)) {\n            // We need to build this index\n            const childList = [];\n            const iter = existingChildren.getIterator(NamedNode.Wrap);\n            let next = iter.getNext();\n            while (next) {\n              if (next.name != namedNode.name) {\n                childList.push(next);\n              }\n              next = iter.getNext();\n            }\n            childList.push(namedNode);\n            return buildChildSet(childList, index.getCompare());\n          } else {\n            // No change, this remains a fallback\n            return fallbackObject;\n          }\n        } else {\n          const existingSnap = existingChildren.get(namedNode.name);\n          let newChildren = indexedChildren;\n          if (existingSnap) {\n            newChildren = newChildren.remove(\n              new NamedNode(namedNode.name, existingSnap)\n            );\n          }\n          return newChildren.insert(namedNode, namedNode.node);\n        }\n      }\n    );\n    return new IndexMap(newIndexes, this.indexSet_);\n  }\n\n  /**\n   * Create a new IndexMap instance with the given value removed\n   */\n  removeFromIndexes(\n    namedNode: NamedNode,\n    existingChildren: SortedMap<string, Node>\n  ): IndexMap {\n    const newIndexes = map(this.indexes_, function(\n      indexedChildren: SortedMap<NamedNode, Node>\n    ) {\n      if (indexedChildren === fallbackObject) {\n        // This is the fallback. Just return it, nothing to do in this case\n        return indexedChildren;\n      } else {\n        const existingSnap = existingChildren.get(namedNode.name);\n        if (existingSnap) {\n          return indexedChildren.remove(\n            new NamedNode(namedNode.name, existingSnap)\n          );\n        } else {\n          // No record of this child\n          return indexedChildren;\n        }\n      }\n    });\n    return new IndexMap(newIndexes, this.indexSet_);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { sha1, MAX_NAME, MIN_NAME } from '../util/util';\nimport { SortedMap, SortedMapIterator } from '../util/SortedMap';\nimport { Node, NamedNode } from './Node';\nimport { validatePriorityNode, priorityHashText, setMaxNode } from './snap';\nimport {\n  PRIORITY_INDEX,\n  setMaxNode as setPriorityMaxNode\n} from './indexes/PriorityIndex';\nimport { KEY_INDEX, KeyIndex } from './indexes/KeyIndex';\nimport { IndexMap } from './IndexMap';\nimport { LeafNode } from './LeafNode';\nimport { NAME_COMPARATOR } from './comparators';\nimport { Index } from './indexes/Index';\nimport { Path } from '../util/Path';\n\nexport interface ChildrenNodeConstructor {\n  new (\n    children_: SortedMap<string, Node>,\n    priorityNode_: Node | null,\n    indexMap_: IndexMap\n  ): ChildrenNode;\n  EMPTY_NODE: ChildrenNode;\n}\n\n// TODO: For memory savings, don't store priorityNode_ if it's empty.\n\nlet EMPTY_NODE: ChildrenNode;\n\n/**\n * ChildrenNode is a class for storing internal nodes in a DataSnapshot\n * (i.e. nodes with children).  It implements Node and stores the\n * list of children in the children property, sorted by child name.\n *\n * @constructor\n * @implements {Node}\n */\nexport class ChildrenNode implements Node {\n  private lazyHash_: string | null = null;\n\n  static get EMPTY_NODE(): ChildrenNode {\n    return (\n      EMPTY_NODE ||\n      (EMPTY_NODE = new ChildrenNode(\n        new SortedMap<string, Node>(NAME_COMPARATOR),\n        null,\n        IndexMap.Default\n      ))\n    );\n  }\n\n  /**\n   *\n   * @param {!SortedMap.<string, !Node>} children_ List of children\n   * of this node..\n   * @param {?Node} priorityNode_ The priority of this node (as a snapshot node).\n   * @param {!IndexMap} indexMap_\n   */\n  constructor(\n    private readonly children_: SortedMap<string, Node>,\n    private readonly priorityNode_: Node | null,\n    private indexMap_: IndexMap\n  ) {\n    /**\n     * Note: The only reason we allow null priority is for EMPTY_NODE, since we can't use\n     * EMPTY_NODE as the priority of EMPTY_NODE.  We might want to consider making EMPTY_NODE its own\n     * class instead of an empty ChildrenNode.\n     */\n    if (this.priorityNode_) {\n      validatePriorityNode(this.priorityNode_);\n    }\n\n    if (this.children_.isEmpty()) {\n      assert(\n        !this.priorityNode_ || this.priorityNode_.isEmpty(),\n        'An empty node cannot have a priority'\n      );\n    }\n  }\n\n  /** @inheritDoc */\n  isLeafNode(): boolean {\n    return false;\n  }\n\n  /** @inheritDoc */\n  getPriority(): Node {\n    return this.priorityNode_ || EMPTY_NODE;\n  }\n\n  /** @inheritDoc */\n  updatePriority(newPriorityNode: Node): Node {\n    if (this.children_.isEmpty()) {\n      // Don't allow priorities on empty nodes\n      return this;\n    } else {\n      return new ChildrenNode(this.children_, newPriorityNode, this.indexMap_);\n    }\n  }\n\n  /** @inheritDoc */\n  getImmediateChild(childName: string): Node {\n    // Hack to treat priority as a regular child\n    if (childName === '.priority') {\n      return this.getPriority();\n    } else {\n      const child = this.children_.get(childName);\n      return child === null ? EMPTY_NODE : child;\n    }\n  }\n\n  /** @inheritDoc */\n  getChild(path: Path): Node {\n    const front = path.getFront();\n    if (front === null) return this;\n\n    return this.getImmediateChild(front).getChild(path.popFront());\n  }\n\n  /** @inheritDoc */\n  hasChild(childName: string): boolean {\n    return this.children_.get(childName) !== null;\n  }\n\n  /** @inheritDoc */\n  updateImmediateChild(childName: string, newChildNode: Node): Node {\n    assert(newChildNode, 'We should always be passing snapshot nodes');\n    if (childName === '.priority') {\n      return this.updatePriority(newChildNode);\n    } else {\n      const namedNode = new NamedNode(childName, newChildNode);\n      let newChildren, newIndexMap, newPriority;\n      if (newChildNode.isEmpty()) {\n        newChildren = this.children_.remove(childName);\n        newIndexMap = this.indexMap_.removeFromIndexes(\n          namedNode,\n          this.children_\n        );\n      } else {\n        newChildren = this.children_.insert(childName, newChildNode);\n        newIndexMap = this.indexMap_.addToIndexes(namedNode, this.children_);\n      }\n\n      newPriority = newChildren.isEmpty() ? EMPTY_NODE : this.priorityNode_;\n      return new ChildrenNode(newChildren, newPriority, newIndexMap);\n    }\n  }\n\n  /** @inheritDoc */\n  updateChild(path: Path, newChildNode: Node): Node {\n    const front = path.getFront();\n    if (front === null) {\n      return newChildNode;\n    } else {\n      assert(\n        path.getFront() !== '.priority' || path.getLength() === 1,\n        '.priority must be the last token in a path'\n      );\n      const newImmediateChild = this.getImmediateChild(front).updateChild(\n        path.popFront(),\n        newChildNode\n      );\n      return this.updateImmediateChild(front, newImmediateChild);\n    }\n  }\n\n  /** @inheritDoc */\n  isEmpty(): boolean {\n    return this.children_.isEmpty();\n  }\n\n  /** @inheritDoc */\n  numChildren(): number {\n    return this.children_.count();\n  }\n\n  /**\n   * @private\n   * @type {RegExp}\n   */\n  private static INTEGER_REGEXP_ = /^(0|[1-9]\\d*)$/;\n\n  /** @inheritDoc */\n  val(exportFormat?: boolean): object {\n    if (this.isEmpty()) return null;\n\n    const obj: { [k: string]: unknown } = {};\n    let numKeys = 0,\n      maxKey = 0,\n      allIntegerKeys = true;\n    this.forEachChild(PRIORITY_INDEX, function(key: string, childNode: Node) {\n      obj[key] = childNode.val(exportFormat);\n\n      numKeys++;\n      if (allIntegerKeys && ChildrenNode.INTEGER_REGEXP_.test(key)) {\n        maxKey = Math.max(maxKey, Number(key));\n      } else {\n        allIntegerKeys = false;\n      }\n    });\n\n    if (!exportFormat && allIntegerKeys && maxKey < 2 * numKeys) {\n      // convert to array.\n      const array: unknown[] = [];\n      for (let key in obj) array[(key as any) as number] = obj[key];\n\n      return array;\n    } else {\n      if (exportFormat && !this.getPriority().isEmpty()) {\n        obj['.priority'] = this.getPriority().val();\n      }\n      return obj;\n    }\n  }\n\n  /** @inheritDoc */\n  hash(): string {\n    if (this.lazyHash_ === null) {\n      let toHash = '';\n      if (!this.getPriority().isEmpty())\n        toHash +=\n          'priority:' +\n          priorityHashText(this.getPriority().val() as string | number) +\n          ':';\n\n      this.forEachChild(PRIORITY_INDEX, function(key, childNode) {\n        const childHash = childNode.hash();\n        if (childHash !== '') toHash += ':' + key + ':' + childHash;\n      });\n\n      this.lazyHash_ = toHash === '' ? '' : sha1(toHash);\n    }\n    return this.lazyHash_;\n  }\n\n  /** @inheritDoc */\n  getPredecessorChildName(\n    childName: string,\n    childNode: Node,\n    index: Index\n  ): string {\n    const idx = this.resolveIndex_(index);\n    if (idx) {\n      const predecessor = idx.getPredecessorKey(\n        new NamedNode(childName, childNode)\n      );\n      return predecessor ? predecessor.name : null;\n    } else {\n      return this.children_.getPredecessorKey(childName);\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {?string}\n   */\n  getFirstChildName(indexDefinition: Index): string | null {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      const minKey = idx.minKey();\n      return minKey && minKey.name;\n    } else {\n      return this.children_.minKey();\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {?NamedNode}\n   */\n  getFirstChild(indexDefinition: Index): NamedNode | null {\n    const minKey = this.getFirstChildName(indexDefinition);\n    if (minKey) {\n      return new NamedNode(minKey, this.children_.get(minKey));\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Given an index, return the key name of the largest value we have, according to that index\n   * @param {!Index} indexDefinition\n   * @return {?string}\n   */\n  getLastChildName(indexDefinition: Index): string | null {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      const maxKey = idx.maxKey();\n      return maxKey && maxKey.name;\n    } else {\n      return this.children_.maxKey();\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {?NamedNode}\n   */\n  getLastChild(indexDefinition: Index): NamedNode | null {\n    const maxKey = this.getLastChildName(indexDefinition);\n    if (maxKey) {\n      return new NamedNode(maxKey, this.children_.get(maxKey));\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachChild(\n    index: Index,\n    action: (key: string, node: Node) => boolean | void\n  ): boolean {\n    const idx = this.resolveIndex_(index);\n    if (idx) {\n      return idx.inorderTraversal(function(wrappedNode) {\n        return action(wrappedNode.name, wrappedNode.node);\n      });\n    } else {\n      return this.children_.inorderTraversal(action);\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {SortedMapIterator}\n   */\n  getIterator(\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    return this.getIteratorFrom(indexDefinition.minPost(), indexDefinition);\n  }\n\n  /**\n   *\n   * @param {!NamedNode} startPost\n   * @param {!Index} indexDefinition\n   * @return {!SortedMapIterator}\n   */\n  getIteratorFrom(\n    startPost: NamedNode,\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      return idx.getIteratorFrom(startPost, key => key);\n    } else {\n      const iterator = this.children_.getIteratorFrom(\n        startPost.name,\n        NamedNode.Wrap\n      );\n      let next = iterator.peek();\n      while (next != null && indexDefinition.compare(next, startPost) < 0) {\n        iterator.getNext();\n        next = iterator.peek();\n      }\n      return iterator;\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {!SortedMapIterator}\n   */\n  getReverseIterator(\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    return this.getReverseIteratorFrom(\n      indexDefinition.maxPost(),\n      indexDefinition\n    );\n  }\n\n  /**\n   * @param {!NamedNode} endPost\n   * @param {!Index} indexDefinition\n   * @return {!SortedMapIterator}\n   */\n  getReverseIteratorFrom(\n    endPost: NamedNode,\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      return idx.getReverseIteratorFrom(endPost, function(key) {\n        return key;\n      });\n    } else {\n      const iterator = this.children_.getReverseIteratorFrom(\n        endPost.name,\n        NamedNode.Wrap\n      );\n      let next = iterator.peek();\n      while (next != null && indexDefinition.compare(next, endPost) > 0) {\n        iterator.getNext();\n        next = iterator.peek();\n      }\n      return iterator;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  compareTo(other: ChildrenNode): number {\n    if (this.isEmpty()) {\n      if (other.isEmpty()) {\n        return 0;\n      } else {\n        return -1;\n      }\n    } else if (other.isLeafNode() || other.isEmpty()) {\n      return 1;\n    } else if (other === MAX_NODE) {\n      return -1;\n    } else {\n      // Must be another node with children.\n      return 0;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  withIndex(indexDefinition: Index): Node {\n    if (\n      indexDefinition === KEY_INDEX ||\n      this.indexMap_.hasIndex(indexDefinition)\n    ) {\n      return this;\n    } else {\n      const newIndexMap = this.indexMap_.addIndex(\n        indexDefinition,\n        this.children_\n      );\n      return new ChildrenNode(this.children_, this.priorityNode_, newIndexMap);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isIndexed(index: Index): boolean {\n    return index === KEY_INDEX || this.indexMap_.hasIndex(index);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  equals(other: Node): boolean {\n    if (other === this) {\n      return true;\n    } else if (other.isLeafNode()) {\n      return false;\n    } else {\n      const otherChildrenNode = other as ChildrenNode;\n      if (!this.getPriority().equals(otherChildrenNode.getPriority())) {\n        return false;\n      } else if (\n        this.children_.count() === otherChildrenNode.children_.count()\n      ) {\n        const thisIter = this.getIterator(PRIORITY_INDEX);\n        const otherIter = otherChildrenNode.getIterator(PRIORITY_INDEX);\n        let thisCurrent = thisIter.getNext();\n        let otherCurrent = otherIter.getNext();\n        while (thisCurrent && otherCurrent) {\n          if (\n            thisCurrent.name !== otherCurrent.name ||\n            !thisCurrent.node.equals(otherCurrent.node)\n          ) {\n            return false;\n          }\n          thisCurrent = thisIter.getNext();\n          otherCurrent = otherIter.getNext();\n        }\n        return thisCurrent === null && otherCurrent === null;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  /**\n   * Returns a SortedMap ordered by index, or null if the default (by-key) ordering can be used\n   * instead.\n   *\n   * @private\n   * @param {!Index} indexDefinition\n   * @return {?SortedMap.<NamedNode, Node>}\n   */\n  private resolveIndex_(\n    indexDefinition: Index\n  ): SortedMap<NamedNode, Node> | null {\n    if (indexDefinition === KEY_INDEX) {\n      return null;\n    } else {\n      return this.indexMap_.get(indexDefinition.toString());\n    }\n  }\n}\n\n/**\n * @constructor\n * @extends {ChildrenNode}\n * @private\n */\nexport class MaxNode extends ChildrenNode {\n  constructor() {\n    super(\n      new SortedMap<string, Node>(NAME_COMPARATOR),\n      ChildrenNode.EMPTY_NODE,\n      IndexMap.Default\n    );\n  }\n\n  compareTo(other: Node): number {\n    if (other === this) {\n      return 0;\n    } else {\n      return 1;\n    }\n  }\n\n  equals(other: Node): boolean {\n    // Not that we every compare it, but MAX_NODE is only ever equal to itself\n    return other === this;\n  }\n\n  getPriority(): MaxNode {\n    return this;\n  }\n\n  getImmediateChild(childName: string): ChildrenNode {\n    return ChildrenNode.EMPTY_NODE;\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n}\n\n/**\n * Marker that will sort higher than any other snapshot.\n * @type {!MAX_NODE}\n * @const\n */\nexport const MAX_NODE = new MaxNode();\n\n/**\n * Document NamedNode extensions\n */\ndeclare module './Node' {\n  interface NamedNode {\n    MIN: NamedNode;\n    MAX: NamedNode;\n  }\n}\n\nObject.defineProperties(NamedNode, {\n  MIN: {\n    value: new NamedNode(MIN_NAME, ChildrenNode.EMPTY_NODE)\n  },\n  MAX: {\n    value: new NamedNode(MAX_NAME, MAX_NODE)\n  }\n});\n\n/**\n * Reference Extensions\n */\nKeyIndex.__EMPTY_NODE = ChildrenNode.EMPTY_NODE;\nLeafNode.__childrenNodeConstructor = ChildrenNode;\nsetMaxNode(MAX_NODE);\nsetPriorityMaxNode(MAX_NODE);\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Implementation of an immutable SortedMap using a Left-leaning\n * Red-Black Tree, adapted from the implementation in Mugs\n * (http://mads379.github.com/mugs/) by Mads Hartmann Jensen\n * (mads379@gmail.com).\n *\n * Original paper on Left-leaning Red-Black Trees:\n *   http://www.cs.princeton.edu/~rs/talks/LLRB/LLRB.pdf\n *\n * Invariant 1: No red node has a red child\n * Invariant 2: Every leaf path has the same number of black nodes\n * Invariant 3: Only the left child can be red (left leaning)\n */\n\n// TODO: There are some improvements I'd like to make to improve memory / perf:\n//  * Create two prototypes, LLRedNode and LLBlackNode, instead of storing a\n//    color property in every node.\n// TODO: It would also be good (and possibly necessary) to create a base\n// interface for LLRBNode and LLRBEmptyNode.\n\nexport type Comparator<K> = (key1: K, key2: K) => number;\n\n/**\n * An iterator over an LLRBNode.\n */\nexport class SortedMapIterator<K, V, T> {\n  /** @private\n   * @type {Array.<!LLRBNode>}\n   */\n  private nodeStack_: (LLRBNode<K, V> | LLRBEmptyNode<K, V>)[] = [];\n\n  /**\n   * @template K, V, T\n   * @param {LLRBNode|LLRBEmptyNode} node Node to iterate.\n   * @param {?K} startKey\n   * @param {function(K, K): number} comparator\n   * @param {boolean} isReverse_ Whether or not to iterate in reverse\n   * @param {(function(K, V):T)=} resultGenerator_\n   */\n  constructor(\n    node: LLRBNode<K, V> | LLRBEmptyNode<K, V>,\n    startKey: K | null,\n    comparator: Comparator<K>,\n    private isReverse_: boolean,\n    private resultGenerator_: ((k: K, v: V) => T) | null = null\n  ) {\n    let cmp = 1;\n    while (!node.isEmpty()) {\n      node = node as LLRBNode<K, V>;\n      cmp = startKey ? comparator(node.key, startKey) : 1;\n      // flip the comparison if we're going in reverse\n      if (isReverse_) cmp *= -1;\n\n      if (cmp < 0) {\n        // This node is less than our start key. ignore it\n        if (this.isReverse_) {\n          node = node.left;\n        } else {\n          node = node.right;\n        }\n      } else if (cmp === 0) {\n        // This node is exactly equal to our start key. Push it on the stack, but stop iterating;\n        this.nodeStack_.push(node);\n        break;\n      } else {\n        // This node is greater than our start key, add it to the stack and move to the next one\n        this.nodeStack_.push(node);\n        if (this.isReverse_) {\n          node = node.right;\n        } else {\n          node = node.left;\n        }\n      }\n    }\n  }\n\n  getNext(): T {\n    if (this.nodeStack_.length === 0) return null;\n\n    let node = this.nodeStack_.pop();\n    let result: T;\n    if (this.resultGenerator_)\n      result = this.resultGenerator_(node.key, node.value);\n    else result = { key: node.key, value: node.value } as any;\n\n    if (this.isReverse_) {\n      node = node.left;\n      while (!node.isEmpty()) {\n        this.nodeStack_.push(node);\n        node = node.right;\n      }\n    } else {\n      node = node.right;\n      while (!node.isEmpty()) {\n        this.nodeStack_.push(node);\n        node = node.left;\n      }\n    }\n\n    return result;\n  }\n\n  hasNext(): boolean {\n    return this.nodeStack_.length > 0;\n  }\n\n  peek(): T {\n    if (this.nodeStack_.length === 0) return null;\n\n    const node = this.nodeStack_[this.nodeStack_.length - 1];\n    if (this.resultGenerator_) {\n      return this.resultGenerator_(node.key, node.value);\n    } else {\n      return { key: node.key, value: node.value } as any;\n    }\n  }\n}\n\n/**\n * Represents a node in a Left-leaning Red-Black tree.\n */\nexport class LLRBNode<K, V> {\n  color: boolean;\n  left: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n  right: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n\n  /**\n   * @template K, V\n   * @param {!K} key Key associated with this node.\n   * @param {!V} value Value associated with this node.\n   * @param {?boolean} color Whether this node is red.\n   * @param {?(LLRBNode|LLRBEmptyNode)=} left Left child.\n   * @param {?(LLRBNode|LLRBEmptyNode)=} right Right child.\n   */\n  constructor(\n    public key: K,\n    public value: V,\n    color: boolean | null,\n    left?: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null,\n    right?: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null\n  ) {\n    this.color = color != null ? color : LLRBNode.RED;\n    this.left =\n      left != null ? left : (SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>);\n    this.right =\n      right != null ? right : (SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>);\n  }\n\n  static RED = true;\n  static BLACK = false;\n\n  /**\n   * Returns a copy of the current node, optionally replacing pieces of it.\n   *\n   * @param {?K} key New key for the node, or null.\n   * @param {?V} value New value for the node, or null.\n   * @param {?boolean} color New color for the node, or null.\n   * @param {?LLRBNode|LLRBEmptyNode} left New left child for the node, or null.\n   * @param {?LLRBNode|LLRBEmptyNode} right New right child for the node, or null.\n   * @return {!LLRBNode} The node copy.\n   */\n  copy(\n    key: K | null,\n    value: V | null,\n    color: boolean | null,\n    left: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null,\n    right: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null\n  ): LLRBNode<K, V> {\n    return new LLRBNode(\n      key != null ? key : this.key,\n      value != null ? value : this.value,\n      color != null ? color : this.color,\n      left != null ? left : this.left,\n      right != null ? right : this.right\n    );\n  }\n\n  /**\n   * @return {number} The total number of nodes in the tree.\n   */\n  count(): number {\n    return this.left.count() + 1 + this.right.count();\n  }\n\n  /**\n   * @return {boolean} True if the tree is empty.\n   */\n  isEmpty(): boolean {\n    return false;\n  }\n\n  /**\n   * Traverses the tree in key order and calls the specified action function\n   * for each node.\n   *\n   * @param {function(!K, !V):*} action Callback function to be called for each\n   *   node.  If it returns true, traversal is aborted.\n   * @return {*} The first truthy value returned by action, or the last falsey\n   *   value returned by action\n   */\n  inorderTraversal(action: (k: K, v: V) => any): boolean {\n    return (\n      this.left.inorderTraversal(action) ||\n      action(this.key, this.value) ||\n      this.right.inorderTraversal(action)\n    );\n  }\n\n  /**\n   * Traverses the tree in reverse key order and calls the specified action function\n   * for each node.\n   *\n   * @param {function(!Object, !Object)} action Callback function to be called for each\n   * node.  If it returns true, traversal is aborted.\n   * @return {*} True if traversal was aborted.\n   */\n  reverseTraversal(action: (k: K, v: V) => void): boolean {\n    return (\n      this.right.reverseTraversal(action) ||\n      action(this.key, this.value) ||\n      this.left.reverseTraversal(action)\n    );\n  }\n\n  /**\n   * @return {!Object} The minimum node in the tree.\n   * @private\n   */\n  private min_(): LLRBNode<K, V> {\n    if (this.left.isEmpty()) {\n      return this;\n    } else {\n      return (this.left as LLRBNode<K, V>).min_();\n    }\n  }\n\n  /**\n   * @return {!K} The maximum key in the tree.\n   */\n  minKey(): K {\n    return this.min_().key;\n  }\n\n  /**\n   * @return {!K} The maximum key in the tree.\n   */\n  maxKey(): K {\n    if (this.right.isEmpty()) {\n      return this.key;\n    } else {\n      return this.right.maxKey();\n    }\n  }\n\n  /**\n   *\n   * @param {!Object} key Key to insert.\n   * @param {!Object} value Value to insert.\n   * @param {Comparator} comparator Comparator.\n   * @return {!LLRBNode} New tree, with the key/value added.\n   */\n  insert(key: K, value: V, comparator: Comparator<K>): LLRBNode<K, V> {\n    let cmp, n;\n    n = this;\n    cmp = comparator(key, n.key);\n    if (cmp < 0) {\n      n = n.copy(null, null, null, n.left.insert(key, value, comparator), null);\n    } else if (cmp === 0) {\n      n = n.copy(null, value, null, null, null);\n    } else {\n      n = n.copy(\n        null,\n        null,\n        null,\n        null,\n        n.right.insert(key, value, comparator)\n      );\n    }\n    return n.fixUp_();\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode|LLRBEmptyNode} New tree, with the minimum key removed.\n   */\n  private removeMin_(): LLRBNode<K, V> | LLRBEmptyNode<K, V> {\n    if (this.left.isEmpty()) {\n      return SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>;\n    }\n    let n: LLRBNode<K, V> = this;\n    if (!n.left.isRed_() && !n.left.left.isRed_()) n = n.moveRedLeft_();\n    n = n.copy(null, null, null, (n.left as LLRBNode<K, V>).removeMin_(), null);\n    return n.fixUp_();\n  }\n\n  /**\n   * @param {!Object} key The key of the item to remove.\n   * @param {Comparator} comparator Comparator.\n   * @return {!LLRBNode|LLRBEmptyNode} New tree, with the specified item removed.\n   */\n  remove(\n    key: K,\n    comparator: Comparator<K>\n  ): LLRBNode<K, V> | LLRBEmptyNode<K, V> {\n    let n, smallest;\n    n = this;\n    if (comparator(key, n.key) < 0) {\n      if (!n.left.isEmpty() && !n.left.isRed_() && !n.left.left.isRed_()) {\n        n = n.moveRedLeft_();\n      }\n      n = n.copy(null, null, null, n.left.remove(key, comparator), null);\n    } else {\n      if (n.left.isRed_()) n = n.rotateRight_();\n      if (!n.right.isEmpty() && !n.right.isRed_() && !n.right.left.isRed_()) {\n        n = n.moveRedRight_();\n      }\n      if (comparator(key, n.key) === 0) {\n        if (n.right.isEmpty()) {\n          return SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>;\n        } else {\n          smallest = (n.right as LLRBNode<K, V>).min_();\n          n = n.copy(\n            smallest.key,\n            smallest.value,\n            null,\n            null,\n            (n.right as LLRBNode<K, V>).removeMin_()\n          );\n        }\n      }\n      n = n.copy(null, null, null, null, n.right.remove(key, comparator));\n    }\n    return n.fixUp_();\n  }\n\n  /**\n   * @private\n   * @return {boolean} Whether this is a RED node.\n   */\n  isRed_(): boolean {\n    return this.color;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree after performing any needed rotations.\n   */\n  private fixUp_(): LLRBNode<K, V> {\n    let n = this as any;\n    if (n.right.isRed_() && !n.left.isRed_()) n = n.rotateLeft_();\n    if (n.left.isRed_() && n.left.left.isRed_()) n = n.rotateRight_();\n    if (n.left.isRed_() && n.right.isRed_()) n = n.colorFlip_();\n    return n;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after moveRedLeft.\n   */\n  private moveRedLeft_(): LLRBNode<K, V> {\n    let n = this.colorFlip_();\n    if (n.right.left.isRed_()) {\n      n = n.copy(\n        null,\n        null,\n        null,\n        null,\n        (n.right as LLRBNode<K, V>).rotateRight_()\n      );\n      n = n.rotateLeft_();\n      n = n.colorFlip_();\n    }\n    return n;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after moveRedRight.\n   */\n  private moveRedRight_(): LLRBNode<K, V> {\n    let n = this.colorFlip_();\n    if (n.left.left.isRed_()) {\n      n = n.rotateRight_();\n      n = n.colorFlip_();\n    }\n    return n;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after rotateLeft.\n   */\n  private rotateLeft_(): LLRBNode<K, V> {\n    const nl = this.copy(null, null, LLRBNode.RED, null, this.right.left);\n    return this.right.copy(null, null, this.color, nl, null) as LLRBNode<K, V>;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after rotateRight.\n   */\n  private rotateRight_(): LLRBNode<K, V> {\n    const nr = this.copy(null, null, LLRBNode.RED, this.left.right, null);\n    return this.left.copy(null, null, this.color, null, nr) as LLRBNode<K, V>;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after colorFlip.\n   */\n  private colorFlip_(): LLRBNode<K, V> {\n    const left = this.left.copy(null, null, !this.left.color, null, null);\n    const right = this.right.copy(null, null, !this.right.color, null, null);\n    return this.copy(null, null, !this.color, left, right);\n  }\n\n  /**\n   * For testing.\n   *\n   * @private\n   * @return {boolean} True if all is well.\n   */\n  private checkMaxDepth_(): boolean {\n    const blackDepth = this.check_();\n    return Math.pow(2.0, blackDepth) <= this.count() + 1;\n  }\n\n  /**\n   * @private\n   * @return {number} Not sure what this returns exactly. :-).\n   */\n  check_(): number {\n    let blackDepth;\n    if (this.isRed_() && this.left.isRed_()) {\n      throw new Error(\n        'Red node has red child(' + this.key + ',' + this.value + ')'\n      );\n    }\n    if (this.right.isRed_()) {\n      throw new Error(\n        'Right child of (' + this.key + ',' + this.value + ') is red'\n      );\n    }\n    blackDepth = this.left.check_();\n    if (blackDepth !== this.right.check_()) {\n      throw new Error('Black depths differ');\n    } else {\n      return blackDepth + (this.isRed_() ? 0 : 1);\n    }\n  }\n}\n\n/**\n * Represents an empty node (a leaf node in the Red-Black Tree).\n */\nexport class LLRBEmptyNode<K, V> {\n  key: K;\n  value: V;\n  left: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n  right: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n  color: boolean;\n\n  /**\n   * Returns a copy of the current node.\n   *\n   * @return {!LLRBEmptyNode} The node copy.\n   */\n  copy(\n    key: K | null,\n    value: V | null,\n    color: boolean | null,\n    left: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null,\n    right: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null\n  ): LLRBEmptyNode<K, V> {\n    return this;\n  }\n\n  /**\n   * Returns a copy of the tree, with the specified key/value added.\n   *\n   * @param {!K} key Key to be added.\n   * @param {!V} value Value to be added.\n   * @param {Comparator} comparator Comparator.\n   * @return {!LLRBNode} New tree, with item added.\n   */\n  insert(key: K, value: V, comparator: Comparator<K>): LLRBNode<K, V> {\n    return new LLRBNode(key, value, null);\n  }\n\n  /**\n   * Returns a copy of the tree, with the specified key removed.\n   *\n   * @param {!K} key The key to remove.\n   * @param {Comparator} comparator Comparator.\n   * @return {!LLRBEmptyNode} New tree, with item removed.\n   */\n  remove(key: K, comparator: Comparator<K>): LLRBEmptyNode<K, V> {\n    return this;\n  }\n\n  /**\n   * @return {number} The total number of nodes in the tree.\n   */\n  count(): number {\n    return 0;\n  }\n\n  /**\n   * @return {boolean} True if the tree is empty.\n   */\n  isEmpty(): boolean {\n    return true;\n  }\n\n  /**\n   * Traverses the tree in key order and calls the specified action function\n   * for each node.\n   *\n   * @param {function(!K, !V):*} action Callback function to be called for each\n   * node.  If it returns true, traversal is aborted.\n   * @return {boolean} True if traversal was aborted.\n   */\n  inorderTraversal(action: (k: K, v: V) => any): boolean {\n    return false;\n  }\n\n  /**\n   * Traverses the tree in reverse key order and calls the specified action function\n   * for each node.\n   *\n   * @param {function(!K, !V)} action Callback function to be called for each\n   * node.  If it returns true, traversal is aborted.\n   * @return {boolean} True if traversal was aborted.\n   */\n  reverseTraversal(action: (k: K, v: V) => void): boolean {\n    return false;\n  }\n\n  /**\n   * @return {null}\n   */\n  minKey(): null {\n    return null;\n  }\n\n  /**\n   * @return {null}\n   */\n  maxKey(): null {\n    return null;\n  }\n\n  /**\n   * @private\n   * @return {number} Not sure what this returns exactly. :-).\n   */\n  check_(): number {\n    return 0;\n  }\n\n  /**\n   * @private\n   * @return {boolean} Whether this node is red.\n   */\n  isRed_() {\n    return false;\n  }\n}\n\n/**\n * An immutable sorted map implementation, based on a Left-leaning Red-Black\n * tree.\n */\nexport class SortedMap<K, V> {\n  /**\n   * Always use the same empty node, to reduce memory.\n   * @const\n   */\n  static EMPTY_NODE = new LLRBEmptyNode();\n\n  /**\n   * @template K, V\n   * @param {function(K, K):number} comparator_ Key comparator.\n   * @param {LLRBNode=} root_ (Optional) Root node for the map.\n   */\n  constructor(\n    private comparator_: Comparator<K>,\n    private root_:\n      | LLRBNode<K, V>\n      | LLRBEmptyNode<K, V> = SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>\n  ) {}\n\n  /**\n   * Returns a copy of the map, with the specified key/value added or replaced.\n   * (TODO: We should perhaps rename this method to 'put')\n   *\n   * @param {!K} key Key to be added.\n   * @param {!V} value Value to be added.\n   * @return {!SortedMap.<K, V>} New map, with item added.\n   */\n  insert(key: K, value: V): SortedMap<K, V> {\n    return new SortedMap(\n      this.comparator_,\n      this.root_\n        .insert(key, value, this.comparator_)\n        .copy(null, null, LLRBNode.BLACK, null, null)\n    );\n  }\n\n  /**\n   * Returns a copy of the map, with the specified key removed.\n   *\n   * @param {!K} key The key to remove.\n   * @return {!SortedMap.<K, V>} New map, with item removed.\n   */\n  remove(key: K): SortedMap<K, V> {\n    return new SortedMap(\n      this.comparator_,\n      this.root_\n        .remove(key, this.comparator_)\n        .copy(null, null, LLRBNode.BLACK, null, null)\n    );\n  }\n\n  /**\n   * Returns the value of the node with the given key, or null.\n   *\n   * @param {!K} key The key to look up.\n   * @return {?V} The value of the node with the given key, or null if the\n   * key doesn't exist.\n   */\n  get(key: K): V | null {\n    let cmp;\n    let node = this.root_;\n    while (!node.isEmpty()) {\n      cmp = this.comparator_(key, node.key);\n      if (cmp === 0) {\n        return node.value;\n      } else if (cmp < 0) {\n        node = node.left;\n      } else if (cmp > 0) {\n        node = node.right;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns the key of the item *before* the specified key, or null if key is the first item.\n   * @param {K} key The key to find the predecessor of\n   * @return {?K} The predecessor key.\n   */\n  getPredecessorKey(key: K): K | null {\n    let cmp,\n      node = this.root_,\n      rightParent = null;\n    while (!node.isEmpty()) {\n      cmp = this.comparator_(key, node.key);\n      if (cmp === 0) {\n        if (!node.left.isEmpty()) {\n          node = node.left;\n          while (!node.right.isEmpty()) node = node.right;\n          return node.key;\n        } else if (rightParent) {\n          return rightParent.key;\n        } else {\n          return null; // first item.\n        }\n      } else if (cmp < 0) {\n        node = node.left;\n      } else if (cmp > 0) {\n        rightParent = node;\n        node = node.right;\n      }\n    }\n\n    throw new Error(\n      'Attempted to find predecessor key for a nonexistent key.  What gives?'\n    );\n  }\n\n  /**\n   * @return {boolean} True if the map is empty.\n   */\n  isEmpty(): boolean {\n    return this.root_.isEmpty();\n  }\n\n  /**\n   * @return {number} The total number of nodes in the map.\n   */\n  count(): number {\n    return this.root_.count();\n  }\n\n  /**\n   * @return {?K} The minimum key in the map.\n   */\n  minKey(): K | null {\n    return this.root_.minKey();\n  }\n\n  /**\n   * @return {?K} The maximum key in the map.\n   */\n  maxKey(): K | null {\n    return this.root_.maxKey();\n  }\n\n  /**\n   * Traverses the map in key order and calls the specified action function\n   * for each key/value pair.\n   *\n   * @param {function(!K, !V):*} action Callback function to be called\n   * for each key/value pair.  If action returns true, traversal is aborted.\n   * @return {*} The first truthy value returned by action, or the last falsey\n   *   value returned by action\n   */\n  inorderTraversal(action: (k: K, v: V) => any): boolean {\n    return this.root_.inorderTraversal(action);\n  }\n\n  /**\n   * Traverses the map in reverse key order and calls the specified action function\n   * for each key/value pair.\n   *\n   * @param {function(!Object, !Object)} action Callback function to be called\n   * for each key/value pair.  If action returns true, traversal is aborted.\n   * @return {*} True if the traversal was aborted.\n   */\n  reverseTraversal(action: (k: K, v: V) => void): boolean {\n    return this.root_.reverseTraversal(action);\n  }\n\n  /**\n   * Returns an iterator over the SortedMap.\n   * @template T\n   * @param {(function(K, V):T)=} resultGenerator\n   * @return {SortedMapIterator.<K, V, T>} The iterator.\n   */\n  getIterator<T>(\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      null,\n      this.comparator_,\n      false,\n      resultGenerator\n    );\n  }\n\n  getIteratorFrom<T>(\n    key: K,\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      key,\n      this.comparator_,\n      false,\n      resultGenerator\n    );\n  }\n\n  getReverseIteratorFrom<T>(\n    key: K,\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      key,\n      this.comparator_,\n      true,\n      resultGenerator\n    );\n  }\n\n  getReverseIterator<T>(\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      null,\n      this.comparator_,\n      true,\n      resultGenerator\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LLRBNode } from '../util/SortedMap';\nimport { SortedMap } from '../util/SortedMap';\nimport { NamedNode } from './Node';\n\nconst LOG_2 = Math.log(2);\n\n/**\n * @constructor\n */\nclass Base12Num {\n  count: number;\n  private current_: number;\n  private bits_: number;\n\n  /**\n   * @param {number} length\n   */\n  constructor(length: number) {\n    const logBase2 = (num: number) =>\n      parseInt((Math.log(num) / LOG_2) as any, 10);\n    const bitMask = (bits: number) => parseInt(Array(bits + 1).join('1'), 2);\n    this.count = logBase2(length + 1);\n    this.current_ = this.count - 1;\n    const mask = bitMask(this.count);\n    this.bits_ = (length + 1) & mask;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  nextBitIsOne(): boolean {\n    //noinspection JSBitwiseOperatorUsage\n    const result = !(this.bits_ & (0x1 << this.current_));\n    this.current_--;\n    return result;\n  }\n}\n\n/**\n * Takes a list of child nodes and constructs a SortedSet using the given comparison\n * function\n *\n * Uses the algorithm described in the paper linked here:\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.46.1458\n *\n * @template K, V\n * @param {Array.<!NamedNode>} childList Unsorted list of children\n * @param {function(!NamedNode, !NamedNode):number} cmp The comparison method to be used\n * @param {(function(NamedNode):K)=} keyFn An optional function to extract K from a node wrapper, if K's\n *                                                        type is not NamedNode\n * @param {(function(K, K):number)=} mapSortFn An optional override for comparator used by the generated sorted map\n * @return {SortedMap.<K, V>}\n */\nexport const buildChildSet = function<K, V>(\n  childList: NamedNode[],\n  cmp: (a: NamedNode, b: NamedNode) => number,\n  keyFn?: (a: NamedNode) => K,\n  mapSortFn?: (a: K, b: K) => number\n): SortedMap<K, V> {\n  childList.sort(cmp);\n\n  const buildBalancedTree = function(\n    low: number,\n    high: number\n  ): LLRBNode<K, V> | null {\n    const length = high - low;\n    let namedNode: NamedNode;\n    let key: K;\n    if (length == 0) {\n      return null;\n    } else if (length == 1) {\n      namedNode = childList[low];\n      key = keyFn ? keyFn(namedNode) : ((namedNode as any) as K);\n      return new LLRBNode(\n        key,\n        (namedNode.node as any) as V,\n        LLRBNode.BLACK,\n        null,\n        null\n      );\n    } else {\n      const middle = parseInt((length / 2) as any, 10) + low;\n      const left = buildBalancedTree(low, middle);\n      const right = buildBalancedTree(middle + 1, high);\n      namedNode = childList[middle];\n      key = keyFn ? keyFn(namedNode) : ((namedNode as any) as K);\n      return new LLRBNode(\n        key,\n        (namedNode.node as any) as V,\n        LLRBNode.BLACK,\n        left,\n        right\n      );\n    }\n  };\n\n  const buildFrom12Array = function(base12: Base12Num): LLRBNode<K, V> {\n    let node: LLRBNode<K, V> = null;\n    let root = null;\n    let index = childList.length;\n\n    const buildPennant = function(chunkSize: number, color: boolean) {\n      const low = index - chunkSize;\n      const high = index;\n      index -= chunkSize;\n      const childTree = buildBalancedTree(low + 1, high);\n      const namedNode = childList[low];\n      const key: K = keyFn ? keyFn(namedNode) : ((namedNode as any) as K);\n      attachPennant(\n        new LLRBNode(key, (namedNode.node as any) as V, color, null, childTree)\n      );\n    };\n\n    const attachPennant = function(pennant: LLRBNode<K, V>) {\n      if (node) {\n        node.left = pennant;\n        node = pennant;\n      } else {\n        root = pennant;\n        node = pennant;\n      }\n    };\n\n    for (let i = 0; i < base12.count; ++i) {\n      const isOne = base12.nextBitIsOne();\n      // The number of nodes taken in each slice is 2^(arr.length - (i + 1))\n      const chunkSize = Math.pow(2, base12.count - (i + 1));\n      if (isOne) {\n        buildPennant(chunkSize, LLRBNode.BLACK);\n      } else {\n        // current == 2\n        buildPennant(chunkSize, LLRBNode.BLACK);\n        buildPennant(chunkSize, LLRBNode.RED);\n      }\n    }\n    return root;\n  };\n\n  const base12 = new Base12Num(childList.length);\n  const root = buildFrom12Array(base12);\n\n  return new SortedMap<K, V>(mapSortFn || (cmp as any), root);\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { nameCompare } from '../util/util';\nimport { NamedNode } from './Node';\n\nexport function NAME_ONLY_COMPARATOR(left: NamedNode, right: NamedNode) {\n  return nameCompare(left.name, right.name);\n}\n\nexport function NAME_COMPARATOR(left: string, right: string) {\n  return nameCompare(left, right);\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ChildrenNode } from './ChildrenNode';\nimport { LeafNode } from './LeafNode';\nimport { NamedNode, Node } from './Node';\nimport { contains } from '@firebase/util';\nimport { assert } from '@firebase/util';\nimport { buildChildSet } from './childSet';\nimport { NAME_COMPARATOR, NAME_ONLY_COMPARATOR } from './comparators';\nimport { IndexMap } from './IndexMap';\nimport { PRIORITY_INDEX, setNodeFromJSON } from './indexes/PriorityIndex';\nimport { SortedMap } from '../util/SortedMap';\nimport { each } from '../util/util';\n\nconst USE_HINZE = true;\n\n/**\n * Constructs a snapshot node representing the passed JSON and returns it.\n * @param {*} json JSON to create a node for.\n * @param {?string|?number=} priority Optional priority to use.  This will be ignored if the\n * passed JSON contains a .priority property.\n * @return {!Node}\n */\nexport function nodeFromJSON(\n  json: any | null,\n  priority: string | number | null = null\n): Node {\n  if (json === null) {\n    return ChildrenNode.EMPTY_NODE;\n  }\n\n  if (typeof json === 'object' && '.priority' in json) {\n    priority = json['.priority'];\n  }\n\n  assert(\n    priority === null ||\n      typeof priority === 'string' ||\n      typeof priority === 'number' ||\n      (typeof priority === 'object' && '.sv' in (priority as object)),\n    'Invalid priority type found: ' + typeof priority\n  );\n\n  if (typeof json === 'object' && '.value' in json && json['.value'] !== null) {\n    json = json['.value'];\n  }\n\n  // Valid leaf nodes include non-objects or server-value wrapper objects\n  if (typeof json !== 'object' || '.sv' in json) {\n    const jsonLeaf = json as string | number | boolean | object;\n    return new LeafNode(jsonLeaf, nodeFromJSON(priority));\n  }\n\n  if (!(json instanceof Array) && USE_HINZE) {\n    const children: NamedNode[] = [];\n    let childrenHavePriority = false;\n    const hinzeJsonObj: { [k: string]: any } = json;\n    each(hinzeJsonObj, (key, child) => {\n      if (key.substring(0, 1) !== '.') {\n        // Ignore metadata nodes\n        const childNode = nodeFromJSON(child);\n        if (!childNode.isEmpty()) {\n          childrenHavePriority =\n            childrenHavePriority || !childNode.getPriority().isEmpty();\n          children.push(new NamedNode(key, childNode));\n        }\n      }\n    });\n\n    if (children.length == 0) {\n      return ChildrenNode.EMPTY_NODE;\n    }\n\n    const childSet = buildChildSet(\n      children,\n      NAME_ONLY_COMPARATOR,\n      namedNode => namedNode.name,\n      NAME_COMPARATOR\n    ) as SortedMap<string, Node>;\n    if (childrenHavePriority) {\n      const sortedChildSet = buildChildSet(\n        children,\n        PRIORITY_INDEX.getCompare()\n      );\n      return new ChildrenNode(\n        childSet,\n        nodeFromJSON(priority),\n        new IndexMap(\n          { '.priority': sortedChildSet },\n          { '.priority': PRIORITY_INDEX }\n        )\n      );\n    } else {\n      return new ChildrenNode(\n        childSet,\n        nodeFromJSON(priority),\n        IndexMap.Default\n      );\n    }\n  } else {\n    let node: Node = ChildrenNode.EMPTY_NODE;\n    each(json, (key: string, childData: any) => {\n      if (contains(json, key)) {\n        if (key.substring(0, 1) !== '.') {\n          // ignore metadata nodes.\n          const childNode = nodeFromJSON(childData);\n          if (childNode.isLeafNode() || !childNode.isEmpty())\n            node = node.updateImmediateChild(key, childNode);\n        }\n      }\n    });\n\n    return node.updatePriority(nodeFromJSON(priority));\n  }\n}\n\nsetNodeFromJSON(nodeFromJSON);\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Index } from './Index';\nimport { NamedNode, Node } from '../Node';\nimport { nameCompare } from '../../util/util';\nimport { nodeFromJSON } from '../nodeFromJSON';\n\n/**\n * @constructor\n * @extends {Index}\n * @private\n */\nexport class ValueIndex extends Index {\n  /**\n   * @inheritDoc\n   */\n  compare(a: NamedNode, b: NamedNode): number {\n    const indexCmp = a.node.compareTo(b.node);\n    if (indexCmp === 0) {\n      return nameCompare(a.name, b.name);\n    } else {\n      return indexCmp;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isDefinedOn(node: Node): boolean {\n    return true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    return !oldNode.equals(newNode);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  minPost(): NamedNode {\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  maxPost(): NamedNode {\n    return (NamedNode as any).MAX;\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {string} name\n   * @return {!NamedNode}\n   */\n  makePost(indexValue: object, name: string): NamedNode {\n    const valueNode = nodeFromJSON(indexValue);\n    return new NamedNode(name, valueNode);\n  }\n\n  /**\n   * @return {!string} String representation for inclusion in a query spec\n   */\n  toString(): string {\n    return '.value';\n  }\n}\n\nexport const VALUE_INDEX = new ValueIndex();\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { KEY_INDEX } from '../core/snap/indexes/KeyIndex';\nimport { PRIORITY_INDEX } from '../core/snap/indexes/PriorityIndex';\nimport { VALUE_INDEX } from '../core/snap/indexes/ValueIndex';\nimport { PathIndex } from '../core/snap/indexes/PathIndex';\nimport { MIN_NAME, MAX_NAME, ObjectToUniqueKey } from '../core/util/util';\nimport { Path } from '../core/util/Path';\nimport {\n  isValidPriority,\n  validateEventType,\n  validatePathString,\n  validateFirebaseDataArg,\n  validateKey\n} from '../core/util/validation';\nimport {\n  errorPrefix,\n  validateArgCount,\n  validateCallback,\n  validateContextObject\n} from '@firebase/util';\nimport {\n  ValueEventRegistration,\n  ChildEventRegistration,\n  EventRegistration\n} from '../core/view/EventRegistration';\nimport { Deferred } from '@firebase/util';\nimport { Repo } from '../core/Repo';\nimport { QueryParams } from '../core/view/QueryParams';\nimport { Reference } from './Reference';\nimport { DataSnapshot } from './DataSnapshot';\n\nlet __referenceConstructor: new (repo: Repo, path: Path) => Query;\n\nexport interface SnapshotCallback {\n  (a: DataSnapshot, b?: string | null): any;\n}\n\n/**\n * A Query represents a filter to be applied to a firebase location.  This object purely represents the\n * query expression (and exposes our public API to build the query).  The actual query logic is in ViewBase.js.\n *\n * Since every Firebase reference is a query, Firebase inherits from this object.\n */\nexport class Query {\n  static set __referenceConstructor(val) {\n    __referenceConstructor = val;\n  }\n\n  static get __referenceConstructor() {\n    assert(__referenceConstructor, 'Reference.ts has not been loaded');\n    return __referenceConstructor;\n  }\n\n  constructor(\n    public repo: Repo,\n    public path: Path,\n    private queryParams_: QueryParams,\n    private orderByCalled_: boolean\n  ) {}\n\n  /**\n   * Validates start/end values for queries.\n   * @param {!QueryParams} params\n   * @private\n   */\n  private static validateQueryEndpoints_(params: QueryParams) {\n    let startNode = null;\n    let endNode = null;\n    if (params.hasStart()) {\n      startNode = params.getIndexStartValue();\n    }\n    if (params.hasEnd()) {\n      endNode = params.getIndexEndValue();\n    }\n\n    if (params.getIndex() === KEY_INDEX) {\n      const tooManyArgsError =\n        'Query: When ordering by key, you may only pass one argument to ' +\n        'startAt(), endAt(), or equalTo().';\n      const wrongArgTypeError =\n        'Query: When ordering by key, the argument passed to startAt(), endAt(),' +\n        'or equalTo() must be a string.';\n      if (params.hasStart()) {\n        const startName = params.getIndexStartName();\n        if (startName != MIN_NAME) {\n          throw new Error(tooManyArgsError);\n        } else if (typeof startNode !== 'string') {\n          throw new Error(wrongArgTypeError);\n        }\n      }\n      if (params.hasEnd()) {\n        const endName = params.getIndexEndName();\n        if (endName != MAX_NAME) {\n          throw new Error(tooManyArgsError);\n        } else if (typeof endNode !== 'string') {\n          throw new Error(wrongArgTypeError);\n        }\n      }\n    } else if (params.getIndex() === PRIORITY_INDEX) {\n      if (\n        (startNode != null && !isValidPriority(startNode)) ||\n        (endNode != null && !isValidPriority(endNode))\n      ) {\n        throw new Error(\n          'Query: When ordering by priority, the first argument passed to startAt(), ' +\n            'endAt(), or equalTo() must be a valid priority value (null, a number, or a string).'\n        );\n      }\n    } else {\n      assert(\n        params.getIndex() instanceof PathIndex ||\n          params.getIndex() === VALUE_INDEX,\n        'unknown index type.'\n      );\n      if (\n        (startNode != null && typeof startNode === 'object') ||\n        (endNode != null && typeof endNode === 'object')\n      ) {\n        throw new Error(\n          'Query: First argument passed to startAt(), endAt(), or equalTo() cannot be ' +\n            'an object.'\n        );\n      }\n    }\n  }\n\n  /**\n   * Validates that limit* has been called with the correct combination of parameters\n   * @param {!QueryParams} params\n   * @private\n   */\n  private static validateLimit_(params: QueryParams) {\n    if (\n      params.hasStart() &&\n      params.hasEnd() &&\n      params.hasLimit() &&\n      !params.hasAnchoredLimit()\n    ) {\n      throw new Error(\n        \"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\"\n      );\n    }\n  }\n\n  /**\n   * Validates that no other order by call has been made\n   * @param {!string} fnName\n   * @private\n   */\n  private validateNoPreviousOrderByCall_(fnName: string) {\n    if (this.orderByCalled_ === true) {\n      throw new Error(fnName + \": You can't combine multiple orderBy calls.\");\n    }\n  }\n\n  /**\n   * @return {!QueryParams}\n   */\n  getQueryParams(): QueryParams {\n    return this.queryParams_;\n  }\n\n  /**\n   * @return {!Reference}\n   */\n  getRef(): Reference {\n    validateArgCount('Query.ref', 0, 0, arguments.length);\n    // This is a slight hack. We cannot goog.require('fb.api.Firebase'), since Firebase requires fb.api.Query.\n    // However, we will always export 'Firebase' to the global namespace, so it's guaranteed to exist by the time this\n    // method gets called.\n    return new Query.__referenceConstructor(this.repo, this.path) as Reference;\n  }\n\n  /**\n   * @param {!string} eventType\n   * @param {!function(DataSnapshot, string=)} callback\n   * @param {(function(Error)|Object)=} cancelCallbackOrContext\n   * @param {Object=} context\n   * @return {!function(DataSnapshot, string=)}\n   */\n  on(\n    eventType: string,\n    callback: SnapshotCallback,\n    cancelCallbackOrContext?: ((a: Error) => any) | Object | null,\n    context?: Object | null\n  ): SnapshotCallback {\n    validateArgCount('Query.on', 2, 4, arguments.length);\n    validateEventType('Query.on', 1, eventType, false);\n    validateCallback('Query.on', 2, callback, false);\n\n    const ret = Query.getCancelAndContextArgs_(\n      'Query.on',\n      cancelCallbackOrContext,\n      context\n    );\n\n    if (eventType === 'value') {\n      this.onValueEvent(callback, ret.cancel, ret.context);\n    } else {\n      const callbacks: { [k: string]: typeof callback } = {};\n      callbacks[eventType] = callback;\n      this.onChildEvent(callbacks, ret.cancel, ret.context);\n    }\n    return callback;\n  }\n\n  /**\n   * @param {!function(!DataSnapshot)} callback\n   * @param {?function(Error)} cancelCallback\n   * @param {?Object} context\n   * @protected\n   */\n  protected onValueEvent(\n    callback: (a: DataSnapshot) => void,\n    cancelCallback: ((a: Error) => void) | null,\n    context: Object | null\n  ) {\n    const container = new ValueEventRegistration(\n      callback,\n      cancelCallback || null,\n      context || null\n    );\n    this.repo.addEventCallbackForQuery(this, container);\n  }\n\n  /**\n   * @param {!Object.<string, !function(!DataSnapshot, ?string)>} callbacks\n   * @param {?function(Error)} cancelCallback\n   * @param {?Object} context\n   * @protected\n   */\n  onChildEvent(\n    callbacks: { [k: string]: SnapshotCallback },\n    cancelCallback: ((a: Error) => any) | null,\n    context: Object | null\n  ) {\n    const container = new ChildEventRegistration(\n      callbacks,\n      cancelCallback,\n      context\n    );\n    this.repo.addEventCallbackForQuery(this, container);\n  }\n\n  /**\n   * @param {string=} eventType\n   * @param {(function(!DataSnapshot, ?string=))=} callback\n   * @param {Object=} context\n   */\n  off(\n    eventType?: string,\n    callback?: SnapshotCallback,\n    context?: Object | null\n  ): void {\n    validateArgCount('Query.off', 0, 3, arguments.length);\n    validateEventType('Query.off', 1, eventType, true);\n    validateCallback('Query.off', 2, callback, true);\n    validateContextObject('Query.off', 3, context, true);\n\n    let container: EventRegistration | null = null;\n    let callbacks: { [k: string]: typeof callback } | null = null;\n    if (eventType === 'value') {\n      const valueCallback = callback || null;\n      container = new ValueEventRegistration(\n        valueCallback,\n        null,\n        context || null\n      );\n    } else if (eventType) {\n      if (callback) {\n        callbacks = {};\n        callbacks[eventType] = callback;\n      }\n      container = new ChildEventRegistration(callbacks, null, context || null);\n    }\n    this.repo.removeEventCallbackForQuery(this, container);\n  }\n\n  /**\n   * Attaches a listener, waits for the first event, and then removes the listener\n   * @param {!string} eventType\n   * @param {!function(!DataSnapshot, string=)} userCallback\n   * @param failureCallbackOrContext\n   * @param context\n   * @return {!firebase.Promise}\n   */\n  once(\n    eventType: string,\n    userCallback?: SnapshotCallback,\n    failureCallbackOrContext?: ((a: Error) => void) | Object | null,\n    context?: Object | null\n  ): Promise<DataSnapshot> {\n    validateArgCount('Query.once', 1, 4, arguments.length);\n    validateEventType('Query.once', 1, eventType, false);\n    validateCallback('Query.once', 2, userCallback, true);\n\n    const ret = Query.getCancelAndContextArgs_(\n      'Query.once',\n      failureCallbackOrContext,\n      context\n    );\n\n    // TODO: Implement this more efficiently (in particular, use 'get' wire protocol for 'value' event)\n    // TODO: consider actually wiring the callbacks into the promise. We cannot do this without a breaking change\n    // because the API currently expects callbacks will be called synchronously if the data is cached, but this is\n    // against the Promise specification.\n    let firstCall = true;\n    const deferred = new Deferred<DataSnapshot>();\n\n    // A dummy error handler in case a user wasn't expecting promises\n    deferred.promise.catch(() => {});\n\n    const onceCallback = (snapshot: DataSnapshot) => {\n      // NOTE: Even though we unsubscribe, we may get called multiple times if a single action (e.g. set() with JSON)\n      // triggers multiple events (e.g. child_added or child_changed).\n      if (firstCall) {\n        firstCall = false;\n        this.off(eventType, onceCallback);\n\n        if (userCallback) {\n          userCallback.bind(ret.context)(snapshot);\n        }\n        deferred.resolve(snapshot);\n      }\n    };\n\n    this.on(\n      eventType,\n      onceCallback,\n      /*cancel=*/ err => {\n        this.off(eventType, onceCallback);\n\n        if (ret.cancel) ret.cancel.bind(ret.context)(err);\n        deferred.reject(err);\n      }\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * Set a limit and anchor it to the start of the window.\n   * @param {!number} limit\n   * @return {!Query}\n   */\n  limitToFirst(limit: number): Query {\n    validateArgCount('Query.limitToFirst', 1, 1, arguments.length);\n    if (\n      typeof limit !== 'number' ||\n      Math.floor(limit) !== limit ||\n      limit <= 0\n    ) {\n      throw new Error(\n        'Query.limitToFirst: First argument must be a positive integer.'\n      );\n    }\n    if (this.queryParams_.hasLimit()) {\n      throw new Error(\n        'Query.limitToFirst: Limit was already set (by another call to limit, ' +\n          'limitToFirst, or limitToLast).'\n      );\n    }\n\n    return new Query(\n      this.repo,\n      this.path,\n      this.queryParams_.limitToFirst(limit),\n      this.orderByCalled_\n    );\n  }\n\n  /**\n   * Set a limit and anchor it to the end of the window.\n   * @param {!number} limit\n   * @return {!Query}\n   */\n  limitToLast(limit: number): Query {\n    validateArgCount('Query.limitToLast', 1, 1, arguments.length);\n    if (\n      typeof limit !== 'number' ||\n      Math.floor(limit) !== limit ||\n      limit <= 0\n    ) {\n      throw new Error(\n        'Query.limitToLast: First argument must be a positive integer.'\n      );\n    }\n    if (this.queryParams_.hasLimit()) {\n      throw new Error(\n        'Query.limitToLast: Limit was already set (by another call to limit, ' +\n          'limitToFirst, or limitToLast).'\n      );\n    }\n\n    return new Query(\n      this.repo,\n      this.path,\n      this.queryParams_.limitToLast(limit),\n      this.orderByCalled_\n    );\n  }\n\n  /**\n   * Given a child path, return a new query ordered by the specified grandchild path.\n   * @param {!string} path\n   * @return {!Query}\n   */\n  orderByChild(path: string): Query {\n    validateArgCount('Query.orderByChild', 1, 1, arguments.length);\n    if (path === '$key') {\n      throw new Error(\n        'Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.'\n      );\n    } else if (path === '$priority') {\n      throw new Error(\n        'Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.'\n      );\n    } else if (path === '$value') {\n      throw new Error(\n        'Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.'\n      );\n    }\n    validatePathString('Query.orderByChild', 1, path, false);\n    this.validateNoPreviousOrderByCall_('Query.orderByChild');\n    const parsedPath = new Path(path);\n    if (parsedPath.isEmpty()) {\n      throw new Error(\n        'Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.'\n      );\n    }\n    const index = new PathIndex(parsedPath);\n    const newParams = this.queryParams_.orderBy(index);\n    Query.validateQueryEndpoints_(newParams);\n\n    return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\n  }\n\n  /**\n   * Return a new query ordered by the KeyIndex\n   * @return {!Query}\n   */\n  orderByKey(): Query {\n    validateArgCount('Query.orderByKey', 0, 0, arguments.length);\n    this.validateNoPreviousOrderByCall_('Query.orderByKey');\n    const newParams = this.queryParams_.orderBy(KEY_INDEX);\n    Query.validateQueryEndpoints_(newParams);\n    return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\n  }\n\n  /**\n   * Return a new query ordered by the PriorityIndex\n   * @return {!Query}\n   */\n  orderByPriority(): Query {\n    validateArgCount('Query.orderByPriority', 0, 0, arguments.length);\n    this.validateNoPreviousOrderByCall_('Query.orderByPriority');\n    const newParams = this.queryParams_.orderBy(PRIORITY_INDEX);\n    Query.validateQueryEndpoints_(newParams);\n    return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\n  }\n\n  /**\n   * Return a new query ordered by the ValueIndex\n   * @return {!Query}\n   */\n  orderByValue(): Query {\n    validateArgCount('Query.orderByValue', 0, 0, arguments.length);\n    this.validateNoPreviousOrderByCall_('Query.orderByValue');\n    const newParams = this.queryParams_.orderBy(VALUE_INDEX);\n    Query.validateQueryEndpoints_(newParams);\n    return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\n  }\n\n  /**\n   * @param {number|string|boolean|null} value\n   * @param {?string=} name\n   * @return {!Query}\n   */\n  startAt(\n    value: number | string | boolean | null = null,\n    name?: string | null\n  ): Query {\n    validateArgCount('Query.startAt', 0, 2, arguments.length);\n    validateFirebaseDataArg('Query.startAt', 1, value, this.path, true);\n    validateKey('Query.startAt', 2, name, true);\n\n    const newParams = this.queryParams_.startAt(value, name);\n    Query.validateLimit_(newParams);\n    Query.validateQueryEndpoints_(newParams);\n    if (this.queryParams_.hasStart()) {\n      throw new Error(\n        'Query.startAt: Starting point was already set (by another call to startAt ' +\n          'or equalTo).'\n      );\n    }\n\n    // Calling with no params tells us to start at the beginning.\n    if (value === undefined) {\n      value = null;\n      name = null;\n    }\n    return new Query(this.repo, this.path, newParams, this.orderByCalled_);\n  }\n\n  /**\n   * @param {number|string|boolean|null} value\n   * @param {?string=} name\n   * @return {!Query}\n   */\n  endAt(\n    value: number | string | boolean | null = null,\n    name?: string | null\n  ): Query {\n    validateArgCount('Query.endAt', 0, 2, arguments.length);\n    validateFirebaseDataArg('Query.endAt', 1, value, this.path, true);\n    validateKey('Query.endAt', 2, name, true);\n\n    const newParams = this.queryParams_.endAt(value, name);\n    Query.validateLimit_(newParams);\n    Query.validateQueryEndpoints_(newParams);\n    if (this.queryParams_.hasEnd()) {\n      throw new Error(\n        'Query.endAt: Ending point was already set (by another call to endAt or ' +\n          'equalTo).'\n      );\n    }\n\n    return new Query(this.repo, this.path, newParams, this.orderByCalled_);\n  }\n\n  /**\n   * Load the selection of children with exactly the specified value, and, optionally,\n   * the specified name.\n   * @param {number|string|boolean|null} value\n   * @param {string=} name\n   * @return {!Query}\n   */\n  equalTo(value: number | string | boolean | null, name?: string) {\n    validateArgCount('Query.equalTo', 1, 2, arguments.length);\n    validateFirebaseDataArg('Query.equalTo', 1, value, this.path, false);\n    validateKey('Query.equalTo', 2, name, true);\n    if (this.queryParams_.hasStart()) {\n      throw new Error(\n        'Query.equalTo: Starting point was already set (by another call to startAt or ' +\n          'equalTo).'\n      );\n    }\n    if (this.queryParams_.hasEnd()) {\n      throw new Error(\n        'Query.equalTo: Ending point was already set (by another call to endAt or ' +\n          'equalTo).'\n      );\n    }\n    return this.startAt(value, name).endAt(value, name);\n  }\n\n  /**\n   * @return {!string} URL for this location.\n   */\n  toString(): string {\n    validateArgCount('Query.toString', 0, 0, arguments.length);\n\n    return this.repo.toString() + this.path.toUrlEncodedString();\n  }\n\n  // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\n  // for end-users.\n  toJSON() {\n    // An optional spacer argument is unnecessary for a string.\n    validateArgCount('Query.toJSON', 0, 1, arguments.length);\n    return this.toString();\n  }\n\n  /**\n   * An object representation of the query parameters used by this Query.\n   * @return {!Object}\n   */\n  queryObject(): Object {\n    return this.queryParams_.getQueryObject();\n  }\n\n  /**\n   * @return {!string}\n   */\n  queryIdentifier(): string {\n    const obj = this.queryObject();\n    const id = ObjectToUniqueKey(obj);\n    return id === '{}' ? 'default' : id;\n  }\n\n  /**\n   * Return true if this query and the provided query are equivalent; otherwise, return false.\n   * @param {Query} other\n   * @return {boolean}\n   */\n  isEqual(other: Query): boolean {\n    validateArgCount('Query.isEqual', 1, 1, arguments.length);\n    if (!(other instanceof Query)) {\n      const error =\n        'Query.isEqual failed: First argument must be an instance of firebase.database.Query.';\n      throw new Error(error);\n    }\n\n    const sameRepo = this.repo === other.repo;\n    const samePath = this.path.equals(other.path);\n    const sameQueryIdentifier =\n      this.queryIdentifier() === other.queryIdentifier();\n\n    return sameRepo && samePath && sameQueryIdentifier;\n  }\n\n  /**\n   * Helper used by .on and .once to extract the context and or cancel arguments.\n   * @param {!string} fnName The function name (on or once)\n   * @param {(function(Error)|Object)=} cancelOrContext\n   * @param {Object=} context\n   * @return {{cancel: ?function(Error), context: ?Object}}\n   * @private\n   */\n  private static getCancelAndContextArgs_(\n    fnName: string,\n    cancelOrContext?: ((a: Error) => void) | Object | null,\n    context?: Object | null\n  ): { cancel: ((a: Error) => void) | null; context: Object | null } {\n    const ret: {\n      cancel: ((a: Error) => void) | null;\n      context: Object | null;\n    } = { cancel: null, context: null };\n    if (cancelOrContext && context) {\n      ret.cancel = cancelOrContext as (a: Error) => void;\n      validateCallback(fnName, 3, ret.cancel, true);\n\n      ret.context = context;\n      validateContextObject(fnName, 4, ret.context, true);\n    } else if (cancelOrContext) {\n      // we have either a cancel callback or a context.\n      if (typeof cancelOrContext === 'object' && cancelOrContext !== null) {\n        // it's a context!\n        ret.context = cancelOrContext;\n      } else if (typeof cancelOrContext === 'function') {\n        ret.cancel = cancelOrContext as (a: Error) => void;\n      } else {\n        throw new Error(\n          errorPrefix(fnName, 3, true) +\n            ' must either be a cancel callback or a context object.'\n        );\n      }\n    }\n    return ret;\n  }\n\n  get ref(): Reference {\n    return this.getRef();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Path } from '../util/Path';\n\n/**\n *\n * @enum\n */\nexport enum OperationType {\n  OVERWRITE,\n  MERGE,\n  ACK_USER_WRITE,\n  LISTEN_COMPLETE\n}\n\n/**\n * @interface\n */\nexport interface Operation {\n  /**\n   * @type {!OperationSource}\n   */\n  source: OperationSource;\n\n  /**\n   * @type {!OperationType}\n   */\n  type: OperationType;\n\n  /**\n   * @type {!Path}\n   */\n  path: Path;\n\n  /**\n   * @param {string} childName\n   * @return {?Operation}\n   */\n  operationForChild(childName: string): Operation | null;\n}\n\n/**\n * @param {boolean} fromUser\n * @param {boolean} fromServer\n * @param {?string} queryId\n * @param {boolean} tagged\n * @constructor\n */\nexport class OperationSource {\n  constructor(\n    public fromUser: boolean,\n    public fromServer: boolean,\n    public queryId: string | null,\n    public tagged: boolean\n  ) {\n    assert(!tagged || fromServer, 'Tagged queries must be from server.');\n  }\n  /**\n   * @const\n   * @type {!OperationSource}\n   */\n  static User = new OperationSource(\n    /*fromUser=*/ true,\n    false,\n    null,\n    /*tagged=*/ false\n  );\n\n  /**\n   * @const\n   * @type {!OperationSource}\n   */\n  static Server = new OperationSource(\n    false,\n    /*fromServer=*/ true,\n    null,\n    /*tagged=*/ false\n  );\n\n  /**\n   * @param {string} queryId\n   * @return {!OperationSource}\n   */\n  static forServerTaggedQuery = function(queryId: string): OperationSource {\n    return new OperationSource(\n      false,\n      /*fromServer=*/ true,\n      queryId,\n      /*tagged=*/ true\n    );\n  };\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { nameCompare, MAX_NAME } from '../../util/util';\nimport { Index } from './Index';\nimport { ChildrenNode, MAX_NODE } from '../ChildrenNode';\nimport { NamedNode, Node } from '../Node';\nimport { nodeFromJSON } from '../nodeFromJSON';\nimport { Path } from '../../util/Path';\n\n/**\n * @param {!Path} indexPath\n * @constructor\n * @extends {Index}\n */\nexport class PathIndex extends Index {\n  constructor(private indexPath_: Path) {\n    super();\n\n    assert(\n      !indexPath_.isEmpty() && indexPath_.getFront() !== '.priority',\n      \"Can't create PathIndex with empty path or .priority key\"\n    );\n  }\n\n  /**\n   * @param {!Node} snap\n   * @return {!Node}\n   * @protected\n   */\n  protected extractChild(snap: Node): Node {\n    return snap.getChild(this.indexPath_);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isDefinedOn(node: Node): boolean {\n    return !node.getChild(this.indexPath_).isEmpty();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  compare(a: NamedNode, b: NamedNode): number {\n    const aChild = this.extractChild(a.node);\n    const bChild = this.extractChild(b.node);\n    const indexCmp = aChild.compareTo(bChild);\n    if (indexCmp === 0) {\n      return nameCompare(a.name, b.name);\n    } else {\n      return indexCmp;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  makePost(indexValue: object, name: string): NamedNode {\n    const valueNode = nodeFromJSON(indexValue);\n    const node = ChildrenNode.EMPTY_NODE.updateChild(\n      this.indexPath_,\n      valueNode\n    );\n    return new NamedNode(name, node);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  maxPost(): NamedNode {\n    const node = ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_, MAX_NODE);\n    return new NamedNode(MAX_NAME, node);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  toString(): string {\n    return this.indexPath_.slice().join('/');\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { validateArgCount, validateCallback } from '@firebase/util';\nimport { validatePathString } from '../core/util/validation';\nimport { Path } from '../core/util/Path';\nimport { PRIORITY_INDEX } from '../core/snap/indexes/PriorityIndex';\nimport { Node } from '../core/snap/Node';\nimport { Reference } from './Reference';\nimport { Index } from '../core/snap/indexes/Index';\nimport { ChildrenNode } from '../core/snap/ChildrenNode';\n\n/**\n * Class representing a firebase data snapshot.  It wraps a SnapshotNode and\n * surfaces the public methods (val, forEach, etc.) we want to expose.\n */\nexport class DataSnapshot {\n  /**\n   * @param {!Node} node_ A SnapshotNode to wrap.\n   * @param {!Reference} ref_ The ref of the location this snapshot came from.\n   * @param {!Index} index_ The iteration order for this snapshot\n   */\n  constructor(\n    private readonly node_: Node,\n    private readonly ref_: Reference,\n    private readonly index_: Index\n  ) {}\n\n  /**\n   * Retrieves the snapshot contents as JSON.  Returns null if the snapshot is\n   * empty.\n   *\n   * @return {*} JSON representation of the DataSnapshot contents, or null if empty.\n   */\n  val(): any {\n    validateArgCount('DataSnapshot.val', 0, 0, arguments.length);\n    return this.node_.val();\n  }\n\n  /**\n   * Returns the snapshot contents as JSON, including priorities of node.  Suitable for exporting\n   * the entire node contents.\n   * @return {*} JSON representation of the DataSnapshot contents, or null if empty.\n   */\n  exportVal(): any {\n    validateArgCount('DataSnapshot.exportVal', 0, 0, arguments.length);\n    return this.node_.val(true);\n  }\n\n  // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\n  // for end-users\n  toJSON(): any {\n    // Optional spacer argument is unnecessary because we're depending on recursion rather than stringifying the content\n    validateArgCount('DataSnapshot.toJSON', 0, 1, arguments.length);\n    return this.exportVal();\n  }\n\n  /**\n   * Returns whether the snapshot contains a non-null value.\n   *\n   * @return {boolean} Whether the snapshot contains a non-null value, or is empty.\n   */\n  exists(): boolean {\n    validateArgCount('DataSnapshot.exists', 0, 0, arguments.length);\n    return !this.node_.isEmpty();\n  }\n\n  /**\n   * Returns a DataSnapshot of the specified child node's contents.\n   *\n   * @param {!string} childPathString Path to a child.\n   * @return {!DataSnapshot} DataSnapshot for child node.\n   */\n  child(childPathString: string): DataSnapshot {\n    validateArgCount('DataSnapshot.child', 0, 1, arguments.length);\n    // Ensure the childPath is a string (can be a number)\n    childPathString = String(childPathString);\n    validatePathString('DataSnapshot.child', 1, childPathString, false);\n\n    const childPath = new Path(childPathString);\n    const childRef = this.ref_.child(childPath);\n    return new DataSnapshot(\n      this.node_.getChild(childPath),\n      childRef,\n      PRIORITY_INDEX\n    );\n  }\n\n  /**\n   * Returns whether the snapshot contains a child at the specified path.\n   *\n   * @param {!string} childPathString Path to a child.\n   * @return {boolean} Whether the child exists.\n   */\n  hasChild(childPathString: string): boolean {\n    validateArgCount('DataSnapshot.hasChild', 1, 1, arguments.length);\n    validatePathString('DataSnapshot.hasChild', 1, childPathString, false);\n\n    const childPath = new Path(childPathString);\n    return !this.node_.getChild(childPath).isEmpty();\n  }\n\n  /**\n   * Returns the priority of the object, or null if no priority was set.\n   *\n   * @return {string|number|null} The priority.\n   */\n  getPriority(): string | number | null {\n    validateArgCount('DataSnapshot.getPriority', 0, 0, arguments.length);\n\n    // typecast here because we never return deferred values or internal priorities (MAX_PRIORITY)\n    return this.node_.getPriority().val() as string | number | null;\n  }\n\n  /**\n   * Iterates through child nodes and calls the specified action for each one.\n   *\n   * @param {function(!DataSnapshot)} action Callback function to be called\n   * for each child.\n   * @return {boolean} True if forEach was canceled by action returning true for\n   * one of the child nodes.\n   */\n  forEach(action: (d: DataSnapshot) => boolean | void): boolean {\n    validateArgCount('DataSnapshot.forEach', 1, 1, arguments.length);\n    validateCallback('DataSnapshot.forEach', 1, action, false);\n\n    if (this.node_.isLeafNode()) return false;\n\n    const childrenNode = this.node_ as ChildrenNode;\n    // Sanitize the return value to a boolean. ChildrenNode.forEachChild has a weird return type...\n    return !!childrenNode.forEachChild(this.index_, (key, node) => {\n      return action(\n        new DataSnapshot(node, this.ref_.child(key), PRIORITY_INDEX)\n      );\n    });\n  }\n\n  /**\n   * Returns whether this DataSnapshot has children.\n   * @return {boolean} True if the DataSnapshot contains 1 or more child nodes.\n   */\n  hasChildren(): boolean {\n    validateArgCount('DataSnapshot.hasChildren', 0, 0, arguments.length);\n\n    if (this.node_.isLeafNode()) return false;\n    else return !this.node_.isEmpty();\n  }\n\n  get key() {\n    return this.ref_.getKey();\n  }\n\n  /**\n   * Returns the number of children for this DataSnapshot.\n   * @return {number} The number of children that this DataSnapshot contains.\n   */\n  numChildren(): number {\n    validateArgCount('DataSnapshot.numChildren', 0, 0, arguments.length);\n\n    return this.node_.numChildren();\n  }\n\n  /**\n   * @return {Reference} The Firebase reference for the location this snapshot's data came from.\n   */\n  getRef(): Reference {\n    validateArgCount('DataSnapshot.ref', 0, 0, arguments.length);\n\n    return this.ref_;\n  }\n\n  get ref() {\n    return this.getRef();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringify } from '@firebase/util';\nimport { Path } from '../util/Path';\nimport { EventRegistration } from './EventRegistration';\nimport { DataSnapshot } from '../../api/DataSnapshot';\n\n/**\n * Encapsulates the data needed to raise an event\n * @interface\n */\nexport interface Event {\n  /**\n   * @return {!Path}\n   */\n  getPath(): Path;\n\n  /**\n   * @return {!string}\n   */\n  getEventType(): string;\n\n  /**\n   * @return {!function()}\n   */\n  getEventRunner(): () => void;\n\n  /**\n   * @return {!string}\n   */\n  toString(): string;\n}\n\n/**\n * Encapsulates the data needed to raise an event\n * @implements {Event}\n */\nexport class DataEvent implements Event {\n  /**\n   * @param {!string} eventType One of: value, child_added, child_changed, child_moved, child_removed\n   * @param {!EventRegistration} eventRegistration The function to call to with the event data. User provided\n   * @param {!DataSnapshot} snapshot The data backing the event\n   * @param {?string=} prevName Optional, the name of the previous child for child_* events.\n   */\n  constructor(\n    public eventType:\n      | 'value'\n      | ' child_added'\n      | ' child_changed'\n      | ' child_moved'\n      | ' child_removed',\n    public eventRegistration: EventRegistration,\n    public snapshot: DataSnapshot,\n    public prevName?: string | null\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  getPath(): Path {\n    const ref = this.snapshot.getRef();\n    if (this.eventType === 'value') {\n      return ref.path;\n    } else {\n      return ref.getParent().path;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventType(): string {\n    return this.eventType;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventRunner(): () => void {\n    return this.eventRegistration.getEventRunner(this);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  toString(): string {\n    return (\n      this.getPath().toString() +\n      ':' +\n      this.eventType +\n      ':' +\n      stringify(this.snapshot.exportVal())\n    );\n  }\n}\n\nexport class CancelEvent implements Event {\n  /**\n   * @param {EventRegistration} eventRegistration\n   * @param {Error} error\n   * @param {!Path} path\n   */\n  constructor(\n    public eventRegistration: EventRegistration,\n    public error: Error,\n    public path: Path\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  getPath(): Path {\n    return this.path;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventType(): string {\n    return 'cancel';\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventRunner(): () => void {\n    return this.eventRegistration.getEventRunner(this);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  toString(): string {\n    return this.path.toString() + ':cancel';\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DataSnapshot } from '../../api/DataSnapshot';\nimport { DataEvent, CancelEvent, Event } from './Event';\nimport { contains } from '@firebase/util';\nimport { assert } from '@firebase/util';\nimport { Path } from '../util/Path';\nimport { Change } from './Change';\nimport { Query } from '../../api/Query';\n\n/**\n * An EventRegistration is basically an event type ('value', 'child_added', etc.) and a callback\n * to be notified of that type of event.\n *\n * That said, it can also contain a cancel callback to be notified if the event is canceled.  And\n * currently, this code is organized around the idea that you would register multiple child_ callbacks\n * together, as a single EventRegistration.  Though currently we don't do that.\n */\nexport interface EventRegistration {\n  /**\n   * True if this container has a callback to trigger for this event type\n   * @param {!string} eventType\n   * @return {boolean}\n   */\n  respondsTo(eventType: string): boolean;\n\n  /**\n   * @param {!Change} change\n   * @param {!Query} query\n   * @return {!Event}\n   */\n  createEvent(change: Change, query: Query): Event;\n\n  /**\n   * Given event data, return a function to trigger the user's callback\n   * @param {!Event} eventData\n   * @return {function()}\n   */\n  getEventRunner(eventData: Event): () => void;\n\n  /**\n   * @param {!Error} error\n   * @param {!Path} path\n   * @return {?CancelEvent}\n   */\n  createCancelEvent(error: Error, path: Path): CancelEvent | null;\n\n  /**\n   * @param {!EventRegistration} other\n   * @return {boolean}\n   */\n  matches(other: EventRegistration): boolean;\n\n  /**\n   * False basically means this is a \"dummy\" callback container being used as a sentinel\n   * to remove all callback containers of a particular type.  (e.g. if the user does\n   * ref.off('value') without specifying a specific callback).\n   *\n   * (TODO: Rework this, since it's hacky)\n   *\n   * @return {boolean}\n   */\n  hasAnyCallback(): boolean;\n}\n\n/**\n * Represents registration for 'value' events.\n */\nexport class ValueEventRegistration implements EventRegistration {\n  /**\n   * @param {?function(!DataSnapshot)} callback_\n   * @param {?function(Error)} cancelCallback_\n   * @param {?Object} context_\n   */\n  constructor(\n    private callback_: ((d: DataSnapshot) => void) | null,\n    private cancelCallback_: ((e: Error) => void) | null,\n    private context_: Object | null\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  respondsTo(eventType: string): boolean {\n    return eventType === 'value';\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createEvent(change: Change, query: Query): DataEvent {\n    const index = query.getQueryParams().getIndex();\n    return new DataEvent(\n      'value',\n      this,\n      new DataSnapshot(change.snapshotNode, query.getRef(), index)\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventRunner(eventData: CancelEvent | DataEvent): () => void {\n    const ctx = this.context_;\n    if (eventData.getEventType() === 'cancel') {\n      assert(\n        this.cancelCallback_,\n        'Raising a cancel event on a listener with no cancel callback'\n      );\n      const cancelCB = this.cancelCallback_;\n      return function() {\n        // We know that error exists, we checked above that this is a cancel event\n        cancelCB.call(ctx, (eventData as CancelEvent).error);\n      };\n    } else {\n      const cb = this.callback_;\n      return function() {\n        cb.call(ctx, (eventData as DataEvent).snapshot);\n      };\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createCancelEvent(error: Error, path: Path): CancelEvent | null {\n    if (this.cancelCallback_) {\n      return new CancelEvent(this, error, path);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  matches(other: EventRegistration): boolean {\n    if (!(other instanceof ValueEventRegistration)) {\n      return false;\n    } else if (!other.callback_ || !this.callback_) {\n      // If no callback specified, we consider it to match any callback.\n      return true;\n    } else {\n      return (\n        other.callback_ === this.callback_ && other.context_ === this.context_\n      );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  hasAnyCallback(): boolean {\n    return this.callback_ !== null;\n  }\n}\n\n/**\n * Represents the registration of 1 or more child_xxx events.\n *\n * Currently, it is always exactly 1 child_xxx event, but the idea is we might let you\n * register a group of callbacks together in the future.\n *\n * @constructor\n * @implements {EventRegistration}\n */\nexport class ChildEventRegistration implements EventRegistration {\n  /**\n   * @param {?Object.<string, function(!DataSnapshot, ?string=)>} callbacks_\n   * @param {?function(Error)} cancelCallback_\n   * @param {Object=} context_\n   */\n  constructor(\n    private callbacks_: {\n      [k: string]: (d: DataSnapshot, s?: string | null) => void;\n    } | null,\n    private cancelCallback_: ((e: Error) => void) | null,\n    private context_?: Object\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  respondsTo(eventType: string): boolean {\n    let eventToCheck =\n      eventType === 'children_added' ? 'child_added' : eventType;\n    eventToCheck =\n      eventToCheck === 'children_removed' ? 'child_removed' : eventToCheck;\n    return contains(this.callbacks_, eventToCheck);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createCancelEvent(error: Error, path: Path): CancelEvent | null {\n    if (this.cancelCallback_) {\n      return new CancelEvent(this, error, path);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createEvent(change: Change, query: Query): DataEvent {\n    assert(change.childName != null, 'Child events should have a childName.');\n    const ref = query.getRef().child(/** @type {!string} */ change.childName);\n    const index = query.getQueryParams().getIndex();\n    return new DataEvent(\n      change.type as any,\n      this,\n      new DataSnapshot(change.snapshotNode, ref, index as any),\n      change.prevName\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventRunner(eventData: CancelEvent | DataEvent): () => void {\n    const ctx = this.context_;\n    if (eventData.getEventType() === 'cancel') {\n      assert(\n        this.cancelCallback_,\n        'Raising a cancel event on a listener with no cancel callback'\n      );\n      const cancelCB = this.cancelCallback_;\n      return function() {\n        // We know that error exists, we checked above that this is a cancel event\n        cancelCB.call(ctx, (eventData as CancelEvent).error);\n      };\n    } else {\n      const cb = this.callbacks_[(eventData as DataEvent).eventType];\n      return function() {\n        cb.call(\n          ctx,\n          (eventData as DataEvent).snapshot,\n          (eventData as DataEvent).prevName\n        );\n      };\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  matches(other: EventRegistration): boolean {\n    if (other instanceof ChildEventRegistration) {\n      if (!this.callbacks_ || !other.callbacks_) {\n        return true;\n      } else if (this.context_ === other.context_) {\n        const otherKeys = Object.keys(other.callbacks_);\n        const thisKeys = Object.keys(this.callbacks_);\n        const otherCount = otherKeys.length;\n        const thisCount = thisKeys.length;\n        if (otherCount === thisCount) {\n          // If count is 1, do an exact match on eventType, if either is defined but null, it's a match.\n          // If event types don't match, not a match\n          // If count is not 1, exact match across all\n\n          if (otherCount === 1) {\n            const otherKey = otherKeys[0];\n            const thisKey = thisKeys[0];\n            return (\n              thisKey === otherKey &&\n              (!other.callbacks_[otherKey] ||\n                !this.callbacks_[thisKey] ||\n                other.callbacks_[otherKey] === this.callbacks_[thisKey])\n            );\n          } else {\n            // Exact match on each key.\n            return thisKeys.every(\n              eventType =>\n                other.callbacks_[eventType] === this.callbacks_[eventType]\n            );\n          }\n        }\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  hasAnyCallback(): boolean {\n    return this.callbacks_ !== null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from './util/Path';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { Node } from './snap/Node';\n\n/**\n * Helper class to store a sparse set of snapshots.\n */\nexport class SparseSnapshotTree {\n  private value: Node | null = null;\n\n  private readonly children: Map<string, SparseSnapshotTree> = new Map();\n\n  /**\n   * Gets the node stored at the given path if one exists.\n   *\n   * @param path Path to look up snapshot for.\n   * @return The retrieved node, or null.\n   */\n  find(path: Path): Node | null {\n    if (this.value != null) {\n      return this.value.getChild(path);\n    } else if (!path.isEmpty() && this.children.size > 0) {\n      const childKey = path.getFront();\n      path = path.popFront();\n      if (this.children.has(childKey)) {\n        const childTree = this.children.get(childKey);\n        return childTree.find(path);\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Stores the given node at the specified path. If there is already a node\n   * at a shallower path, it merges the new data into that snapshot node.\n   *\n   * @param path Path to look up snapshot for.\n   * @param data The new data, or null.\n   */\n  remember(path: Path, data: Node) {\n    if (path.isEmpty()) {\n      this.value = data;\n      this.children.clear();\n    } else if (this.value !== null) {\n      this.value = this.value.updateChild(path, data);\n    } else {\n      const childKey = path.getFront();\n      if (!this.children.has(childKey)) {\n        this.children.set(childKey, new SparseSnapshotTree());\n      }\n\n      const child = this.children.get(childKey);\n      path = path.popFront();\n      child.remember(path, data);\n    }\n  }\n\n  /**\n   * Purge the data at path from the cache.\n   *\n   * @param path Path to look up snapshot for.\n   * @return True if this node should now be removed.\n   */\n  forget(path: Path): boolean {\n    if (path.isEmpty()) {\n      this.value = null;\n      this.children.clear();\n      return true;\n    } else {\n      if (this.value !== null) {\n        if (this.value.isLeafNode()) {\n          // We're trying to forget a node that doesn't exist\n          return false;\n        } else {\n          const value = this.value;\n          this.value = null;\n\n          const self = this;\n          value.forEachChild(PRIORITY_INDEX, function(key, tree) {\n            self.remember(new Path(key), tree);\n          });\n\n          return this.forget(path);\n        }\n      } else if (this.children.size > 0) {\n        const childKey = path.getFront();\n        path = path.popFront();\n        if (this.children.has(childKey)) {\n          const safeToRemove = this.children.get(childKey).forget(path);\n          if (safeToRemove) {\n            this.children.delete(childKey);\n          }\n        }\n\n        return this.children.size === 0;\n      } else {\n        return true;\n      }\n    }\n  }\n\n  /**\n   * Recursively iterates through all of the stored tree and calls the\n   * callback on each one.\n   *\n   * @param prefixPath Path to look up node for.\n   * @param func The function to invoke for each tree.\n   */\n  forEachTree(prefixPath: Path, func: (a: Path, b: Node) => any) {\n    if (this.value !== null) {\n      func(prefixPath, this.value);\n    } else {\n      this.forEachChild((key, tree) => {\n        const path = new Path(prefixPath.toString() + '/' + key);\n        tree.forEachTree(path, func);\n      });\n    }\n  }\n\n  /**\n   * Iterates through each immediate child and triggers the callback.\n   *\n   * @param func The function to invoke for each child.\n   */\n  forEachChild(func: (a: string, b: SparseSnapshotTree) => void) {\n    this.children.forEach((tree, key) => {\n      func(key, tree);\n    });\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Path } from './Path';\nimport { SparseSnapshotTree } from '../SparseSnapshotTree';\nimport { LeafNode } from '../snap/LeafNode';\nimport { nodeFromJSON } from '../snap/nodeFromJSON';\nimport { PRIORITY_INDEX } from '../snap/indexes/PriorityIndex';\nimport { Node } from '../snap/Node';\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { SyncTree } from '../SyncTree';\n\n/**\n * Generate placeholders for deferred values.\n * @param {?Object} values\n * @return {!Object}\n */\nexport const generateWithValues = function(\n  values: {\n    [k: string]: any;\n  } | null\n): { [k: string]: any } {\n  values = values || {};\n  values['timestamp'] = values['timestamp'] || new Date().getTime();\n  return values;\n};\n\n/**\n * Value to use when firing local events. When writing server values, fire\n * local events with an approximate value, otherwise return value as-is.\n * @param {(Object|string|number|boolean)} value\n * @param {!Object} serverValues\n * @return {!(string|number|boolean)}\n */\nexport const resolveDeferredValue = function(\n  value: { [k: string]: any } | string | number | boolean,\n  existing: Node,\n  serverValues: { [k: string]: any }\n): string | number | boolean {\n  if (!value || typeof value !== 'object') {\n    return value as string | number | boolean;\n  }\n  assert('.sv' in value, 'Unexpected leaf node or priority contents');\n\n  if (typeof value['.sv'] === 'string') {\n    return resolveScalarDeferredValue(value['.sv'], existing, serverValues);\n  } else if (typeof value['.sv'] === 'object') {\n    return resolveComplexDeferredValue(value['.sv'], existing, serverValues);\n  } else {\n    assert(false, 'Unexpected server value: ' + JSON.stringify(value, null, 2));\n  }\n};\n\nconst resolveScalarDeferredValue = function(\n  op: string,\n  existing: Node,\n  serverValues: { [k: string]: any }\n): string | number | boolean {\n  switch (op) {\n    case 'timestamp':\n      return serverValues['timestamp'];\n    default:\n      assert(false, 'Unexpected server value: ' + op);\n  }\n};\n\nconst resolveComplexDeferredValue = function(\n  op: Object,\n  existing: Node,\n  unused: { [k: string]: any }\n): string | number | boolean {\n  if (!op.hasOwnProperty('increment')) {\n    assert(false, 'Unexpected server value: ' + JSON.stringify(op, null, 2));\n  }\n  const delta = op['increment'];\n  if (typeof delta !== 'number') {\n    assert(false, 'Unexpected increment value: ' + delta);\n  }\n\n  // Incrementing a non-number sets the value to the incremented amount\n  if (!existing.isLeafNode()) {\n    return delta;\n  }\n\n  const leaf = existing as LeafNode;\n  const existingVal = leaf.getValue();\n  if (typeof existingVal !== 'number') {\n    return delta;\n  }\n\n  // No need to do over/underflow arithmetic here because JS only handles floats under the covers\n  return existingVal + delta;\n};\n\n/**\n * Recursively replace all deferred values and priorities in the tree with the\n * specified generated replacement values.\n * @param {!SparseSnapshotTree} tree\n * @param {!Object} serverValues\n * @return {!SparseSnapshotTree}\n */\nexport const resolveDeferredValueTree = function(\n  tree: SparseSnapshotTree,\n  syncTree: SyncTree,\n  serverValues: Object\n): SparseSnapshotTree {\n  const resolvedTree = new SparseSnapshotTree();\n  tree.forEachTree(new Path(''), function(path, node) {\n    const existing = syncTree.calcCompleteEventCache(path);\n    assert(\n      existing !== null && typeof existing !== 'undefined',\n      'Expected ChildrenNode.EMPTY_NODE for nulls'\n    );\n    resolvedTree.remember(\n      path,\n      resolveDeferredValueSnapshot(node, existing, serverValues)\n    );\n  });\n  return resolvedTree;\n};\n\n/**\n * Recursively replace all deferred values and priorities in the node with the\n * specified generated replacement values.  If there are no server values in the node,\n * it'll be returned as-is.\n * @param {!Node} node\n * @param {!Object} serverValues\n * @return {!Node}\n */\nexport const resolveDeferredValueSnapshot = function(\n  node: Node,\n  existing: Node,\n  serverValues: Object\n): Node {\n  const rawPri = node.getPriority().val() as\n    | object\n    | boolean\n    | null\n    | number\n    | string;\n  const priority = resolveDeferredValue(\n    rawPri,\n    existing.getPriority(),\n    serverValues\n  );\n  let newNode: Node;\n\n  if (node.isLeafNode()) {\n    const leafNode = node as LeafNode;\n    const value = resolveDeferredValue(\n      leafNode.getValue(),\n      existing,\n      serverValues\n    );\n    if (\n      value !== leafNode.getValue() ||\n      priority !== leafNode.getPriority().val()\n    ) {\n      return new LeafNode(value, nodeFromJSON(priority));\n    } else {\n      return node;\n    }\n  } else {\n    const childrenNode = node as ChildrenNode;\n    newNode = childrenNode;\n    if (priority !== childrenNode.getPriority().val()) {\n      newNode = newNode.updatePriority(new LeafNode(priority));\n    }\n    childrenNode.forEachChild(PRIORITY_INDEX, function(childName, childNode) {\n      const newChildNode = resolveDeferredValueSnapshot(\n        childNode,\n        existing.getImmediateChild(childName),\n        serverValues\n      );\n      if (newChildNode !== childNode) {\n        newNode = newNode.updateImmediateChild(childName, newChildNode);\n      }\n    });\n    return newNode;\n  }\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SortedMap } from './SortedMap';\nimport { Path } from './Path';\nimport { stringCompare, each } from './util';\n\nlet emptyChildrenSingleton: SortedMap<string, ImmutableTree<null>>;\n\n/**\n * Singleton empty children collection.\n *\n * @const\n * @type {!SortedMap.<string, !ImmutableTree.<?>>}\n */\nconst EmptyChildren = (): SortedMap<string, ImmutableTree<null>> => {\n  if (!emptyChildrenSingleton) {\n    emptyChildrenSingleton = new SortedMap<string, ImmutableTree<null>>(\n      stringCompare\n    );\n  }\n  return emptyChildrenSingleton;\n};\n\n/**\n * A tree with immutable elements.\n */\nexport class ImmutableTree<T> {\n  static Empty = new ImmutableTree<any>(null);\n\n  /**\n   * @template T\n   * @param {!Object.<string, !T>} obj\n   * @return {!ImmutableTree.<!T>}\n   */\n  static fromObject<T>(obj: { [k: string]: T }): ImmutableTree<T> {\n    let tree: ImmutableTree<T> = ImmutableTree.Empty;\n    each(obj, (childPath: string, childSnap: T) => {\n      tree = tree.set(new Path(childPath), childSnap);\n    });\n    return tree;\n  }\n\n  /**\n   * @template T\n   * @param {?T} value\n   * @param {SortedMap.<string, !ImmutableTree.<T>>=} children\n   */\n  constructor(\n    public readonly value: T | null,\n    public readonly children: SortedMap<\n      string,\n      ImmutableTree<T>\n    > = EmptyChildren()\n  ) {}\n\n  /**\n   * True if the value is empty and there are no children\n   * @return {boolean}\n   */\n  isEmpty(): boolean {\n    return this.value === null && this.children.isEmpty();\n  }\n\n  /**\n   * Given a path and predicate, return the first node and the path to that node\n   * where the predicate returns true.\n   *\n   * TODO Do a perf test -- If we're creating a bunch of {path: value:} objects\n   * on the way back out, it may be better to pass down a pathSoFar obj.\n   *\n   * @param {!Path} relativePath The remainder of the path\n   * @param {function(T):boolean} predicate The predicate to satisfy to return a\n   *   node\n   * @return {?{path:!Path, value:!T}}\n   */\n  findRootMostMatchingPathAndValue(\n    relativePath: Path,\n    predicate: (a: T) => boolean\n  ): { path: Path; value: T } | null {\n    if (this.value != null && predicate(this.value)) {\n      return { path: Path.Empty, value: this.value };\n    } else {\n      if (relativePath.isEmpty()) {\n        return null;\n      } else {\n        const front = relativePath.getFront();\n        const child = this.children.get(front);\n        if (child !== null) {\n          const childExistingPathAndValue = child.findRootMostMatchingPathAndValue(\n            relativePath.popFront(),\n            predicate\n          );\n          if (childExistingPathAndValue != null) {\n            const fullPath = new Path(front).child(\n              childExistingPathAndValue.path\n            );\n            return { path: fullPath, value: childExistingPathAndValue.value };\n          } else {\n            return null;\n          }\n        } else {\n          return null;\n        }\n      }\n    }\n  }\n\n  /**\n   * Find, if it exists, the shortest subpath of the given path that points a defined\n   * value in the tree\n   * @param {!Path} relativePath\n   * @return {?{path: !Path, value: !T}}\n   */\n  findRootMostValueAndPath(\n    relativePath: Path\n  ): { path: Path; value: T } | null {\n    return this.findRootMostMatchingPathAndValue(relativePath, () => true);\n  }\n\n  /**\n   * @param {!Path} relativePath\n   * @return {!ImmutableTree.<T>} The subtree at the given path\n   */\n  subtree(relativePath: Path): ImmutableTree<T> {\n    if (relativePath.isEmpty()) {\n      return this;\n    } else {\n      const front = relativePath.getFront();\n      const childTree = this.children.get(front);\n      if (childTree !== null) {\n        return childTree.subtree(relativePath.popFront());\n      } else {\n        return ImmutableTree.Empty;\n      }\n    }\n  }\n\n  /**\n   * Sets a value at the specified path.\n   *\n   * @param {!Path} relativePath Path to set value at.\n   * @param {?T} toSet Value to set.\n   * @return {!ImmutableTree.<T>} Resulting tree.\n   */\n  set(relativePath: Path, toSet: T | null): ImmutableTree<T> {\n    if (relativePath.isEmpty()) {\n      return new ImmutableTree(toSet, this.children);\n    } else {\n      const front = relativePath.getFront();\n      const child = this.children.get(front) || ImmutableTree.Empty;\n      const newChild = child.set(relativePath.popFront(), toSet);\n      const newChildren = this.children.insert(front, newChild);\n      return new ImmutableTree(this.value, newChildren);\n    }\n  }\n\n  /**\n   * Removes the value at the specified path.\n   *\n   * @param {!Path} relativePath Path to value to remove.\n   * @return {!ImmutableTree.<T>} Resulting tree.\n   */\n  remove(relativePath: Path): ImmutableTree<T> {\n    if (relativePath.isEmpty()) {\n      if (this.children.isEmpty()) {\n        return ImmutableTree.Empty;\n      } else {\n        return new ImmutableTree(null, this.children);\n      }\n    } else {\n      const front = relativePath.getFront();\n      const child = this.children.get(front);\n      if (child) {\n        const newChild = child.remove(relativePath.popFront());\n        let newChildren;\n        if (newChild.isEmpty()) {\n          newChildren = this.children.remove(front);\n        } else {\n          newChildren = this.children.insert(front, newChild);\n        }\n        if (this.value === null && newChildren.isEmpty()) {\n          return ImmutableTree.Empty;\n        } else {\n          return new ImmutableTree(this.value, newChildren);\n        }\n      } else {\n        return this;\n      }\n    }\n  }\n\n  /**\n   * Gets a value from the tree.\n   *\n   * @param {!Path} relativePath Path to get value for.\n   * @return {?T} Value at path, or null.\n   */\n  get(relativePath: Path): T | null {\n    if (relativePath.isEmpty()) {\n      return this.value;\n    } else {\n      const front = relativePath.getFront();\n      const child = this.children.get(front);\n      if (child) {\n        return child.get(relativePath.popFront());\n      } else {\n        return null;\n      }\n    }\n  }\n\n  /**\n   * Replace the subtree at the specified path with the given new tree.\n   *\n   * @param {!Path} relativePath Path to replace subtree for.\n   * @param {!ImmutableTree} newTree New tree.\n   * @return {!ImmutableTree} Resulting tree.\n   */\n  setTree(relativePath: Path, newTree: ImmutableTree<T>): ImmutableTree<T> {\n    if (relativePath.isEmpty()) {\n      return newTree;\n    } else {\n      const front = relativePath.getFront();\n      const child = this.children.get(front) || ImmutableTree.Empty;\n      const newChild = child.setTree(relativePath.popFront(), newTree);\n      let newChildren;\n      if (newChild.isEmpty()) {\n        newChildren = this.children.remove(front);\n      } else {\n        newChildren = this.children.insert(front, newChild);\n      }\n      return new ImmutableTree(this.value, newChildren);\n    }\n  }\n\n  /**\n   * Performs a depth first fold on this tree. Transforms a tree into a single\n   * value, given a function that operates on the path to a node, an optional\n   * current value, and a map of child names to folded subtrees\n   * @template V\n   * @param {function(Path, ?T, Object.<string, V>):V} fn\n   * @return {V}\n   */\n  fold<V>(fn: (path: Path, value: T, children: { [k: string]: V }) => V): V {\n    return this.fold_(Path.Empty, fn);\n  }\n\n  /**\n   * Recursive helper for public-facing fold() method\n   * @template V\n   * @param {!Path} pathSoFar\n   * @param {function(Path, ?T, Object.<string, V>):V} fn\n   * @return {V}\n   * @private\n   */\n  private fold_<V>(\n    pathSoFar: Path,\n    fn: (path: Path, value: T | null, children: { [k: string]: V }) => V\n  ): V {\n    const accum: { [k: string]: V } = {};\n    this.children.inorderTraversal(function(\n      childKey: string,\n      childTree: ImmutableTree<T>\n    ) {\n      accum[childKey] = childTree.fold_(pathSoFar.child(childKey), fn);\n    });\n    return fn(pathSoFar, this.value, accum);\n  }\n\n  /**\n   * Find the first matching value on the given path. Return the result of applying f to it.\n   * @template V\n   * @param {!Path} path\n   * @param {!function(!Path, !T):?V} f\n   * @return {?V}\n   */\n  findOnPath<V>(path: Path, f: (path: Path, value: T) => V | null): V | null {\n    return this.findOnPath_(path, Path.Empty, f);\n  }\n\n  private findOnPath_<V>(\n    pathToFollow: Path,\n    pathSoFar: Path,\n    f: (path: Path, value: T) => V | null\n  ): V | null {\n    const result = this.value ? f(pathSoFar, this.value) : false;\n    if (result) {\n      return result;\n    } else {\n      if (pathToFollow.isEmpty()) {\n        return null;\n      } else {\n        const front = pathToFollow.getFront()!;\n        const nextChild = this.children.get(front);\n        if (nextChild) {\n          return nextChild.findOnPath_(\n            pathToFollow.popFront(),\n            pathSoFar.child(front),\n            f\n          );\n        } else {\n          return null;\n        }\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {!Path} path\n   * @param {!function(!Path, !T)} f\n   * @returns {!ImmutableTree.<T>}\n   */\n  foreachOnPath(\n    path: Path,\n    f: (path: Path, value: T) => void\n  ): ImmutableTree<T> {\n    return this.foreachOnPath_(path, Path.Empty, f);\n  }\n\n  private foreachOnPath_(\n    pathToFollow: Path,\n    currentRelativePath: Path,\n    f: (path: Path, value: T) => void\n  ): ImmutableTree<T> {\n    if (pathToFollow.isEmpty()) {\n      return this;\n    } else {\n      if (this.value) {\n        f(currentRelativePath, this.value);\n      }\n      const front = pathToFollow.getFront();\n      const nextChild = this.children.get(front);\n      if (nextChild) {\n        return nextChild.foreachOnPath_(\n          pathToFollow.popFront(),\n          currentRelativePath.child(front),\n          f\n        );\n      } else {\n        return ImmutableTree.Empty;\n      }\n    }\n  }\n\n  /**\n   * Calls the given function for each node in the tree that has a value.\n   *\n   * @param {function(!Path, !T)} f A function to be called with\n   *   the path from the root of the tree to a node, and the value at that node.\n   *   Called in depth-first order.\n   */\n  foreach(f: (path: Path, value: T) => void) {\n    this.foreach_(Path.Empty, f);\n  }\n\n  private foreach_(\n    currentRelativePath: Path,\n    f: (path: Path, value: T) => void\n  ) {\n    this.children.inorderTraversal(function(childName, childTree) {\n      childTree.foreach_(currentRelativePath.child(childName), f);\n    });\n    if (this.value) {\n      f(currentRelativePath, this.value);\n    }\n  }\n\n  /**\n   *\n   * @param {function(string, !T)} f\n   */\n  foreachChild(f: (name: string, value: T) => void) {\n    this.children.inorderTraversal(\n      (childName: string, childTree: ImmutableTree<T>) => {\n        if (childTree.value) {\n          f(childName, childTree.value);\n        }\n      }\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CacheNode } from './view/CacheNode';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { assert } from '@firebase/util';\nimport { ViewCache } from './view/ViewCache';\nimport { View } from './view/View';\nimport { Operation } from './operation/Operation';\nimport { WriteTreeRef } from './WriteTree';\nimport { Query } from '../api/Query';\nimport { EventRegistration } from './view/EventRegistration';\nimport { Node } from './snap/Node';\nimport { Path } from './util/Path';\nimport { Event } from './view/Event';\nimport { Reference, ReferenceConstructor } from '../api/Reference';\n\nlet __referenceConstructor: ReferenceConstructor;\n\n/**\n * SyncPoint represents a single location in a SyncTree with 1 or more event registrations, meaning we need to\n * maintain 1 or more Views at this location to cache server data and raise appropriate events for server changes\n * and user writes (set, transaction, update).\n *\n * It's responsible for:\n *  - Maintaining the set of 1 or more views necessary at this location (a SyncPoint with 0 views should be removed).\n *  - Proxying user / server operations to the views as appropriate (i.e. applyServerOverwrite,\n *    applyUserOverwrite, etc.)\n */\nexport class SyncPoint {\n  static set __referenceConstructor(val: ReferenceConstructor) {\n    assert(\n      !__referenceConstructor,\n      '__referenceConstructor has already been defined'\n    );\n    __referenceConstructor = val;\n  }\n\n  static get __referenceConstructor() {\n    assert(__referenceConstructor, 'Reference.ts has not been loaded');\n    return __referenceConstructor;\n  }\n\n  /**\n   * The Views being tracked at this location in the tree, stored as a map where the key is a\n   * queryId and the value is the View for that query.\n   *\n   * NOTE: This list will be quite small (usually 1, but perhaps 2 or 3; any more is an odd use case).\n   */\n  private readonly views: Map<string, View> = new Map();\n\n  isEmpty(): boolean {\n    return this.views.size === 0;\n  }\n\n  applyOperation(\n    operation: Operation,\n    writesCache: WriteTreeRef,\n    optCompleteServerCache: Node | null\n  ): Event[] {\n    const queryId = operation.source.queryId;\n    if (queryId !== null) {\n      const view = this.views.get(queryId);\n      assert(view != null, 'SyncTree gave us an op for an invalid query.');\n      return view.applyOperation(\n        operation,\n        writesCache,\n        optCompleteServerCache\n      );\n    } else {\n      let events: Event[] = [];\n\n      for (const view of this.views.values()) {\n        events = events.concat(\n          view.applyOperation(operation, writesCache, optCompleteServerCache)\n        );\n      }\n\n      return events;\n    }\n  }\n\n  /**\n   * Add an event callback for the specified query.\n   *\n   * @param {!Query} query\n   * @param {!EventRegistration} eventRegistration\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} serverCache Complete server cache, if we have it.\n   * @param {boolean} serverCacheComplete\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  addEventRegistration(\n    query: Query,\n    eventRegistration: EventRegistration,\n    writesCache: WriteTreeRef,\n    serverCache: Node | null,\n    serverCacheComplete: boolean\n  ): Event[] {\n    const queryId = query.queryIdentifier();\n    let view = this.views.get(queryId);\n    if (!view) {\n      // TODO: make writesCache take flag for complete server node\n      let eventCache = writesCache.calcCompleteEventCache(\n        serverCacheComplete ? serverCache : null\n      );\n      let eventCacheComplete = false;\n      if (eventCache) {\n        eventCacheComplete = true;\n      } else if (serverCache instanceof ChildrenNode) {\n        eventCache = writesCache.calcCompleteEventChildren(serverCache);\n        eventCacheComplete = false;\n      } else {\n        eventCache = ChildrenNode.EMPTY_NODE;\n        eventCacheComplete = false;\n      }\n      const viewCache = new ViewCache(\n        new CacheNode(\n          /** @type {!Node} */ eventCache,\n          eventCacheComplete,\n          false\n        ),\n        new CacheNode(\n          /** @type {!Node} */ serverCache,\n          serverCacheComplete,\n          false\n        )\n      );\n      view = new View(query, viewCache);\n      this.views.set(queryId, view);\n    }\n\n    // This is guaranteed to exist now, we just created anything that was missing\n    view.addEventRegistration(eventRegistration);\n    return view.getInitialEvents(eventRegistration);\n  }\n\n  /**\n   * Remove event callback(s).  Return cancelEvents if a cancelError is specified.\n   *\n   * If query is the default query, we'll check all views for the specified eventRegistration.\n   * If eventRegistration is null, we'll remove all callbacks for the specified view(s).\n   *\n   * @param {!Query} query\n   * @param {?EventRegistration} eventRegistration If null, remove all callbacks.\n   * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\n   * @return {{removed:!Array.<!Query>, events:!Array.<!Event>}} removed queries and any cancel events\n   */\n  removeEventRegistration(\n    query: Query,\n    eventRegistration: EventRegistration | null,\n    cancelError?: Error\n  ): { removed: Query[]; events: Event[] } {\n    const queryId = query.queryIdentifier();\n    const removed: Query[] = [];\n    let cancelEvents: Event[] = [];\n    const hadCompleteView = this.hasCompleteView();\n    if (queryId === 'default') {\n      // When you do ref.off(...), we search all views for the registration to remove.\n      for (const [viewQueryId, view] of this.views.entries()) {\n        cancelEvents = cancelEvents.concat(\n          view.removeEventRegistration(eventRegistration, cancelError)\n        );\n        if (view.isEmpty()) {\n          this.views.delete(viewQueryId);\n\n          // We'll deal with complete views later.\n          if (\n            !view\n              .getQuery()\n              .getQueryParams()\n              .loadsAllData()\n          ) {\n            removed.push(view.getQuery());\n          }\n        }\n      }\n    } else {\n      // remove the callback from the specific view.\n      const view = this.views.get(queryId);\n      if (view) {\n        cancelEvents = cancelEvents.concat(\n          view.removeEventRegistration(eventRegistration, cancelError)\n        );\n        if (view.isEmpty()) {\n          this.views.delete(queryId);\n\n          // We'll deal with complete views later.\n          if (\n            !view\n              .getQuery()\n              .getQueryParams()\n              .loadsAllData()\n          ) {\n            removed.push(view.getQuery());\n          }\n        }\n      }\n    }\n\n    if (hadCompleteView && !this.hasCompleteView()) {\n      // We removed our last complete view.\n      removed.push(\n        new SyncPoint.__referenceConstructor(query.repo, query.path)\n      );\n    }\n\n    return { removed: removed, events: cancelEvents };\n  }\n\n  getQueryViews(): View[] {\n    const result = [];\n    for (const view of this.views.values()) {\n      if (\n        !view\n          .getQuery()\n          .getQueryParams()\n          .loadsAllData()\n      ) {\n        result.push(view);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * @param path The path to the desired complete snapshot\n   * @return A complete cache, if it exists\n   */\n  getCompleteServerCache(path: Path): Node | null {\n    let serverCache: Node | null = null;\n    for (const view of this.views.values()) {\n      serverCache = serverCache || view.getCompleteServerCache(path);\n    }\n    return serverCache;\n  }\n\n  viewForQuery(query: Query): View | null {\n    const params = query.getQueryParams();\n    if (params.loadsAllData()) {\n      return this.getCompleteView();\n    } else {\n      const queryId = query.queryIdentifier();\n      return this.views.get(queryId);\n    }\n  }\n\n  viewExistsForQuery(query: Query): boolean {\n    return this.viewForQuery(query) != null;\n  }\n\n  hasCompleteView(): boolean {\n    return this.getCompleteView() != null;\n  }\n\n  getCompleteView(): View | null {\n    for (const view of this.views.values()) {\n      if (\n        view\n          .getQuery()\n          .getQueryParams()\n          .loadsAllData()\n      ) {\n        return view;\n      }\n    }\n    return null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Path } from '../util/Path';\nimport { Operation, OperationSource, OperationType } from './Operation';\nimport { ImmutableTree } from '../util/ImmutableTree';\n\nexport class AckUserWrite implements Operation {\n  /** @inheritDoc */\n  type = OperationType.ACK_USER_WRITE;\n\n  /** @inheritDoc */\n  source = OperationSource.User;\n\n  /**\n   *\n   * @param {!Path} path\n   * @param {!ImmutableTree<!boolean>} affectedTree A tree containing true for each affected path. Affected paths can't overlap.\n   * @param {!boolean} revert\n   */\n  constructor(\n    /**@inheritDoc */ public path: Path,\n    /**@inheritDoc */ public affectedTree: ImmutableTree<boolean>,\n    /**@inheritDoc */ public revert: boolean\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  operationForChild(childName: string): AckUserWrite {\n    if (!this.path.isEmpty()) {\n      assert(\n        this.path.getFront() === childName,\n        'operationForChild called for unrelated child.'\n      );\n      return new AckUserWrite(\n        this.path.popFront(),\n        this.affectedTree,\n        this.revert\n      );\n    } else if (this.affectedTree.value != null) {\n      assert(\n        this.affectedTree.children.isEmpty(),\n        'affectedTree should not have overlapping affected paths.'\n      );\n      // All child locations are affected as well; just return same operation.\n      return this;\n    } else {\n      const childTree = this.affectedTree.subtree(new Path(childName));\n      return new AckUserWrite(Path.Empty, childTree, this.revert);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../util/Path';\nimport { Operation, OperationSource, OperationType } from './Operation';\n\n/**\n * @param {!OperationSource} source\n * @param {!Path} path\n * @constructor\n * @implements {Operation}\n */\nexport class ListenComplete implements Operation {\n  /** @inheritDoc */\n  type = OperationType.LISTEN_COMPLETE;\n\n  constructor(public source: OperationSource, public path: Path) {}\n\n  operationForChild(childName: string): ListenComplete {\n    if (this.path.isEmpty()) {\n      return new ListenComplete(this.source, Path.Empty);\n    } else {\n      return new ListenComplete(this.source, this.path.popFront());\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Operation, OperationSource, OperationType } from './Operation';\nimport { Path } from '../util/Path';\nimport { Node } from '../snap/Node';\n\n/**\n * @param {!OperationSource} source\n * @param {!Path} path\n * @param {!Node} snap\n * @constructor\n * @implements {Operation}\n */\nexport class Overwrite implements Operation {\n  /** @inheritDoc */\n  type = OperationType.OVERWRITE;\n\n  constructor(\n    public source: OperationSource,\n    public path: Path,\n    public snap: Node\n  ) {}\n\n  operationForChild(childName: string): Overwrite {\n    if (this.path.isEmpty()) {\n      return new Overwrite(\n        this.source,\n        Path.Empty,\n        this.snap.getImmediateChild(childName)\n      );\n    } else {\n      return new Overwrite(this.source, this.path.popFront(), this.snap);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Operation, OperationSource, OperationType } from './Operation';\nimport { Overwrite } from './Overwrite';\nimport { Path } from '../util/Path';\nimport { assert } from '@firebase/util';\nimport { ImmutableTree } from '../util/ImmutableTree';\nimport { Node } from '../snap/Node';\n\n/**\n * @param {!OperationSource} source\n * @param {!Path} path\n * @param {!ImmutableTree.<!Node>} children\n * @constructor\n * @implements {Operation}\n */\nexport class Merge implements Operation {\n  /** @inheritDoc */\n  type = OperationType.MERGE;\n\n  constructor(\n    /**@inheritDoc */ public source: OperationSource,\n    /**@inheritDoc */ public path: Path,\n    /**@inheritDoc */ public children: ImmutableTree<Node>\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  operationForChild(childName: string): Operation {\n    if (this.path.isEmpty()) {\n      const childTree = this.children.subtree(new Path(childName));\n      if (childTree.isEmpty()) {\n        // This child is unaffected\n        return null;\n      } else if (childTree.value) {\n        // We have a snapshot for the child in question.  This becomes an overwrite of the child.\n        return new Overwrite(this.source, Path.Empty, childTree.value);\n      } else {\n        // This is a merge at a deeper level\n        return new Merge(this.source, Path.Empty, childTree);\n      }\n    } else {\n      assert(\n        this.path.getFront() === childName,\n        \"Can't get a merge for a child not on the path of the operation\"\n      );\n      return new Merge(this.source, this.path.popFront(), this.children);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  toString(): string {\n    return (\n      'Operation(' +\n      this.path +\n      ': ' +\n      this.source.toString() +\n      ' merge: ' +\n      this.children.toString() +\n      ')'\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node } from '../snap/Node';\nimport { Path } from '../util/Path';\n\n/**\n * A cache node only stores complete children. Additionally it holds a flag whether the node can be considered fully\n * initialized in the sense that we know at one point in time this represented a valid state of the world, e.g.\n * initialized with data from the server, or a complete overwrite by the client. The filtered flag also tracks\n * whether a node potentially had children removed due to a filter.\n */\nexport class CacheNode {\n  /**\n   * @param {!Node} node_\n   * @param {boolean} fullyInitialized_\n   * @param {boolean} filtered_\n   */\n  constructor(\n    private node_: Node,\n    private fullyInitialized_: boolean,\n    private filtered_: boolean\n  ) {}\n\n  /**\n   * Returns whether this node was fully initialized with either server data or a complete overwrite by the client\n   * @return {boolean}\n   */\n  isFullyInitialized(): boolean {\n    return this.fullyInitialized_;\n  }\n\n  /**\n   * Returns whether this node is potentially missing children due to a filter applied to the node\n   * @return {boolean}\n   */\n  isFiltered(): boolean {\n    return this.filtered_;\n  }\n\n  /**\n   * @param {!Path} path\n   * @return {boolean}\n   */\n  isCompleteForPath(path: Path): boolean {\n    if (path.isEmpty()) {\n      return this.isFullyInitialized() && !this.filtered_;\n    }\n\n    const childKey = path.getFront();\n    return this.isCompleteForChild(childKey);\n  }\n\n  /**\n   * @param {!string} key\n   * @return {boolean}\n   */\n  isCompleteForChild(key: string): boolean {\n    return (\n      (this.isFullyInitialized() && !this.filtered_) || this.node_.hasChild(key)\n    );\n  }\n\n  /**\n   * @return {!Node}\n   */\n  getNode(): Node {\n    return this.node_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { CacheNode } from './CacheNode';\nimport { Node } from '../snap/Node';\n\n/**\n * Stores the data we have cached for a view.\n *\n * serverSnap is the cached server data, eventSnap is the cached event data (server data plus any local writes).\n *\n * @constructor\n */\nexport class ViewCache {\n  /**\n   *\n   * @param {!CacheNode} eventCache_\n   * @param {!CacheNode} serverCache_\n   */\n  constructor(\n    private readonly eventCache_: CacheNode,\n    private readonly serverCache_: CacheNode\n  ) {}\n\n  /**\n   * @const\n   * @type {ViewCache}\n   */\n  static Empty = new ViewCache(\n    new CacheNode(\n      ChildrenNode.EMPTY_NODE,\n      /*fullyInitialized=*/ false,\n      /*filtered=*/ false\n    ),\n    new CacheNode(\n      ChildrenNode.EMPTY_NODE,\n      /*fullyInitialized=*/ false,\n      /*filtered=*/ false\n    )\n  );\n\n  /**\n   * @param {!Node} eventSnap\n   * @param {boolean} complete\n   * @param {boolean} filtered\n   * @return {!ViewCache}\n   */\n  updateEventSnap(\n    eventSnap: Node,\n    complete: boolean,\n    filtered: boolean\n  ): ViewCache {\n    return new ViewCache(\n      new CacheNode(eventSnap, complete, filtered),\n      this.serverCache_\n    );\n  }\n\n  /**\n   * @param {!Node} serverSnap\n   * @param {boolean} complete\n   * @param {boolean} filtered\n   * @return {!ViewCache}\n   */\n  updateServerSnap(\n    serverSnap: Node,\n    complete: boolean,\n    filtered: boolean\n  ): ViewCache {\n    return new ViewCache(\n      this.eventCache_,\n      new CacheNode(serverSnap, complete, filtered)\n    );\n  }\n\n  /**\n   * @return {!CacheNode}\n   */\n  getEventCache(): CacheNode {\n    return this.eventCache_;\n  }\n\n  /**\n   * @return {?Node}\n   */\n  getCompleteEventSnap(): Node | null {\n    return this.eventCache_.isFullyInitialized()\n      ? this.eventCache_.getNode()\n      : null;\n  }\n\n  /**\n   * @return {!CacheNode}\n   */\n  getServerCache(): CacheNode {\n    return this.serverCache_;\n  }\n\n  /**\n   * @return {?Node}\n   */\n  getCompleteServerSnap(): Node | null {\n    return this.serverCache_.isFullyInitialized()\n      ? this.serverCache_.getNode()\n      : null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node } from '../snap/Node';\n\n/**\n * @constructor\n * @struct\n * @param {!string} type The event type\n * @param {!Node} snapshotNode The data\n * @param {string=} childName The name for this child, if it's a child event\n * @param {Node=} oldSnap Used for intermediate processing of child changed events\n * @param {string=} prevName The name for the previous child, if applicable\n */\nexport class Change {\n  constructor(\n    public type: string,\n    public snapshotNode: Node,\n    public childName?: string,\n    public oldSnap?: Node,\n    public prevName?: string | null\n  ) {}\n\n  /**\n   * @param {!Node} snapshot\n   * @return {!Change}\n   */\n  static valueChange(snapshot: Node): Change {\n    return new Change(Change.VALUE, snapshot);\n  }\n\n  /**\n   * @param {string} childKey\n   * @param {!Node} snapshot\n   * @return {!Change}\n   */\n  static childAddedChange(childKey: string, snapshot: Node): Change {\n    return new Change(Change.CHILD_ADDED, snapshot, childKey);\n  }\n\n  /**\n   * @param {string} childKey\n   * @param {!Node} snapshot\n   * @return {!Change}\n   */\n  static childRemovedChange(childKey: string, snapshot: Node): Change {\n    return new Change(Change.CHILD_REMOVED, snapshot, childKey);\n  }\n\n  /**\n   * @param {string} childKey\n   * @param {!Node} newSnapshot\n   * @param {!Node} oldSnapshot\n   * @return {!Change}\n   */\n  static childChangedChange(\n    childKey: string,\n    newSnapshot: Node,\n    oldSnapshot: Node\n  ): Change {\n    return new Change(Change.CHILD_CHANGED, newSnapshot, childKey, oldSnapshot);\n  }\n\n  /**\n   * @param {string} childKey\n   * @param {!Node} snapshot\n   * @return {!Change}\n   */\n  static childMovedChange(childKey: string, snapshot: Node): Change {\n    return new Change(Change.CHILD_MOVED, snapshot, childKey);\n  }\n\n  //event types\n  /** Event type for a child added */\n  static CHILD_ADDED = 'child_added';\n\n  /** Event type for a child removed */\n  static CHILD_REMOVED = 'child_removed';\n\n  /** Event type for a child changed */\n  static CHILD_CHANGED = 'child_changed';\n\n  /** Event type for a child moved */\n  static CHILD_MOVED = 'child_moved';\n\n  /** Event type for a value change */\n  static VALUE = 'value';\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Change } from '../Change';\nimport { ChildrenNode } from '../../snap/ChildrenNode';\nimport { PRIORITY_INDEX } from '../../snap/indexes/PriorityIndex';\nimport { NodeFilter } from './NodeFilter';\nimport { Index } from '../../snap/indexes/Index';\nimport { Path } from '../../util/Path';\nimport { CompleteChildSource } from '../CompleteChildSource';\nimport { ChildChangeAccumulator } from '../ChildChangeAccumulator';\nimport { Node } from '../../snap/Node';\n\n/**\n * Doesn't really filter nodes but applies an index to the node and keeps track of any changes\n *\n * @constructor\n * @implements {NodeFilter}\n * @param {!Index} index\n */\nexport class IndexedFilter implements NodeFilter {\n  constructor(private readonly index_: Index) {}\n\n  updateChild(\n    snap: Node,\n    key: string,\n    newChild: Node,\n    affectedPath: Path,\n    source: CompleteChildSource,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    assert(\n      snap.isIndexed(this.index_),\n      'A node must be indexed if only a child is updated'\n    );\n    const oldChild = snap.getImmediateChild(key);\n    // Check if anything actually changed.\n    if (\n      oldChild.getChild(affectedPath).equals(newChild.getChild(affectedPath))\n    ) {\n      // There's an edge case where a child can enter or leave the view because affectedPath was set to null.\n      // In this case, affectedPath will appear null in both the old and new snapshots.  So we need\n      // to avoid treating these cases as \"nothing changed.\"\n      if (oldChild.isEmpty() == newChild.isEmpty()) {\n        // Nothing changed.\n\n        // This assert should be valid, but it's expensive (can dominate perf testing) so don't actually do it.\n        //assert(oldChild.equals(newChild), 'Old and new snapshots should be equal.');\n        return snap;\n      }\n    }\n\n    if (optChangeAccumulator != null) {\n      if (newChild.isEmpty()) {\n        if (snap.hasChild(key)) {\n          optChangeAccumulator.trackChildChange(\n            Change.childRemovedChange(key, oldChild)\n          );\n        } else {\n          assert(\n            snap.isLeafNode(),\n            'A child remove without an old child only makes sense on a leaf node'\n          );\n        }\n      } else if (oldChild.isEmpty()) {\n        optChangeAccumulator.trackChildChange(\n          Change.childAddedChange(key, newChild)\n        );\n      } else {\n        optChangeAccumulator.trackChildChange(\n          Change.childChangedChange(key, newChild, oldChild)\n        );\n      }\n    }\n    if (snap.isLeafNode() && newChild.isEmpty()) {\n      return snap;\n    } else {\n      // Make sure the node is indexed\n      return snap.updateImmediateChild(key, newChild).withIndex(this.index_);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateFullNode(\n    oldSnap: Node,\n    newSnap: Node,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (optChangeAccumulator != null) {\n      if (!oldSnap.isLeafNode()) {\n        oldSnap.forEachChild(PRIORITY_INDEX, function(key, childNode) {\n          if (!newSnap.hasChild(key)) {\n            optChangeAccumulator.trackChildChange(\n              Change.childRemovedChange(key, childNode)\n            );\n          }\n        });\n      }\n      if (!newSnap.isLeafNode()) {\n        newSnap.forEachChild(PRIORITY_INDEX, function(key, childNode) {\n          if (oldSnap.hasChild(key)) {\n            const oldChild = oldSnap.getImmediateChild(key);\n            if (!oldChild.equals(childNode)) {\n              optChangeAccumulator.trackChildChange(\n                Change.childChangedChange(key, childNode, oldChild)\n              );\n            }\n          } else {\n            optChangeAccumulator.trackChildChange(\n              Change.childAddedChange(key, childNode)\n            );\n          }\n        });\n      }\n    }\n    return newSnap.withIndex(this.index_);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updatePriority(oldSnap: Node, newPriority: Node): Node {\n    if (oldSnap.isEmpty()) {\n      return ChildrenNode.EMPTY_NODE;\n    } else {\n      return oldSnap.updatePriority(newPriority);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  filtersNodes(): boolean {\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndexedFilter(): IndexedFilter {\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndex(): Index {\n    return this.index_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Change } from './Change';\nimport { assert, assertionError } from '@firebase/util';\n\nexport class ChildChangeAccumulator {\n  private readonly changeMap: Map<string, Change> = new Map();\n\n  trackChildChange(change: Change) {\n    const type = change.type;\n    const childKey = change.childName!;\n    assert(\n      type == Change.CHILD_ADDED ||\n        type == Change.CHILD_CHANGED ||\n        type == Change.CHILD_REMOVED,\n      'Only child changes supported for tracking'\n    );\n    assert(\n      childKey !== '.priority',\n      'Only non-priority child changes can be tracked.'\n    );\n    const oldChange = this.changeMap.get(childKey);\n    if (oldChange) {\n      const oldType = oldChange.type;\n      if (type == Change.CHILD_ADDED && oldType == Change.CHILD_REMOVED) {\n        this.changeMap.set(\n          childKey,\n          Change.childChangedChange(\n            childKey,\n            change.snapshotNode,\n            oldChange.snapshotNode\n          )\n        );\n      } else if (\n        type == Change.CHILD_REMOVED &&\n        oldType == Change.CHILD_ADDED\n      ) {\n        this.changeMap.delete(childKey);\n      } else if (\n        type == Change.CHILD_REMOVED &&\n        oldType == Change.CHILD_CHANGED\n      ) {\n        this.changeMap.set(\n          childKey,\n          Change.childRemovedChange(childKey, oldChange.oldSnap)\n        );\n      } else if (\n        type == Change.CHILD_CHANGED &&\n        oldType == Change.CHILD_ADDED\n      ) {\n        this.changeMap.set(\n          childKey,\n          Change.childAddedChange(childKey, change.snapshotNode)\n        );\n      } else if (\n        type == Change.CHILD_CHANGED &&\n        oldType == Change.CHILD_CHANGED\n      ) {\n        this.changeMap.set(\n          childKey,\n          Change.childChangedChange(\n            childKey,\n            change.snapshotNode,\n            oldChange.oldSnap\n          )\n        );\n      } else {\n        throw assertionError(\n          'Illegal combination of changes: ' +\n            change +\n            ' occurred after ' +\n            oldChange\n        );\n      }\n    } else {\n      this.changeMap.set(childKey, change);\n    }\n  }\n\n  getChanges(): Change[] {\n    return Array.from(this.changeMap.values());\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CacheNode } from './CacheNode';\nimport { NamedNode, Node } from '../snap/Node';\nimport { Index } from '../snap/indexes/Index';\nimport { WriteTreeRef } from '../WriteTree';\nimport { ViewCache } from './ViewCache';\n\n/**\n * Since updates to filtered nodes might require nodes to be pulled in from \"outside\" the node, this interface\n * can help to get complete children that can be pulled in.\n * A class implementing this interface takes potentially multiple sources (e.g. user writes, server data from\n * other views etc.) to try it's best to get a complete child that might be useful in pulling into the view.\n *\n * @interface\n */\nexport interface CompleteChildSource {\n  /**\n   * @param {!string} childKey\n   * @return {?Node}\n   */\n  getCompleteChild(childKey: string): Node | null;\n\n  /**\n   * @param {!Index} index\n   * @param {!NamedNode} child\n   * @param {boolean} reverse\n   * @return {?NamedNode}\n   */\n  getChildAfterChild(\n    index: Index,\n    child: NamedNode,\n    reverse: boolean\n  ): NamedNode | null;\n}\n\n/**\n * An implementation of CompleteChildSource that never returns any additional children\n *\n * @private\n * @constructor\n * @implements CompleteChildSource\n */\nexport class NoCompleteChildSource_ implements CompleteChildSource {\n  /**\n   * @inheritDoc\n   */\n  getCompleteChild(childKey?: string): Node | null {\n    return null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getChildAfterChild(\n    index?: Index,\n    child?: NamedNode,\n    reverse?: boolean\n  ): NamedNode | null {\n    return null;\n  }\n}\n\n/**\n * Singleton instance.\n * @const\n * @type {!CompleteChildSource}\n */\nexport const NO_COMPLETE_CHILD_SOURCE = new NoCompleteChildSource_();\n\n/**\n * An implementation of CompleteChildSource that uses a WriteTree in addition to any other server data or\n * old event caches available to calculate complete children.\n *\n *\n * @implements CompleteChildSource\n */\nexport class WriteTreeCompleteChildSource implements CompleteChildSource {\n  /**\n   * @param {!WriteTreeRef} writes_\n   * @param {!ViewCache} viewCache_\n   * @param {?Node} optCompleteServerCache_\n   */\n  constructor(\n    private writes_: WriteTreeRef,\n    private viewCache_: ViewCache,\n    private optCompleteServerCache_: Node | null = null\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  getCompleteChild(childKey: string): Node | null {\n    const node = this.viewCache_.getEventCache();\n    if (node.isCompleteForChild(childKey)) {\n      return node.getNode().getImmediateChild(childKey);\n    } else {\n      const serverNode =\n        this.optCompleteServerCache_ != null\n          ? new CacheNode(this.optCompleteServerCache_, true, false)\n          : this.viewCache_.getServerCache();\n      return this.writes_.calcCompleteChild(childKey, serverNode);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getChildAfterChild(\n    index: Index,\n    child: NamedNode,\n    reverse: boolean\n  ): NamedNode | null {\n    const completeServerData =\n      this.optCompleteServerCache_ != null\n        ? this.optCompleteServerCache_\n        : this.viewCache_.getCompleteServerSnap();\n    const nodes = this.writes_.calcIndexedSlice(\n      completeServerData,\n      child,\n      1,\n      reverse,\n      index\n    );\n    if (nodes.length === 0) {\n      return null;\n    } else {\n      return nodes[0];\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Operation, OperationType } from '../operation/Operation';\nimport { assert, assertionError } from '@firebase/util';\nimport { ChildChangeAccumulator } from './ChildChangeAccumulator';\nimport { Change } from './Change';\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { KEY_INDEX } from '../snap/indexes/KeyIndex';\nimport { ImmutableTree } from '../util/ImmutableTree';\nimport { Path } from '../util/Path';\nimport {\n  WriteTreeCompleteChildSource,\n  NO_COMPLETE_CHILD_SOURCE,\n  CompleteChildSource\n} from './CompleteChildSource';\nimport { ViewCache } from './ViewCache';\nimport { NodeFilter } from './filter/NodeFilter';\nimport { WriteTreeRef } from '../WriteTree';\nimport { Overwrite } from '../operation/Overwrite';\nimport { Merge } from '../operation/Merge';\nimport { AckUserWrite } from '../operation/AckUserWrite';\nimport { Node } from '../snap/Node';\n\n/**\n * @constructor\n * @struct\n */\nexport class ProcessorResult {\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Array.<!Change>} changes\n   */\n  constructor(\n    public readonly viewCache: ViewCache,\n    public readonly changes: Change[]\n  ) {}\n}\n\n/**\n * @constructor\n */\nexport class ViewProcessor {\n  /**\n   * @param {!NodeFilter} filter_\n   */\n  constructor(private readonly filter_: NodeFilter) {}\n\n  /**\n   * @param {!ViewCache} viewCache\n   */\n  assertIndexed(viewCache: ViewCache) {\n    assert(\n      viewCache\n        .getEventCache()\n        .getNode()\n        .isIndexed(this.filter_.getIndex()),\n      'Event snap not indexed'\n    );\n    assert(\n      viewCache\n        .getServerCache()\n        .getNode()\n        .isIndexed(this.filter_.getIndex()),\n      'Server snap not indexed'\n    );\n  }\n\n  /**\n   * @param {!ViewCache} oldViewCache\n   * @param {!Operation} operation\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeCache\n   * @return {!ProcessorResult}\n   */\n  applyOperation(\n    oldViewCache: ViewCache,\n    operation: Operation,\n    writesCache: WriteTreeRef,\n    completeCache: Node | null\n  ): ProcessorResult {\n    const accumulator = new ChildChangeAccumulator();\n    let newViewCache, filterServerNode;\n    if (operation.type === OperationType.OVERWRITE) {\n      const overwrite = operation as Overwrite;\n      if (overwrite.source.fromUser) {\n        newViewCache = this.applyUserOverwrite_(\n          oldViewCache,\n          overwrite.path,\n          overwrite.snap,\n          writesCache,\n          completeCache,\n          accumulator\n        );\n      } else {\n        assert(overwrite.source.fromServer, 'Unknown source.');\n        // We filter the node if it's a tagged update or the node has been previously filtered  and the\n        // update is not at the root in which case it is ok (and necessary) to mark the node unfiltered\n        // again\n        filterServerNode =\n          overwrite.source.tagged ||\n          (oldViewCache.getServerCache().isFiltered() &&\n            !overwrite.path.isEmpty());\n        newViewCache = this.applyServerOverwrite_(\n          oldViewCache,\n          overwrite.path,\n          overwrite.snap,\n          writesCache,\n          completeCache,\n          filterServerNode,\n          accumulator\n        );\n      }\n    } else if (operation.type === OperationType.MERGE) {\n      const merge = operation as Merge;\n      if (merge.source.fromUser) {\n        newViewCache = this.applyUserMerge_(\n          oldViewCache,\n          merge.path,\n          merge.children,\n          writesCache,\n          completeCache,\n          accumulator\n        );\n      } else {\n        assert(merge.source.fromServer, 'Unknown source.');\n        // We filter the node if it's a tagged update or the node has been previously filtered\n        filterServerNode =\n          merge.source.tagged || oldViewCache.getServerCache().isFiltered();\n        newViewCache = this.applyServerMerge_(\n          oldViewCache,\n          merge.path,\n          merge.children,\n          writesCache,\n          completeCache,\n          filterServerNode,\n          accumulator\n        );\n      }\n    } else if (operation.type === OperationType.ACK_USER_WRITE) {\n      const ackUserWrite = operation as AckUserWrite;\n      if (!ackUserWrite.revert) {\n        newViewCache = this.ackUserWrite_(\n          oldViewCache,\n          ackUserWrite.path,\n          ackUserWrite.affectedTree,\n          writesCache,\n          completeCache,\n          accumulator\n        );\n      } else {\n        newViewCache = this.revertUserWrite_(\n          oldViewCache,\n          ackUserWrite.path,\n          writesCache,\n          completeCache,\n          accumulator\n        );\n      }\n    } else if (operation.type === OperationType.LISTEN_COMPLETE) {\n      newViewCache = this.listenComplete_(\n        oldViewCache,\n        operation.path,\n        writesCache,\n        accumulator\n      );\n    } else {\n      throw assertionError('Unknown operation type: ' + operation.type);\n    }\n    const changes = accumulator.getChanges();\n    ViewProcessor.maybeAddValueEvent_(oldViewCache, newViewCache, changes);\n    return new ProcessorResult(newViewCache, changes);\n  }\n\n  /**\n   * @param {!ViewCache} oldViewCache\n   * @param {!ViewCache} newViewCache\n   * @param {!Array.<!Change>} accumulator\n   * @private\n   */\n  private static maybeAddValueEvent_(\n    oldViewCache: ViewCache,\n    newViewCache: ViewCache,\n    accumulator: Change[]\n  ) {\n    const eventSnap = newViewCache.getEventCache();\n    if (eventSnap.isFullyInitialized()) {\n      const isLeafOrEmpty =\n        eventSnap.getNode().isLeafNode() || eventSnap.getNode().isEmpty();\n      const oldCompleteSnap = oldViewCache.getCompleteEventSnap();\n      if (\n        accumulator.length > 0 ||\n        !oldViewCache.getEventCache().isFullyInitialized() ||\n        (isLeafOrEmpty &&\n          !eventSnap.getNode().equals(/** @type {!Node} */ oldCompleteSnap)) ||\n        !eventSnap\n          .getNode()\n          .getPriority()\n          .equals(oldCompleteSnap.getPriority())\n      ) {\n        accumulator.push(\n          Change.valueChange(\n            /** @type {!Node} */ newViewCache.getCompleteEventSnap()\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} changePath\n   * @param {!WriteTreeRef} writesCache\n   * @param {!CompleteChildSource} source\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private generateEventCacheAfterServerEvent_(\n    viewCache: ViewCache,\n    changePath: Path,\n    writesCache: WriteTreeRef,\n    source: CompleteChildSource,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    const oldEventSnap = viewCache.getEventCache();\n    if (writesCache.shadowingWrite(changePath) != null) {\n      // we have a shadowing write, ignore changes\n      return viewCache;\n    } else {\n      let newEventCache, serverNode;\n      if (changePath.isEmpty()) {\n        // TODO: figure out how this plays with \"sliding ack windows\"\n        assert(\n          viewCache.getServerCache().isFullyInitialized(),\n          'If change path is empty, we must have complete server data'\n        );\n        if (viewCache.getServerCache().isFiltered()) {\n          // We need to special case this, because we need to only apply writes to complete children, or\n          // we might end up raising events for incomplete children. If the server data is filtered deep\n          // writes cannot be guaranteed to be complete\n          const serverCache = viewCache.getCompleteServerSnap();\n          const completeChildren =\n            serverCache instanceof ChildrenNode\n              ? serverCache\n              : ChildrenNode.EMPTY_NODE;\n          const completeEventChildren = writesCache.calcCompleteEventChildren(\n            completeChildren\n          );\n          newEventCache = this.filter_.updateFullNode(\n            viewCache.getEventCache().getNode(),\n            completeEventChildren,\n            accumulator\n          );\n        } else {\n          const completeNode = writesCache.calcCompleteEventCache(\n            viewCache.getCompleteServerSnap()\n          );\n          newEventCache = this.filter_.updateFullNode(\n            viewCache.getEventCache().getNode(),\n            completeNode,\n            accumulator\n          );\n        }\n      } else {\n        const childKey = changePath.getFront();\n        if (childKey == '.priority') {\n          assert(\n            changePath.getLength() == 1,\n            \"Can't have a priority with additional path components\"\n          );\n          const oldEventNode = oldEventSnap.getNode();\n          serverNode = viewCache.getServerCache().getNode();\n          // we might have overwrites for this priority\n          const updatedPriority = writesCache.calcEventCacheAfterServerOverwrite(\n            changePath,\n            oldEventNode,\n            serverNode\n          );\n          if (updatedPriority != null) {\n            newEventCache = this.filter_.updatePriority(\n              oldEventNode,\n              updatedPriority\n            );\n          } else {\n            // priority didn't change, keep old node\n            newEventCache = oldEventSnap.getNode();\n          }\n        } else {\n          const childChangePath = changePath.popFront();\n          // update child\n          let newEventChild;\n          if (oldEventSnap.isCompleteForChild(childKey)) {\n            serverNode = viewCache.getServerCache().getNode();\n            const eventChildUpdate = writesCache.calcEventCacheAfterServerOverwrite(\n              changePath,\n              oldEventSnap.getNode(),\n              serverNode\n            );\n            if (eventChildUpdate != null) {\n              newEventChild = oldEventSnap\n                .getNode()\n                .getImmediateChild(childKey)\n                .updateChild(childChangePath, eventChildUpdate);\n            } else {\n              // Nothing changed, just keep the old child\n              newEventChild = oldEventSnap\n                .getNode()\n                .getImmediateChild(childKey);\n            }\n          } else {\n            newEventChild = writesCache.calcCompleteChild(\n              childKey,\n              viewCache.getServerCache()\n            );\n          }\n          if (newEventChild != null) {\n            newEventCache = this.filter_.updateChild(\n              oldEventSnap.getNode(),\n              childKey,\n              newEventChild,\n              childChangePath,\n              source,\n              accumulator\n            );\n          } else {\n            // no complete child available or no change\n            newEventCache = oldEventSnap.getNode();\n          }\n        }\n      }\n      return viewCache.updateEventSnap(\n        newEventCache,\n        oldEventSnap.isFullyInitialized() || changePath.isEmpty(),\n        this.filter_.filtersNodes()\n      );\n    }\n  }\n\n  /**\n   * @param {!ViewCache} oldViewCache\n   * @param {!Path} changePath\n   * @param {!Node} changedSnap\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeCache\n   * @param {boolean} filterServerNode\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  applyServerOverwrite_(\n    oldViewCache: ViewCache,\n    changePath: Path,\n    changedSnap: Node,\n    writesCache: WriteTreeRef,\n    completeCache: Node | null,\n    filterServerNode: boolean,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    const oldServerSnap = oldViewCache.getServerCache();\n    let newServerCache;\n    const serverFilter = filterServerNode\n      ? this.filter_\n      : this.filter_.getIndexedFilter();\n    if (changePath.isEmpty()) {\n      newServerCache = serverFilter.updateFullNode(\n        oldServerSnap.getNode(),\n        changedSnap,\n        null\n      );\n    } else if (serverFilter.filtersNodes() && !oldServerSnap.isFiltered()) {\n      // we want to filter the server node, but we didn't filter the server node yet, so simulate a full update\n      const newServerNode = oldServerSnap\n        .getNode()\n        .updateChild(changePath, changedSnap);\n      newServerCache = serverFilter.updateFullNode(\n        oldServerSnap.getNode(),\n        newServerNode,\n        null\n      );\n    } else {\n      const childKey = changePath.getFront();\n      if (\n        !oldServerSnap.isCompleteForPath(changePath) &&\n        changePath.getLength() > 1\n      ) {\n        // We don't update incomplete nodes with updates intended for other listeners\n        return oldViewCache;\n      }\n      const childChangePath = changePath.popFront();\n      const childNode = oldServerSnap.getNode().getImmediateChild(childKey);\n      const newChildNode = childNode.updateChild(childChangePath, changedSnap);\n      if (childKey == '.priority') {\n        newServerCache = serverFilter.updatePriority(\n          oldServerSnap.getNode(),\n          newChildNode\n        );\n      } else {\n        newServerCache = serverFilter.updateChild(\n          oldServerSnap.getNode(),\n          childKey,\n          newChildNode,\n          childChangePath,\n          NO_COMPLETE_CHILD_SOURCE,\n          null\n        );\n      }\n    }\n    const newViewCache = oldViewCache.updateServerSnap(\n      newServerCache,\n      oldServerSnap.isFullyInitialized() || changePath.isEmpty(),\n      serverFilter.filtersNodes()\n    );\n    const source = new WriteTreeCompleteChildSource(\n      writesCache,\n      newViewCache,\n      completeCache\n    );\n    return this.generateEventCacheAfterServerEvent_(\n      newViewCache,\n      changePath,\n      writesCache,\n      source,\n      accumulator\n    );\n  }\n\n  /**\n   * @param {!ViewCache} oldViewCache\n   * @param {!Path} changePath\n   * @param {!Node} changedSnap\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  applyUserOverwrite_(\n    oldViewCache: ViewCache,\n    changePath: Path,\n    changedSnap: Node,\n    writesCache: WriteTreeRef,\n    completeCache: Node | null,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    const oldEventSnap = oldViewCache.getEventCache();\n    let newViewCache, newEventCache;\n    const source = new WriteTreeCompleteChildSource(\n      writesCache,\n      oldViewCache,\n      completeCache\n    );\n    if (changePath.isEmpty()) {\n      newEventCache = this.filter_.updateFullNode(\n        oldViewCache.getEventCache().getNode(),\n        changedSnap,\n        accumulator\n      );\n      newViewCache = oldViewCache.updateEventSnap(\n        newEventCache,\n        true,\n        this.filter_.filtersNodes()\n      );\n    } else {\n      const childKey = changePath.getFront();\n      if (childKey === '.priority') {\n        newEventCache = this.filter_.updatePriority(\n          oldViewCache.getEventCache().getNode(),\n          changedSnap\n        );\n        newViewCache = oldViewCache.updateEventSnap(\n          newEventCache,\n          oldEventSnap.isFullyInitialized(),\n          oldEventSnap.isFiltered()\n        );\n      } else {\n        const childChangePath = changePath.popFront();\n        const oldChild = oldEventSnap.getNode().getImmediateChild(childKey);\n        let newChild;\n        if (childChangePath.isEmpty()) {\n          // Child overwrite, we can replace the child\n          newChild = changedSnap;\n        } else {\n          const childNode = source.getCompleteChild(childKey);\n          if (childNode != null) {\n            if (\n              childChangePath.getBack() === '.priority' &&\n              childNode.getChild(childChangePath.parent()).isEmpty()\n            ) {\n              // This is a priority update on an empty node. If this node exists on the server, the\n              // server will send down the priority in the update, so ignore for now\n              newChild = childNode;\n            } else {\n              newChild = childNode.updateChild(childChangePath, changedSnap);\n            }\n          } else {\n            // There is no complete child node available\n            newChild = ChildrenNode.EMPTY_NODE;\n          }\n        }\n        if (!oldChild.equals(newChild)) {\n          const newEventSnap = this.filter_.updateChild(\n            oldEventSnap.getNode(),\n            childKey,\n            newChild,\n            childChangePath,\n            source,\n            accumulator\n          );\n          newViewCache = oldViewCache.updateEventSnap(\n            newEventSnap,\n            oldEventSnap.isFullyInitialized(),\n            this.filter_.filtersNodes()\n          );\n        } else {\n          newViewCache = oldViewCache;\n        }\n      }\n    }\n    return newViewCache;\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {string} childKey\n   * @return {boolean}\n   * @private\n   */\n  private static cacheHasChild_(\n    viewCache: ViewCache,\n    childKey: string\n  ): boolean {\n    return viewCache.getEventCache().isCompleteForChild(childKey);\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} path\n   * @param {ImmutableTree.<!Node>} changedChildren\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} serverCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private applyUserMerge_(\n    viewCache: ViewCache,\n    path: Path,\n    changedChildren: ImmutableTree<Node>,\n    writesCache: WriteTreeRef,\n    serverCache: Node | null,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    // HACK: In the case of a limit query, there may be some changes that bump things out of the\n    // window leaving room for new items.  It's important we process these changes first, so we\n    // iterate the changes twice, first processing any that affect items currently in view.\n    // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\n    // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\n    // not the other.\n    let curViewCache = viewCache;\n    changedChildren.foreach((relativePath, childNode) => {\n      const writePath = path.child(relativePath);\n      if (ViewProcessor.cacheHasChild_(viewCache, writePath.getFront())) {\n        curViewCache = this.applyUserOverwrite_(\n          curViewCache,\n          writePath,\n          childNode,\n          writesCache,\n          serverCache,\n          accumulator\n        );\n      }\n    });\n\n    changedChildren.foreach((relativePath, childNode) => {\n      const writePath = path.child(relativePath);\n      if (!ViewProcessor.cacheHasChild_(viewCache, writePath.getFront())) {\n        curViewCache = this.applyUserOverwrite_(\n          curViewCache,\n          writePath,\n          childNode,\n          writesCache,\n          serverCache,\n          accumulator\n        );\n      }\n    });\n\n    return curViewCache;\n  }\n\n  /**\n   * @param {!Node} node\n   * @param {ImmutableTree.<!Node>} merge\n   * @return {!Node}\n   * @private\n   */\n  private applyMerge_(node: Node, merge: ImmutableTree<Node>): Node {\n    merge.foreach(function(relativePath, childNode) {\n      node = node.updateChild(relativePath, childNode);\n    });\n    return node;\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} path\n   * @param {!ImmutableTree.<!Node>} changedChildren\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} serverCache\n   * @param {boolean} filterServerNode\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private applyServerMerge_(\n    viewCache: ViewCache,\n    path: Path,\n    changedChildren: ImmutableTree<Node>,\n    writesCache: WriteTreeRef,\n    serverCache: Node | null,\n    filterServerNode: boolean,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    // If we don't have a cache yet, this merge was intended for a previously listen in the same location. Ignore it and\n    // wait for the complete data update coming soon.\n    if (\n      viewCache\n        .getServerCache()\n        .getNode()\n        .isEmpty() &&\n      !viewCache.getServerCache().isFullyInitialized()\n    ) {\n      return viewCache;\n    }\n\n    // HACK: In the case of a limit query, there may be some changes that bump things out of the\n    // window leaving room for new items.  It's important we process these changes first, so we\n    // iterate the changes twice, first processing any that affect items currently in view.\n    // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\n    // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\n    // not the other.\n    let curViewCache = viewCache;\n    let viewMergeTree;\n    if (path.isEmpty()) {\n      viewMergeTree = changedChildren;\n    } else {\n      viewMergeTree = ImmutableTree.Empty.setTree(path, changedChildren);\n    }\n    const serverNode = viewCache.getServerCache().getNode();\n    viewMergeTree.children.inorderTraversal((childKey, childTree) => {\n      if (serverNode.hasChild(childKey)) {\n        const serverChild = viewCache\n          .getServerCache()\n          .getNode()\n          .getImmediateChild(childKey);\n        const newChild = this.applyMerge_(serverChild, childTree);\n        curViewCache = this.applyServerOverwrite_(\n          curViewCache,\n          new Path(childKey),\n          newChild,\n          writesCache,\n          serverCache,\n          filterServerNode,\n          accumulator\n        );\n      }\n    });\n    viewMergeTree.children.inorderTraversal((childKey, childMergeTree) => {\n      const isUnknownDeepMerge =\n        !viewCache.getServerCache().isCompleteForChild(childKey) &&\n        childMergeTree.value == null;\n      if (!serverNode.hasChild(childKey) && !isUnknownDeepMerge) {\n        const serverChild = viewCache\n          .getServerCache()\n          .getNode()\n          .getImmediateChild(childKey);\n        const newChild = this.applyMerge_(serverChild, childMergeTree);\n        curViewCache = this.applyServerOverwrite_(\n          curViewCache,\n          new Path(childKey),\n          newChild,\n          writesCache,\n          serverCache,\n          filterServerNode,\n          accumulator\n        );\n      }\n    });\n\n    return curViewCache;\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} ackPath\n   * @param {!ImmutableTree<!boolean>} affectedTree\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private ackUserWrite_(\n    viewCache: ViewCache,\n    ackPath: Path,\n    affectedTree: ImmutableTree<boolean>,\n    writesCache: WriteTreeRef,\n    completeCache: Node | null,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    if (writesCache.shadowingWrite(ackPath) != null) {\n      return viewCache;\n    }\n\n    // Only filter server node if it is currently filtered\n    const filterServerNode = viewCache.getServerCache().isFiltered();\n\n    // Essentially we'll just get our existing server cache for the affected paths and re-apply it as a server update\n    // now that it won't be shadowed.\n    const serverCache = viewCache.getServerCache();\n    if (affectedTree.value != null) {\n      // This is an overwrite.\n      if (\n        (ackPath.isEmpty() && serverCache.isFullyInitialized()) ||\n        serverCache.isCompleteForPath(ackPath)\n      ) {\n        return this.applyServerOverwrite_(\n          viewCache,\n          ackPath,\n          serverCache.getNode().getChild(ackPath),\n          writesCache,\n          completeCache,\n          filterServerNode,\n          accumulator\n        );\n      } else if (ackPath.isEmpty()) {\n        // This is a goofy edge case where we are acking data at this location but don't have full data.  We\n        // should just re-apply whatever we have in our cache as a merge.\n        let changedChildren = ImmutableTree.Empty;\n        serverCache.getNode().forEachChild(KEY_INDEX, function(name, node) {\n          changedChildren = changedChildren.set(new Path(name), node);\n        });\n        return this.applyServerMerge_(\n          viewCache,\n          ackPath,\n          changedChildren,\n          writesCache,\n          completeCache,\n          filterServerNode,\n          accumulator\n        );\n      } else {\n        return viewCache;\n      }\n    } else {\n      // This is a merge.\n      let changedChildren = ImmutableTree.Empty;\n      affectedTree.foreach(function(mergePath, value) {\n        const serverCachePath = ackPath.child(mergePath);\n        if (serverCache.isCompleteForPath(serverCachePath)) {\n          changedChildren = changedChildren.set(\n            mergePath,\n            serverCache.getNode().getChild(serverCachePath)\n          );\n        }\n      });\n      return this.applyServerMerge_(\n        viewCache,\n        ackPath,\n        changedChildren,\n        writesCache,\n        completeCache,\n        filterServerNode,\n        accumulator\n      );\n    }\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} path\n   * @param {!WriteTreeRef} writesCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private listenComplete_(\n    viewCache: ViewCache,\n    path: Path,\n    writesCache: WriteTreeRef,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    const oldServerNode = viewCache.getServerCache();\n    const newViewCache = viewCache.updateServerSnap(\n      oldServerNode.getNode(),\n      oldServerNode.isFullyInitialized() || path.isEmpty(),\n      oldServerNode.isFiltered()\n    );\n    return this.generateEventCacheAfterServerEvent_(\n      newViewCache,\n      path,\n      writesCache,\n      NO_COMPLETE_CHILD_SOURCE,\n      accumulator\n    );\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} path\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeServerCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private revertUserWrite_(\n    viewCache: ViewCache,\n    path: Path,\n    writesCache: WriteTreeRef,\n    completeServerCache: Node | null,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    let complete;\n    if (writesCache.shadowingWrite(path) != null) {\n      return viewCache;\n    } else {\n      const source = new WriteTreeCompleteChildSource(\n        writesCache,\n        viewCache,\n        completeServerCache\n      );\n      const oldEventCache = viewCache.getEventCache().getNode();\n      let newEventCache;\n      if (path.isEmpty() || path.getFront() === '.priority') {\n        let newNode;\n        if (viewCache.getServerCache().isFullyInitialized()) {\n          newNode = writesCache.calcCompleteEventCache(\n            viewCache.getCompleteServerSnap()\n          );\n        } else {\n          const serverChildren = viewCache.getServerCache().getNode();\n          assert(\n            serverChildren instanceof ChildrenNode,\n            'serverChildren would be complete if leaf node'\n          );\n          newNode = writesCache.calcCompleteEventChildren(\n            serverChildren as ChildrenNode\n          );\n        }\n        newNode = newNode as Node;\n        newEventCache = this.filter_.updateFullNode(\n          oldEventCache,\n          newNode,\n          accumulator\n        );\n      } else {\n        const childKey = path.getFront();\n        let newChild = writesCache.calcCompleteChild(\n          childKey,\n          viewCache.getServerCache()\n        );\n        if (\n          newChild == null &&\n          viewCache.getServerCache().isCompleteForChild(childKey)\n        ) {\n          newChild = oldEventCache.getImmediateChild(childKey);\n        }\n        if (newChild != null) {\n          newEventCache = this.filter_.updateChild(\n            oldEventCache,\n            childKey,\n            newChild,\n            path.popFront(),\n            source,\n            accumulator\n          );\n        } else if (\n          viewCache\n            .getEventCache()\n            .getNode()\n            .hasChild(childKey)\n        ) {\n          // No complete child available, delete the existing one, if any\n          newEventCache = this.filter_.updateChild(\n            oldEventCache,\n            childKey,\n            ChildrenNode.EMPTY_NODE,\n            path.popFront(),\n            source,\n            accumulator\n          );\n        } else {\n          newEventCache = oldEventCache;\n        }\n        if (\n          newEventCache.isEmpty() &&\n          viewCache.getServerCache().isFullyInitialized()\n        ) {\n          // We might have reverted all child writes. Maybe the old event was a leaf node\n          complete = writesCache.calcCompleteEventCache(\n            viewCache.getCompleteServerSnap()\n          );\n          if (complete.isLeafNode()) {\n            newEventCache = this.filter_.updateFullNode(\n              newEventCache,\n              complete,\n              accumulator\n            );\n          }\n        }\n      }\n      complete =\n        viewCache.getServerCache().isFullyInitialized() ||\n        writesCache.shadowingWrite(Path.Empty) != null;\n      return viewCache.updateEventSnap(\n        newEventCache,\n        complete,\n        this.filter_.filtersNodes()\n      );\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { NamedNode, Node } from '../snap/Node';\nimport { Change } from './Change';\nimport { assertionError } from '@firebase/util';\nimport { Query } from '../../api/Query';\nimport { Index } from '../snap/indexes/Index';\nimport { EventRegistration } from './EventRegistration';\nimport { Event } from './Event';\n\n/**\n * An EventGenerator is used to convert \"raw\" changes (Change) as computed by the\n * CacheDiffer into actual events (Event) that can be raised.  See generateEventsForChanges()\n * for details.\n *\n * @constructor\n */\nexport class EventGenerator {\n  private index_: Index;\n\n  /**\n   *\n   * @param {!Query} query_\n   */\n  constructor(private query_: Query) {\n    /**\n     * @private\n     * @type {!Index}\n     */\n    this.index_ = this.query_.getQueryParams().getIndex();\n  }\n\n  /**\n   * Given a set of raw changes (no moved events and prevName not specified yet), and a set of\n   * EventRegistrations that should be notified of these changes, generate the actual events to be raised.\n   *\n   * Notes:\n   *  - child_moved events will be synthesized at this time for any child_changed events that affect\n   *    our index.\n   *  - prevName will be calculated based on the index ordering.\n   *\n   * @param {!Array.<!Change>} changes\n   * @param {!Node} eventCache\n   * @param {!Array.<!EventRegistration>} eventRegistrations\n   * @return {!Array.<!Event>}\n   */\n  generateEventsForChanges(\n    changes: Change[],\n    eventCache: Node,\n    eventRegistrations: EventRegistration[]\n  ): Event[] {\n    const events: Event[] = [];\n    const moves: Change[] = [];\n\n    changes.forEach(change => {\n      if (\n        change.type === Change.CHILD_CHANGED &&\n        this.index_.indexedValueChanged(\n          change.oldSnap as Node,\n          change.snapshotNode\n        )\n      ) {\n        moves.push(\n          Change.childMovedChange(\n            change.childName as string,\n            change.snapshotNode\n          )\n        );\n      }\n    });\n\n    this.generateEventsForType_(\n      events,\n      Change.CHILD_REMOVED,\n      changes,\n      eventRegistrations,\n      eventCache\n    );\n    this.generateEventsForType_(\n      events,\n      Change.CHILD_ADDED,\n      changes,\n      eventRegistrations,\n      eventCache\n    );\n    this.generateEventsForType_(\n      events,\n      Change.CHILD_MOVED,\n      moves,\n      eventRegistrations,\n      eventCache\n    );\n    this.generateEventsForType_(\n      events,\n      Change.CHILD_CHANGED,\n      changes,\n      eventRegistrations,\n      eventCache\n    );\n    this.generateEventsForType_(\n      events,\n      Change.VALUE,\n      changes,\n      eventRegistrations,\n      eventCache\n    );\n\n    return events;\n  }\n\n  /**\n   * Given changes of a single change type, generate the corresponding events.\n   *\n   * @param {!Array.<!Event>} events\n   * @param {!string} eventType\n   * @param {!Array.<!Change>} changes\n   * @param {!Array.<!EventRegistration>} registrations\n   * @param {!Node} eventCache\n   * @private\n   */\n  private generateEventsForType_(\n    events: Event[],\n    eventType: string,\n    changes: Change[],\n    registrations: EventRegistration[],\n    eventCache: Node\n  ) {\n    const filteredChanges = changes.filter(change => change.type === eventType);\n\n    filteredChanges.sort(this.compareChanges_.bind(this));\n    filteredChanges.forEach(change => {\n      const materializedChange = this.materializeSingleChange_(\n        change,\n        eventCache\n      );\n      registrations.forEach(registration => {\n        if (registration.respondsTo(change.type)) {\n          events.push(\n            registration.createEvent(materializedChange, this.query_)\n          );\n        }\n      });\n    });\n  }\n\n  /**\n   * @param {!Change} change\n   * @param {!Node} eventCache\n   * @return {!Change}\n   * @private\n   */\n  private materializeSingleChange_(change: Change, eventCache: Node): Change {\n    if (change.type === 'value' || change.type === 'child_removed') {\n      return change;\n    } else {\n      change.prevName = eventCache.getPredecessorChildName(\n        /** @type {!string} */\n        change.childName,\n        change.snapshotNode,\n        this.index_\n      );\n      return change;\n    }\n  }\n\n  /**\n   * @param {!Change} a\n   * @param {!Change} b\n   * @return {number}\n   * @private\n   */\n  private compareChanges_(a: Change, b: Change) {\n    if (a.childName == null || b.childName == null) {\n      throw assertionError('Should only compare child_ events.');\n    }\n    const aWrapped = new NamedNode(a.childName, a.snapshotNode);\n    const bWrapped = new NamedNode(b.childName, b.snapshotNode);\n    return this.index_.compare(aWrapped, bWrapped);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IndexedFilter } from './filter/IndexedFilter';\nimport { ViewProcessor } from './ViewProcessor';\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { CacheNode } from './CacheNode';\nimport { ViewCache } from './ViewCache';\nimport { EventGenerator } from './EventGenerator';\nimport { assert } from '@firebase/util';\nimport { Operation, OperationType } from '../operation/Operation';\nimport { Change } from './Change';\nimport { PRIORITY_INDEX } from '../snap/indexes/PriorityIndex';\nimport { Query } from '../../api/Query';\nimport { EventRegistration } from './EventRegistration';\nimport { Node } from '../snap/Node';\nimport { Path } from '../util/Path';\nimport { WriteTreeRef } from '../WriteTree';\nimport { CancelEvent, Event } from './Event';\n\n/**\n * A view represents a specific location and query that has 1 or more event registrations.\n *\n * It does several things:\n *  - Maintains the list of event registrations for this location/query.\n *  - Maintains a cache of the data visible for this location/query.\n *  - Applies new operations (via applyOperation), updates the cache, and based on the event\n *    registrations returns the set of events to be raised.\n * @constructor\n */\nexport class View {\n  private processor_: ViewProcessor;\n  private viewCache_: ViewCache;\n  private eventRegistrations_: EventRegistration[] = [];\n  private eventGenerator_: EventGenerator;\n\n  /**\n   *\n   * @param {!Query} query_\n   * @param {!ViewCache} initialViewCache\n   */\n  constructor(private query_: Query, initialViewCache: ViewCache) {\n    const params = this.query_.getQueryParams();\n\n    const indexFilter = new IndexedFilter(params.getIndex());\n    const filter = params.getNodeFilter();\n\n    /**\n     * @type {ViewProcessor}\n     * @private\n     */\n    this.processor_ = new ViewProcessor(filter);\n\n    const initialServerCache = initialViewCache.getServerCache();\n    const initialEventCache = initialViewCache.getEventCache();\n\n    // Don't filter server node with other filter than index, wait for tagged listen\n    const serverSnap = indexFilter.updateFullNode(\n      ChildrenNode.EMPTY_NODE,\n      initialServerCache.getNode(),\n      null\n    );\n    const eventSnap = filter.updateFullNode(\n      ChildrenNode.EMPTY_NODE,\n      initialEventCache.getNode(),\n      null\n    );\n    const newServerCache = new CacheNode(\n      serverSnap,\n      initialServerCache.isFullyInitialized(),\n      indexFilter.filtersNodes()\n    );\n    const newEventCache = new CacheNode(\n      eventSnap,\n      initialEventCache.isFullyInitialized(),\n      filter.filtersNodes()\n    );\n\n    /**\n     * @type {!ViewCache}\n     * @private\n     */\n    this.viewCache_ = new ViewCache(newEventCache, newServerCache);\n\n    /**\n     * @type {!EventGenerator}\n     * @private\n     */\n    this.eventGenerator_ = new EventGenerator(this.query_);\n  }\n\n  /**\n   * @return {!Query}\n   */\n  getQuery(): Query {\n    return this.query_;\n  }\n\n  /**\n   * @return {?Node}\n   */\n  getServerCache(): Node | null {\n    return this.viewCache_.getServerCache().getNode();\n  }\n\n  /**\n   * @param {!Path} path\n   * @return {?Node}\n   */\n  getCompleteServerCache(path: Path): Node | null {\n    const cache = this.viewCache_.getCompleteServerSnap();\n    if (cache) {\n      // If this isn't a \"loadsAllData\" view, then cache isn't actually a complete cache and\n      // we need to see if it contains the child we're interested in.\n      if (\n        this.query_.getQueryParams().loadsAllData() ||\n        (!path.isEmpty() && !cache.getImmediateChild(path.getFront()).isEmpty())\n      ) {\n        return cache.getChild(path);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isEmpty(): boolean {\n    return this.eventRegistrations_.length === 0;\n  }\n\n  /**\n   * @param {!EventRegistration} eventRegistration\n   */\n  addEventRegistration(eventRegistration: EventRegistration) {\n    this.eventRegistrations_.push(eventRegistration);\n  }\n\n  /**\n   * @param {?EventRegistration} eventRegistration If null, remove all callbacks.\n   * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\n   * @return {!Array.<!Event>} Cancel events, if cancelError was provided.\n   */\n  removeEventRegistration(\n    eventRegistration: EventRegistration | null,\n    cancelError?: Error\n  ): Event[] {\n    const cancelEvents: CancelEvent[] = [];\n    if (cancelError) {\n      assert(\n        eventRegistration == null,\n        'A cancel should cancel all event registrations.'\n      );\n      const path = this.query_.path;\n      this.eventRegistrations_.forEach(function(registration) {\n        cancelError /** @type {!Error} */ = cancelError;\n        const maybeEvent = registration.createCancelEvent(cancelError, path);\n        if (maybeEvent) {\n          cancelEvents.push(maybeEvent);\n        }\n      });\n    }\n\n    if (eventRegistration) {\n      let remaining = [];\n      for (let i = 0; i < this.eventRegistrations_.length; ++i) {\n        const existing = this.eventRegistrations_[i];\n        if (!existing.matches(eventRegistration)) {\n          remaining.push(existing);\n        } else if (eventRegistration.hasAnyCallback()) {\n          // We're removing just this one\n          remaining = remaining.concat(this.eventRegistrations_.slice(i + 1));\n          break;\n        }\n      }\n      this.eventRegistrations_ = remaining;\n    } else {\n      this.eventRegistrations_ = [];\n    }\n    return cancelEvents;\n  }\n\n  /**\n   * Applies the given Operation, updates our cache, and returns the appropriate events.\n   *\n   * @param {!Operation} operation\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeServerCache\n   * @return {!Array.<!Event>}\n   */\n  applyOperation(\n    operation: Operation,\n    writesCache: WriteTreeRef,\n    completeServerCache: Node | null\n  ): Event[] {\n    if (\n      operation.type === OperationType.MERGE &&\n      operation.source.queryId !== null\n    ) {\n      assert(\n        this.viewCache_.getCompleteServerSnap(),\n        'We should always have a full cache before handling merges'\n      );\n      assert(\n        this.viewCache_.getCompleteEventSnap(),\n        'Missing event cache, even though we have a server cache'\n      );\n    }\n\n    const oldViewCache = this.viewCache_;\n    const result = this.processor_.applyOperation(\n      oldViewCache,\n      operation,\n      writesCache,\n      completeServerCache\n    );\n    this.processor_.assertIndexed(result.viewCache);\n\n    assert(\n      result.viewCache.getServerCache().isFullyInitialized() ||\n        !oldViewCache.getServerCache().isFullyInitialized(),\n      'Once a server snap is complete, it should never go back'\n    );\n\n    this.viewCache_ = result.viewCache;\n\n    return this.generateEventsForChanges_(\n      result.changes,\n      result.viewCache.getEventCache().getNode(),\n      null\n    );\n  }\n\n  /**\n   * @param {!EventRegistration} registration\n   * @return {!Array.<!Event>}\n   */\n  getInitialEvents(registration: EventRegistration): Event[] {\n    const eventSnap = this.viewCache_.getEventCache();\n    const initialChanges: Change[] = [];\n    if (!eventSnap.getNode().isLeafNode()) {\n      const eventNode = eventSnap.getNode() as ChildrenNode;\n      eventNode.forEachChild(PRIORITY_INDEX, function(key, childNode) {\n        initialChanges.push(Change.childAddedChange(key, childNode));\n      });\n    }\n    if (eventSnap.isFullyInitialized()) {\n      initialChanges.push(Change.valueChange(eventSnap.getNode()));\n    }\n    return this.generateEventsForChanges_(\n      initialChanges,\n      eventSnap.getNode(),\n      registration\n    );\n  }\n\n  /**\n   * @private\n   * @param {!Array.<!Change>} changes\n   * @param {!Node} eventCache\n   * @param {EventRegistration=} eventRegistration\n   * @return {!Array.<!Event>}\n   */\n  generateEventsForChanges_(\n    changes: Change[],\n    eventCache: Node,\n    eventRegistration?: EventRegistration\n  ): Event[] {\n    const registrations = eventRegistration\n      ? [eventRegistration]\n      : this.eventRegistrations_;\n    return this.eventGenerator_.generateEventsForChanges(\n      changes,\n      eventCache,\n      registrations\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ImmutableTree } from './util/ImmutableTree';\nimport { Path } from './util/Path';\nimport { Node, NamedNode } from './snap/Node';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { assert } from '@firebase/util';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { each } from './util/util';\n\n/**\n * This class holds a collection of writes that can be applied to nodes in unison. It abstracts away the logic with\n * dealing with priority writes and multiple nested writes. At any given path there is only allowed to be one write\n * modifying that path. Any write to an existing path or shadowing an existing path will modify that existing write\n * to reflect the write added.\n */\nexport class CompoundWrite {\n  constructor(private writeTree_: ImmutableTree<Node>) {}\n\n  static Empty = new CompoundWrite(new ImmutableTree(null));\n\n  addWrite(path: Path, node: Node): CompoundWrite {\n    if (path.isEmpty()) {\n      return new CompoundWrite(new ImmutableTree(node));\n    } else {\n      const rootmost = this.writeTree_.findRootMostValueAndPath(path);\n      if (rootmost != null) {\n        const rootMostPath = rootmost.path;\n        let value = rootmost.value;\n        const relativePath = Path.relativePath(rootMostPath, path);\n        value = value.updateChild(relativePath, node);\n        return new CompoundWrite(this.writeTree_.set(rootMostPath, value));\n      } else {\n        const subtree = new ImmutableTree(node);\n        const newWriteTree = this.writeTree_.setTree(path, subtree);\n        return new CompoundWrite(newWriteTree);\n      }\n    }\n  }\n\n  addWrites(path: Path, updates: { [name: string]: Node }): CompoundWrite {\n    let newWrite = this as CompoundWrite;\n    each(updates, function(childKey: string, node: Node) {\n      newWrite = newWrite.addWrite(path.child(childKey), node);\n    });\n    return newWrite;\n  }\n\n  /**\n   * Will remove a write at the given path and deeper paths. This will <em>not</em> modify a write at a higher\n   * location, which must be removed by calling this method with that path.\n   *\n   * @param path The path at which a write and all deeper writes should be removed\n   * @return {!CompoundWrite} The new CompoundWrite with the removed path\n   */\n  removeWrite(path: Path): CompoundWrite {\n    if (path.isEmpty()) {\n      return CompoundWrite.Empty;\n    } else {\n      const newWriteTree = this.writeTree_.setTree(path, ImmutableTree.Empty);\n      return new CompoundWrite(newWriteTree);\n    }\n  }\n\n  /**\n   * Returns whether this CompoundWrite will fully overwrite a node at a given location and can therefore be\n   * considered \"complete\".\n   *\n   * @param path The path to check for\n   * @return Whether there is a complete write at that path\n   */\n  hasCompleteWrite(path: Path): boolean {\n    return this.getCompleteNode(path) != null;\n  }\n\n  /**\n   * Returns a node for a path if and only if the node is a \"complete\" overwrite at that path. This will not aggregate\n   * writes from deeper paths, but will return child nodes from a more shallow path.\n   *\n   * @param path The path to get a complete write\n   * @return The node if complete at that path, or null otherwise.\n   */\n  getCompleteNode(path: Path): Node | null {\n    const rootmost = this.writeTree_.findRootMostValueAndPath(path);\n    if (rootmost != null) {\n      return this.writeTree_\n        .get(rootmost.path)\n        .getChild(Path.relativePath(rootmost.path, path));\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Returns all children that are guaranteed to be a complete overwrite.\n   *\n   * @return A list of all complete children.\n   */\n  getCompleteChildren(): NamedNode[] {\n    const children: NamedNode[] = [];\n    let node = this.writeTree_.value;\n    if (node != null) {\n      // If it's a leaf node, it has no children; so nothing to do.\n      if (!node.isLeafNode()) {\n        (node as ChildrenNode).forEachChild(PRIORITY_INDEX, function(\n          childName,\n          childNode\n        ) {\n          children.push(new NamedNode(childName, childNode));\n        });\n      }\n    } else {\n      this.writeTree_.children.inorderTraversal(function(childName, childTree) {\n        if (childTree.value != null) {\n          children.push(new NamedNode(childName, childTree.value));\n        }\n      });\n    }\n    return children;\n  }\n\n  childCompoundWrite(path: Path): CompoundWrite {\n    if (path.isEmpty()) {\n      return this;\n    } else {\n      const shadowingNode = this.getCompleteNode(path);\n      if (shadowingNode != null) {\n        return new CompoundWrite(new ImmutableTree(shadowingNode));\n      } else {\n        return new CompoundWrite(this.writeTree_.subtree(path));\n      }\n    }\n  }\n\n  /**\n   * Returns true if this CompoundWrite is empty and therefore does not modify any nodes.\n   * @return Whether this CompoundWrite is empty\n   */\n  isEmpty(): boolean {\n    return this.writeTree_.isEmpty();\n  }\n\n  /**\n   * Applies this CompoundWrite to a node. The node is returned with all writes from this CompoundWrite applied to the\n   * node\n   * @param node The node to apply this CompoundWrite to\n   * @return The node with all writes applied\n   */\n  apply(node: Node): Node {\n    return applySubtreeWrite(Path.Empty, this.writeTree_, node);\n  }\n}\n\nfunction applySubtreeWrite(\n  relativePath: Path,\n  writeTree: ImmutableTree<Node>,\n  node: Node\n): Node {\n  if (writeTree.value != null) {\n    // Since there a write is always a leaf, we're done here\n    return node.updateChild(relativePath, writeTree.value);\n  } else {\n    let priorityWrite = null;\n    writeTree.children.inorderTraversal(function(childKey, childTree) {\n      if (childKey === '.priority') {\n        // Apply priorities at the end so we don't update priorities for either empty nodes or forget\n        // to apply priorities to empty nodes that are later filled\n        assert(\n          childTree.value !== null,\n          'Priority writes must always be leaf nodes'\n        );\n        priorityWrite = childTree.value;\n      } else {\n        node = applySubtreeWrite(relativePath.child(childKey), childTree, node);\n      }\n    });\n    // If there was a priority write, we only apply it if the node is not empty\n    if (!node.getChild(relativePath).isEmpty() && priorityWrite !== null) {\n      node = node.updateChild(relativePath.child('.priority'), priorityWrite);\n    }\n    return node;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { safeGet } from '@firebase/util';\nimport { assert, assertionError } from '@firebase/util';\nimport { Path } from './util/Path';\nimport { CompoundWrite } from './CompoundWrite';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { NamedNode, Node } from './snap/Node';\nimport { CacheNode } from './view/CacheNode';\nimport { Index } from './snap/indexes/Index';\nimport { each } from './util/util';\n\n/**\n * Defines a single user-initiated write operation. May be the result of a set(), transaction(), or update() call. In\n * the case of a set() or transaction, snap wil be non-null.  In the case of an update(), children will be non-null.\n */\nexport interface WriteRecord {\n  writeId: number;\n  path: Path;\n  snap?: Node | null;\n  children?: { [k: string]: Node } | null;\n  visible: boolean;\n}\n\n/**\n * WriteTree tracks all pending user-initiated writes and has methods to calculate the result of merging them\n * with underlying server data (to create \"event cache\" data).  Pending writes are added with addOverwrite()\n * and addMerge(), and removed with removeWrite().\n *\n * @constructor\n */\nexport class WriteTree {\n  /**\n   * A tree tracking the result of applying all visible writes.  This does not include transactions with\n   * applyLocally=false or writes that are completely shadowed by other writes.\n   *\n   * @type {!CompoundWrite}\n   * @private\n   */\n  private visibleWrites_: CompoundWrite = CompoundWrite.Empty;\n\n  /**\n   * A list of all pending writes, regardless of visibility and shadowed-ness.  Used to calculate arbitrary\n   * sets of the changed data, such as hidden writes (from transactions) or changes with certain writes excluded (also\n   * used by transactions).\n   *\n   * @type {!Array.<!WriteRecord>}\n   * @private\n   */\n  private allWrites_: WriteRecord[] = [];\n\n  private lastWriteId_ = -1;\n\n  /**\n   * Create a new WriteTreeRef for the given path. For use with a new sync point at the given path.\n   *\n   * @param {!Path} path\n   * @return {!WriteTreeRef}\n   */\n  childWrites(path: Path): WriteTreeRef {\n    return new WriteTreeRef(path, this);\n  }\n\n  /**\n   * Record a new overwrite from user code.\n   *\n   * @param {!Path} path\n   * @param {!Node} snap\n   * @param {!number} writeId\n   * @param {boolean=} visible This is set to false by some transactions. It should be excluded from event caches\n   */\n  addOverwrite(path: Path, snap: Node, writeId: number, visible?: boolean) {\n    assert(\n      writeId > this.lastWriteId_,\n      'Stacking an older write on top of newer ones'\n    );\n    if (visible === undefined) {\n      visible = true;\n    }\n    this.allWrites_.push({\n      path: path,\n      snap: snap,\n      writeId: writeId,\n      visible: visible\n    });\n\n    if (visible) {\n      this.visibleWrites_ = this.visibleWrites_.addWrite(path, snap);\n    }\n    this.lastWriteId_ = writeId;\n  }\n\n  /**\n   * Record a new merge from user code.\n   *\n   * @param {!Path} path\n   * @param {!Object.<string, !Node>} changedChildren\n   * @param {!number} writeId\n   */\n  addMerge(\n    path: Path,\n    changedChildren: { [k: string]: Node },\n    writeId: number\n  ) {\n    assert(\n      writeId > this.lastWriteId_,\n      'Stacking an older merge on top of newer ones'\n    );\n    this.allWrites_.push({\n      path: path,\n      children: changedChildren,\n      writeId: writeId,\n      visible: true\n    });\n\n    this.visibleWrites_ = this.visibleWrites_.addWrites(path, changedChildren);\n    this.lastWriteId_ = writeId;\n  }\n\n  /**\n   * @param {!number} writeId\n   * @return {?WriteRecord}\n   */\n  getWrite(writeId: number): WriteRecord | null {\n    for (let i = 0; i < this.allWrites_.length; i++) {\n      const record = this.allWrites_[i];\n      if (record.writeId === writeId) {\n        return record;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Remove a write (either an overwrite or merge) that has been successfully acknowledge by the server. Recalculates\n   * the tree if necessary.  We return true if it may have been visible, meaning views need to reevaluate.\n   *\n   * @param {!number} writeId\n   * @return {boolean} true if the write may have been visible (meaning we'll need to reevaluate / raise\n   * events as a result).\n   */\n  removeWrite(writeId: number): boolean {\n    // Note: disabling this check. It could be a transaction that preempted another transaction, and thus was applied\n    // out of order.\n    //const validClear = revert || this.allWrites_.length === 0 || writeId <= this.allWrites_[0].writeId;\n    //assert(validClear, \"Either we don't have this write, or it's the first one in the queue\");\n\n    const idx = this.allWrites_.findIndex(function(s) {\n      return s.writeId === writeId;\n    });\n    assert(idx >= 0, 'removeWrite called with nonexistent writeId.');\n    const writeToRemove = this.allWrites_[idx];\n    this.allWrites_.splice(idx, 1);\n\n    let removedWriteWasVisible = writeToRemove.visible;\n    let removedWriteOverlapsWithOtherWrites = false;\n\n    let i = this.allWrites_.length - 1;\n\n    while (removedWriteWasVisible && i >= 0) {\n      const currentWrite = this.allWrites_[i];\n      if (currentWrite.visible) {\n        if (\n          i >= idx &&\n          this.recordContainsPath_(currentWrite, writeToRemove.path)\n        ) {\n          // The removed write was completely shadowed by a subsequent write.\n          removedWriteWasVisible = false;\n        } else if (writeToRemove.path.contains(currentWrite.path)) {\n          // Either we're covering some writes or they're covering part of us (depending on which came first).\n          removedWriteOverlapsWithOtherWrites = true;\n        }\n      }\n      i--;\n    }\n\n    if (!removedWriteWasVisible) {\n      return false;\n    } else if (removedWriteOverlapsWithOtherWrites) {\n      // There's some shadowing going on. Just rebuild the visible writes from scratch.\n      this.resetTree_();\n      return true;\n    } else {\n      // There's no shadowing.  We can safely just remove the write(s) from visibleWrites.\n      if (writeToRemove.snap) {\n        this.visibleWrites_ = this.visibleWrites_.removeWrite(\n          writeToRemove.path\n        );\n      } else {\n        const children = writeToRemove.children;\n        each(children, (childName: string) => {\n          this.visibleWrites_ = this.visibleWrites_.removeWrite(\n            writeToRemove.path.child(childName)\n          );\n        });\n      }\n      return true;\n    }\n  }\n\n  /**\n   * Return a complete snapshot for the given path if there's visible write data at that path, else null.\n   * No server data is considered.\n   *\n   * @param {!Path} path\n   * @return {?Node}\n   */\n  getCompleteWriteData(path: Path): Node | null {\n    return this.visibleWrites_.getCompleteNode(path);\n  }\n\n  /**\n   * Given optional, underlying server data, and an optional set of constraints (exclude some sets, include hidden\n   * writes), attempt to calculate a complete snapshot for the given path\n   *\n   * @param {!Path} treePath\n   * @param {?Node} completeServerCache\n   * @param {Array.<number>=} writeIdsToExclude An optional set to be excluded\n   * @param {boolean=} includeHiddenWrites Defaults to false, whether or not to layer on writes with visible set to false\n   * @return {?Node}\n   */\n  calcCompleteEventCache(\n    treePath: Path,\n    completeServerCache: Node | null,\n    writeIdsToExclude?: number[],\n    includeHiddenWrites?: boolean\n  ): Node | null {\n    if (!writeIdsToExclude && !includeHiddenWrites) {\n      const shadowingNode = this.visibleWrites_.getCompleteNode(treePath);\n      if (shadowingNode != null) {\n        return shadowingNode;\n      } else {\n        const subMerge = this.visibleWrites_.childCompoundWrite(treePath);\n        if (subMerge.isEmpty()) {\n          return completeServerCache;\n        } else if (\n          completeServerCache == null &&\n          !subMerge.hasCompleteWrite(Path.Empty)\n        ) {\n          // We wouldn't have a complete snapshot, since there's no underlying data and no complete shadow\n          return null;\n        } else {\n          const layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\n          return subMerge.apply(layeredCache);\n        }\n      }\n    } else {\n      const merge = this.visibleWrites_.childCompoundWrite(treePath);\n      if (!includeHiddenWrites && merge.isEmpty()) {\n        return completeServerCache;\n      } else {\n        // If the server cache is null, and we don't have a complete cache, we need to return null\n        if (\n          !includeHiddenWrites &&\n          completeServerCache == null &&\n          !merge.hasCompleteWrite(Path.Empty)\n        ) {\n          return null;\n        } else {\n          const filter = function(write: WriteRecord) {\n            return (\n              (write.visible || includeHiddenWrites) &&\n              (!writeIdsToExclude ||\n                !~writeIdsToExclude.indexOf(write.writeId)) &&\n              (write.path.contains(treePath) || treePath.contains(write.path))\n            );\n          };\n          const mergeAtPath = WriteTree.layerTree_(\n            this.allWrites_,\n            filter,\n            treePath\n          );\n          const layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\n          return mergeAtPath.apply(layeredCache);\n        }\n      }\n    }\n  }\n\n  /**\n   * With optional, underlying server data, attempt to return a children node of children that we have complete data for.\n   * Used when creating new views, to pre-fill their complete event children snapshot.\n   *\n   * @param {!Path} treePath\n   * @param {?ChildrenNode} completeServerChildren\n   * @return {!ChildrenNode}\n   */\n  calcCompleteEventChildren(\n    treePath: Path,\n    completeServerChildren: ChildrenNode | null\n  ) {\n    let completeChildren = ChildrenNode.EMPTY_NODE as Node;\n    const topLevelSet = this.visibleWrites_.getCompleteNode(treePath);\n    if (topLevelSet) {\n      if (!topLevelSet.isLeafNode()) {\n        // we're shadowing everything. Return the children.\n        topLevelSet.forEachChild(PRIORITY_INDEX, function(\n          childName,\n          childSnap\n        ) {\n          completeChildren = completeChildren.updateImmediateChild(\n            childName,\n            childSnap\n          );\n        });\n      }\n      return completeChildren;\n    } else if (completeServerChildren) {\n      // Layer any children we have on top of this\n      // We know we don't have a top-level set, so just enumerate existing children\n      const merge = this.visibleWrites_.childCompoundWrite(treePath);\n      completeServerChildren.forEachChild(PRIORITY_INDEX, function(\n        childName,\n        childNode\n      ) {\n        const node = merge\n          .childCompoundWrite(new Path(childName))\n          .apply(childNode);\n        completeChildren = completeChildren.updateImmediateChild(\n          childName,\n          node\n        );\n      });\n      // Add any complete children we have from the set\n      merge.getCompleteChildren().forEach(function(namedNode) {\n        completeChildren = completeChildren.updateImmediateChild(\n          namedNode.name,\n          namedNode.node\n        );\n      });\n      return completeChildren;\n    } else {\n      // We don't have anything to layer on top of. Layer on any children we have\n      // Note that we can return an empty snap if we have a defined delete\n      const merge = this.visibleWrites_.childCompoundWrite(treePath);\n      merge.getCompleteChildren().forEach(function(namedNode) {\n        completeChildren = completeChildren.updateImmediateChild(\n          namedNode.name,\n          namedNode.node\n        );\n      });\n      return completeChildren;\n    }\n  }\n\n  /**\n   * Given that the underlying server data has updated, determine what, if anything, needs to be\n   * applied to the event cache.\n   *\n   * Possibilities:\n   *\n   * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\n   *\n   * 2. Some write is completely shadowing. No events to be raised\n   *\n   * 3. Is partially shadowed. Events\n   *\n   * Either existingEventSnap or existingServerSnap must exist\n   *\n   * @param {!Path} treePath\n   * @param {!Path} childPath\n   * @param {?Node} existingEventSnap\n   * @param {?Node} existingServerSnap\n   * @return {?Node}\n   */\n  calcEventCacheAfterServerOverwrite(\n    treePath: Path,\n    childPath: Path,\n    existingEventSnap: Node | null,\n    existingServerSnap: Node | null\n  ): Node | null {\n    assert(\n      existingEventSnap || existingServerSnap,\n      'Either existingEventSnap or existingServerSnap must exist'\n    );\n    const path = treePath.child(childPath);\n    if (this.visibleWrites_.hasCompleteWrite(path)) {\n      // At this point we can probably guarantee that we're in case 2, meaning no events\n      // May need to check visibility while doing the findRootMostValueAndPath call\n      return null;\n    } else {\n      // No complete shadowing. We're either partially shadowing or not shadowing at all.\n      const childMerge = this.visibleWrites_.childCompoundWrite(path);\n      if (childMerge.isEmpty()) {\n        // We're not shadowing at all. Case 1\n        return existingServerSnap.getChild(childPath);\n      } else {\n        // This could be more efficient if the serverNode + updates doesn't change the eventSnap\n        // However this is tricky to find out, since user updates don't necessary change the server\n        // snap, e.g. priority updates on empty nodes, or deep deletes. Another special case is if the server\n        // adds nodes, but doesn't change any existing writes. It is therefore not enough to\n        // only check if the updates change the serverNode.\n        // Maybe check if the merge tree contains these special cases and only do a full overwrite in that case?\n        return childMerge.apply(existingServerSnap.getChild(childPath));\n      }\n    }\n  }\n\n  /**\n   * Returns a complete child for a given server snap after applying all user writes or null if there is no\n   * complete child for this ChildKey.\n   *\n   * @param {!Path} treePath\n   * @param {!string} childKey\n   * @param {!CacheNode} existingServerSnap\n   * @return {?Node}\n   */\n  calcCompleteChild(\n    treePath: Path,\n    childKey: string,\n    existingServerSnap: CacheNode\n  ): Node | null {\n    const path = treePath.child(childKey);\n    const shadowingNode = this.visibleWrites_.getCompleteNode(path);\n    if (shadowingNode != null) {\n      return shadowingNode;\n    } else {\n      if (existingServerSnap.isCompleteForChild(childKey)) {\n        const childMerge = this.visibleWrites_.childCompoundWrite(path);\n        return childMerge.apply(\n          existingServerSnap.getNode().getImmediateChild(childKey)\n        );\n      } else {\n        return null;\n      }\n    }\n  }\n\n  /**\n   * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\n   * a higher path, this will return the child of that write relative to the write and this path.\n   * Returns null if there is no write at this path.\n   */\n  shadowingWrite(path: Path): Node | null {\n    return this.visibleWrites_.getCompleteNode(path);\n  }\n\n  /**\n   * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\n   * the window, but may now be in the window.\n   */\n  calcIndexedSlice(\n    treePath: Path,\n    completeServerData: Node | null,\n    startPost: NamedNode,\n    count: number,\n    reverse: boolean,\n    index: Index\n  ): NamedNode[] {\n    let toIterate: Node;\n    const merge = this.visibleWrites_.childCompoundWrite(treePath);\n    const shadowingNode = merge.getCompleteNode(Path.Empty);\n    if (shadowingNode != null) {\n      toIterate = shadowingNode;\n    } else if (completeServerData != null) {\n      toIterate = merge.apply(completeServerData);\n    } else {\n      // no children to iterate on\n      return [];\n    }\n    toIterate = toIterate.withIndex(index);\n    if (!toIterate.isEmpty() && !toIterate.isLeafNode()) {\n      const nodes = [];\n      const cmp = index.getCompare();\n      const iter = reverse\n        ? (toIterate as ChildrenNode).getReverseIteratorFrom(startPost, index)\n        : (toIterate as ChildrenNode).getIteratorFrom(startPost, index);\n      let next = iter.getNext();\n      while (next && nodes.length < count) {\n        if (cmp(next, startPost) !== 0) {\n          nodes.push(next);\n        }\n        next = iter.getNext();\n      }\n      return nodes;\n    } else {\n      return [];\n    }\n  }\n\n  private recordContainsPath_(writeRecord: WriteRecord, path: Path): boolean {\n    if (writeRecord.snap) {\n      return writeRecord.path.contains(path);\n    } else {\n      for (const childName in writeRecord.children) {\n        if (\n          writeRecord.children.hasOwnProperty(childName) &&\n          writeRecord.path.child(childName).contains(path)\n        ) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n\n  /**\n   * Re-layer the writes and merges into a tree so we can efficiently calculate event snapshots\n   */\n  private resetTree_() {\n    this.visibleWrites_ = WriteTree.layerTree_(\n      this.allWrites_,\n      WriteTree.DefaultFilter_,\n      Path.Empty\n    );\n    if (this.allWrites_.length > 0) {\n      this.lastWriteId_ = this.allWrites_[this.allWrites_.length - 1].writeId;\n    } else {\n      this.lastWriteId_ = -1;\n    }\n  }\n\n  /**\n   * The default filter used when constructing the tree. Keep everything that's visible.\n   */\n  private static DefaultFilter_(write: WriteRecord) {\n    return write.visible;\n  }\n\n  /**\n   * Static method. Given an array of WriteRecords, a filter for which ones to include, and a path, construct the tree of\n   * event data at that path.\n   */\n  private static layerTree_(\n    writes: WriteRecord[],\n    filter: (w: WriteRecord) => boolean,\n    treeRoot: Path\n  ): CompoundWrite {\n    let compoundWrite = CompoundWrite.Empty;\n    for (let i = 0; i < writes.length; ++i) {\n      const write = writes[i];\n      // Theory, a later set will either:\n      // a) abort a relevant transaction, so no need to worry about excluding it from calculating that transaction\n      // b) not be relevant to a transaction (separate branch), so again will not affect the data for that transaction\n      if (filter(write)) {\n        const writePath = write.path;\n        let relativePath;\n        if (write.snap) {\n          if (treeRoot.contains(writePath)) {\n            relativePath = Path.relativePath(treeRoot, writePath);\n            compoundWrite = compoundWrite.addWrite(relativePath, write.snap);\n          } else if (writePath.contains(treeRoot)) {\n            relativePath = Path.relativePath(writePath, treeRoot);\n            compoundWrite = compoundWrite.addWrite(\n              Path.Empty,\n              write.snap.getChild(relativePath)\n            );\n          } else {\n            // There is no overlap between root path and write path, ignore write\n          }\n        } else if (write.children) {\n          if (treeRoot.contains(writePath)) {\n            relativePath = Path.relativePath(treeRoot, writePath);\n            compoundWrite = compoundWrite.addWrites(\n              relativePath,\n              write.children\n            );\n          } else if (writePath.contains(treeRoot)) {\n            relativePath = Path.relativePath(writePath, treeRoot);\n            if (relativePath.isEmpty()) {\n              compoundWrite = compoundWrite.addWrites(\n                Path.Empty,\n                write.children\n              );\n            } else {\n              const child = safeGet(write.children, relativePath.getFront());\n              if (child) {\n                // There exists a child in this node that matches the root path\n                const deepNode = child.getChild(relativePath.popFront());\n                compoundWrite = compoundWrite.addWrite(Path.Empty, deepNode);\n              }\n            }\n          } else {\n            // There is no overlap between root path and write path, ignore write\n          }\n        } else {\n          throw assertionError('WriteRecord should have .snap or .children');\n        }\n      }\n    }\n    return compoundWrite;\n  }\n}\n\n/**\n * A WriteTreeRef wraps a WriteTree and a path, for convenient access to a particular subtree.  All of the methods\n * just proxy to the underlying WriteTree.\n *\n * @constructor\n */\nexport class WriteTreeRef {\n  /**\n   * The path to this particular write tree ref. Used for calling methods on writeTree_ while exposing a simpler\n   * interface to callers.\n   *\n   * @type {!Path}\n   * @private\n   * @const\n   */\n  private readonly treePath_: Path;\n\n  /**\n   * * A reference to the actual tree of write data. All methods are pass-through to the tree, but with the appropriate\n   * path prefixed.\n   *\n   * This lets us make cheap references to points in the tree for sync points without having to copy and maintain all of\n   * the data.\n   *\n   * @type {!WriteTree}\n   * @private\n   * @const\n   */\n  private readonly writeTree_: WriteTree;\n\n  /**\n   * @param {!Path} path\n   * @param {!WriteTree} writeTree\n   */\n  constructor(path: Path, writeTree: WriteTree) {\n    this.treePath_ = path;\n    this.writeTree_ = writeTree;\n  }\n\n  /**\n   * If possible, returns a complete event cache, using the underlying server data if possible. In addition, can be used\n   * to get a cache that includes hidden writes, and excludes arbitrary writes. Note that customizing the returned node\n   * can lead to a more expensive calculation.\n   *\n   * @param {?Node} completeServerCache\n   * @param {Array.<number>=} writeIdsToExclude Optional writes to exclude.\n   * @param {boolean=} includeHiddenWrites Defaults to false, whether or not to layer on writes with visible set to false\n   * @return {?Node}\n   */\n  calcCompleteEventCache(\n    completeServerCache: Node | null,\n    writeIdsToExclude?: number[],\n    includeHiddenWrites?: boolean\n  ): Node | null {\n    return this.writeTree_.calcCompleteEventCache(\n      this.treePath_,\n      completeServerCache,\n      writeIdsToExclude,\n      includeHiddenWrites\n    );\n  }\n\n  /**\n   * If possible, returns a children node containing all of the complete children we have data for. The returned data is a\n   * mix of the given server data and write data.\n   *\n   * @param {?ChildrenNode} completeServerChildren\n   * @return {!ChildrenNode}\n   */\n  calcCompleteEventChildren(\n    completeServerChildren: ChildrenNode | null\n  ): ChildrenNode {\n    return this.writeTree_.calcCompleteEventChildren(\n      this.treePath_,\n      completeServerChildren\n    ) as ChildrenNode;\n  }\n\n  /**\n   * Given that either the underlying server data has updated or the outstanding writes have updated, determine what,\n   * if anything, needs to be applied to the event cache.\n   *\n   * Possibilities:\n   *\n   * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\n   *\n   * 2. Some write is completely shadowing. No events to be raised\n   *\n   * 3. Is partially shadowed. Events should be raised\n   *\n   * Either existingEventSnap or existingServerSnap must exist, this is validated via an assert\n   *\n   * @param {!Path} path\n   * @param {?Node} existingEventSnap\n   * @param {?Node} existingServerSnap\n   * @return {?Node}\n   */\n  calcEventCacheAfterServerOverwrite(\n    path: Path,\n    existingEventSnap: Node | null,\n    existingServerSnap: Node | null\n  ): Node | null {\n    return this.writeTree_.calcEventCacheAfterServerOverwrite(\n      this.treePath_,\n      path,\n      existingEventSnap,\n      existingServerSnap\n    );\n  }\n\n  /**\n   * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\n   * a higher path, this will return the child of that write relative to the write and this path.\n   * Returns null if there is no write at this path.\n   *\n   * @param {!Path} path\n   * @return {?Node}\n   */\n  shadowingWrite(path: Path): Node | null {\n    return this.writeTree_.shadowingWrite(this.treePath_.child(path));\n  }\n\n  /**\n   * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\n   * the window, but may now be in the window\n   *\n   * @param {?Node} completeServerData\n   * @param {!NamedNode} startPost\n   * @param {!number} count\n   * @param {boolean} reverse\n   * @param {!Index} index\n   * @return {!Array.<!NamedNode>}\n   */\n  calcIndexedSlice(\n    completeServerData: Node | null,\n    startPost: NamedNode,\n    count: number,\n    reverse: boolean,\n    index: Index\n  ): NamedNode[] {\n    return this.writeTree_.calcIndexedSlice(\n      this.treePath_,\n      completeServerData,\n      startPost,\n      count,\n      reverse,\n      index\n    );\n  }\n\n  /**\n   * Returns a complete child for a given server snap after applying all user writes or null if there is no\n   * complete child for this ChildKey.\n   *\n   * @param {!string} childKey\n   * @param {!CacheNode} existingServerCache\n   * @return {?Node}\n   */\n  calcCompleteChild(\n    childKey: string,\n    existingServerCache: CacheNode\n  ): Node | null {\n    return this.writeTree_.calcCompleteChild(\n      this.treePath_,\n      childKey,\n      existingServerCache\n    );\n  }\n\n  /**\n   * Return a WriteTreeRef for a child.\n   *\n   * @param {string} childName\n   * @return {!WriteTreeRef}\n   */\n  child(childName: string): WriteTreeRef {\n    return new WriteTreeRef(this.treePath_.child(childName), this.writeTree_);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { errorForServerCode, each } from './util/util';\nimport { AckUserWrite } from './operation/AckUserWrite';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { ImmutableTree } from './util/ImmutableTree';\nimport { ListenComplete } from './operation/ListenComplete';\nimport { Merge } from './operation/Merge';\nimport { Operation, OperationSource } from './operation/Operation';\nimport { Overwrite } from './operation/Overwrite';\nimport { Path } from './util/Path';\nimport { SyncPoint } from './SyncPoint';\nimport { WriteTree, WriteTreeRef } from './WriteTree';\nimport { Query } from '../api/Query';\nimport { Node } from './snap/Node';\nimport { Event } from './view/Event';\nimport { EventRegistration } from './view/EventRegistration';\nimport { View } from './view/View';\n\n/**\n * @typedef {{\n *   startListening: function(\n *     !Query,\n *     ?number,\n *     function():string,\n *     function(!string, *):!Array.<!Event>\n *   ):!Array.<!Event>,\n *\n *   stopListening: function(!Query, ?number)\n * }}\n */\nexport interface ListenProvider {\n  startListening(\n    query: Query,\n    tag: number | null,\n    hashFn: () => string,\n    onComplete: (a: string, b?: any) => Event[]\n  ): Event[];\n\n  stopListening(a: Query, b: number | null): void;\n}\n\n/**\n * SyncTree is the central class for managing event callback registration, data caching, views\n * (query processing), and event generation.  There are typically two SyncTree instances for\n * each Repo, one for the normal Firebase data, and one for the .info data.\n *\n * It has a number of responsibilities, including:\n *  - Tracking all user event callbacks (registered via addEventRegistration() and removeEventRegistration()).\n *  - Applying and caching data changes for user set(), transaction(), and update() calls\n *    (applyUserOverwrite(), applyUserMerge()).\n *  - Applying and caching data changes for server data changes (applyServerOverwrite(),\n *    applyServerMerge()).\n *  - Generating user-facing events for server and user changes (all of the apply* methods\n *    return the set of events that need to be raised as a result).\n *  - Maintaining the appropriate set of server listens to ensure we are always subscribed\n *    to the correct set of paths and queries to satisfy the current set of user event\n *    callbacks (listens are started/stopped using the provided listenProvider).\n *\n * NOTE: Although SyncTree tracks event callbacks and calculates events to raise, the actual\n * events are returned to the caller rather than raised synchronously.\n *\n * @constructor\n */\nexport class SyncTree {\n  /**\n   * Tree of SyncPoints.  There's a SyncPoint at any location that has 1 or more views.\n   */\n  private syncPointTree_: ImmutableTree<SyncPoint> = ImmutableTree.Empty;\n\n  /**\n   * A tree of all pending user writes (user-initiated set()'s, transaction()'s, update()'s, etc.).\n   */\n  private pendingWriteTree_ = new WriteTree();\n\n  private readonly tagToQueryMap: Map<number, string> = new Map();\n  private readonly queryToTagMap: Map<string, number> = new Map();\n\n  /**\n   * @param {!ListenProvider} listenProvider_ Used by SyncTree to start / stop listening\n   *   to server data.\n   */\n  constructor(private listenProvider_: ListenProvider) {}\n\n  /**\n   * Apply the data changes for a user-generated set() or transaction() call.\n   *\n   * @return Events to raise.\n   */\n  applyUserOverwrite(\n    path: Path,\n    newData: Node,\n    writeId: number,\n    visible?: boolean\n  ): Event[] {\n    // Record pending write.\n    this.pendingWriteTree_.addOverwrite(path, newData, writeId, visible);\n\n    if (!visible) {\n      return [];\n    } else {\n      return this.applyOperationToSyncPoints_(\n        new Overwrite(OperationSource.User, path, newData)\n      );\n    }\n  }\n\n  /**\n   * Apply the data from a user-generated update() call\n   *\n   * @return Events to raise.\n   */\n  applyUserMerge(\n    path: Path,\n    changedChildren: { [k: string]: Node },\n    writeId: number\n  ): Event[] {\n    // Record pending merge.\n    this.pendingWriteTree_.addMerge(path, changedChildren, writeId);\n\n    const changeTree = ImmutableTree.fromObject(changedChildren);\n\n    return this.applyOperationToSyncPoints_(\n      new Merge(OperationSource.User, path, changeTree)\n    );\n  }\n\n  /**\n   * Acknowledge a pending user write that was previously registered with applyUserOverwrite() or applyUserMerge().\n   *\n   * @param revert True if the given write failed and needs to be reverted\n   * @return Events to raise.\n   */\n  ackUserWrite(writeId: number, revert: boolean = false) {\n    const write = this.pendingWriteTree_.getWrite(writeId);\n    const needToReevaluate = this.pendingWriteTree_.removeWrite(writeId);\n    if (!needToReevaluate) {\n      return [];\n    } else {\n      let affectedTree = ImmutableTree.Empty;\n      if (write.snap != null) {\n        // overwrite\n        affectedTree = affectedTree.set(Path.Empty, true);\n      } else {\n        each(write.children, function(pathString: string, node: Node) {\n          affectedTree = affectedTree.set(new Path(pathString), node);\n        });\n      }\n      return this.applyOperationToSyncPoints_(\n        new AckUserWrite(write.path, affectedTree, revert)\n      );\n    }\n  }\n\n  /**\n   * Apply new server data for the specified path..\n   *\n   * @return Events to raise.\n   */\n  applyServerOverwrite(path: Path, newData: Node): Event[] {\n    return this.applyOperationToSyncPoints_(\n      new Overwrite(OperationSource.Server, path, newData)\n    );\n  }\n\n  /**\n   * Apply new server data to be merged in at the specified path.\n   *\n   * @return Events to raise.\n   */\n  applyServerMerge(\n    path: Path,\n    changedChildren: { [k: string]: Node }\n  ): Event[] {\n    const changeTree = ImmutableTree.fromObject(changedChildren);\n\n    return this.applyOperationToSyncPoints_(\n      new Merge(OperationSource.Server, path, changeTree)\n    );\n  }\n\n  /**\n   * Apply a listen complete for a query\n   *\n   * @return Events to raise.\n   */\n  applyListenComplete(path: Path): Event[] {\n    return this.applyOperationToSyncPoints_(\n      new ListenComplete(OperationSource.Server, path)\n    );\n  }\n\n  /**\n   * Apply new server data for the specified tagged query.\n   *\n   * @return Events to raise.\n   */\n  applyTaggedQueryOverwrite(path: Path, snap: Node, tag: number): Event[] {\n    const queryKey = this.queryKeyForTag_(tag);\n    if (queryKey != null) {\n      const r = SyncTree.parseQueryKey_(queryKey);\n      const queryPath = r.path,\n        queryId = r.queryId;\n      const relativePath = Path.relativePath(queryPath, path);\n      const op = new Overwrite(\n        OperationSource.forServerTaggedQuery(queryId),\n        relativePath,\n        snap\n      );\n      return this.applyTaggedOperation_(queryPath, op);\n    } else {\n      // Query must have been removed already\n      return [];\n    }\n  }\n\n  /**\n   * Apply server data to be merged in for the specified tagged query.\n   *\n   * @return Events to raise.\n   */\n  applyTaggedQueryMerge(\n    path: Path,\n    changedChildren: { [k: string]: Node },\n    tag: number\n  ): Event[] {\n    const queryKey = this.queryKeyForTag_(tag);\n    if (queryKey) {\n      const r = SyncTree.parseQueryKey_(queryKey);\n      const queryPath = r.path,\n        queryId = r.queryId;\n      const relativePath = Path.relativePath(queryPath, path);\n      const changeTree = ImmutableTree.fromObject(changedChildren);\n      const op = new Merge(\n        OperationSource.forServerTaggedQuery(queryId),\n        relativePath,\n        changeTree\n      );\n      return this.applyTaggedOperation_(queryPath, op);\n    } else {\n      // We've already removed the query. No big deal, ignore the update\n      return [];\n    }\n  }\n\n  /**\n   * Apply a listen complete for a tagged query\n   *\n   * @return Events to raise.\n   */\n  applyTaggedListenComplete(path: Path, tag: number): Event[] {\n    const queryKey = this.queryKeyForTag_(tag);\n    if (queryKey) {\n      const r = SyncTree.parseQueryKey_(queryKey);\n      const queryPath = r.path,\n        queryId = r.queryId;\n      const relativePath = Path.relativePath(queryPath, path);\n      const op = new ListenComplete(\n        OperationSource.forServerTaggedQuery(queryId),\n        relativePath\n      );\n      return this.applyTaggedOperation_(queryPath, op);\n    } else {\n      // We've already removed the query. No big deal, ignore the update\n      return [];\n    }\n  }\n\n  /**\n   * Add an event callback for the specified query.\n   *\n   * @return Events to raise.\n   */\n  addEventRegistration(\n    query: Query,\n    eventRegistration: EventRegistration\n  ): Event[] {\n    const path = query.path;\n\n    let serverCache: Node | null = null;\n    let foundAncestorDefaultView = false;\n    // Any covering writes will necessarily be at the root, so really all we need to find is the server cache.\n    // Consider optimizing this once there's a better understanding of what actual behavior will be.\n    this.syncPointTree_.foreachOnPath(path, function(pathToSyncPoint, sp) {\n      const relativePath = Path.relativePath(pathToSyncPoint, path);\n      serverCache = serverCache || sp.getCompleteServerCache(relativePath);\n      foundAncestorDefaultView =\n        foundAncestorDefaultView || sp.hasCompleteView();\n    });\n    let syncPoint = this.syncPointTree_.get(path);\n    if (!syncPoint) {\n      syncPoint = new SyncPoint();\n      this.syncPointTree_ = this.syncPointTree_.set(path, syncPoint);\n    } else {\n      foundAncestorDefaultView =\n        foundAncestorDefaultView || syncPoint.hasCompleteView();\n      serverCache = serverCache || syncPoint.getCompleteServerCache(Path.Empty);\n    }\n\n    let serverCacheComplete;\n    if (serverCache != null) {\n      serverCacheComplete = true;\n    } else {\n      serverCacheComplete = false;\n      serverCache = ChildrenNode.EMPTY_NODE;\n      const subtree = this.syncPointTree_.subtree(path);\n      subtree.foreachChild(function(childName, childSyncPoint) {\n        const completeCache = childSyncPoint.getCompleteServerCache(Path.Empty);\n        if (completeCache) {\n          serverCache = serverCache.updateImmediateChild(\n            childName,\n            completeCache\n          );\n        }\n      });\n    }\n\n    const viewAlreadyExists = syncPoint.viewExistsForQuery(query);\n    if (!viewAlreadyExists && !query.getQueryParams().loadsAllData()) {\n      // We need to track a tag for this query\n      const queryKey = SyncTree.makeQueryKey_(query);\n      assert(\n        !this.queryToTagMap.has(queryKey),\n        'View does not exist, but we have a tag'\n      );\n      const tag = SyncTree.getNextQueryTag_();\n      this.queryToTagMap.set(queryKey, tag);\n      this.tagToQueryMap.set(tag, queryKey);\n    }\n    const writesCache = this.pendingWriteTree_.childWrites(path);\n    let events = syncPoint.addEventRegistration(\n      query,\n      eventRegistration,\n      writesCache,\n      serverCache,\n      serverCacheComplete\n    );\n    if (!viewAlreadyExists && !foundAncestorDefaultView) {\n      const view /** @type !View */ = syncPoint.viewForQuery(query);\n      events = events.concat(this.setupListener_(query, view));\n    }\n    return events;\n  }\n\n  /**\n   * Remove event callback(s).\n   *\n   * If query is the default query, we'll check all queries for the specified eventRegistration.\n   * If eventRegistration is null, we'll remove all callbacks for the specified query/queries.\n   *\n   * @param eventRegistration If null, all callbacks are removed.\n   * @param cancelError If a cancelError is provided, appropriate cancel events will be returned.\n   * @return Cancel events, if cancelError was provided.\n   */\n  removeEventRegistration(\n    query: Query,\n    eventRegistration: EventRegistration | null,\n    cancelError?: Error\n  ): Event[] {\n    // Find the syncPoint first. Then deal with whether or not it has matching listeners\n    const path = query.path;\n    const maybeSyncPoint = this.syncPointTree_.get(path);\n    let cancelEvents: Event[] = [];\n    // A removal on a default query affects all queries at that location. A removal on an indexed query, even one without\n    // other query constraints, does *not* affect all queries at that location. So this check must be for 'default', and\n    // not loadsAllData().\n    if (\n      maybeSyncPoint &&\n      (query.queryIdentifier() === 'default' ||\n        maybeSyncPoint.viewExistsForQuery(query))\n    ) {\n      /**\n       * @type {{removed: !Array.<!Query>, events: !Array.<!Event>}}\n       */\n      const removedAndEvents = maybeSyncPoint.removeEventRegistration(\n        query,\n        eventRegistration,\n        cancelError\n      );\n      if (maybeSyncPoint.isEmpty()) {\n        this.syncPointTree_ = this.syncPointTree_.remove(path);\n      }\n      const removed = removedAndEvents.removed;\n      cancelEvents = removedAndEvents.events;\n      // We may have just removed one of many listeners and can short-circuit this whole process\n      // We may also not have removed a default listener, in which case all of the descendant listeners should already be\n      // properly set up.\n      //\n      // Since indexed queries can shadow if they don't have other query constraints, check for loadsAllData(), instead of\n      // queryId === 'default'\n      const removingDefault =\n        -1 !==\n        removed.findIndex(function(query) {\n          return query.getQueryParams().loadsAllData();\n        });\n      const covered = this.syncPointTree_.findOnPath(path, function(\n        relativePath,\n        parentSyncPoint\n      ) {\n        return parentSyncPoint.hasCompleteView();\n      });\n\n      if (removingDefault && !covered) {\n        const subtree = this.syncPointTree_.subtree(path);\n        // There are potentially child listeners. Determine what if any listens we need to send before executing the\n        // removal\n        if (!subtree.isEmpty()) {\n          // We need to fold over our subtree and collect the listeners to send\n          const newViews = this.collectDistinctViewsForSubTree_(subtree);\n\n          // Ok, we've collected all the listens we need. Set them up.\n          for (let i = 0; i < newViews.length; ++i) {\n            const view = newViews[i],\n              newQuery = view.getQuery();\n            const listener = this.createListenerForView_(view);\n            this.listenProvider_.startListening(\n              SyncTree.queryForListening_(newQuery),\n              this.tagForQuery_(newQuery),\n              listener.hashFn,\n              listener.onComplete\n            );\n          }\n        } else {\n          // There's nothing below us, so nothing we need to start listening on\n        }\n      }\n      // If we removed anything and we're not covered by a higher up listen, we need to stop listening on this query\n      // The above block has us covered in terms of making sure we're set up on listens lower in the tree.\n      // Also, note that if we have a cancelError, it's already been removed at the provider level.\n      if (!covered && removed.length > 0 && !cancelError) {\n        // If we removed a default, then we weren't listening on any of the other queries here. Just cancel the one\n        // default. Otherwise, we need to iterate through and cancel each individual query\n        if (removingDefault) {\n          // We don't tag default listeners\n          const defaultTag: number | null = null;\n          this.listenProvider_.stopListening(\n            SyncTree.queryForListening_(query),\n            defaultTag\n          );\n        } else {\n          removed.forEach((queryToRemove: Query) => {\n            const tagToRemove = this.queryToTagMap.get(\n              SyncTree.makeQueryKey_(queryToRemove)\n            );\n            this.listenProvider_.stopListening(\n              SyncTree.queryForListening_(queryToRemove),\n              tagToRemove\n            );\n          });\n        }\n      }\n      // Now, clear all of the tags we're tracking for the removed listens\n      this.removeTags_(removed);\n    } else {\n      // No-op, this listener must've been already removed\n    }\n    return cancelEvents;\n  }\n\n  /**\n   * Returns a complete cache, if we have one, of the data at a particular path. If the location does not have a\n   * listener above it, we will get a false \"null\". This shouldn't be a problem because transactions will always\n   * have a listener above, and atomic operations would correctly show a jitter of <increment value> ->\n   *     <incremented total> as the write is applied locally and then acknowledged at the server.\n   *\n   * Note: this method will *include* hidden writes from transaction with applyLocally set to false.\n   *\n   * @param path The path to the data we want\n   * @param writeIdsToExclude A specific set to be excluded\n   */\n  calcCompleteEventCache(path: Path, writeIdsToExclude?: number[]): Node {\n    const includeHiddenSets = true;\n    const writeTree = this.pendingWriteTree_;\n    const serverCache = this.syncPointTree_.findOnPath(path, function(\n      pathSoFar,\n      syncPoint\n    ) {\n      const relativePath = Path.relativePath(pathSoFar, path);\n      const serverCache = syncPoint.getCompleteServerCache(relativePath);\n      if (serverCache) {\n        return serverCache;\n      }\n    });\n    return writeTree.calcCompleteEventCache(\n      path,\n      serverCache,\n      writeIdsToExclude,\n      includeHiddenSets\n    );\n  }\n\n  /**\n   * This collapses multiple unfiltered views into a single view, since we only need a single\n   * listener for them.\n   */\n  private collectDistinctViewsForSubTree_(\n    subtree: ImmutableTree<SyncPoint>\n  ): View[] {\n    return subtree.fold<View[]>(\n      (relativePath, maybeChildSyncPoint, childMap) => {\n        if (maybeChildSyncPoint && maybeChildSyncPoint.hasCompleteView()) {\n          const completeView = maybeChildSyncPoint.getCompleteView();\n          return [completeView];\n        } else {\n          // No complete view here, flatten any deeper listens into an array\n          let views: View[] = [];\n          if (maybeChildSyncPoint) {\n            views = maybeChildSyncPoint.getQueryViews();\n          }\n          each(childMap, function(_key: string, childViews: View[]) {\n            views = views.concat(childViews);\n          });\n          return views;\n        }\n      }\n    );\n  }\n\n  private removeTags_(queries: Query[]) {\n    for (let j = 0; j < queries.length; ++j) {\n      const removedQuery = queries[j];\n      if (!removedQuery.getQueryParams().loadsAllData()) {\n        // We should have a tag for this\n        const removedQueryKey = SyncTree.makeQueryKey_(removedQuery);\n        const removedQueryTag = this.queryToTagMap.get(removedQueryKey);\n        this.queryToTagMap.delete(removedQueryKey);\n        this.tagToQueryMap.delete(removedQueryTag);\n      }\n    }\n  }\n\n  /**\n   * Normalizes a query to a query we send the server for listening\n   *\n   * @return The normalized query\n   */\n  private static queryForListening_(query: Query): Query {\n    if (\n      query.getQueryParams().loadsAllData() &&\n      !query.getQueryParams().isDefault()\n    ) {\n      // We treat queries that load all data as default queries\n      // Cast is necessary because ref() technically returns Firebase which is actually fb.api.Firebase which inherits\n      // from Query\n      return query.getRef()!;\n    } else {\n      return query;\n    }\n  }\n\n  /**\n   * For a given new listen, manage the de-duplication of outstanding subscriptions.\n   *\n   * @return This method can return events to support synchronous data sources\n   */\n  private setupListener_(query: Query, view: View): Event[] {\n    const path = query.path;\n    const tag = this.tagForQuery_(query);\n    const listener = this.createListenerForView_(view);\n\n    const events = this.listenProvider_.startListening(\n      SyncTree.queryForListening_(query),\n      tag,\n      listener.hashFn,\n      listener.onComplete\n    );\n\n    const subtree = this.syncPointTree_.subtree(path);\n    // The root of this subtree has our query. We're here because we definitely need to send a listen for that, but we\n    // may need to shadow other listens as well.\n    if (tag) {\n      assert(\n        !subtree.value.hasCompleteView(),\n        \"If we're adding a query, it shouldn't be shadowed\"\n      );\n    } else {\n      // Shadow everything at or below this location, this is a default listener.\n      const queriesToStop = subtree.fold<Query[]>(function(\n        relativePath,\n        maybeChildSyncPoint,\n        childMap\n      ) {\n        if (\n          !relativePath.isEmpty() &&\n          maybeChildSyncPoint &&\n          maybeChildSyncPoint.hasCompleteView()\n        ) {\n          return [maybeChildSyncPoint.getCompleteView().getQuery()];\n        } else {\n          // No default listener here, flatten any deeper queries into an array\n          let queries: Query[] = [];\n          if (maybeChildSyncPoint) {\n            queries = queries.concat(\n              maybeChildSyncPoint.getQueryViews().map(view => view.getQuery())\n            );\n          }\n          each(childMap, function(_key: string, childQueries: Query[]) {\n            queries = queries.concat(childQueries);\n          });\n          return queries;\n        }\n      });\n      for (let i = 0; i < queriesToStop.length; ++i) {\n        const queryToStop = queriesToStop[i];\n        this.listenProvider_.stopListening(\n          SyncTree.queryForListening_(queryToStop),\n          this.tagForQuery_(queryToStop)\n        );\n      }\n    }\n    return events;\n  }\n\n  private createListenerForView_(\n    view: View\n  ): { hashFn(): string; onComplete(a: string, b?: any): Event[] } {\n    const query = view.getQuery();\n    const tag = this.tagForQuery_(query);\n\n    return {\n      hashFn: () => {\n        const cache = view.getServerCache() || ChildrenNode.EMPTY_NODE;\n        return cache.hash();\n      },\n      onComplete: (status: string): Event[] => {\n        if (status === 'ok') {\n          if (tag) {\n            return this.applyTaggedListenComplete(query.path, tag);\n          } else {\n            return this.applyListenComplete(query.path);\n          }\n        } else {\n          // If a listen failed, kill all of the listeners here, not just the one that triggered the error.\n          // Note that this may need to be scoped to just this listener if we change permissions on filtered children\n          const error = errorForServerCode(status, query);\n          return this.removeEventRegistration(\n            query,\n            /*eventRegistration*/ null,\n            error\n          );\n        }\n      }\n    };\n  }\n\n  /**\n   * Given a query, computes a \"queryKey\" suitable for use in our queryToTagMap_.\n   */\n  private static makeQueryKey_(query: Query): string {\n    return query.path.toString() + '$' + query.queryIdentifier();\n  }\n\n  /**\n   * Given a queryKey (created by makeQueryKey), parse it back into a path and queryId.\n   */\n  private static parseQueryKey_(\n    queryKey: string\n  ): { queryId: string; path: Path } {\n    const splitIndex = queryKey.indexOf('$');\n    assert(\n      splitIndex !== -1 && splitIndex < queryKey.length - 1,\n      'Bad queryKey.'\n    );\n    return {\n      queryId: queryKey.substr(splitIndex + 1),\n      path: new Path(queryKey.substr(0, splitIndex))\n    };\n  }\n\n  /**\n   * Return the query associated with the given tag, if we have one\n   */\n  private queryKeyForTag_(tag: number): string | null {\n    return this.tagToQueryMap.get(tag);\n  }\n\n  /**\n   * Return the tag associated with the given query.\n   */\n  private tagForQuery_(query: Query): number | null {\n    const queryKey = SyncTree.makeQueryKey_(query);\n    return this.queryToTagMap.get(queryKey);\n  }\n\n  /**\n   * Static tracker for next query tag.\n   */\n  private static nextQueryTag_ = 1;\n\n  /**\n   * Static accessor for query tags.\n   */\n  private static getNextQueryTag_(): number {\n    return SyncTree.nextQueryTag_++;\n  }\n\n  /**\n   * A helper method to apply tagged operations\n   */\n  private applyTaggedOperation_(\n    queryPath: Path,\n    operation: Operation\n  ): Event[] {\n    const syncPoint = this.syncPointTree_.get(queryPath);\n    assert(syncPoint, \"Missing sync point for query tag that we're tracking\");\n    const writesCache = this.pendingWriteTree_.childWrites(queryPath);\n    return syncPoint.applyOperation(\n      operation,\n      writesCache,\n      /*serverCache=*/ null\n    );\n  }\n\n  /**\n   * A helper method that visits all descendant and ancestor SyncPoints, applying the operation.\n   *\n   * NOTES:\n   * - Descendant SyncPoints will be visited first (since we raise events depth-first).\n\n   * - We call applyOperation() on each SyncPoint passing three things:\n   *   1. A version of the Operation that has been made relative to the SyncPoint location.\n   *   2. A WriteTreeRef of any writes we have cached at the SyncPoint location.\n   *   3. A snapshot Node with cached server data, if we have it.\n\n   * - We concatenate all of the events returned by each SyncPoint and return the result.\n   */\n  private applyOperationToSyncPoints_(operation: Operation): Event[] {\n    return this.applyOperationHelper_(\n      operation,\n      this.syncPointTree_,\n      /*serverCache=*/ null,\n      this.pendingWriteTree_.childWrites(Path.Empty)\n    );\n  }\n\n  /**\n   * Recursive helper for applyOperationToSyncPoints_\n   */\n  private applyOperationHelper_(\n    operation: Operation,\n    syncPointTree: ImmutableTree<SyncPoint>,\n    serverCache: Node | null,\n    writesCache: WriteTreeRef\n  ): Event[] {\n    if (operation.path.isEmpty()) {\n      return this.applyOperationDescendantsHelper_(\n        operation,\n        syncPointTree,\n        serverCache,\n        writesCache\n      );\n    } else {\n      const syncPoint = syncPointTree.get(Path.Empty);\n\n      // If we don't have cached server data, see if we can get it from this SyncPoint.\n      if (serverCache == null && syncPoint != null) {\n        serverCache = syncPoint.getCompleteServerCache(Path.Empty);\n      }\n\n      let events: Event[] = [];\n      const childName = operation.path.getFront();\n      const childOperation = operation.operationForChild(childName);\n      const childTree = syncPointTree.children.get(childName);\n      if (childTree && childOperation) {\n        const childServerCache = serverCache\n          ? serverCache.getImmediateChild(childName)\n          : null;\n        const childWritesCache = writesCache.child(childName);\n        events = events.concat(\n          this.applyOperationHelper_(\n            childOperation,\n            childTree,\n            childServerCache,\n            childWritesCache\n          )\n        );\n      }\n\n      if (syncPoint) {\n        events = events.concat(\n          syncPoint.applyOperation(operation, writesCache, serverCache)\n        );\n      }\n\n      return events;\n    }\n  }\n\n  /**\n   * Recursive helper for applyOperationToSyncPoints_\n   */\n  private applyOperationDescendantsHelper_(\n    operation: Operation,\n    syncPointTree: ImmutableTree<SyncPoint>,\n    serverCache: Node | null,\n    writesCache: WriteTreeRef\n  ): Event[] {\n    const syncPoint = syncPointTree.get(Path.Empty);\n\n    // If we don't have cached server data, see if we can get it from this SyncPoint.\n    if (serverCache == null && syncPoint != null) {\n      serverCache = syncPoint.getCompleteServerCache(Path.Empty);\n    }\n\n    let events: Event[] = [];\n    syncPointTree.children.inorderTraversal((childName, childTree) => {\n      const childServerCache = serverCache\n        ? serverCache.getImmediateChild(childName)\n        : null;\n      const childWritesCache = writesCache.child(childName);\n      const childOperation = operation.operationForChild(childName);\n      if (childOperation) {\n        events = events.concat(\n          this.applyOperationDescendantsHelper_(\n            childOperation,\n            childTree,\n            childServerCache,\n            childWritesCache\n          )\n        );\n      }\n    });\n\n    if (syncPoint) {\n      events = events.concat(\n        syncPoint.applyOperation(operation, writesCache, serverCache)\n      );\n    }\n\n    return events;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { Path } from './util/Path';\nimport { Node } from './snap/Node';\n\n/**\n * Mutable object which basically just stores a reference to the \"latest\" immutable snapshot.\n *\n * @constructor\n */\nexport class SnapshotHolder {\n  private rootNode_: Node = ChildrenNode.EMPTY_NODE;\n\n  getNode(path: Path): Node {\n    return this.rootNode_.getChild(path);\n  }\n\n  updateSnapshot(path: Path, newSnapshotNode: Node) {\n    this.rootNode_ = this.rootNode_.updateChild(path, newSnapshotNode);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseAuthTokenData } from '@firebase/app-types/private';\nimport {\n  FirebaseAuthInternal,\n  FirebaseAuthInternalName\n} from '@firebase/auth-interop-types';\nimport { Provider } from '@firebase/component';\nimport { log, warn } from './util/util';\nimport { FirebaseApp } from '@firebase/app-types';\n\n/**\n * Abstraction around FirebaseApp's token fetching capabilities.\n */\nexport class AuthTokenProvider {\n  private auth_: FirebaseAuthInternal | null = null;\n  constructor(\n    private app_: FirebaseApp,\n    private authProvider_: Provider<FirebaseAuthInternalName>\n  ) {\n    this.auth_ = authProvider_.getImmediate({ optional: true });\n    if (!this.auth_) {\n      authProvider_.get().then(auth => (this.auth_ = auth));\n    }\n  }\n\n  /**\n   * @param {boolean} forceRefresh\n   * @return {!Promise<FirebaseAuthTokenData>}\n   */\n  getToken(forceRefresh: boolean): Promise<FirebaseAuthTokenData> {\n    if (!this.auth_) {\n      return Promise.resolve(null);\n    }\n\n    return this.auth_.getToken(forceRefresh).catch(function(error) {\n      // TODO: Need to figure out all the cases this is raised and whether\n      // this makes sense.\n      if (error && error.code === 'auth/token-not-initialized') {\n        log('Got auth/token-not-initialized error.  Treating as null token.');\n        return null;\n      } else {\n        return Promise.reject(error);\n      }\n    });\n  }\n\n  addTokenChangeListener(listener: (token: string | null) => void) {\n    // TODO: We might want to wrap the listener and call it with no args to\n    // avoid a leaky abstraction, but that makes removing the listener harder.\n    if (this.auth_) {\n      this.auth_.addAuthTokenListener(listener);\n    } else {\n      setTimeout(() => listener(null), 0);\n      this.authProvider_\n        .get()\n        .then(auth => auth.addAuthTokenListener(listener));\n    }\n  }\n\n  removeTokenChangeListener(listener: (token: string | null) => void) {\n    this.authProvider_\n      .get()\n      .then(auth => auth.removeAuthTokenListener(listener));\n  }\n\n  notifyForInvalidToken() {\n    let errorMessage =\n      'Provided authentication credentials for the app named \"' +\n      this.app_.name +\n      '\" are invalid. This usually indicates your app was not ' +\n      'initialized correctly. ';\n    if ('credential' in this.app_.options) {\n      errorMessage +=\n        'Make sure the \"credential\" property provided to initializeApp() ' +\n        'is authorized to access the specified \"databaseURL\" and is from the correct ' +\n        'project.';\n    } else if ('serviceAccount' in this.app_.options) {\n      errorMessage +=\n        'Make sure the \"serviceAccount\" property provided to initializeApp() ' +\n        'is authorized to access the specified \"databaseURL\" and is from the correct ' +\n        'project.';\n    } else {\n      errorMessage +=\n        'Make sure the \"apiKey\" and \"databaseURL\" properties provided to ' +\n        'initializeApp() match the values provided for your app at ' +\n        'https://console.firebase.google.com/.';\n    }\n    warn(errorMessage);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { deepCopy } from '@firebase/util';\nimport { contains } from '@firebase/util';\n\n/**\n * Tracks a collection of stats.\n *\n * @constructor\n */\nexport class StatsCollection {\n  private counters_: { [k: string]: number } = {};\n\n  incrementCounter(name: string, amount: number = 1) {\n    if (!contains(this.counters_, name)) this.counters_[name] = 0;\n\n    this.counters_[name] += amount;\n  }\n\n  get() {\n    return deepCopy(this.counters_);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { StatsCollection } from './StatsCollection';\nimport { RepoInfo } from '../RepoInfo';\n\nexport class StatsManager {\n  private static collections_: { [k: string]: StatsCollection } = {};\n  private static reporters_: { [k: string]: any } = {};\n\n  static getCollection(repoInfo: RepoInfo): StatsCollection {\n    const hashString = repoInfo.toString();\n\n    if (!this.collections_[hashString]) {\n      this.collections_[hashString] = new StatsCollection();\n    }\n\n    return this.collections_[hashString];\n  }\n\n  static getOrCreateReporter<T>(\n    repoInfo: RepoInfo,\n    creatorFunction: () => T\n  ): T {\n    const hashString = repoInfo.toString();\n\n    if (!this.reporters_[hashString]) {\n      this.reporters_[hashString] = creatorFunction();\n    }\n\n    return this.reporters_[hashString];\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { StatsCollection } from './StatsCollection';\nimport { each } from '../util/util';\n\n/**\n * Returns the delta from the previous call to get stats.\n *\n * @param collection_ The collection to \"listen\" to.\n * @constructor\n */\nexport class StatsListener {\n  private last_: { [k: string]: number } | null = null;\n\n  constructor(private collection_: StatsCollection) {}\n\n  get(): { [k: string]: number } {\n    const newStats = this.collection_.get();\n\n    const delta = { ...newStats };\n    if (this.last_) {\n      each(this.last_, (stat: string, value: number) => {\n        delta[stat] = delta[stat] - value;\n      });\n    }\n    this.last_ = newStats;\n\n    return delta;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { contains } from '@firebase/util';\nimport { setTimeoutNonBlocking, each } from '../util/util';\nimport { StatsListener } from './StatsListener';\nimport { StatsCollection } from './StatsCollection';\nimport { ServerActions } from '../ServerActions';\n\n// Assuming some apps may have a short amount of time on page, and a bulk of firebase operations probably\n// happen on page load, we try to report our first set of stats pretty quickly, but we wait at least 10\n// seconds to try to ensure the Firebase connection is established / settled.\nconst FIRST_STATS_MIN_TIME = 10 * 1000;\nconst FIRST_STATS_MAX_TIME = 30 * 1000;\n\n// We'll continue to report stats on average every 5 minutes.\nconst REPORT_STATS_INTERVAL = 5 * 60 * 1000;\n\n/**\n * @constructor\n */\nexport class StatsReporter {\n  private statsListener_: StatsListener;\n  private statsToReport_: { [k: string]: boolean } = {};\n\n  /**\n   * @param collection\n   * @param server_\n   */\n  constructor(collection: StatsCollection, private server_: ServerActions) {\n    this.statsListener_ = new StatsListener(collection);\n\n    const timeout =\n      FIRST_STATS_MIN_TIME +\n      (FIRST_STATS_MAX_TIME - FIRST_STATS_MIN_TIME) * Math.random();\n    setTimeoutNonBlocking(this.reportStats_.bind(this), Math.floor(timeout));\n  }\n\n  includeStat(stat: string) {\n    this.statsToReport_[stat] = true;\n  }\n\n  private reportStats_() {\n    const stats = this.statsListener_.get();\n    const reportedStats: typeof stats = {};\n    let haveStatsToReport = false;\n\n    each(stats, (stat: string, value: number) => {\n      if (value > 0 && contains(this.statsToReport_, stat)) {\n        reportedStats[stat] = value;\n        haveStatsToReport = true;\n      }\n    });\n\n    if (haveStatsToReport) {\n      this.server_.reportStats(reportedStats);\n    }\n\n    // queue our next run.\n    setTimeoutNonBlocking(\n      this.reportStats_.bind(this),\n      Math.floor(Math.random() * 2 * REPORT_STATS_INTERVAL)\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../util/Path';\nimport { log, logger, exceptionGuard } from '../util/util';\nimport { Event } from './Event';\n\n/**\n * The event queue serves a few purposes:\n * 1. It ensures we maintain event order in the face of event callbacks doing operations that result in more\n *    events being queued.\n * 2. raiseQueuedEvents() handles being called reentrantly nicely.  That is, if in the course of raising events,\n *    raiseQueuedEvents() is called again, the \"inner\" call will pick up raising events where the \"outer\" call\n *    left off, ensuring that the events are still raised synchronously and in order.\n * 3. You can use raiseEventsAtPath and raiseEventsForChangedPath to ensure only relevant previously-queued\n *    events are raised synchronously.\n *\n * NOTE: This can all go away if/when we move to async events.\n *\n * @constructor\n */\nexport class EventQueue {\n  /**\n   * @private\n   * @type {!Array.<EventList>}\n   */\n  private eventLists_: EventList[] = [];\n\n  /**\n   * Tracks recursion depth of raiseQueuedEvents_, for debugging purposes.\n   * @private\n   * @type {!number}\n   */\n  private recursionDepth_ = 0;\n\n  /**\n   * @param {!Array.<Event>} eventDataList The new events to queue.\n   */\n  queueEvents(eventDataList: Event[]) {\n    // We group events by path, storing them in a single EventList, to make it easier to skip over them quickly.\n    let currList = null;\n    for (let i = 0; i < eventDataList.length; i++) {\n      const eventData = eventDataList[i];\n      const eventPath = eventData.getPath();\n      if (currList !== null && !eventPath.equals(currList.getPath())) {\n        this.eventLists_.push(currList);\n        currList = null;\n      }\n\n      if (currList === null) {\n        currList = new EventList(eventPath);\n      }\n\n      currList.add(eventData);\n    }\n    if (currList) {\n      this.eventLists_.push(currList);\n    }\n  }\n\n  /**\n   * Queues the specified events and synchronously raises all events (including previously queued ones)\n   * for the specified path.\n   *\n   * It is assumed that the new events are all for the specified path.\n   *\n   * @param {!Path} path The path to raise events for.\n   * @param {!Array.<Event>} eventDataList The new events to raise.\n   */\n  raiseEventsAtPath(path: Path, eventDataList: Event[]) {\n    this.queueEvents(eventDataList);\n    this.raiseQueuedEventsMatchingPredicate_((eventPath: Path) =>\n      eventPath.equals(path)\n    );\n  }\n\n  /**\n   * Queues the specified events and synchronously raises all events (including previously queued ones) for\n   * locations related to the specified change path (i.e. all ancestors and descendants).\n   *\n   * It is assumed that the new events are all related (ancestor or descendant) to the specified path.\n   *\n   * @param {!Path} changedPath The path to raise events for.\n   * @param {!Array.<!Event>} eventDataList The events to raise\n   */\n  raiseEventsForChangedPath(changedPath: Path, eventDataList: Event[]) {\n    this.queueEvents(eventDataList);\n\n    this.raiseQueuedEventsMatchingPredicate_((eventPath: Path) => {\n      return eventPath.contains(changedPath) || changedPath.contains(eventPath);\n    });\n  }\n\n  /**\n   * @param {!function(!Path):boolean} predicate\n   * @private\n   */\n  private raiseQueuedEventsMatchingPredicate_(\n    predicate: (path: Path) => boolean\n  ) {\n    this.recursionDepth_++;\n\n    let sentAll = true;\n    for (let i = 0; i < this.eventLists_.length; i++) {\n      const eventList = this.eventLists_[i];\n      if (eventList) {\n        const eventPath = eventList.getPath();\n        if (predicate(eventPath)) {\n          this.eventLists_[i].raise();\n          this.eventLists_[i] = null;\n        } else {\n          sentAll = false;\n        }\n      }\n    }\n\n    if (sentAll) {\n      this.eventLists_ = [];\n    }\n\n    this.recursionDepth_--;\n  }\n}\n\n/**\n * @param {!Path} path\n * @constructor\n */\nexport class EventList {\n  /**\n   * @type {!Array.<Event>}\n   * @private\n   */\n  private events_: Event[] = [];\n\n  constructor(private readonly path_: Path) {}\n\n  /**\n   * @param {!Event} eventData\n   */\n  add(eventData: Event) {\n    this.events_.push(eventData);\n  }\n\n  /**\n   * Iterates through the list and raises each event\n   */\n  raise() {\n    for (let i = 0; i < this.events_.length; i++) {\n      const eventData = this.events_[i];\n      if (eventData !== null) {\n        this.events_[i] = null;\n        const eventFn = eventData.getEventRunner();\n        if (logger) {\n          log('event: ' + eventData.toString());\n        }\n        exceptionGuard(eventFn);\n      }\n    }\n  }\n\n  /**\n   * @return {!Path}\n   */\n  getPath(): Path {\n    return this.path_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\n/**\n * Base class to be used if you want to emit events. Call the constructor with\n * the set of allowed event names.\n */\nexport abstract class EventEmitter {\n  private listeners_: {\n    [eventType: string]: Array<{\n      callback(...args: any[]): void;\n      context: any;\n    }>;\n  } = {};\n\n  /**\n   * @param {!Array.<string>} allowedEvents_\n   */\n  constructor(private allowedEvents_: Array<string>) {\n    assert(\n      Array.isArray(allowedEvents_) && allowedEvents_.length > 0,\n      'Requires a non-empty array'\n    );\n  }\n\n  /**\n   * To be overridden by derived classes in order to fire an initial event when\n   * somebody subscribes for data.\n   *\n   * @param {!string} eventType\n   * @return {Array.<*>} Array of parameters to trigger initial event with.\n   */\n  abstract getInitialEvent(eventType: string): any[];\n\n  /**\n   * To be called by derived classes to trigger events.\n   * @param {!string} eventType\n   * @param {...*} var_args\n   */\n  protected trigger(eventType: string, ...var_args: any[]) {\n    if (Array.isArray(this.listeners_[eventType])) {\n      // Clone the list, since callbacks could add/remove listeners.\n      const listeners = [...this.listeners_[eventType]];\n\n      for (let i = 0; i < listeners.length; i++) {\n        listeners[i].callback.apply(listeners[i].context, var_args);\n      }\n    }\n  }\n\n  on(eventType: string, callback: (a: any) => void, context: any) {\n    this.validateEventType_(eventType);\n    this.listeners_[eventType] = this.listeners_[eventType] || [];\n    this.listeners_[eventType].push({ callback, context });\n\n    const eventData = this.getInitialEvent(eventType);\n    if (eventData) {\n      callback.apply(context, eventData);\n    }\n  }\n\n  off(eventType: string, callback: (a: any) => void, context: any) {\n    this.validateEventType_(eventType);\n    const listeners = this.listeners_[eventType] || [];\n    for (let i = 0; i < listeners.length; i++) {\n      if (\n        listeners[i].callback === callback &&\n        (!context || context === listeners[i].context)\n      ) {\n        listeners.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  private validateEventType_(eventType: string) {\n    assert(\n      this.allowedEvents_.find(function(et) {\n        return et === eventType;\n      }),\n      'Unknown event: ' + eventType\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EventEmitter } from './EventEmitter';\nimport { assert } from '@firebase/util';\n\ndeclare const document: any;\n\n/**\n * @extends {EventEmitter}\n */\nexport class VisibilityMonitor extends EventEmitter {\n  private visible_: boolean;\n\n  static getInstance() {\n    return new VisibilityMonitor();\n  }\n\n  constructor() {\n    super(['visible']);\n    let hidden: string;\n    let visibilityChange: string;\n    if (\n      typeof document !== 'undefined' &&\n      typeof document.addEventListener !== 'undefined'\n    ) {\n      if (typeof document['hidden'] !== 'undefined') {\n        // Opera 12.10 and Firefox 18 and later support\n        visibilityChange = 'visibilitychange';\n        hidden = 'hidden';\n      } else if (typeof document['mozHidden'] !== 'undefined') {\n        visibilityChange = 'mozvisibilitychange';\n        hidden = 'mozHidden';\n      } else if (typeof document['msHidden'] !== 'undefined') {\n        visibilityChange = 'msvisibilitychange';\n        hidden = 'msHidden';\n      } else if (typeof document['webkitHidden'] !== 'undefined') {\n        visibilityChange = 'webkitvisibilitychange';\n        hidden = 'webkitHidden';\n      }\n    }\n\n    // Initially, we always assume we are visible. This ensures that in browsers\n    // without page visibility support or in cases where we are never visible\n    // (e.g. chrome extension), we act as if we are visible, i.e. don't delay\n    // reconnects\n    this.visible_ = true;\n\n    if (visibilityChange) {\n      document.addEventListener(\n        visibilityChange,\n        () => {\n          const visible = !document[hidden];\n          if (visible !== this.visible_) {\n            this.visible_ = visible;\n            this.trigger('visible', visible);\n          }\n        },\n        false\n      );\n    }\n  }\n\n  /**\n   * @param {!string} eventType\n   * @return {Array.<boolean>}\n   */\n  getInitialEvent(eventType: string): boolean[] {\n    assert(eventType === 'visible', 'Unknown event type: ' + eventType);\n    return [this.visible_];\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { EventEmitter } from './EventEmitter';\nimport { isMobileCordova } from '@firebase/util';\n\n/**\n * Monitors online state (as reported by window.online/offline events).\n *\n * The expectation is that this could have many false positives (thinks we are online\n * when we're not), but no false negatives.  So we can safely use it to determine when\n * we definitely cannot reach the internet.\n *\n * @extends {EventEmitter}\n */\nexport class OnlineMonitor extends EventEmitter {\n  private online_ = true;\n\n  static getInstance() {\n    return new OnlineMonitor();\n  }\n\n  constructor() {\n    super(['online']);\n\n    // We've had repeated complaints that Cordova apps can get stuck \"offline\", e.g.\n    // https://forum.ionicframework.com/t/firebase-connection-is-lost-and-never-come-back/43810\n    // It would seem that the 'online' event does not always fire consistently. So we disable it\n    // for Cordova.\n    if (\n      typeof window !== 'undefined' &&\n      typeof window.addEventListener !== 'undefined' &&\n      !isMobileCordova()\n    ) {\n      window.addEventListener(\n        'online',\n        () => {\n          if (!this.online_) {\n            this.online_ = true;\n            this.trigger('online', true);\n          }\n        },\n        false\n      );\n\n      window.addEventListener(\n        'offline',\n        () => {\n          if (this.online_) {\n            this.online_ = false;\n            this.trigger('online', false);\n          }\n        },\n        false\n      );\n    }\n  }\n\n  /**\n   * @param {!string} eventType\n   * @return {Array.<boolean>}\n   */\n  getInitialEvent(eventType: string): boolean[] {\n    assert(eventType === 'online', 'Unknown event type: ' + eventType);\n    return [this.online_];\n  }\n\n  /**\n   * @return {boolean}\n   */\n  currentlyOnline(): boolean {\n    return this.online_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { exceptionGuard } from '../../core/util/util';\n\n/**\n * This class ensures the packets from the server arrive in order\n * This class takes data from the server and ensures it gets passed into the callbacks in order.\n * @constructor\n */\nexport class PacketReceiver {\n  pendingResponses: any[] = [];\n  currentResponseNum = 0;\n  closeAfterResponse = -1;\n  onClose: (() => void) | null = null;\n\n  /**\n   * @param onMessage_\n   */\n  constructor(private onMessage_: (a: Object) => void) {}\n\n  closeAfter(responseNum: number, callback: () => void) {\n    this.closeAfterResponse = responseNum;\n    this.onClose = callback;\n    if (this.closeAfterResponse < this.currentResponseNum) {\n      this.onClose();\n      this.onClose = null;\n    }\n  }\n\n  /**\n   * Each message from the server comes with a response number, and an array of data. The responseNumber\n   * allows us to ensure that we process them in the right order, since we can't be guaranteed that all\n   * browsers will respond in the same order as the requests we sent\n   * @param {number} requestNum\n   * @param {Array} data\n   */\n  handleResponse(requestNum: number, data: any[]) {\n    this.pendingResponses[requestNum] = data;\n    while (this.pendingResponses[this.currentResponseNum]) {\n      const toProcess = this.pendingResponses[this.currentResponseNum];\n      delete this.pendingResponses[this.currentResponseNum];\n      for (let i = 0; i < toProcess.length; ++i) {\n        if (toProcess[i]) {\n          exceptionGuard(() => {\n            this.onMessage_(toProcess[i]);\n          });\n        }\n      }\n      if (this.currentResponseNum === this.closeAfterResponse) {\n        if (this.onClose) {\n          this.onClose();\n          this.onClose = null;\n        }\n        break;\n      }\n      this.currentResponseNum++;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  executeWhenDOMReady,\n  isChromeExtensionContentScript,\n  isWindowsStoreApp,\n  log,\n  logWrapper,\n  LUIDGenerator,\n  splitStringBySize\n} from '../core/util/util';\nimport { StatsManager } from '../core/stats/StatsManager';\nimport { PacketReceiver } from './polling/PacketReceiver';\nimport {\n  FORGE_DOMAIN,\n  FORGE_REF,\n  LAST_SESSION_PARAM,\n  LONG_POLLING,\n  PROTOCOL_VERSION,\n  REFERER_PARAM,\n  TRANSPORT_SESSION_PARAM,\n  VERSION_PARAM\n} from './Constants';\nimport { base64Encode, stringify } from '@firebase/util';\nimport { isNodeSdk } from '@firebase/util';\nimport { Transport } from './Transport';\nimport { RepoInfo } from '../core/RepoInfo';\nimport { StatsCollection } from '../core/stats/StatsCollection';\n\n// URL query parameters associated with longpolling\nexport const FIREBASE_LONGPOLL_START_PARAM = 'start';\nexport const FIREBASE_LONGPOLL_CLOSE_COMMAND = 'close';\nexport const FIREBASE_LONGPOLL_COMMAND_CB_NAME = 'pLPCommand';\nexport const FIREBASE_LONGPOLL_DATA_CB_NAME = 'pRTLPCB';\nexport const FIREBASE_LONGPOLL_ID_PARAM = 'id';\nexport const FIREBASE_LONGPOLL_PW_PARAM = 'pw';\nexport const FIREBASE_LONGPOLL_SERIAL_PARAM = 'ser';\nexport const FIREBASE_LONGPOLL_CALLBACK_ID_PARAM = 'cb';\nexport const FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM = 'seg';\nexport const FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET = 'ts';\nexport const FIREBASE_LONGPOLL_DATA_PARAM = 'd';\nexport const FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM = 'disconn';\nexport const FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM = 'dframe';\n\n//Data size constants.\n//TODO: Perf: the maximum length actually differs from browser to browser.\n// We should check what browser we're on and set accordingly.\nconst MAX_URL_DATA_SIZE = 1870;\nconst SEG_HEADER_SIZE = 30; //ie: &seg=8299234&ts=982389123&d=\nconst MAX_PAYLOAD_SIZE = MAX_URL_DATA_SIZE - SEG_HEADER_SIZE;\n\n/**\n * Keepalive period\n * send a fresh request at minimum every 25 seconds. Opera has a maximum request\n * length of 30 seconds that we can't exceed.\n * @const\n * @type {number}\n */\nconst KEEPALIVE_REQUEST_INTERVAL = 25000;\n\n/**\n * How long to wait before aborting a long-polling connection attempt.\n * @const\n * @type {number}\n */\nconst LP_CONNECT_TIMEOUT = 30000;\n\n/**\n * This class manages a single long-polling connection.\n *\n * @constructor\n * @implements {Transport}\n */\nexport class BrowserPollConnection implements Transport {\n  bytesSent = 0;\n  bytesReceived = 0;\n  urlFn: (params: object) => string;\n  scriptTagHolder: FirebaseIFrameScriptHolder;\n  myDisconnFrame: HTMLIFrameElement;\n  curSegmentNum: number;\n  myPacketOrderer: PacketReceiver;\n  id: string;\n  password: string;\n  private log_: (...a: any[]) => void;\n  private stats_: StatsCollection;\n  private everConnected_ = false;\n  private isClosed_: boolean;\n  private connectTimeoutTimer_: number | null;\n  private onDisconnect_: ((a?: boolean) => void) | null;\n\n  /**\n   * @param {string} connId An identifier for this connection, used for logging\n   * @param {RepoInfo} repoInfo The info for the endpoint to send data to.\n   * @param {string=} transportSessionId Optional transportSessionid if we are reconnecting for an existing\n   *                                         transport session\n   * @param {string=}  lastSessionId Optional lastSessionId if the PersistentConnection has already created a\n   *                                     connection previously\n   */\n  constructor(\n    public connId: string,\n    public repoInfo: RepoInfo,\n    public transportSessionId?: string,\n    public lastSessionId?: string\n  ) {\n    this.log_ = logWrapper(connId);\n    this.stats_ = StatsManager.getCollection(repoInfo);\n    this.urlFn = (params: { [k: string]: string }) =>\n      repoInfo.connectionURL(LONG_POLLING, params);\n  }\n\n  /**\n   *\n   * @param {function(Object)} onMessage Callback when messages arrive\n   * @param {function()} onDisconnect Callback with connection lost.\n   */\n  open(onMessage: (msg: Object) => void, onDisconnect: (a?: boolean) => void) {\n    this.curSegmentNum = 0;\n    this.onDisconnect_ = onDisconnect;\n    this.myPacketOrderer = new PacketReceiver(onMessage);\n    this.isClosed_ = false;\n\n    this.connectTimeoutTimer_ = setTimeout(() => {\n      this.log_('Timed out trying to connect.');\n      // Make sure we clear the host cache\n      this.onClosed_();\n      this.connectTimeoutTimer_ = null;\n    }, Math.floor(LP_CONNECT_TIMEOUT)) as any;\n\n    // Ensure we delay the creation of the iframe until the DOM is loaded.\n    executeWhenDOMReady(() => {\n      if (this.isClosed_) return;\n\n      //Set up a callback that gets triggered once a connection is set up.\n      this.scriptTagHolder = new FirebaseIFrameScriptHolder(\n        (...args) => {\n          const [command, arg1, arg2, arg3, arg4] = args;\n          this.incrementIncomingBytes_(args);\n          if (!this.scriptTagHolder) return; // we closed the connection.\n\n          if (this.connectTimeoutTimer_) {\n            clearTimeout(this.connectTimeoutTimer_);\n            this.connectTimeoutTimer_ = null;\n          }\n          this.everConnected_ = true;\n          if (command == FIREBASE_LONGPOLL_START_PARAM) {\n            this.id = arg1;\n            this.password = arg2;\n          } else if (command === FIREBASE_LONGPOLL_CLOSE_COMMAND) {\n            // Don't clear the host cache. We got a response from the server, so we know it's reachable\n            if (arg1) {\n              // We aren't expecting any more data (other than what the server's already in the process of sending us\n              // through our already open polls), so don't send any more.\n              this.scriptTagHolder.sendNewPolls = false;\n\n              // arg1 in this case is the last response number sent by the server. We should try to receive\n              // all of the responses up to this one before closing\n              this.myPacketOrderer.closeAfter(arg1, () => {\n                this.onClosed_();\n              });\n            } else {\n              this.onClosed_();\n            }\n          } else {\n            throw new Error('Unrecognized command received: ' + command);\n          }\n        },\n        (...args) => {\n          const [pN, data] = args;\n          this.incrementIncomingBytes_(args);\n          this.myPacketOrderer.handleResponse(pN, data);\n        },\n        () => {\n          this.onClosed_();\n        },\n        this.urlFn\n      );\n\n      //Send the initial request to connect. The serial number is simply to keep the browser from pulling previous results\n      //from cache.\n      const urlParams: { [k: string]: string | number } = {};\n      urlParams[FIREBASE_LONGPOLL_START_PARAM] = 't';\n      urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = Math.floor(\n        Math.random() * 100000000\n      );\n      if (this.scriptTagHolder.uniqueCallbackIdentifier)\n        urlParams[\n          FIREBASE_LONGPOLL_CALLBACK_ID_PARAM\n        ] = this.scriptTagHolder.uniqueCallbackIdentifier;\n      urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\n      if (this.transportSessionId) {\n        urlParams[TRANSPORT_SESSION_PARAM] = this.transportSessionId;\n      }\n      if (this.lastSessionId) {\n        urlParams[LAST_SESSION_PARAM] = this.lastSessionId;\n      }\n      if (\n        typeof location !== 'undefined' &&\n        location.href &&\n        location.href.indexOf(FORGE_DOMAIN) !== -1\n      ) {\n        urlParams[REFERER_PARAM] = FORGE_REF;\n      }\n      const connectURL = this.urlFn(urlParams);\n      this.log_('Connecting via long-poll to ' + connectURL);\n      this.scriptTagHolder.addTag(connectURL, () => {\n        /* do nothing */\n      });\n    });\n  }\n\n  /**\n   * Call this when a handshake has completed successfully and we want to consider the connection established\n   */\n  start() {\n    this.scriptTagHolder.startLongPoll(this.id, this.password);\n    this.addDisconnectPingFrame(this.id, this.password);\n  }\n\n  private static forceAllow_: boolean;\n\n  /**\n   * Forces long polling to be considered as a potential transport\n   */\n  static forceAllow() {\n    BrowserPollConnection.forceAllow_ = true;\n  }\n\n  private static forceDisallow_: boolean;\n\n  /**\n   * Forces longpolling to not be considered as a potential transport\n   */\n  static forceDisallow() {\n    BrowserPollConnection.forceDisallow_ = true;\n  }\n\n  // Static method, use string literal so it can be accessed in a generic way\n  static isAvailable() {\n    if (isNodeSdk()) {\n      return false;\n    } else if (BrowserPollConnection.forceAllow_) {\n      return true;\n    } else {\n      // NOTE: In React-Native there's normally no 'document', but if you debug a React-Native app in\n      // the Chrome debugger, 'document' is defined, but document.createElement is null (2015/06/08).\n      return (\n        !BrowserPollConnection.forceDisallow_ &&\n        typeof document !== 'undefined' &&\n        document.createElement != null &&\n        !isChromeExtensionContentScript() &&\n        !isWindowsStoreApp()\n      );\n    }\n  }\n\n  /**\n   * No-op for polling\n   */\n  markConnectionHealthy() {}\n\n  /**\n   * Stops polling and cleans up the iframe\n   * @private\n   */\n  private shutdown_() {\n    this.isClosed_ = true;\n\n    if (this.scriptTagHolder) {\n      this.scriptTagHolder.close();\n      this.scriptTagHolder = null;\n    }\n\n    //remove the disconnect frame, which will trigger an XHR call to the server to tell it we're leaving.\n    if (this.myDisconnFrame) {\n      document.body.removeChild(this.myDisconnFrame);\n      this.myDisconnFrame = null;\n    }\n\n    if (this.connectTimeoutTimer_) {\n      clearTimeout(this.connectTimeoutTimer_);\n      this.connectTimeoutTimer_ = null;\n    }\n  }\n\n  /**\n   * Triggered when this transport is closed\n   * @private\n   */\n  private onClosed_() {\n    if (!this.isClosed_) {\n      this.log_('Longpoll is closing itself');\n      this.shutdown_();\n\n      if (this.onDisconnect_) {\n        this.onDisconnect_(this.everConnected_);\n        this.onDisconnect_ = null;\n      }\n    }\n  }\n\n  /**\n   * External-facing close handler. RealTime has requested we shut down. Kill our connection and tell the server\n   * that we've left.\n   */\n  close() {\n    if (!this.isClosed_) {\n      this.log_('Longpoll is being closed.');\n      this.shutdown_();\n    }\n  }\n\n  /**\n   * Send the JSON object down to the server. It will need to be stringified, base64 encoded, and then\n   * broken into chunks (since URLs have a small maximum length).\n   * @param {!Object} data The JSON data to transmit.\n   */\n  send(data: Object) {\n    const dataStr = stringify(data);\n    this.bytesSent += dataStr.length;\n    this.stats_.incrementCounter('bytes_sent', dataStr.length);\n\n    //first, lets get the base64-encoded data\n    const base64data = base64Encode(dataStr);\n\n    //We can only fit a certain amount in each URL, so we need to split this request\n    //up into multiple pieces if it doesn't fit in one request.\n    const dataSegs = splitStringBySize(base64data, MAX_PAYLOAD_SIZE);\n\n    //Enqueue each segment for transmission. We assign each chunk a sequential ID and a total number\n    //of segments so that we can reassemble the packet on the server.\n    for (let i = 0; i < dataSegs.length; i++) {\n      this.scriptTagHolder.enqueueSegment(\n        this.curSegmentNum,\n        dataSegs.length,\n        dataSegs[i]\n      );\n      this.curSegmentNum++;\n    }\n  }\n\n  /**\n   * This is how we notify the server that we're leaving.\n   * We aren't able to send requests with DHTML on a window close event, but we can\n   * trigger XHR requests in some browsers (everything but Opera basically).\n   * @param {!string} id\n   * @param {!string} pw\n   */\n  addDisconnectPingFrame(id: string, pw: string) {\n    if (isNodeSdk()) return;\n    this.myDisconnFrame = document.createElement('iframe');\n    const urlParams: { [k: string]: string } = {};\n    urlParams[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM] = 't';\n    urlParams[FIREBASE_LONGPOLL_ID_PARAM] = id;\n    urlParams[FIREBASE_LONGPOLL_PW_PARAM] = pw;\n    this.myDisconnFrame.src = this.urlFn(urlParams);\n    this.myDisconnFrame.style.display = 'none';\n\n    document.body.appendChild(this.myDisconnFrame);\n  }\n\n  /**\n   * Used to track the bytes received by this client\n   * @param {*} args\n   * @private\n   */\n  private incrementIncomingBytes_(args: any) {\n    // TODO: This is an annoying perf hit just to track the number of incoming bytes.  Maybe it should be opt-in.\n    const bytesReceived = stringify(args).length;\n    this.bytesReceived += bytesReceived;\n    this.stats_.incrementCounter('bytes_received', bytesReceived);\n  }\n}\n\nexport interface IFrameElement extends HTMLIFrameElement {\n  doc: Document;\n}\n\n/*********************************************************************************************\n * A wrapper around an iframe that is used as a long-polling script holder.\n * @constructor\n *********************************************************************************************/\nexport class FirebaseIFrameScriptHolder {\n  //We maintain a count of all of the outstanding requests, because if we have too many active at once it can cause\n  //problems in some browsers.\n  outstandingRequests = new Set<number>();\n\n  //A queue of the pending segments waiting for transmission to the server.\n  pendingSegs: { seg: number; ts: number; d: any }[] = [];\n\n  //A serial number. We use this for two things:\n  // 1) A way to ensure the browser doesn't cache responses to polls\n  // 2) A way to make the server aware when long-polls arrive in a different order than we started them. The\n  //    server needs to release both polls in this case or it will cause problems in Opera since Opera can only execute\n  //    JSONP code in the order it was added to the iframe.\n  currentSerial = Math.floor(Math.random() * 100000000);\n\n  // This gets set to false when we're \"closing down\" the connection (e.g. we're switching transports but there's still\n  // incoming data from the server that we're waiting for).\n  sendNewPolls = true;\n\n  uniqueCallbackIdentifier: number;\n  myIFrame: IFrameElement;\n  alive: boolean;\n  myID: string;\n  myPW: string;\n  commandCB: (command: string, ...args: any[]) => void;\n  onMessageCB: (...args: any[]) => void;\n\n  /**\n   * @param commandCB - The callback to be called when control commands are recevied from the server.\n   * @param onMessageCB - The callback to be triggered when responses arrive from the server.\n   * @param onDisconnect - The callback to be triggered when this tag holder is closed\n   * @param urlFn - A function that provides the URL of the endpoint to send data to.\n   */\n  constructor(\n    commandCB: (command: string, ...args: any[]) => void,\n    onMessageCB: (...args: any[]) => void,\n    public onDisconnect: () => void,\n    public urlFn: (a: object) => string\n  ) {\n    if (!isNodeSdk()) {\n      //Each script holder registers a couple of uniquely named callbacks with the window. These are called from the\n      //iframes where we put the long-polling script tags. We have two callbacks:\n      //   1) Command Callback - Triggered for control issues, like starting a connection.\n      //   2) Message Callback - Triggered when new data arrives.\n      this.uniqueCallbackIdentifier = LUIDGenerator();\n      (window as any)[\n        FIREBASE_LONGPOLL_COMMAND_CB_NAME + this.uniqueCallbackIdentifier\n      ] = commandCB;\n      (window as any)[\n        FIREBASE_LONGPOLL_DATA_CB_NAME + this.uniqueCallbackIdentifier\n      ] = onMessageCB;\n\n      //Create an iframe for us to add script tags to.\n      this.myIFrame = FirebaseIFrameScriptHolder.createIFrame_();\n\n      // Set the iframe's contents.\n      let script = '';\n      // if we set a javascript url, it's IE and we need to set the document domain. The javascript url is sufficient\n      // for ie9, but ie8 needs to do it again in the document itself.\n      if (\n        this.myIFrame.src &&\n        this.myIFrame.src.substr(0, 'javascript:'.length) === 'javascript:'\n      ) {\n        const currentDomain = document.domain;\n        script = '<script>document.domain=\"' + currentDomain + '\";</script>';\n      }\n      const iframeContents = '<html><body>' + script + '</body></html>';\n      try {\n        this.myIFrame.doc.open();\n        this.myIFrame.doc.write(iframeContents);\n        this.myIFrame.doc.close();\n      } catch (e) {\n        log('frame writing exception');\n        if (e.stack) {\n          log(e.stack);\n        }\n        log(e);\n      }\n    } else {\n      this.commandCB = commandCB;\n      this.onMessageCB = onMessageCB;\n    }\n  }\n\n  /**\n   * Each browser has its own funny way to handle iframes. Here we mush them all together into one object that I can\n   * actually use.\n   * @private\n   * @return {Element}\n   */\n  private static createIFrame_(): IFrameElement {\n    const iframe = document.createElement('iframe') as IFrameElement;\n    iframe.style.display = 'none';\n\n    // This is necessary in order to initialize the document inside the iframe\n    if (document.body) {\n      document.body.appendChild(iframe);\n      try {\n        // If document.domain has been modified in IE, this will throw an error, and we need to set the\n        // domain of the iframe's document manually. We can do this via a javascript: url as the src attribute\n        // Also note that we must do this *after* the iframe has been appended to the page. Otherwise it doesn't work.\n        const a = iframe.contentWindow.document;\n        if (!a) {\n          // Apologies for the log-spam, I need to do something to keep closure from optimizing out the assignment above.\n          log('No IE domain setting required');\n        }\n      } catch (e) {\n        const domain = document.domain;\n        iframe.src =\n          \"javascript:void((function(){document.open();document.domain='\" +\n          domain +\n          \"';document.close();})())\";\n      }\n    } else {\n      // LongPollConnection attempts to delay initialization until the document is ready, so hopefully this\n      // never gets hit.\n      throw 'Document body has not initialized. Wait to initialize Firebase until after the document is ready.';\n    }\n\n    // Get the document of the iframe in a browser-specific way.\n    if (iframe.contentDocument) {\n      (iframe as any).doc = iframe.contentDocument; // Firefox, Opera, Safari\n    } else if (iframe.contentWindow) {\n      (iframe as any).doc = iframe.contentWindow.document; // Internet Explorer\n    } else if ((iframe as any).document) {\n      (iframe as any).doc = (iframe as any).document; //others?\n    }\n\n    return iframe;\n  }\n\n  /**\n   * Cancel all outstanding queries and remove the frame.\n   */\n  close() {\n    //Mark this iframe as dead, so no new requests are sent.\n    this.alive = false;\n\n    if (this.myIFrame) {\n      //We have to actually remove all of the html inside this iframe before removing it from the\n      //window, or IE will continue loading and executing the script tags we've already added, which\n      //can lead to some errors being thrown. Setting innerHTML seems to be the easiest way to do this.\n      this.myIFrame.doc.body.innerHTML = '';\n      setTimeout(() => {\n        if (this.myIFrame !== null) {\n          document.body.removeChild(this.myIFrame);\n          this.myIFrame = null;\n        }\n      }, Math.floor(0));\n    }\n\n    // Protect from being called recursively.\n    const onDisconnect = this.onDisconnect;\n    if (onDisconnect) {\n      this.onDisconnect = null;\n      onDisconnect();\n    }\n  }\n\n  /**\n   * Actually start the long-polling session by adding the first script tag(s) to the iframe.\n   * @param {!string} id - The ID of this connection\n   * @param {!string} pw - The password for this connection\n   */\n  startLongPoll(id: string, pw: string) {\n    this.myID = id;\n    this.myPW = pw;\n    this.alive = true;\n\n    //send the initial request. If there are requests queued, make sure that we transmit as many as we are currently able to.\n    while (this.newRequest_()) {}\n  }\n\n  /**\n   * This is called any time someone might want a script tag to be added. It adds a script tag when there aren't\n   * too many outstanding requests and we are still alive.\n   *\n   * If there are outstanding packet segments to send, it sends one. If there aren't, it sends a long-poll anyways if\n   * needed.\n   */\n  private newRequest_() {\n    // We keep one outstanding request open all the time to receive data, but if we need to send data\n    // (pendingSegs.length > 0) then we create a new request to send the data.  The server will automatically\n    // close the old request.\n    if (\n      this.alive &&\n      this.sendNewPolls &&\n      this.outstandingRequests.size < (this.pendingSegs.length > 0 ? 2 : 1)\n    ) {\n      //construct our url\n      this.currentSerial++;\n      const urlParams: { [k: string]: string | number } = {};\n      urlParams[FIREBASE_LONGPOLL_ID_PARAM] = this.myID;\n      urlParams[FIREBASE_LONGPOLL_PW_PARAM] = this.myPW;\n      urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = this.currentSerial;\n      let theURL = this.urlFn(urlParams);\n      //Now add as much data as we can.\n      let curDataString = '';\n      let i = 0;\n\n      while (this.pendingSegs.length > 0) {\n        //first, lets see if the next segment will fit.\n        const nextSeg = this.pendingSegs[0];\n        if (\n          nextSeg.d.length + SEG_HEADER_SIZE + curDataString.length <=\n          MAX_URL_DATA_SIZE\n        ) {\n          //great, the segment will fit. Lets append it.\n          const theSeg = this.pendingSegs.shift();\n          curDataString =\n            curDataString +\n            '&' +\n            FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM +\n            i +\n            '=' +\n            theSeg.seg +\n            '&' +\n            FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET +\n            i +\n            '=' +\n            theSeg.ts +\n            '&' +\n            FIREBASE_LONGPOLL_DATA_PARAM +\n            i +\n            '=' +\n            theSeg.d;\n          i++;\n        } else {\n          break;\n        }\n      }\n\n      theURL = theURL + curDataString;\n      this.addLongPollTag_(theURL, this.currentSerial);\n\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Queue a packet for transmission to the server.\n   * @param segnum - A sequential id for this packet segment used for reassembly\n   * @param totalsegs - The total number of segments in this packet\n   * @param data - The data for this segment.\n   */\n  enqueueSegment(segnum: number, totalsegs: number, data: any) {\n    //add this to the queue of segments to send.\n    this.pendingSegs.push({ seg: segnum, ts: totalsegs, d: data });\n\n    //send the data immediately if there isn't already data being transmitted, unless\n    //startLongPoll hasn't been called yet.\n    if (this.alive) {\n      this.newRequest_();\n    }\n  }\n\n  /**\n   * Add a script tag for a regular long-poll request.\n   * @param {!string} url - The URL of the script tag.\n   * @param {!number} serial - The serial number of the request.\n   * @private\n   */\n  private addLongPollTag_(url: string, serial: number) {\n    //remember that we sent this request.\n    this.outstandingRequests.add(serial);\n\n    const doNewRequest = () => {\n      this.outstandingRequests.delete(serial);\n      this.newRequest_();\n    };\n\n    // If this request doesn't return on its own accord (by the server sending us some data), we'll\n    // create a new one after the KEEPALIVE interval to make sure we always keep a fresh request open.\n    const keepaliveTimeout = setTimeout(\n      doNewRequest,\n      Math.floor(KEEPALIVE_REQUEST_INTERVAL)\n    );\n\n    const readyStateCB = () => {\n      // Request completed.  Cancel the keepalive.\n      clearTimeout(keepaliveTimeout);\n\n      // Trigger a new request so we can continue receiving data.\n      doNewRequest();\n    };\n\n    this.addTag(url, readyStateCB);\n  }\n\n  /**\n   * Add an arbitrary script tag to the iframe.\n   * @param {!string} url - The URL for the script tag source.\n   * @param {!function()} loadCB - A callback to be triggered once the script has loaded.\n   */\n  addTag(url: string, loadCB: () => void) {\n    if (isNodeSdk()) {\n      (this as any).doNodeLongPoll(url, loadCB);\n    } else {\n      setTimeout(() => {\n        try {\n          // if we're already closed, don't add this poll\n          if (!this.sendNewPolls) return;\n          const newScript = this.myIFrame.doc.createElement('script');\n          newScript.type = 'text/javascript';\n          newScript.async = true;\n          newScript.src = url;\n          newScript.onload = (newScript as any).onreadystatechange = function() {\n            const rstate = (newScript as any).readyState;\n            if (!rstate || rstate === 'loaded' || rstate === 'complete') {\n              newScript.onload = (newScript as any).onreadystatechange = null;\n              if (newScript.parentNode) {\n                newScript.parentNode.removeChild(newScript);\n              }\n              loadCB();\n            }\n          };\n          newScript.onerror = () => {\n            log('Long-poll script failed to load: ' + url);\n            this.sendNewPolls = false;\n            this.close();\n          };\n          this.myIFrame.doc.body.appendChild(newScript);\n        } catch (e) {\n          // TODO: we should make this error visible somehow\n        }\n      }, Math.floor(1));\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** The semver (www.semver.org) version of the SDK. */\nexport let SDK_VERSION = '';\n\n// SDK_VERSION should be set before any database instance is created\nexport function setSDKVersion(version: string): void {\n  SDK_VERSION = version;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RepoInfo } from '../core/RepoInfo';\n\ndeclare const MozWebSocket: any;\n\nimport { assert, CONSTANTS as ENV_CONSTANTS } from '@firebase/util';\nimport { logWrapper, splitStringBySize } from '../core/util/util';\nimport { StatsManager } from '../core/stats/StatsManager';\nimport {\n  FORGE_DOMAIN,\n  FORGE_REF,\n  LAST_SESSION_PARAM,\n  PROTOCOL_VERSION,\n  REFERER_PARAM,\n  TRANSPORT_SESSION_PARAM,\n  VERSION_PARAM,\n  WEBSOCKET\n} from './Constants';\nimport { PersistentStorage } from '../core/storage/storage';\nimport { jsonEval, stringify } from '@firebase/util';\nimport { isNodeSdk } from '@firebase/util';\nimport { Transport } from './Transport';\nimport { StatsCollection } from '../core/stats/StatsCollection';\nimport { SDK_VERSION } from '../core/version';\n\nconst WEBSOCKET_MAX_FRAME_SIZE = 16384;\nconst WEBSOCKET_KEEPALIVE_INTERVAL = 45000;\n\nlet WebSocketImpl = null;\nif (typeof MozWebSocket !== 'undefined') {\n  WebSocketImpl = MozWebSocket;\n} else if (typeof WebSocket !== 'undefined') {\n  WebSocketImpl = WebSocket;\n}\n\nexport function setWebSocketImpl(impl) {\n  WebSocketImpl = impl;\n}\n\n/**\n * Create a new websocket connection with the given callbacks.\n * @constructor\n * @implements {Transport}\n */\nexport class WebSocketConnection implements Transport {\n  keepaliveTimer: number | null = null;\n  frames: string[] | null = null;\n  totalFrames = 0;\n  bytesSent = 0;\n  bytesReceived = 0;\n  connURL: string;\n  onDisconnect: (a?: boolean) => void;\n  onMessage: (msg: Object) => void;\n  mySock: any | null;\n  private log_: (...a: any[]) => void;\n  private stats_: StatsCollection;\n  private everConnected_: boolean;\n  private isClosed_: boolean;\n\n  /**\n   * @param {string} connId identifier for this transport\n   * @param {RepoInfo} repoInfo The info for the websocket endpoint.\n   * @param {string=} transportSessionId Optional transportSessionId if this is connecting to an existing transport\n   *                                         session\n   * @param {string=} lastSessionId Optional lastSessionId if there was a previous connection\n   */\n  constructor(\n    public connId: string,\n    repoInfo: RepoInfo,\n    transportSessionId?: string,\n    lastSessionId?: string\n  ) {\n    this.log_ = logWrapper(this.connId);\n    this.stats_ = StatsManager.getCollection(repoInfo);\n    this.connURL = WebSocketConnection.connectionURL_(\n      repoInfo,\n      transportSessionId,\n      lastSessionId\n    );\n  }\n\n  /**\n   * @param {RepoInfo} repoInfo The info for the websocket endpoint.\n   * @param {string=} transportSessionId Optional transportSessionId if this is connecting to an existing transport\n   *                                         session\n   * @param {string=} lastSessionId Optional lastSessionId if there was a previous connection\n   * @return {string} connection url\n   * @private\n   */\n  private static connectionURL_(\n    repoInfo: RepoInfo,\n    transportSessionId?: string,\n    lastSessionId?: string\n  ): string {\n    const urlParams: { [k: string]: string } = {};\n    urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\n\n    if (\n      !isNodeSdk() &&\n      typeof location !== 'undefined' &&\n      location.href &&\n      location.href.indexOf(FORGE_DOMAIN) !== -1\n    ) {\n      urlParams[REFERER_PARAM] = FORGE_REF;\n    }\n    if (transportSessionId) {\n      urlParams[TRANSPORT_SESSION_PARAM] = transportSessionId;\n    }\n    if (lastSessionId) {\n      urlParams[LAST_SESSION_PARAM] = lastSessionId;\n    }\n    return repoInfo.connectionURL(WEBSOCKET, urlParams);\n  }\n\n  /**\n   *\n   * @param onMessage Callback when messages arrive\n   * @param onDisconnect Callback with connection lost.\n   */\n  open(onMessage: (msg: Object) => void, onDisconnect: (a?: boolean) => void) {\n    this.onDisconnect = onDisconnect;\n    this.onMessage = onMessage;\n\n    this.log_('Websocket connecting to ' + this.connURL);\n\n    this.everConnected_ = false;\n    // Assume failure until proven otherwise.\n    PersistentStorage.set('previous_websocket_failure', true);\n\n    try {\n      if (isNodeSdk()) {\n        const device = ENV_CONSTANTS.NODE_ADMIN ? 'AdminNode' : 'Node';\n        // UA Format: Firebase/<wire_protocol>/<sdk_version>/<platform>/<device>\n        const options: { [k: string]: object } = {\n          headers: {\n            'User-Agent': `Firebase/${PROTOCOL_VERSION}/${SDK_VERSION}/${process.platform}/${device}`\n          }\n        };\n\n        // Plumb appropriate http_proxy environment variable into faye-websocket if it exists.\n        const env = process['env'];\n        const proxy =\n          this.connURL.indexOf('wss://') == 0\n            ? env['HTTPS_PROXY'] || env['https_proxy']\n            : env['HTTP_PROXY'] || env['http_proxy'];\n\n        if (proxy) {\n          options['proxy'] = { origin: proxy };\n        }\n\n        this.mySock = new WebSocketImpl(this.connURL, [], options);\n      } else {\n        this.mySock = new WebSocketImpl(this.connURL);\n      }\n    } catch (e) {\n      this.log_('Error instantiating WebSocket.');\n      const error = e.message || e.data;\n      if (error) {\n        this.log_(error);\n      }\n      this.onClosed_();\n      return;\n    }\n\n    this.mySock.onopen = () => {\n      this.log_('Websocket connected.');\n      this.everConnected_ = true;\n    };\n\n    this.mySock.onclose = () => {\n      this.log_('Websocket connection was disconnected.');\n      this.mySock = null;\n      this.onClosed_();\n    };\n\n    this.mySock.onmessage = (m: object) => {\n      this.handleIncomingFrame(m);\n    };\n\n    this.mySock.onerror = (e: any) => {\n      this.log_('WebSocket error.  Closing connection.');\n      const error = e.message || e.data;\n      if (error) {\n        this.log_(error);\n      }\n      this.onClosed_();\n    };\n  }\n\n  /**\n   * No-op for websockets, we don't need to do anything once the connection is confirmed as open\n   */\n  start() {}\n\n  static forceDisallow_: Boolean;\n\n  static forceDisallow() {\n    WebSocketConnection.forceDisallow_ = true;\n  }\n\n  static isAvailable(): boolean {\n    let isOldAndroid = false;\n    if (typeof navigator !== 'undefined' && navigator.userAgent) {\n      const oldAndroidRegex = /Android ([0-9]{0,}\\.[0-9]{0,})/;\n      const oldAndroidMatch = navigator.userAgent.match(oldAndroidRegex);\n      if (oldAndroidMatch && oldAndroidMatch.length > 1) {\n        if (parseFloat(oldAndroidMatch[1]) < 4.4) {\n          isOldAndroid = true;\n        }\n      }\n    }\n\n    return (\n      !isOldAndroid &&\n      WebSocketImpl !== null &&\n      !WebSocketConnection.forceDisallow_\n    );\n  }\n\n  /**\n   * Number of response before we consider the connection \"healthy.\"\n   * @type {number}\n   */\n  static responsesRequiredToBeHealthy = 2;\n\n  /**\n   * Time to wait for the connection te become healthy before giving up.\n   * @type {number}\n   */\n  static healthyTimeout = 30000;\n\n  /**\n   * Returns true if we previously failed to connect with this transport.\n   * @return {boolean}\n   */\n  static previouslyFailed(): boolean {\n    // If our persistent storage is actually only in-memory storage,\n    // we default to assuming that it previously failed to be safe.\n    return (\n      PersistentStorage.isInMemoryStorage ||\n      PersistentStorage.get('previous_websocket_failure') === true\n    );\n  }\n\n  markConnectionHealthy() {\n    PersistentStorage.remove('previous_websocket_failure');\n  }\n\n  private appendFrame_(data: string) {\n    this.frames.push(data);\n    if (this.frames.length == this.totalFrames) {\n      const fullMess = this.frames.join('');\n      this.frames = null;\n      const jsonMess = jsonEval(fullMess) as object;\n\n      //handle the message\n      this.onMessage(jsonMess);\n    }\n  }\n\n  /**\n   * @param {number} frameCount The number of frames we are expecting from the server\n   * @private\n   */\n  private handleNewFrameCount_(frameCount: number) {\n    this.totalFrames = frameCount;\n    this.frames = [];\n  }\n\n  /**\n   * Attempts to parse a frame count out of some text. If it can't, assumes a value of 1\n   * @param {!String} data\n   * @return {?String} Any remaining data to be process, or null if there is none\n   * @private\n   */\n  private extractFrameCount_(data: string): string | null {\n    assert(this.frames === null, 'We already have a frame buffer');\n    // TODO: The server is only supposed to send up to 9999 frames (i.e. length <= 4), but that isn't being enforced\n    // currently.  So allowing larger frame counts (length <= 6).  See https://app.asana.com/0/search/8688598998380/8237608042508\n    if (data.length <= 6) {\n      const frameCount = Number(data);\n      if (!isNaN(frameCount)) {\n        this.handleNewFrameCount_(frameCount);\n        return null;\n      }\n    }\n    this.handleNewFrameCount_(1);\n    return data;\n  }\n\n  /**\n   * Process a websocket frame that has arrived from the server.\n   * @param mess The frame data\n   */\n  handleIncomingFrame(mess: { [k: string]: any }) {\n    if (this.mySock === null) return; // Chrome apparently delivers incoming packets even after we .close() the connection sometimes.\n    const data = mess['data'] as string;\n    this.bytesReceived += data.length;\n    this.stats_.incrementCounter('bytes_received', data.length);\n\n    this.resetKeepAlive();\n\n    if (this.frames !== null) {\n      // we're buffering\n      this.appendFrame_(data);\n    } else {\n      // try to parse out a frame count, otherwise, assume 1 and process it\n      const remainingData = this.extractFrameCount_(data);\n      if (remainingData !== null) {\n        this.appendFrame_(remainingData);\n      }\n    }\n  }\n\n  /**\n   * Send a message to the server\n   * @param {Object} data The JSON object to transmit\n   */\n  send(data: Object) {\n    this.resetKeepAlive();\n\n    const dataStr = stringify(data);\n    this.bytesSent += dataStr.length;\n    this.stats_.incrementCounter('bytes_sent', dataStr.length);\n\n    //We can only fit a certain amount in each websocket frame, so we need to split this request\n    //up into multiple pieces if it doesn't fit in one request.\n\n    const dataSegs = splitStringBySize(dataStr, WEBSOCKET_MAX_FRAME_SIZE);\n\n    //Send the length header\n    if (dataSegs.length > 1) {\n      this.sendString_(String(dataSegs.length));\n    }\n\n    //Send the actual data in segments.\n    for (let i = 0; i < dataSegs.length; i++) {\n      this.sendString_(dataSegs[i]);\n    }\n  }\n\n  private shutdown_() {\n    this.isClosed_ = true;\n    if (this.keepaliveTimer) {\n      clearInterval(this.keepaliveTimer);\n      this.keepaliveTimer = null;\n    }\n\n    if (this.mySock) {\n      this.mySock.close();\n      this.mySock = null;\n    }\n  }\n\n  private onClosed_() {\n    if (!this.isClosed_) {\n      this.log_('WebSocket is closing itself');\n      this.shutdown_();\n\n      // since this is an internal close, trigger the close listener\n      if (this.onDisconnect) {\n        this.onDisconnect(this.everConnected_);\n        this.onDisconnect = null;\n      }\n    }\n  }\n\n  /**\n   * External-facing close handler.\n   * Close the websocket and kill the connection.\n   */\n  close() {\n    if (!this.isClosed_) {\n      this.log_('WebSocket is being closed');\n      this.shutdown_();\n    }\n  }\n\n  /**\n   * Kill the current keepalive timer and start a new one, to ensure that it always fires N seconds after\n   * the last activity.\n   */\n  resetKeepAlive() {\n    clearInterval(this.keepaliveTimer);\n    this.keepaliveTimer = setInterval(() => {\n      //If there has been no websocket activity for a while, send a no-op\n      if (this.mySock) {\n        this.sendString_('0');\n      }\n      this.resetKeepAlive();\n    }, Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL)) as any;\n  }\n\n  /**\n   * Send a string over the websocket.\n   *\n   * @param {string} str String to send.\n   * @private\n   */\n  private sendString_(str: string) {\n    // Firefox seems to sometimes throw exceptions (NS_ERROR_UNEXPECTED) from websocket .send()\n    // calls for some unknown reason.  We treat these as an error and disconnect.\n    // See https://app.asana.com/0/58926111402292/68021340250410\n    try {\n      this.mySock.send(str);\n    } catch (e) {\n      this.log_(\n        'Exception thrown from WebSocket.send():',\n        e.message || e.data,\n        'Closing connection.'\n      );\n      setTimeout(this.onClosed_.bind(this), 0);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BrowserPollConnection } from './BrowserPollConnection';\nimport { WebSocketConnection } from './WebSocketConnection';\nimport { warn, each } from '../core/util/util';\nimport { TransportConstructor } from './Transport';\nimport { RepoInfo } from '../core/RepoInfo';\n\n/**\n * Currently simplistic, this class manages what transport a Connection should use at various stages of its\n * lifecycle.\n *\n * It starts with longpolling in a browser, and httppolling on node. It then upgrades to websockets if\n * they are available.\n * @constructor\n */\nexport class TransportManager {\n  private transports_: TransportConstructor[];\n\n  /**\n   * @const\n   * @type {!Array.<function(new:Transport, string, RepoInfo, string=)>}\n   */\n  static get ALL_TRANSPORTS() {\n    return [BrowserPollConnection, WebSocketConnection];\n  }\n\n  /**\n   * @param {!RepoInfo} repoInfo Metadata around the namespace we're connecting to\n   */\n  constructor(repoInfo: RepoInfo) {\n    this.initTransports_(repoInfo);\n  }\n\n  /**\n   * @param {!RepoInfo} repoInfo\n   * @private\n   */\n  private initTransports_(repoInfo: RepoInfo) {\n    const isWebSocketsAvailable: boolean =\n      WebSocketConnection && WebSocketConnection['isAvailable']();\n    let isSkipPollConnection =\n      isWebSocketsAvailable && !WebSocketConnection.previouslyFailed();\n\n    if (repoInfo.webSocketOnly) {\n      if (!isWebSocketsAvailable)\n        warn(\n          \"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\"\n        );\n\n      isSkipPollConnection = true;\n    }\n\n    if (isSkipPollConnection) {\n      this.transports_ = [WebSocketConnection];\n    } else {\n      const transports = (this.transports_ = [] as TransportConstructor[]);\n      for (const transport of TransportManager.ALL_TRANSPORTS) {\n        if (transport && transport['isAvailable']()) {\n          transports.push(transport);\n        }\n      }\n    }\n  }\n\n  /**\n   * @return {function(new:Transport, !string, !RepoInfo, string=, string=)} The constructor for the\n   * initial transport to use\n   */\n  initialTransport(): TransportConstructor {\n    if (this.transports_.length > 0) {\n      return this.transports_[0];\n    } else {\n      throw new Error('No transports available');\n    }\n  }\n\n  /**\n   * @return {?function(new:Transport, function(),function(), string=)} The constructor for the next\n   * transport, or null\n   */\n  upgradeTransport(): TransportConstructor | null {\n    if (this.transports_.length > 1) {\n      return this.transports_[1];\n    } else {\n      return null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  error,\n  logWrapper,\n  requireKey,\n  setTimeoutNonBlocking,\n  warn\n} from '../core/util/util';\nimport { PersistentStorage } from '../core/storage/storage';\nimport { PROTOCOL_VERSION } from './Constants';\nimport { TransportManager } from './TransportManager';\nimport { RepoInfo } from '../core/RepoInfo';\nimport { Transport, TransportConstructor } from './Transport';\n\n// Abort upgrade attempt if it takes longer than 60s.\nconst UPGRADE_TIMEOUT = 60000;\n\n// For some transports (WebSockets), we need to \"validate\" the transport by exchanging a few requests and responses.\n// If we haven't sent enough requests within 5s, we'll start sending noop ping requests.\nconst DELAY_BEFORE_SENDING_EXTRA_REQUESTS = 5000;\n\n// If the initial data sent triggers a lot of bandwidth (i.e. it's a large put or a listen for a large amount of data)\n// then we may not be able to exchange our ping/pong requests within the healthy timeout.  So if we reach the timeout\n// but we've sent/received enough bytes, we don't cancel the connection.\nconst BYTES_SENT_HEALTHY_OVERRIDE = 10 * 1024;\nconst BYTES_RECEIVED_HEALTHY_OVERRIDE = 100 * 1024;\n\nconst enum RealtimeState {\n  CONNECTING,\n  CONNECTED,\n  DISCONNECTED\n}\n\nconst MESSAGE_TYPE = 't';\nconst MESSAGE_DATA = 'd';\nconst CONTROL_SHUTDOWN = 's';\nconst CONTROL_RESET = 'r';\nconst CONTROL_ERROR = 'e';\nconst CONTROL_PONG = 'o';\nconst SWITCH_ACK = 'a';\nconst END_TRANSMISSION = 'n';\nconst PING = 'p';\n\nconst SERVER_HELLO = 'h';\n\n/**\n * Creates a new real-time connection to the server using whichever method works\n * best in the current browser.\n *\n * @constructor\n */\nexport class Connection {\n  connectionCount = 0;\n  pendingDataMessages: any[] = [];\n  sessionId: string;\n\n  private conn_: Transport;\n  private healthyTimeout_: number;\n  private isHealthy_: boolean;\n  private log_: (...args: any[]) => void;\n  private primaryResponsesRequired_: number;\n  private rx_: Transport;\n  private secondaryConn_: Transport;\n  private secondaryResponsesRequired_: number;\n  private state_ = RealtimeState.CONNECTING;\n  private transportManager_: TransportManager;\n  private tx_: Transport;\n\n  /**\n   * @param {!string} id - an id for this connection\n   * @param {!RepoInfo} repoInfo_ - the info for the endpoint to connect to\n   * @param {function(Object)} onMessage_ - the callback to be triggered when a server-push message arrives\n   * @param {function(number, string)} onReady_ - the callback to be triggered when this connection is ready to send messages.\n   * @param {function()} onDisconnect_ - the callback to be triggered when a connection was lost\n   * @param {function(string)} onKill_ - the callback to be triggered when this connection has permanently shut down.\n   * @param {string=} lastSessionId - last session id in persistent connection. is used to clean up old session in real-time server\n   */\n  constructor(\n    public id: string,\n    private repoInfo_: RepoInfo,\n    private onMessage_: (a: Object) => void,\n    private onReady_: (a: number, b: string) => void,\n    private onDisconnect_: () => void,\n    private onKill_: (a: string) => void,\n    public lastSessionId?: string\n  ) {\n    this.log_ = logWrapper('c:' + this.id + ':');\n    this.transportManager_ = new TransportManager(repoInfo_);\n    this.log_('Connection created');\n    this.start_();\n  }\n\n  /**\n   * Starts a connection attempt\n   * @private\n   */\n  private start_() {\n    const conn = this.transportManager_.initialTransport();\n    this.conn_ = new conn(\n      this.nextTransportId_(),\n      this.repoInfo_,\n      undefined,\n      this.lastSessionId\n    );\n\n    // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\n    // can consider the transport healthy.\n    this.primaryResponsesRequired_ = conn['responsesRequiredToBeHealthy'] || 0;\n\n    const onMessageReceived = this.connReceiver_(this.conn_);\n    const onConnectionLost = this.disconnReceiver_(this.conn_);\n    this.tx_ = this.conn_;\n    this.rx_ = this.conn_;\n    this.secondaryConn_ = null;\n    this.isHealthy_ = false;\n\n    /*\n     * Firefox doesn't like when code from one iframe tries to create another iframe by way of the parent frame.\n     * This can occur in the case of a redirect, i.e. we guessed wrong on what server to connect to and received a reset.\n     * Somehow, setTimeout seems to make this ok. That doesn't make sense from a security perspective, since you should\n     * still have the context of your originating frame.\n     */\n    setTimeout(() => {\n      // this.conn_ gets set to null in some of the tests. Check to make sure it still exists before using it\n      this.conn_ && this.conn_.open(onMessageReceived, onConnectionLost);\n    }, Math.floor(0));\n\n    const healthyTimeout_ms = conn['healthyTimeout'] || 0;\n    if (healthyTimeout_ms > 0) {\n      this.healthyTimeout_ = setTimeoutNonBlocking(() => {\n        this.healthyTimeout_ = null;\n        if (!this.isHealthy_) {\n          if (\n            this.conn_ &&\n            this.conn_.bytesReceived > BYTES_RECEIVED_HEALTHY_OVERRIDE\n          ) {\n            this.log_(\n              'Connection exceeded healthy timeout but has received ' +\n                this.conn_.bytesReceived +\n                ' bytes.  Marking connection healthy.'\n            );\n            this.isHealthy_ = true;\n            this.conn_.markConnectionHealthy();\n          } else if (\n            this.conn_ &&\n            this.conn_.bytesSent > BYTES_SENT_HEALTHY_OVERRIDE\n          ) {\n            this.log_(\n              'Connection exceeded healthy timeout but has sent ' +\n                this.conn_.bytesSent +\n                ' bytes.  Leaving connection alive.'\n            );\n            // NOTE: We don't want to mark it healthy, since we have no guarantee that the bytes have made it to\n            // the server.\n          } else {\n            this.log_('Closing unhealthy connection after timeout.');\n            this.close();\n          }\n        }\n      }, Math.floor(healthyTimeout_ms)) as any;\n    }\n  }\n\n  /**\n   * @return {!string}\n   * @private\n   */\n  private nextTransportId_(): string {\n    return 'c:' + this.id + ':' + this.connectionCount++;\n  }\n\n  private disconnReceiver_(conn) {\n    return everConnected => {\n      if (conn === this.conn_) {\n        this.onConnectionLost_(everConnected);\n      } else if (conn === this.secondaryConn_) {\n        this.log_('Secondary connection lost.');\n        this.onSecondaryConnectionLost_();\n      } else {\n        this.log_('closing an old connection');\n      }\n    };\n  }\n\n  private connReceiver_(conn: Transport) {\n    return (message: object) => {\n      if (this.state_ != RealtimeState.DISCONNECTED) {\n        if (conn === this.rx_) {\n          this.onPrimaryMessageReceived_(message);\n        } else if (conn === this.secondaryConn_) {\n          this.onSecondaryMessageReceived_(message);\n        } else {\n          this.log_('message on old connection');\n        }\n      }\n    };\n  }\n\n  /**\n   *\n   * @param {Object} dataMsg An arbitrary data message to be sent to the server\n   */\n  sendRequest(dataMsg: object) {\n    // wrap in a data message envelope and send it on\n    const msg = { t: 'd', d: dataMsg };\n    this.sendData_(msg);\n  }\n\n  tryCleanupConnection() {\n    if (this.tx_ === this.secondaryConn_ && this.rx_ === this.secondaryConn_) {\n      this.log_(\n        'cleaning up and promoting a connection: ' + this.secondaryConn_.connId\n      );\n      this.conn_ = this.secondaryConn_;\n      this.secondaryConn_ = null;\n      // the server will shutdown the old connection\n    }\n  }\n\n  private onSecondaryControl_(controlData: { [k: string]: any }) {\n    if (MESSAGE_TYPE in controlData) {\n      const cmd = controlData[MESSAGE_TYPE] as string;\n      if (cmd === SWITCH_ACK) {\n        this.upgradeIfSecondaryHealthy_();\n      } else if (cmd === CONTROL_RESET) {\n        // Most likely the session wasn't valid. Abandon the switch attempt\n        this.log_('Got a reset on secondary, closing it');\n        this.secondaryConn_.close();\n        // If we were already using this connection for something, than we need to fully close\n        if (\n          this.tx_ === this.secondaryConn_ ||\n          this.rx_ === this.secondaryConn_\n        ) {\n          this.close();\n        }\n      } else if (cmd === CONTROL_PONG) {\n        this.log_('got pong on secondary.');\n        this.secondaryResponsesRequired_--;\n        this.upgradeIfSecondaryHealthy_();\n      }\n    }\n  }\n\n  private onSecondaryMessageReceived_(parsedData: object) {\n    const layer: string = requireKey('t', parsedData);\n    const data: any = requireKey('d', parsedData);\n    if (layer == 'c') {\n      this.onSecondaryControl_(data);\n    } else if (layer == 'd') {\n      // got a data message, but we're still second connection. Need to buffer it up\n      this.pendingDataMessages.push(data);\n    } else {\n      throw new Error('Unknown protocol layer: ' + layer);\n    }\n  }\n\n  private upgradeIfSecondaryHealthy_() {\n    if (this.secondaryResponsesRequired_ <= 0) {\n      this.log_('Secondary connection is healthy.');\n      this.isHealthy_ = true;\n      this.secondaryConn_.markConnectionHealthy();\n      this.proceedWithUpgrade_();\n    } else {\n      // Send a ping to make sure the connection is healthy.\n      this.log_('sending ping on secondary.');\n      this.secondaryConn_.send({ t: 'c', d: { t: PING, d: {} } });\n    }\n  }\n\n  private proceedWithUpgrade_() {\n    // tell this connection to consider itself open\n    this.secondaryConn_.start();\n    // send ack\n    this.log_('sending client ack on secondary');\n    this.secondaryConn_.send({ t: 'c', d: { t: SWITCH_ACK, d: {} } });\n\n    // send end packet on primary transport, switch to sending on this one\n    // can receive on this one, buffer responses until end received on primary transport\n    this.log_('Ending transmission on primary');\n    this.conn_.send({ t: 'c', d: { t: END_TRANSMISSION, d: {} } });\n    this.tx_ = this.secondaryConn_;\n\n    this.tryCleanupConnection();\n  }\n\n  private onPrimaryMessageReceived_(parsedData: { [k: string]: any }) {\n    // Must refer to parsedData properties in quotes, so closure doesn't touch them.\n    const layer: string = requireKey('t', parsedData);\n    const data: any = requireKey('d', parsedData);\n    if (layer == 'c') {\n      this.onControl_(data);\n    } else if (layer == 'd') {\n      this.onDataMessage_(data);\n    }\n  }\n\n  private onDataMessage_(message: any) {\n    this.onPrimaryResponse_();\n\n    // We don't do anything with data messages, just kick them up a level\n    this.onMessage_(message);\n  }\n\n  private onPrimaryResponse_() {\n    if (!this.isHealthy_) {\n      this.primaryResponsesRequired_--;\n      if (this.primaryResponsesRequired_ <= 0) {\n        this.log_('Primary connection is healthy.');\n        this.isHealthy_ = true;\n        this.conn_.markConnectionHealthy();\n      }\n    }\n  }\n\n  private onControl_(controlData: { [k: string]: any }) {\n    const cmd: string = requireKey(MESSAGE_TYPE, controlData);\n    if (MESSAGE_DATA in controlData) {\n      const payload = controlData[MESSAGE_DATA];\n      if (cmd === SERVER_HELLO) {\n        this.onHandshake_(payload);\n      } else if (cmd === END_TRANSMISSION) {\n        this.log_('recvd end transmission on primary');\n        this.rx_ = this.secondaryConn_;\n        for (let i = 0; i < this.pendingDataMessages.length; ++i) {\n          this.onDataMessage_(this.pendingDataMessages[i]);\n        }\n        this.pendingDataMessages = [];\n        this.tryCleanupConnection();\n      } else if (cmd === CONTROL_SHUTDOWN) {\n        // This was previously the 'onKill' callback passed to the lower-level connection\n        // payload in this case is the reason for the shutdown. Generally a human-readable error\n        this.onConnectionShutdown_(payload);\n      } else if (cmd === CONTROL_RESET) {\n        // payload in this case is the host we should contact\n        this.onReset_(payload);\n      } else if (cmd === CONTROL_ERROR) {\n        error('Server Error: ' + payload);\n      } else if (cmd === CONTROL_PONG) {\n        this.log_('got pong on primary.');\n        this.onPrimaryResponse_();\n        this.sendPingOnPrimaryIfNecessary_();\n      } else {\n        error('Unknown control packet command: ' + cmd);\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {Object} handshake The handshake data returned from the server\n   * @private\n   */\n  private onHandshake_(handshake: {\n    ts: number;\n    v: string;\n    h: string;\n    s: string;\n  }) {\n    const timestamp = handshake.ts;\n    const version = handshake.v;\n    const host = handshake.h;\n    this.sessionId = handshake.s;\n    this.repoInfo_.updateHost(host);\n    // if we've already closed the connection, then don't bother trying to progress further\n    if (this.state_ == RealtimeState.CONNECTING) {\n      this.conn_.start();\n      this.onConnectionEstablished_(this.conn_, timestamp);\n      if (PROTOCOL_VERSION !== version) {\n        warn('Protocol version mismatch detected');\n      }\n      // TODO: do we want to upgrade? when? maybe a delay?\n      this.tryStartUpgrade_();\n    }\n  }\n\n  private tryStartUpgrade_() {\n    const conn = this.transportManager_.upgradeTransport();\n    if (conn) {\n      this.startUpgrade_(conn);\n    }\n  }\n\n  private startUpgrade_(conn: TransportConstructor) {\n    this.secondaryConn_ = new conn(\n      this.nextTransportId_(),\n      this.repoInfo_,\n      this.sessionId\n    );\n    // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\n    // can consider the transport healthy.\n    this.secondaryResponsesRequired_ =\n      conn['responsesRequiredToBeHealthy'] || 0;\n\n    const onMessage = this.connReceiver_(this.secondaryConn_);\n    const onDisconnect = this.disconnReceiver_(this.secondaryConn_);\n    this.secondaryConn_.open(onMessage, onDisconnect);\n\n    // If we haven't successfully upgraded after UPGRADE_TIMEOUT, give up and kill the secondary.\n    setTimeoutNonBlocking(() => {\n      if (this.secondaryConn_) {\n        this.log_('Timed out trying to upgrade.');\n        this.secondaryConn_.close();\n      }\n    }, Math.floor(UPGRADE_TIMEOUT));\n  }\n\n  private onReset_(host: string) {\n    this.log_('Reset packet received.  New host: ' + host);\n    this.repoInfo_.updateHost(host);\n    // TODO: if we're already \"connected\", we need to trigger a disconnect at the next layer up.\n    // We don't currently support resets after the connection has already been established\n    if (this.state_ === RealtimeState.CONNECTED) {\n      this.close();\n    } else {\n      // Close whatever connections we have open and start again.\n      this.closeConnections_();\n      this.start_();\n    }\n  }\n\n  private onConnectionEstablished_(conn: Transport, timestamp: number) {\n    this.log_('Realtime connection established.');\n    this.conn_ = conn;\n    this.state_ = RealtimeState.CONNECTED;\n\n    if (this.onReady_) {\n      this.onReady_(timestamp, this.sessionId);\n      this.onReady_ = null;\n    }\n\n    // If after 5 seconds we haven't sent enough requests to the server to get the connection healthy,\n    // send some pings.\n    if (this.primaryResponsesRequired_ === 0) {\n      this.log_('Primary connection is healthy.');\n      this.isHealthy_ = true;\n    } else {\n      setTimeoutNonBlocking(() => {\n        this.sendPingOnPrimaryIfNecessary_();\n      }, Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS));\n    }\n  }\n\n  private sendPingOnPrimaryIfNecessary_() {\n    // If the connection isn't considered healthy yet, we'll send a noop ping packet request.\n    if (!this.isHealthy_ && this.state_ === RealtimeState.CONNECTED) {\n      this.log_('sending ping on primary.');\n      this.sendData_({ t: 'c', d: { t: PING, d: {} } });\n    }\n  }\n\n  private onSecondaryConnectionLost_() {\n    const conn = this.secondaryConn_;\n    this.secondaryConn_ = null;\n    if (this.tx_ === conn || this.rx_ === conn) {\n      // we are relying on this connection already in some capacity. Therefore, a failure is real\n      this.close();\n    }\n  }\n\n  /**\n   *\n   * @param {boolean} everConnected Whether or not the connection ever reached a server. Used to determine if\n   * we should flush the host cache\n   * @private\n   */\n  private onConnectionLost_(everConnected: boolean) {\n    this.conn_ = null;\n\n    // NOTE: IF you're seeing a Firefox error for this line, I think it might be because it's getting\n    // called on window close and RealtimeState.CONNECTING is no longer defined.  Just a guess.\n    if (!everConnected && this.state_ === RealtimeState.CONNECTING) {\n      this.log_('Realtime connection failed.');\n      // Since we failed to connect at all, clear any cached entry for this namespace in case the machine went away\n      if (this.repoInfo_.isCacheableHost()) {\n        PersistentStorage.remove('host:' + this.repoInfo_.host);\n        // reset the internal host to what we would show the user, i.e. <ns>.firebaseio.com\n        this.repoInfo_.internalHost = this.repoInfo_.host;\n      }\n    } else if (this.state_ === RealtimeState.CONNECTED) {\n      this.log_('Realtime connection lost.');\n    }\n\n    this.close();\n  }\n\n  /**\n   *\n   * @param {string} reason\n   * @private\n   */\n  private onConnectionShutdown_(reason: string) {\n    this.log_('Connection shutdown command received. Shutting down...');\n\n    if (this.onKill_) {\n      this.onKill_(reason);\n      this.onKill_ = null;\n    }\n\n    // We intentionally don't want to fire onDisconnect (kill is a different case),\n    // so clear the callback.\n    this.onDisconnect_ = null;\n\n    this.close();\n  }\n\n  private sendData_(data: object) {\n    if (this.state_ !== RealtimeState.CONNECTED) {\n      throw 'Connection is not connected';\n    } else {\n      this.tx_.send(data);\n    }\n  }\n\n  /**\n   * Cleans up this connection, calling the appropriate callbacks\n   */\n  close() {\n    if (this.state_ !== RealtimeState.DISCONNECTED) {\n      this.log_('Closing realtime connection.');\n      this.state_ = RealtimeState.DISCONNECTED;\n\n      this.closeConnections_();\n\n      if (this.onDisconnect_) {\n        this.onDisconnect_();\n        this.onDisconnect_ = null;\n      }\n    }\n  }\n\n  /**\n   *\n   * @private\n   */\n  private closeConnections_() {\n    this.log_('Shutting down all connections');\n    if (this.conn_) {\n      this.conn_.close();\n      this.conn_ = null;\n    }\n\n    if (this.secondaryConn_) {\n      this.secondaryConn_.close();\n      this.secondaryConn_ = null;\n    }\n\n    if (this.healthyTimeout_) {\n      clearTimeout(this.healthyTimeout_);\n      this.healthyTimeout_ = null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Query } from '../api/Query';\n\n/**\n * Interface defining the set of actions that can be performed against the Firebase server\n * (basically corresponds to our wire protocol).\n *\n * @interface\n */\nexport abstract class ServerActions {\n  /**\n   * @param {!Query} query\n   * @param {function():string} currentHashFn\n   * @param {?number} tag\n   * @param {function(string, *)} onComplete\n   */\n  abstract listen(\n    query: Query,\n    currentHashFn: () => string,\n    tag: number | null,\n    onComplete: (a: string, b: any) => void\n  ): void;\n\n  /**\n   * Remove a listen.\n   *\n   * @param {!Query} query\n   * @param {?number} tag\n   */\n  abstract unlisten(query: Query, tag: number | null): void;\n\n  /**\n   * @param {string} pathString\n   * @param {*} data\n   * @param {function(string, string)=} onComplete\n   * @param {string=} hash\n   */\n  put(\n    pathString: string,\n    data: any,\n    onComplete?: (a: string, b: string) => void,\n    hash?: string\n  ) {}\n\n  /**\n   * @param {string} pathString\n   * @param {*} data\n   * @param {function(string, ?string)} onComplete\n   * @param {string=} hash\n   */\n  merge(\n    pathString: string,\n    data: any,\n    onComplete: (a: string, b: string | null) => void,\n    hash?: string\n  ) {}\n\n  /**\n   * Refreshes the auth token for the current connection.\n   * @param {string} token The authentication token\n   */\n  refreshAuthToken(token: string) {}\n\n  /**\n   * @param {string} pathString\n   * @param {*} data\n   * @param {function(string, string)=} onComplete\n   */\n  onDisconnectPut(\n    pathString: string,\n    data: any,\n    onComplete?: (a: string, b: string) => void\n  ) {}\n\n  /**\n   * @param {string} pathString\n   * @param {*} data\n   * @param {function(string, string)=} onComplete\n   */\n  onDisconnectMerge(\n    pathString: string,\n    data: any,\n    onComplete?: (a: string, b: string) => void\n  ) {}\n\n  /**\n   * @param {string} pathString\n   * @param {function(string, string)=} onComplete\n   */\n  onDisconnectCancel(\n    pathString: string,\n    onComplete?: (a: string, b: string) => void\n  ) {}\n\n  /**\n   * @param {Object.<string, *>} stats\n   */\n  reportStats(stats: { [k: string]: any }) {}\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { contains, isEmpty, safeGet, CONSTANTS } from '@firebase/util';\nimport { stringify } from '@firebase/util';\nimport { assert } from '@firebase/util';\nimport { error, log, logWrapper, warn, ObjectToUniqueKey } from './util/util';\nimport { Path } from './util/Path';\nimport { VisibilityMonitor } from './util/VisibilityMonitor';\nimport { OnlineMonitor } from './util/OnlineMonitor';\nimport { isAdmin, isValidFormat } from '@firebase/util';\nimport { Connection } from '../realtime/Connection';\nimport { isMobileCordova, isReactNative, isNodeSdk } from '@firebase/util';\nimport { ServerActions } from './ServerActions';\nimport { AuthTokenProvider } from './AuthTokenProvider';\nimport { RepoInfo } from './RepoInfo';\nimport { Query } from '../api/Query';\nimport { SDK_VERSION } from './version';\n\nconst RECONNECT_MIN_DELAY = 1000;\nconst RECONNECT_MAX_DELAY_DEFAULT = 60 * 5 * 1000; // 5 minutes in milliseconds (Case: 1858)\nconst RECONNECT_MAX_DELAY_FOR_ADMINS = 30 * 1000; // 30 seconds for admin clients (likely to be a backend server)\nconst RECONNECT_DELAY_MULTIPLIER = 1.3;\nconst RECONNECT_DELAY_RESET_TIMEOUT = 30000; // Reset delay back to MIN_DELAY after being connected for 30sec.\nconst SERVER_KILL_INTERRUPT_REASON = 'server_kill';\n\n// If auth fails repeatedly, we'll assume something is wrong and log a warning / back off.\nconst INVALID_AUTH_TOKEN_THRESHOLD = 3;\n\ninterface ListenSpec {\n  onComplete(s: string, p?: any): void;\n\n  hashFn(): string;\n\n  query: Query;\n  tag: number | null;\n}\n\ninterface OnDisconnectRequest {\n  pathString: string;\n  action: string;\n  data: any;\n  onComplete?: (a: string, b: string) => void;\n}\n\ninterface OutstandingPut {\n  action: string;\n  request: Object;\n  queued?: boolean;\n  onComplete: (a: string, b?: string) => void;\n}\n\n/**\n * Firebase connection.  Abstracts wire protocol and handles reconnecting.\n *\n * NOTE: All JSON objects sent to the realtime connection must have property names enclosed\n * in quotes to make sure the closure compiler does not minify them.\n */\nexport class PersistentConnection extends ServerActions {\n  // Used for diagnostic logging.\n  id = PersistentConnection.nextPersistentConnectionId_++;\n  private log_ = logWrapper('p:' + this.id + ':');\n\n  private interruptReasons_: { [reason: string]: boolean } = {};\n  /** Map<path, Map<queryId, ListenSpec>> */\n  private readonly listens: Map<\n    /* path */ string,\n    Map</* queryId */ string, ListenSpec>\n  > = new Map();\n  private outstandingPuts_: OutstandingPut[] = [];\n  private outstandingPutCount_ = 0;\n  private onDisconnectRequestQueue_: OnDisconnectRequest[] = [];\n  private connected_ = false;\n  private reconnectDelay_ = RECONNECT_MIN_DELAY;\n  private maxReconnectDelay_ = RECONNECT_MAX_DELAY_DEFAULT;\n  private securityDebugCallback_: ((a: Object) => void) | null = null;\n  lastSessionId: string | null = null;\n\n  private establishConnectionTimer_: number | null = null;\n\n  private visible_: boolean = false;\n\n  // Before we get connected, we keep a queue of pending messages to send.\n  private requestCBHash_: { [k: number]: (a: any) => void } = {};\n  private requestNumber_ = 0;\n\n  private realtime_: {\n    sendRequest(a: Object): void;\n    close(): void;\n  } | null = null;\n\n  private authToken_: string | null = null;\n  private forceTokenRefresh_ = false;\n  private invalidAuthTokenCount_ = 0;\n\n  private firstConnection_ = true;\n  private lastConnectionAttemptTime_: number | null = null;\n  private lastConnectionEstablishedTime_: number | null = null;\n\n  private static nextPersistentConnectionId_ = 0;\n\n  /**\n   * Counter for number of connections created. Mainly used for tagging in the logs\n   */\n  private static nextConnectionId_ = 0;\n\n  /**\n   * @implements {ServerActions}\n   * @param repoInfo_ Data about the namespace we are connecting to\n   * @param onDataUpdate_ A callback for new data from the server\n   */\n  constructor(\n    private repoInfo_: RepoInfo,\n    private onDataUpdate_: (\n      a: string,\n      b: any,\n      c: boolean,\n      d: number | null\n    ) => void,\n    private onConnectStatus_: (a: boolean) => void,\n    private onServerInfoUpdate_: (a: any) => void,\n    private authTokenProvider_: AuthTokenProvider,\n    private authOverride_?: Object | null\n  ) {\n    super();\n\n    if (authOverride_ && !isNodeSdk()) {\n      throw new Error(\n        'Auth override specified in options, but not supported on non Node.js platforms'\n      );\n    }\n    this.scheduleConnect_(0);\n\n    VisibilityMonitor.getInstance().on('visible', this.onVisible_, this);\n\n    if (repoInfo_.host.indexOf('fblocal') === -1) {\n      OnlineMonitor.getInstance().on('online', this.onOnline_, this);\n    }\n  }\n\n  protected sendRequest(\n    action: string,\n    body: any,\n    onResponse?: (a: any) => void\n  ) {\n    const curReqNum = ++this.requestNumber_;\n\n    const msg = { r: curReqNum, a: action, b: body };\n    this.log_(stringify(msg));\n    assert(\n      this.connected_,\n      \"sendRequest call when we're not connected not allowed.\"\n    );\n    this.realtime_.sendRequest(msg);\n    if (onResponse) {\n      this.requestCBHash_[curReqNum] = onResponse;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  listen(\n    query: Query,\n    currentHashFn: () => string,\n    tag: number | null,\n    onComplete: (a: string, b: any) => void\n  ) {\n    const queryId = query.queryIdentifier();\n    const pathString = query.path.toString();\n    this.log_('Listen called for ' + pathString + ' ' + queryId);\n    if (!this.listens.has(pathString)) {\n      this.listens.set(pathString, new Map());\n    }\n    assert(\n      query.getQueryParams().isDefault() ||\n        !query.getQueryParams().loadsAllData(),\n      'listen() called for non-default but complete query'\n    );\n    assert(\n      !this.listens.get(pathString)!.has(queryId),\n      'listen() called twice for same path/queryId.'\n    );\n    const listenSpec: ListenSpec = {\n      onComplete: onComplete,\n      hashFn: currentHashFn,\n      query: query,\n      tag: tag\n    };\n    this.listens.get(pathString)!.set(queryId, listenSpec);\n\n    if (this.connected_) {\n      this.sendListen_(listenSpec);\n    }\n  }\n\n  private sendListen_(listenSpec: ListenSpec) {\n    const query = listenSpec.query;\n    const pathString = query.path.toString();\n    const queryId = query.queryIdentifier();\n    this.log_('Listen on ' + pathString + ' for ' + queryId);\n    const req: { [k: string]: any } = { /*path*/ p: pathString };\n\n    const action = 'q';\n\n    // Only bother to send query if it's non-default.\n    if (listenSpec.tag) {\n      req['q'] = query.queryObject();\n      req['t'] = listenSpec.tag;\n    }\n\n    req[/*hash*/ 'h'] = listenSpec.hashFn();\n\n    this.sendRequest(action, req, (message: { [k: string]: any }) => {\n      const payload: any = message[/*data*/ 'd'];\n      const status: string = message[/*status*/ 's'];\n\n      // print warnings in any case...\n      PersistentConnection.warnOnListenWarnings_(payload, query);\n\n      const currentListenSpec =\n        this.listens.get(pathString) &&\n        this.listens.get(pathString)!.get(queryId);\n      // only trigger actions if the listen hasn't been removed and readded\n      if (currentListenSpec === listenSpec) {\n        this.log_('listen response', message);\n\n        if (status !== 'ok') {\n          this.removeListen_(pathString, queryId);\n        }\n\n        if (listenSpec.onComplete) {\n          listenSpec.onComplete(status, payload);\n        }\n      }\n    });\n  }\n\n  private static warnOnListenWarnings_(payload: any, query: Query) {\n    if (payload && typeof payload === 'object' && contains(payload, 'w')) {\n      const warnings = safeGet(payload, 'w');\n      if (Array.isArray(warnings) && ~warnings.indexOf('no_index')) {\n        const indexSpec =\n          '\".indexOn\": \"' +\n          query\n            .getQueryParams()\n            .getIndex()\n            .toString() +\n          '\"';\n        const indexPath = query.path.toString();\n        warn(\n          `Using an unspecified index. Your data will be downloaded and ` +\n            `filtered on the client. Consider adding ${indexSpec} at ` +\n            `${indexPath} to your security rules for better performance.`\n        );\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  refreshAuthToken(token: string) {\n    this.authToken_ = token;\n    this.log_('Auth token refreshed');\n    if (this.authToken_) {\n      this.tryAuth();\n    } else {\n      //If we're connected we want to let the server know to unauthenticate us. If we're not connected, simply delete\n      //the credential so we dont become authenticated next time we connect.\n      if (this.connected_) {\n        this.sendRequest('unauth', {}, () => {});\n      }\n    }\n\n    this.reduceReconnectDelayIfAdminCredential_(token);\n  }\n\n  private reduceReconnectDelayIfAdminCredential_(credential: string) {\n    // NOTE: This isn't intended to be bulletproof (a malicious developer can always just modify the client).\n    // Additionally, we don't bother resetting the max delay back to the default if auth fails / expires.\n    const isFirebaseSecret = credential && credential.length === 40;\n    if (isFirebaseSecret || isAdmin(credential)) {\n      this.log_(\n        'Admin auth credential detected.  Reducing max reconnect time.'\n      );\n      this.maxReconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\n    }\n  }\n\n  /**\n   * Attempts to authenticate with the given credentials. If the authentication attempt fails, it's triggered like\n   * a auth revoked (the connection is closed).\n   */\n  tryAuth() {\n    if (this.connected_ && this.authToken_) {\n      const token = this.authToken_;\n      const authMethod = isValidFormat(token) ? 'auth' : 'gauth';\n      const requestData: { [k: string]: any } = { cred: token };\n      if (this.authOverride_ === null) {\n        requestData['noauth'] = true;\n      } else if (typeof this.authOverride_ === 'object') {\n        requestData['authvar'] = this.authOverride_;\n      }\n      this.sendRequest(authMethod, requestData, (res: { [k: string]: any }) => {\n        const status: string = res[/*status*/ 's'];\n        const data: string = res[/*data*/ 'd'] || 'error';\n\n        if (this.authToken_ === token) {\n          if (status === 'ok') {\n            this.invalidAuthTokenCount_ = 0;\n          } else {\n            // Triggers reconnect and force refresh for auth token\n            this.onAuthRevoked_(status, data);\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  unlisten(query: Query, tag: number | null) {\n    const pathString = query.path.toString();\n    const queryId = query.queryIdentifier();\n\n    this.log_('Unlisten called for ' + pathString + ' ' + queryId);\n\n    assert(\n      query.getQueryParams().isDefault() ||\n        !query.getQueryParams().loadsAllData(),\n      'unlisten() called for non-default but complete query'\n    );\n    const listen = this.removeListen_(pathString, queryId);\n    if (listen && this.connected_) {\n      this.sendUnlisten_(pathString, queryId, query.queryObject(), tag);\n    }\n  }\n\n  private sendUnlisten_(\n    pathString: string,\n    queryId: string,\n    queryObj: Object,\n    tag: number | null\n  ) {\n    this.log_('Unlisten on ' + pathString + ' for ' + queryId);\n\n    const req: { [k: string]: any } = { /*path*/ p: pathString };\n    const action = 'n';\n    // Only bother sending queryId if it's non-default.\n    if (tag) {\n      req['q'] = queryObj;\n      req['t'] = tag;\n    }\n\n    this.sendRequest(action, req);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  onDisconnectPut(\n    pathString: string,\n    data: any,\n    onComplete?: (a: string, b: string) => void\n  ) {\n    if (this.connected_) {\n      this.sendOnDisconnect_('o', pathString, data, onComplete);\n    } else {\n      this.onDisconnectRequestQueue_.push({\n        pathString,\n        action: 'o',\n        data,\n        onComplete\n      });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  onDisconnectMerge(\n    pathString: string,\n    data: any,\n    onComplete?: (a: string, b: string) => void\n  ) {\n    if (this.connected_) {\n      this.sendOnDisconnect_('om', pathString, data, onComplete);\n    } else {\n      this.onDisconnectRequestQueue_.push({\n        pathString,\n        action: 'om',\n        data,\n        onComplete\n      });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  onDisconnectCancel(\n    pathString: string,\n    onComplete?: (a: string, b: string) => void\n  ) {\n    if (this.connected_) {\n      this.sendOnDisconnect_('oc', pathString, null, onComplete);\n    } else {\n      this.onDisconnectRequestQueue_.push({\n        pathString,\n        action: 'oc',\n        data: null,\n        onComplete\n      });\n    }\n  }\n\n  private sendOnDisconnect_(\n    action: string,\n    pathString: string,\n    data: any,\n    onComplete: (a: string, b: string) => void\n  ) {\n    const request = { /*path*/ p: pathString, /*data*/ d: data };\n    this.log_('onDisconnect ' + action, request);\n    this.sendRequest(action, request, (response: { [k: string]: any }) => {\n      if (onComplete) {\n        setTimeout(function() {\n          onComplete(response[/*status*/ 's'], response[/* data */ 'd']);\n        }, Math.floor(0));\n      }\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  put(\n    pathString: string,\n    data: any,\n    onComplete?: (a: string, b: string) => void,\n    hash?: string\n  ) {\n    this.putInternal('p', pathString, data, onComplete, hash);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  merge(\n    pathString: string,\n    data: any,\n    onComplete: (a: string, b: string | null) => void,\n    hash?: string\n  ) {\n    this.putInternal('m', pathString, data, onComplete, hash);\n  }\n\n  putInternal(\n    action: string,\n    pathString: string,\n    data: any,\n    onComplete: (a: string, b: string | null) => void,\n    hash?: string\n  ) {\n    const request: { [k: string]: any } = {\n      /*path*/ p: pathString,\n      /*data*/ d: data\n    };\n\n    if (hash !== undefined) request[/*hash*/ 'h'] = hash;\n\n    // TODO: Only keep track of the most recent put for a given path?\n    this.outstandingPuts_.push({\n      action,\n      request,\n      onComplete\n    });\n\n    this.outstandingPutCount_++;\n    const index = this.outstandingPuts_.length - 1;\n\n    if (this.connected_) {\n      this.sendPut_(index);\n    } else {\n      this.log_('Buffering put: ' + pathString);\n    }\n  }\n\n  private sendPut_(index: number) {\n    const action = this.outstandingPuts_[index].action;\n    const request = this.outstandingPuts_[index].request;\n    const onComplete = this.outstandingPuts_[index].onComplete;\n    this.outstandingPuts_[index].queued = this.connected_;\n\n    this.sendRequest(action, request, (message: { [k: string]: any }) => {\n      this.log_(action + ' response', message);\n\n      delete this.outstandingPuts_[index];\n      this.outstandingPutCount_--;\n\n      // Clean up array occasionally.\n      if (this.outstandingPutCount_ === 0) {\n        this.outstandingPuts_ = [];\n      }\n\n      if (onComplete)\n        onComplete(message[/*status*/ 's'], message[/* data */ 'd']);\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  reportStats(stats: { [k: string]: any }) {\n    // If we're not connected, we just drop the stats.\n    if (this.connected_) {\n      const request = { /*counters*/ c: stats };\n      this.log_('reportStats', request);\n\n      this.sendRequest(/*stats*/ 's', request, result => {\n        const status = result[/*status*/ 's'];\n        if (status !== 'ok') {\n          const errorReason = result[/* data */ 'd'];\n          this.log_('reportStats', 'Error sending stats: ' + errorReason);\n        }\n      });\n    }\n  }\n\n  private onDataMessage_(message: { [k: string]: any }) {\n    if ('r' in message) {\n      // this is a response\n      this.log_('from server: ' + stringify(message));\n      const reqNum = message['r'];\n      const onResponse = this.requestCBHash_[reqNum];\n      if (onResponse) {\n        delete this.requestCBHash_[reqNum];\n        onResponse(message[/*body*/ 'b']);\n      }\n    } else if ('error' in message) {\n      throw 'A server-side error has occurred: ' + message['error'];\n    } else if ('a' in message) {\n      // a and b are action and body, respectively\n      this.onDataPush_(message['a'], message['b']);\n    }\n  }\n\n  private onDataPush_(action: string, body: { [k: string]: any }) {\n    this.log_('handleServerMessage', action, body);\n    if (action === 'd')\n      this.onDataUpdate_(\n        body[/*path*/ 'p'],\n        body[/*data*/ 'd'],\n        /*isMerge*/ false,\n        body['t']\n      );\n    else if (action === 'm')\n      this.onDataUpdate_(\n        body[/*path*/ 'p'],\n        body[/*data*/ 'd'],\n        /*isMerge=*/ true,\n        body['t']\n      );\n    else if (action === 'c')\n      this.onListenRevoked_(body[/*path*/ 'p'], body[/*query*/ 'q']);\n    else if (action === 'ac')\n      this.onAuthRevoked_(\n        body[/*status code*/ 's'],\n        body[/* explanation */ 'd']\n      );\n    else if (action === 'sd') this.onSecurityDebugPacket_(body);\n    else\n      error(\n        'Unrecognized action received from server: ' +\n          stringify(action) +\n          '\\nAre you using the latest client?'\n      );\n  }\n\n  private onReady_(timestamp: number, sessionId: string) {\n    this.log_('connection ready');\n    this.connected_ = true;\n    this.lastConnectionEstablishedTime_ = new Date().getTime();\n    this.handleTimestamp_(timestamp);\n    this.lastSessionId = sessionId;\n    if (this.firstConnection_) {\n      this.sendConnectStats_();\n    }\n    this.restoreState_();\n    this.firstConnection_ = false;\n    this.onConnectStatus_(true);\n  }\n\n  private scheduleConnect_(timeout: number) {\n    assert(\n      !this.realtime_,\n      \"Scheduling a connect when we're already connected/ing?\"\n    );\n\n    if (this.establishConnectionTimer_) {\n      clearTimeout(this.establishConnectionTimer_);\n    }\n\n    // NOTE: Even when timeout is 0, it's important to do a setTimeout to work around an infuriating \"Security Error\" in\n    // Firefox when trying to write to our long-polling iframe in some scenarios (e.g. Forge or our unit tests).\n\n    this.establishConnectionTimer_ = setTimeout(() => {\n      this.establishConnectionTimer_ = null;\n      this.establishConnection_();\n    }, Math.floor(timeout)) as any;\n  }\n\n  private onVisible_(visible: boolean) {\n    // NOTE: Tabbing away and back to a window will defeat our reconnect backoff, but I think that's fine.\n    if (\n      visible &&\n      !this.visible_ &&\n      this.reconnectDelay_ === this.maxReconnectDelay_\n    ) {\n      this.log_('Window became visible.  Reducing delay.');\n      this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n\n      if (!this.realtime_) {\n        this.scheduleConnect_(0);\n      }\n    }\n    this.visible_ = visible;\n  }\n\n  private onOnline_(online: boolean) {\n    if (online) {\n      this.log_('Browser went online.');\n      this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n      if (!this.realtime_) {\n        this.scheduleConnect_(0);\n      }\n    } else {\n      this.log_('Browser went offline.  Killing connection.');\n      if (this.realtime_) {\n        this.realtime_.close();\n      }\n    }\n  }\n\n  private onRealtimeDisconnect_() {\n    this.log_('data client disconnected');\n    this.connected_ = false;\n    this.realtime_ = null;\n\n    // Since we don't know if our sent transactions succeeded or not, we need to cancel them.\n    this.cancelSentTransactions_();\n\n    // Clear out the pending requests.\n    this.requestCBHash_ = {};\n\n    if (this.shouldReconnect_()) {\n      if (!this.visible_) {\n        this.log_(\"Window isn't visible.  Delaying reconnect.\");\n        this.reconnectDelay_ = this.maxReconnectDelay_;\n        this.lastConnectionAttemptTime_ = new Date().getTime();\n      } else if (this.lastConnectionEstablishedTime_) {\n        // If we've been connected long enough, reset reconnect delay to minimum.\n        const timeSinceLastConnectSucceeded =\n          new Date().getTime() - this.lastConnectionEstablishedTime_;\n        if (timeSinceLastConnectSucceeded > RECONNECT_DELAY_RESET_TIMEOUT)\n          this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n        this.lastConnectionEstablishedTime_ = null;\n      }\n\n      const timeSinceLastConnectAttempt =\n        new Date().getTime() - this.lastConnectionAttemptTime_;\n      let reconnectDelay = Math.max(\n        0,\n        this.reconnectDelay_ - timeSinceLastConnectAttempt\n      );\n      reconnectDelay = Math.random() * reconnectDelay;\n\n      this.log_('Trying to reconnect in ' + reconnectDelay + 'ms');\n      this.scheduleConnect_(reconnectDelay);\n\n      // Adjust reconnect delay for next time.\n      this.reconnectDelay_ = Math.min(\n        this.maxReconnectDelay_,\n        this.reconnectDelay_ * RECONNECT_DELAY_MULTIPLIER\n      );\n    }\n    this.onConnectStatus_(false);\n  }\n\n  private establishConnection_() {\n    if (this.shouldReconnect_()) {\n      this.log_('Making a connection attempt');\n      this.lastConnectionAttemptTime_ = new Date().getTime();\n      this.lastConnectionEstablishedTime_ = null;\n      const onDataMessage = this.onDataMessage_.bind(this);\n      const onReady = this.onReady_.bind(this);\n      const onDisconnect = this.onRealtimeDisconnect_.bind(this);\n      const connId = this.id + ':' + PersistentConnection.nextConnectionId_++;\n      const self = this;\n      const lastSessionId = this.lastSessionId;\n      let canceled = false;\n      let connection: Connection | null = null;\n      const closeFn = function() {\n        if (connection) {\n          connection.close();\n        } else {\n          canceled = true;\n          onDisconnect();\n        }\n      };\n      const sendRequestFn = function(msg: Object) {\n        assert(\n          connection,\n          \"sendRequest call when we're not connected not allowed.\"\n        );\n        connection.sendRequest(msg);\n      };\n\n      this.realtime_ = {\n        close: closeFn,\n        sendRequest: sendRequestFn\n      };\n\n      const forceRefresh = this.forceTokenRefresh_;\n      this.forceTokenRefresh_ = false;\n\n      // First fetch auth token, and establish connection after fetching the token was successful\n      this.authTokenProvider_\n        .getToken(forceRefresh)\n        .then(function(result) {\n          if (!canceled) {\n            log('getToken() completed. Creating connection.');\n            self.authToken_ = result && result.accessToken;\n            connection = new Connection(\n              connId,\n              self.repoInfo_,\n              onDataMessage,\n              onReady,\n              onDisconnect,\n              /* onKill= */ function(reason) {\n                warn(reason + ' (' + self.repoInfo_.toString() + ')');\n                self.interrupt(SERVER_KILL_INTERRUPT_REASON);\n              },\n              lastSessionId\n            );\n          } else {\n            log('getToken() completed but was canceled');\n          }\n        })\n        .then(null, function(error) {\n          self.log_('Failed to get token: ' + error);\n          if (!canceled) {\n            if (CONSTANTS.NODE_ADMIN) {\n              // This may be a critical error for the Admin Node.js SDK, so log a warning.\n              // But getToken() may also just have temporarily failed, so we still want to\n              // continue retrying.\n              warn(error);\n            }\n            closeFn();\n          }\n        });\n    }\n  }\n\n  interrupt(reason: string) {\n    log('Interrupting connection for reason: ' + reason);\n    this.interruptReasons_[reason] = true;\n    if (this.realtime_) {\n      this.realtime_.close();\n    } else {\n      if (this.establishConnectionTimer_) {\n        clearTimeout(this.establishConnectionTimer_);\n        this.establishConnectionTimer_ = null;\n      }\n      if (this.connected_) {\n        this.onRealtimeDisconnect_();\n      }\n    }\n  }\n\n  resume(reason: string) {\n    log('Resuming connection for reason: ' + reason);\n    delete this.interruptReasons_[reason];\n    if (isEmpty(this.interruptReasons_)) {\n      this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n      if (!this.realtime_) {\n        this.scheduleConnect_(0);\n      }\n    }\n  }\n\n  private handleTimestamp_(timestamp: number) {\n    const delta = timestamp - new Date().getTime();\n    this.onServerInfoUpdate_({ serverTimeOffset: delta });\n  }\n\n  private cancelSentTransactions_() {\n    for (let i = 0; i < this.outstandingPuts_.length; i++) {\n      const put = this.outstandingPuts_[i];\n      if (put && /*hash*/ 'h' in put.request && put.queued) {\n        if (put.onComplete) put.onComplete('disconnect');\n\n        delete this.outstandingPuts_[i];\n        this.outstandingPutCount_--;\n      }\n    }\n\n    // Clean up array occasionally.\n    if (this.outstandingPutCount_ === 0) this.outstandingPuts_ = [];\n  }\n\n  private onListenRevoked_(pathString: string, query?: any[]) {\n    // Remove the listen and manufacture a \"permission_denied\" error for the failed listen.\n    let queryId;\n    if (!query) {\n      queryId = 'default';\n    } else {\n      queryId = query.map(q => ObjectToUniqueKey(q)).join('$');\n    }\n    const listen = this.removeListen_(pathString, queryId);\n    if (listen && listen.onComplete) listen.onComplete('permission_denied');\n  }\n\n  private removeListen_(pathString: string, queryId: string): ListenSpec {\n    const normalizedPathString = new Path(pathString).toString(); // normalize path.\n    let listen;\n    if (this.listens.has(normalizedPathString)) {\n      const map = this.listens.get(normalizedPathString)!;\n      listen = map.get(queryId);\n      map.delete(queryId);\n      if (map.size === 0) {\n        this.listens.delete(normalizedPathString);\n      }\n    } else {\n      // all listens for this path has already been removed\n      listen = undefined;\n    }\n    return listen;\n  }\n\n  private onAuthRevoked_(statusCode: string, explanation: string) {\n    log('Auth token revoked: ' + statusCode + '/' + explanation);\n    this.authToken_ = null;\n    this.forceTokenRefresh_ = true;\n    this.realtime_.close();\n    if (statusCode === 'invalid_token' || statusCode === 'permission_denied') {\n      // We'll wait a couple times before logging the warning / increasing the\n      // retry period since oauth tokens will report as \"invalid\" if they're\n      // just expired. Plus there may be transient issues that resolve themselves.\n      this.invalidAuthTokenCount_++;\n      if (this.invalidAuthTokenCount_ >= INVALID_AUTH_TOKEN_THRESHOLD) {\n        // Set a long reconnect delay because recovery is unlikely\n        this.reconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\n\n        // Notify the auth token provider that the token is invalid, which will log\n        // a warning\n        this.authTokenProvider_.notifyForInvalidToken();\n      }\n    }\n  }\n\n  private onSecurityDebugPacket_(body: { [k: string]: any }) {\n    if (this.securityDebugCallback_) {\n      this.securityDebugCallback_(body);\n    } else {\n      if ('msg' in body) {\n        console.log('FIREBASE: ' + body['msg'].replace('\\n', '\\nFIREBASE: '));\n      }\n    }\n  }\n\n  private restoreState_() {\n    //Re-authenticate ourselves if we have a credential stored.\n    this.tryAuth();\n\n    // Puts depend on having received the corresponding data update from the server before they complete, so we must\n    // make sure to send listens before puts.\n    for (const queries of this.listens.values()) {\n      for (const listenSpec of queries.values()) {\n        this.sendListen_(listenSpec);\n      }\n    }\n\n    for (let i = 0; i < this.outstandingPuts_.length; i++) {\n      if (this.outstandingPuts_[i]) this.sendPut_(i);\n    }\n\n    while (this.onDisconnectRequestQueue_.length) {\n      const request = this.onDisconnectRequestQueue_.shift();\n      this.sendOnDisconnect_(\n        request.action,\n        request.pathString,\n        request.data,\n        request.onComplete\n      );\n    }\n  }\n\n  /**\n   * Sends client stats for first connection\n   */\n  private sendConnectStats_() {\n    const stats: { [k: string]: number } = {};\n\n    let clientName = 'js';\n    if (CONSTANTS.NODE_ADMIN) {\n      clientName = 'admin_node';\n    } else if (CONSTANTS.NODE_CLIENT) {\n      clientName = 'node';\n    }\n\n    stats['sdk.' + clientName + '.' + SDK_VERSION.replace(/\\./g, '-')] = 1;\n\n    if (isMobileCordova()) {\n      stats['framework.cordova'] = 1;\n    } else if (isReactNative()) {\n      stats['framework.reactnative'] = 1;\n    }\n    this.reportStats(stats);\n  }\n\n  private shouldReconnect_(): boolean {\n    const online = OnlineMonitor.getInstance().currentlyOnline();\n    return isEmpty(this.interruptReasons_) && online;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { logWrapper, warn } from './util/util';\nimport { jsonEval } from '@firebase/util';\nimport { safeGet } from '@firebase/util';\nimport { querystring } from '@firebase/util';\nimport { ServerActions } from './ServerActions';\nimport { RepoInfo } from './RepoInfo';\nimport { AuthTokenProvider } from './AuthTokenProvider';\nimport { Query } from '../api/Query';\n\n/**\n * An implementation of ServerActions that communicates with the server via REST requests.\n * This is mostly useful for compatibility with crawlers, where we don't want to spin up a full\n * persistent connection (using WebSockets or long-polling)\n */\nexport class ReadonlyRestClient extends ServerActions {\n  reportStats(stats: { [k: string]: any }): void {\n    throw new Error('Method not implemented.');\n  }\n\n  /** @private {function(...[*])} */\n  private log_: (...args: any[]) => void = logWrapper('p:rest:');\n\n  /**\n   * We don't actually need to track listens, except to prevent us calling an onComplete for a listen\n   * that's been removed. :-/\n   *\n   * @private {!Object.<string, !Object>}\n   */\n  private listens_: { [k: string]: Object } = {};\n\n  /**\n   * @param {!Query} query\n   * @param {?number=} tag\n   * @return {string}\n   * @private\n   */\n  static getListenId_(query: Query, tag?: number | null): string {\n    if (tag !== undefined) {\n      return 'tag$' + tag;\n    } else {\n      assert(\n        query.getQueryParams().isDefault(),\n        \"should have a tag if it's not a default query.\"\n      );\n      return query.path.toString();\n    }\n  }\n\n  /**\n   * @param {!RepoInfo} repoInfo_ Data about the namespace we are connecting to\n   * @param {function(string, *, boolean, ?number)} onDataUpdate_ A callback for new data from the server\n   * @param {AuthTokenProvider} authTokenProvider_\n   * @implements {ServerActions}\n   */\n  constructor(\n    private repoInfo_: RepoInfo,\n    private onDataUpdate_: (\n      a: string,\n      b: any,\n      c: boolean,\n      d: number | null\n    ) => void,\n    private authTokenProvider_: AuthTokenProvider\n  ) {\n    super();\n  }\n\n  /** @inheritDoc */\n  listen(\n    query: Query,\n    currentHashFn: () => string,\n    tag: number | null,\n    onComplete: (a: string, b: any) => void\n  ) {\n    const pathString = query.path.toString();\n    this.log_(\n      'Listen called for ' + pathString + ' ' + query.queryIdentifier()\n    );\n\n    // Mark this listener so we can tell if it's removed.\n    const listenId = ReadonlyRestClient.getListenId_(query, tag);\n    const thisListen = {};\n    this.listens_[listenId] = thisListen;\n\n    const queryStringParameters = query\n      .getQueryParams()\n      .toRestQueryStringParameters();\n\n    this.restRequest_(\n      pathString + '.json',\n      queryStringParameters,\n      (error, result) => {\n        let data = result;\n\n        if (error === 404) {\n          data = null;\n          error = null;\n        }\n\n        if (error === null) {\n          this.onDataUpdate_(pathString, data, /*isMerge=*/ false, tag);\n        }\n\n        if (safeGet(this.listens_, listenId) === thisListen) {\n          let status;\n          if (!error) {\n            status = 'ok';\n          } else if (error == 401) {\n            status = 'permission_denied';\n          } else {\n            status = 'rest_error:' + error;\n          }\n\n          onComplete(status, null);\n        }\n      }\n    );\n  }\n\n  /** @inheritDoc */\n  unlisten(query: Query, tag: number | null) {\n    const listenId = ReadonlyRestClient.getListenId_(query, tag);\n    delete this.listens_[listenId];\n  }\n\n  /** @inheritDoc */\n  refreshAuthToken(token: string) {\n    // no-op since we just always call getToken.\n  }\n\n  /**\n   * Performs a REST request to the given path, with the provided query string parameters,\n   * and any auth credentials we have.\n   *\n   * @param {!string} pathString\n   * @param {!Object.<string, *>} queryStringParameters\n   * @param {?function(?number, *=)} callback\n   * @private\n   */\n  private restRequest_(\n    pathString: string,\n    queryStringParameters: { [k: string]: any } = {},\n    callback: ((a: number | null, b?: any) => void) | null\n  ) {\n    queryStringParameters['format'] = 'export';\n\n    this.authTokenProvider_\n      .getToken(/*forceRefresh=*/ false)\n      .then(authTokenData => {\n        const authToken = authTokenData && authTokenData.accessToken;\n        if (authToken) {\n          queryStringParameters['auth'] = authToken;\n        }\n\n        const url =\n          (this.repoInfo_.secure ? 'https://' : 'http://') +\n          this.repoInfo_.host +\n          pathString +\n          '?' +\n          'ns=' +\n          this.repoInfo_.namespace +\n          querystring(queryStringParameters);\n\n        this.log_('Sending REST request for ' + url);\n        const xhr = new XMLHttpRequest();\n        xhr.onreadystatechange = () => {\n          if (callback && xhr.readyState === 4) {\n            this.log_(\n              'REST Response for ' + url + ' received. status:',\n              xhr.status,\n              'response:',\n              xhr.responseText\n            );\n            let res = null;\n            if (xhr.status >= 200 && xhr.status < 300) {\n              try {\n                res = jsonEval(xhr.responseText);\n              } catch (e) {\n                warn(\n                  'Failed to parse JSON response for ' +\n                    url +\n                    ': ' +\n                    xhr.responseText\n                );\n              }\n              callback(null, res);\n            } else {\n              // 401 and 404 are expected.\n              if (xhr.status !== 401 && xhr.status !== 404) {\n                warn(\n                  'Got unsuccessful REST response for ' +\n                    url +\n                    ' Status: ' +\n                    xhr.status\n                );\n              }\n              callback(xhr.status);\n            }\n            callback = null;\n          }\n        };\n\n        xhr.open('GET', url, /*asynchronous=*/ true);\n        xhr.send();\n      });\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  generateWithValues,\n  resolveDeferredValueSnapshot,\n  resolveDeferredValueTree\n} from './util/ServerValues';\nimport { nodeFromJSON } from './snap/nodeFromJSON';\nimport { Path } from './util/Path';\nimport { SparseSnapshotTree } from './SparseSnapshotTree';\nimport { SyncTree } from './SyncTree';\nimport { SnapshotHolder } from './SnapshotHolder';\nimport { stringify } from '@firebase/util';\nimport { beingCrawled, each, exceptionGuard, warn, log } from './util/util';\nimport { map, isEmpty } from '@firebase/util';\nimport { AuthTokenProvider } from './AuthTokenProvider';\nimport { StatsManager } from './stats/StatsManager';\nimport { StatsReporter } from './stats/StatsReporter';\nimport { StatsListener } from './stats/StatsListener';\nimport { EventQueue } from './view/EventQueue';\nimport { PersistentConnection } from './PersistentConnection';\nimport { ReadonlyRestClient } from './ReadonlyRestClient';\nimport { FirebaseApp } from '@firebase/app-types';\nimport { RepoInfo } from './RepoInfo';\nimport { Database } from '../api/Database';\nimport { ServerActions } from './ServerActions';\nimport { Query } from '../api/Query';\nimport { EventRegistration } from './view/EventRegistration';\nimport { StatsCollection } from './stats/StatsCollection';\nimport { Event } from './view/Event';\nimport { Node } from './snap/Node';\nimport { FirebaseAuthInternalName } from '@firebase/auth-interop-types';\nimport { Provider } from '@firebase/component';\n\nconst INTERRUPT_REASON = 'repo_interrupt';\n\n/**\n * A connection to a single data repository.\n */\nexport class Repo {\n  dataUpdateCount = 0;\n  private infoSyncTree_: SyncTree;\n  private serverSyncTree_: SyncTree;\n\n  private stats_: StatsCollection;\n  private statsListener_: StatsListener | null = null;\n  private eventQueue_ = new EventQueue();\n  private nextWriteId_ = 1;\n  private server_: ServerActions;\n  private statsReporter_: StatsReporter;\n  private transactions_init_: () => void;\n  private infoData_: SnapshotHolder;\n  private abortTransactions_: (path: Path) => Path;\n  private rerunTransactions_: (changedPath: Path) => Path;\n  private interceptServerDataCallback_:\n    | ((a: string, b: any) => void)\n    | null = null;\n  private __database: Database;\n\n  /** A list of data pieces and paths to be set when this client disconnects. */\n  private onDisconnect_ = new SparseSnapshotTree();\n\n  // TODO: This should be @private but it's used by test_access.js and internal.js\n  persistentConnection_: PersistentConnection | null = null;\n\n  constructor(\n    public repoInfo_: RepoInfo,\n    forceRestClient: boolean,\n    public app: FirebaseApp,\n    authProvider: Provider<FirebaseAuthInternalName>\n  ) {\n    const authTokenProvider = new AuthTokenProvider(app, authProvider);\n\n    this.stats_ = StatsManager.getCollection(repoInfo_);\n\n    if (forceRestClient || beingCrawled()) {\n      this.server_ = new ReadonlyRestClient(\n        this.repoInfo_,\n        this.onDataUpdate_.bind(this),\n        authTokenProvider\n      );\n\n      // Minor hack: Fire onConnect immediately, since there's no actual connection.\n      setTimeout(this.onConnectStatus_.bind(this, true), 0);\n    } else {\n      const authOverride = app.options['databaseAuthVariableOverride'];\n      // Validate authOverride\n      if (typeof authOverride !== 'undefined' && authOverride !== null) {\n        if (typeof authOverride !== 'object') {\n          throw new Error(\n            'Only objects are supported for option databaseAuthVariableOverride'\n          );\n        }\n        try {\n          stringify(authOverride);\n        } catch (e) {\n          throw new Error('Invalid authOverride provided: ' + e);\n        }\n      }\n\n      this.persistentConnection_ = new PersistentConnection(\n        this.repoInfo_,\n        this.onDataUpdate_.bind(this),\n        this.onConnectStatus_.bind(this),\n        this.onServerInfoUpdate_.bind(this),\n        authTokenProvider,\n        authOverride\n      );\n\n      this.server_ = this.persistentConnection_;\n    }\n\n    authTokenProvider.addTokenChangeListener(token => {\n      this.server_.refreshAuthToken(token);\n    });\n\n    // In the case of multiple Repos for the same repoInfo (i.e. there are multiple Firebase.Contexts being used),\n    // we only want to create one StatsReporter.  As such, we'll report stats over the first Repo created.\n    this.statsReporter_ = StatsManager.getOrCreateReporter(\n      repoInfo_,\n      () => new StatsReporter(this.stats_, this.server_)\n    );\n\n    this.transactions_init_();\n\n    // Used for .info.\n    this.infoData_ = new SnapshotHolder();\n    this.infoSyncTree_ = new SyncTree({\n      startListening: (query, tag, currentHashFn, onComplete) => {\n        let infoEvents: Event[] = [];\n        const node = this.infoData_.getNode(query.path);\n        // This is possibly a hack, but we have different semantics for .info endpoints. We don't raise null events\n        // on initial data...\n        if (!node.isEmpty()) {\n          infoEvents = this.infoSyncTree_.applyServerOverwrite(\n            query.path,\n            node\n          );\n          setTimeout(() => {\n            onComplete('ok');\n          }, 0);\n        }\n        return infoEvents;\n      },\n      stopListening: () => {}\n    });\n    this.updateInfo_('connected', false);\n\n    this.serverSyncTree_ = new SyncTree({\n      startListening: (query, tag, currentHashFn, onComplete) => {\n        this.server_.listen(query, currentHashFn, tag, (status, data) => {\n          const events = onComplete(status, data);\n          this.eventQueue_.raiseEventsForChangedPath(query.path, events);\n        });\n        // No synchronous events for network-backed sync trees\n        return [];\n      },\n      stopListening: (query, tag) => {\n        this.server_.unlisten(query, tag);\n      }\n    });\n  }\n\n  /**\n   * @return The URL corresponding to the root of this Firebase.\n   */\n  toString(): string {\n    return (\n      (this.repoInfo_.secure ? 'https://' : 'http://') + this.repoInfo_.host\n    );\n  }\n\n  /**\n   * @return The namespace represented by the repo.\n   */\n  name(): string {\n    return this.repoInfo_.namespace;\n  }\n\n  /**\n   * @return The time in milliseconds, taking the server offset into account if we have one.\n   */\n  serverTime(): number {\n    const offsetNode = this.infoData_.getNode(\n      new Path('.info/serverTimeOffset')\n    );\n    const offset = (offsetNode.val() as number) || 0;\n    return new Date().getTime() + offset;\n  }\n\n  /**\n   * Generate ServerValues using some variables from the repo object.\n   */\n  generateServerValues(): Object {\n    return generateWithValues({\n      timestamp: this.serverTime()\n    });\n  }\n\n  /**\n   * Called by realtime when we get new messages from the server.\n   */\n  private onDataUpdate_(\n    pathString: string,\n    data: any,\n    isMerge: boolean,\n    tag: number | null\n  ) {\n    // For testing.\n    this.dataUpdateCount++;\n    const path = new Path(pathString);\n    data = this.interceptServerDataCallback_\n      ? this.interceptServerDataCallback_(pathString, data)\n      : data;\n    let events = [];\n    if (tag) {\n      if (isMerge) {\n        const taggedChildren = map(data as { [k: string]: any }, (raw: any) =>\n          nodeFromJSON(raw)\n        );\n        events = this.serverSyncTree_.applyTaggedQueryMerge(\n          path,\n          taggedChildren,\n          tag\n        );\n      } else {\n        const taggedSnap = nodeFromJSON(data);\n        events = this.serverSyncTree_.applyTaggedQueryOverwrite(\n          path,\n          taggedSnap,\n          tag\n        );\n      }\n    } else if (isMerge) {\n      const changedChildren = map(data as { [k: string]: any }, (raw: any) =>\n        nodeFromJSON(raw)\n      );\n      events = this.serverSyncTree_.applyServerMerge(path, changedChildren);\n    } else {\n      const snap = nodeFromJSON(data);\n      events = this.serverSyncTree_.applyServerOverwrite(path, snap);\n    }\n    let affectedPath = path;\n    if (events.length > 0) {\n      // Since we have a listener outstanding for each transaction, receiving any events\n      // is a proxy for some change having occurred.\n      affectedPath = this.rerunTransactions_(path);\n    }\n    this.eventQueue_.raiseEventsForChangedPath(affectedPath, events);\n  }\n\n  // TODO: This should be @private but it's used by test_access.js and internal.js\n  interceptServerData_(callback: ((a: string, b: any) => any) | null) {\n    this.interceptServerDataCallback_ = callback;\n  }\n\n  private onConnectStatus_(connectStatus: boolean) {\n    this.updateInfo_('connected', connectStatus);\n    if (connectStatus === false) {\n      this.runOnDisconnectEvents_();\n    }\n  }\n\n  private onServerInfoUpdate_(updates: Object) {\n    each(updates, (key: string, value: any) => {\n      this.updateInfo_(key, value);\n    });\n  }\n\n  private updateInfo_(pathString: string, value: any) {\n    const path = new Path('/.info/' + pathString);\n    const newNode = nodeFromJSON(value);\n    this.infoData_.updateSnapshot(path, newNode);\n    const events = this.infoSyncTree_.applyServerOverwrite(path, newNode);\n    this.eventQueue_.raiseEventsForChangedPath(path, events);\n  }\n\n  private getNextWriteId_(): number {\n    return this.nextWriteId_++;\n  }\n\n  setWithPriority(\n    path: Path,\n    newVal: any,\n    newPriority: number | string | null,\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    this.log_('set', {\n      path: path.toString(),\n      value: newVal,\n      priority: newPriority\n    });\n\n    // TODO: Optimize this behavior to either (a) store flag to skip resolving where possible and / or\n    // (b) store unresolved paths on JSON parse\n    const serverValues = this.generateServerValues();\n    const newNodeUnresolved = nodeFromJSON(newVal, newPriority);\n    const existing = this.serverSyncTree_.calcCompleteEventCache(path);\n    const newNode = resolveDeferredValueSnapshot(\n      newNodeUnresolved,\n      existing,\n      serverValues\n    );\n\n    const writeId = this.getNextWriteId_();\n    const events = this.serverSyncTree_.applyUserOverwrite(\n      path,\n      newNode,\n      writeId,\n      true\n    );\n    this.eventQueue_.queueEvents(events);\n    this.server_.put(\n      path.toString(),\n      newNodeUnresolved.val(/*export=*/ true),\n      (status, errorReason) => {\n        const success = status === 'ok';\n        if (!success) {\n          warn('set at ' + path + ' failed: ' + status);\n        }\n\n        const clearEvents = this.serverSyncTree_.ackUserWrite(\n          writeId,\n          !success\n        );\n        this.eventQueue_.raiseEventsForChangedPath(path, clearEvents);\n        this.callOnCompleteCallback(onComplete, status, errorReason);\n      }\n    );\n    const affectedPath = this.abortTransactions_(path);\n    this.rerunTransactions_(affectedPath);\n    // We queued the events above, so just flush the queue here\n    this.eventQueue_.raiseEventsForChangedPath(affectedPath, []);\n  }\n\n  update(\n    path: Path,\n    childrenToMerge: { [k: string]: any },\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    this.log_('update', { path: path.toString(), value: childrenToMerge });\n\n    // Start with our existing data and merge each child into it.\n    let empty = true;\n    const serverValues = this.generateServerValues();\n    const changedChildren: { [k: string]: Node } = {};\n    each(childrenToMerge, (changedKey: string, changedValue: any) => {\n      empty = false;\n      const newNodeUnresolved = nodeFromJSON(changedValue);\n      changedChildren[changedKey] = resolveDeferredValueSnapshot(\n        newNodeUnresolved,\n        this.serverSyncTree_.calcCompleteEventCache(path),\n        serverValues\n      );\n    });\n\n    if (!empty) {\n      const writeId = this.getNextWriteId_();\n      const events = this.serverSyncTree_.applyUserMerge(\n        path,\n        changedChildren,\n        writeId\n      );\n      this.eventQueue_.queueEvents(events);\n      this.server_.merge(\n        path.toString(),\n        childrenToMerge,\n        (status, errorReason) => {\n          const success = status === 'ok';\n          if (!success) {\n            warn('update at ' + path + ' failed: ' + status);\n          }\n\n          const clearEvents = this.serverSyncTree_.ackUserWrite(\n            writeId,\n            !success\n          );\n          const affectedPath =\n            clearEvents.length > 0 ? this.rerunTransactions_(path) : path;\n          this.eventQueue_.raiseEventsForChangedPath(affectedPath, clearEvents);\n          this.callOnCompleteCallback(onComplete, status, errorReason);\n        }\n      );\n\n      each(childrenToMerge, (changedPath: string) => {\n        const affectedPath = this.abortTransactions_(path.child(changedPath));\n        this.rerunTransactions_(affectedPath);\n      });\n\n      // We queued the events above, so just flush the queue here\n      this.eventQueue_.raiseEventsForChangedPath(path, []);\n    } else {\n      log(\"update() called with empty data.  Don't do anything.\");\n      this.callOnCompleteCallback(onComplete, 'ok');\n    }\n  }\n\n  /**\n   * Applies all of the changes stored up in the onDisconnect_ tree.\n   */\n  private runOnDisconnectEvents_() {\n    this.log_('onDisconnectEvents');\n\n    const serverValues = this.generateServerValues();\n    const resolvedOnDisconnectTree = resolveDeferredValueTree(\n      this.onDisconnect_,\n      this.serverSyncTree_,\n      serverValues\n    );\n    let events: Event[] = [];\n\n    resolvedOnDisconnectTree.forEachTree(Path.Empty, (path, snap) => {\n      events = events.concat(\n        this.serverSyncTree_.applyServerOverwrite(path, snap)\n      );\n      const affectedPath = this.abortTransactions_(path);\n      this.rerunTransactions_(affectedPath);\n    });\n\n    this.onDisconnect_ = new SparseSnapshotTree();\n    this.eventQueue_.raiseEventsForChangedPath(Path.Empty, events);\n  }\n\n  onDisconnectCancel(\n    path: Path,\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    this.server_.onDisconnectCancel(path.toString(), (status, errorReason) => {\n      if (status === 'ok') {\n        this.onDisconnect_.forget(path);\n      }\n      this.callOnCompleteCallback(onComplete, status, errorReason);\n    });\n  }\n\n  onDisconnectSet(\n    path: Path,\n    value: any,\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    const newNode = nodeFromJSON(value);\n    this.server_.onDisconnectPut(\n      path.toString(),\n      newNode.val(/*export=*/ true),\n      (status, errorReason) => {\n        if (status === 'ok') {\n          this.onDisconnect_.remember(path, newNode);\n        }\n        this.callOnCompleteCallback(onComplete, status, errorReason);\n      }\n    );\n  }\n\n  onDisconnectSetWithPriority(\n    path: Path,\n    value: any,\n    priority: any,\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    const newNode = nodeFromJSON(value, priority);\n    this.server_.onDisconnectPut(\n      path.toString(),\n      newNode.val(/*export=*/ true),\n      (status, errorReason) => {\n        if (status === 'ok') {\n          this.onDisconnect_.remember(path, newNode);\n        }\n        this.callOnCompleteCallback(onComplete, status, errorReason);\n      }\n    );\n  }\n\n  onDisconnectUpdate(\n    path: Path,\n    childrenToMerge: { [k: string]: any },\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    if (isEmpty(childrenToMerge)) {\n      log(\n        \"onDisconnect().update() called with empty data.  Don't do anything.\"\n      );\n      this.callOnCompleteCallback(onComplete, 'ok');\n      return;\n    }\n\n    this.server_.onDisconnectMerge(\n      path.toString(),\n      childrenToMerge,\n      (status, errorReason) => {\n        if (status === 'ok') {\n          each(childrenToMerge, (childName: string, childNode: any) => {\n            const newChildNode = nodeFromJSON(childNode);\n            this.onDisconnect_.remember(path.child(childName), newChildNode);\n          });\n        }\n        this.callOnCompleteCallback(onComplete, status, errorReason);\n      }\n    );\n  }\n\n  addEventCallbackForQuery(query: Query, eventRegistration: EventRegistration) {\n    let events;\n    if (query.path.getFront() === '.info') {\n      events = this.infoSyncTree_.addEventRegistration(\n        query,\n        eventRegistration\n      );\n    } else {\n      events = this.serverSyncTree_.addEventRegistration(\n        query,\n        eventRegistration\n      );\n    }\n    this.eventQueue_.raiseEventsAtPath(query.path, events);\n  }\n\n  removeEventCallbackForQuery(\n    query: Query,\n    eventRegistration: EventRegistration\n  ) {\n    // These are guaranteed not to raise events, since we're not passing in a cancelError. However, we can future-proof\n    // a little bit by handling the return values anyways.\n    let events;\n    if (query.path.getFront() === '.info') {\n      events = this.infoSyncTree_.removeEventRegistration(\n        query,\n        eventRegistration\n      );\n    } else {\n      events = this.serverSyncTree_.removeEventRegistration(\n        query,\n        eventRegistration\n      );\n    }\n    this.eventQueue_.raiseEventsAtPath(query.path, events);\n  }\n\n  interrupt() {\n    if (this.persistentConnection_) {\n      this.persistentConnection_.interrupt(INTERRUPT_REASON);\n    }\n  }\n\n  resume() {\n    if (this.persistentConnection_) {\n      this.persistentConnection_.resume(INTERRUPT_REASON);\n    }\n  }\n\n  stats(showDelta: boolean = false) {\n    if (typeof console === 'undefined') return;\n\n    let stats: { [k: string]: any };\n    if (showDelta) {\n      if (!this.statsListener_)\n        this.statsListener_ = new StatsListener(this.stats_);\n      stats = this.statsListener_.get();\n    } else {\n      stats = this.stats_.get();\n    }\n\n    const longestName = Object.keys(stats).reduce(\n      (previousValue, currentValue) =>\n        Math.max(currentValue.length, previousValue),\n      0\n    );\n\n    each(stats, (stat: string, value: any) => {\n      let paddedStat = stat;\n      // pad stat names to be the same length (plus 2 extra spaces).\n      for (let i = stat.length; i < longestName + 2; i++) {\n        paddedStat += ' ';\n      }\n      console.log(paddedStat + value);\n    });\n  }\n\n  statsIncrementCounter(metric: string) {\n    this.stats_.incrementCounter(metric);\n    this.statsReporter_.includeStat(metric);\n  }\n\n  private log_(...var_args: any[]) {\n    let prefix = '';\n    if (this.persistentConnection_) {\n      prefix = this.persistentConnection_.id + ':';\n    }\n    log(prefix, ...var_args);\n  }\n\n  callOnCompleteCallback(\n    callback: ((status: Error | null, errorReason?: string) => void) | null,\n    status: string,\n    errorReason?: string | null\n  ) {\n    if (callback) {\n      exceptionGuard(function() {\n        if (status == 'ok') {\n          callback(null);\n        } else {\n          const code = (status || 'error').toUpperCase();\n          let message = code;\n          if (errorReason) message += ': ' + errorReason;\n\n          const error = new Error(message);\n          (error as any).code = code;\n          callback(error);\n        }\n      });\n    }\n  }\n\n  get database(): Database {\n    return this.__database || (this.__database = new Database(this));\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IndexedFilter } from './IndexedFilter';\nimport { PRIORITY_INDEX } from '../../snap/indexes/PriorityIndex';\nimport { NamedNode, Node } from '../../../core/snap/Node';\nimport { ChildrenNode } from '../../snap/ChildrenNode';\nimport { NodeFilter } from './NodeFilter';\nimport { QueryParams } from '../QueryParams';\nimport { Index } from '../../snap/indexes/Index';\nimport { Path } from '../../util/Path';\nimport { CompleteChildSource } from '../CompleteChildSource';\nimport { ChildChangeAccumulator } from '../ChildChangeAccumulator';\n\n/**\n * Filters nodes by range and uses an IndexFilter to track any changes after filtering the node\n *\n * @constructor\n * @implements {NodeFilter}\n */\nexport class RangedFilter implements NodeFilter {\n  /**\n   * @type {!IndexedFilter}\n   * @const\n   * @private\n   */\n  private indexedFilter_: IndexedFilter;\n\n  /**\n   * @const\n   * @type {!Index}\n   * @private\n   */\n  private index_: Index;\n\n  /**\n   * @const\n   * @type {!NamedNode}\n   * @private\n   */\n  private startPost_: NamedNode;\n\n  /**\n   * @const\n   * @type {!NamedNode}\n   * @private\n   */\n  private endPost_: NamedNode;\n\n  /**\n   * @param {!QueryParams} params\n   */\n  constructor(params: QueryParams) {\n    this.indexedFilter_ = new IndexedFilter(params.getIndex());\n    this.index_ = params.getIndex();\n    this.startPost_ = RangedFilter.getStartPost_(params);\n    this.endPost_ = RangedFilter.getEndPost_(params);\n  }\n\n  /**\n   * @return {!NamedNode}\n   */\n  getStartPost(): NamedNode {\n    return this.startPost_;\n  }\n\n  /**\n   * @return {!NamedNode}\n   */\n  getEndPost(): NamedNode {\n    return this.endPost_;\n  }\n\n  /**\n   * @param {!NamedNode} node\n   * @return {boolean}\n   */\n  matches(node: NamedNode): boolean {\n    return (\n      this.index_.compare(this.getStartPost(), node) <= 0 &&\n      this.index_.compare(node, this.getEndPost()) <= 0\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateChild(\n    snap: Node,\n    key: string,\n    newChild: Node,\n    affectedPath: Path,\n    source: CompleteChildSource,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (!this.matches(new NamedNode(key, newChild))) {\n      newChild = ChildrenNode.EMPTY_NODE;\n    }\n    return this.indexedFilter_.updateChild(\n      snap,\n      key,\n      newChild,\n      affectedPath,\n      source,\n      optChangeAccumulator\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateFullNode(\n    oldSnap: Node,\n    newSnap: Node,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (newSnap.isLeafNode()) {\n      // Make sure we have a children node with the correct index, not a leaf node;\n      newSnap = ChildrenNode.EMPTY_NODE;\n    }\n    let filtered = newSnap.withIndex(this.index_);\n    // Don't support priorities on queries\n    filtered = filtered.updatePriority(ChildrenNode.EMPTY_NODE);\n    const self = this;\n    newSnap.forEachChild(PRIORITY_INDEX, function(key, childNode) {\n      if (!self.matches(new NamedNode(key, childNode))) {\n        filtered = filtered.updateImmediateChild(key, ChildrenNode.EMPTY_NODE);\n      }\n    });\n    return this.indexedFilter_.updateFullNode(\n      oldSnap,\n      filtered,\n      optChangeAccumulator\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updatePriority(oldSnap: Node, newPriority: Node): Node {\n    // Don't support priorities on queries\n    return oldSnap;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  filtersNodes(): boolean {\n    return true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndexedFilter(): IndexedFilter {\n    return this.indexedFilter_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndex(): Index {\n    return this.index_;\n  }\n\n  /**\n   * @param {!QueryParams} params\n   * @return {!NamedNode}\n   * @private\n   */\n  private static getStartPost_(params: QueryParams): NamedNode {\n    if (params.hasStart()) {\n      const startName = params.getIndexStartName();\n      return params.getIndex().makePost(params.getIndexStartValue(), startName);\n    } else {\n      return params.getIndex().minPost();\n    }\n  }\n\n  /**\n   * @param {!QueryParams} params\n   * @return {!NamedNode}\n   * @private\n   */\n  private static getEndPost_(params: QueryParams): NamedNode {\n    if (params.hasEnd()) {\n      const endName = params.getIndexEndName();\n      return params.getIndex().makePost(params.getIndexEndValue(), endName);\n    } else {\n      return params.getIndex().maxPost();\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RangedFilter } from './RangedFilter';\nimport { ChildrenNode } from '../../snap/ChildrenNode';\nimport { Node, NamedNode } from '../../snap/Node';\nimport { assert } from '@firebase/util';\nimport { Change } from '../Change';\nimport { NodeFilter } from './NodeFilter';\nimport { Index } from '../../snap/indexes/Index';\nimport { IndexedFilter } from './IndexedFilter';\nimport { QueryParams } from '../QueryParams';\nimport { Path } from '../../util/Path';\nimport { CompleteChildSource } from '../CompleteChildSource';\nimport { ChildChangeAccumulator } from '../ChildChangeAccumulator';\n\n/**\n * Applies a limit and a range to a node and uses RangedFilter to do the heavy lifting where possible\n *\n * @constructor\n * @implements {NodeFilter}\n */\nexport class LimitedFilter implements NodeFilter {\n  /**\n   * @const\n   * @type {RangedFilter}\n   * @private\n   */\n  private readonly rangedFilter_: RangedFilter;\n\n  /**\n   * @const\n   * @type {!Index}\n   * @private\n   */\n  private readonly index_: Index;\n\n  /**\n   * @const\n   * @type {number}\n   * @private\n   */\n  private readonly limit_: number;\n\n  /**\n   * @const\n   * @type {boolean}\n   * @private\n   */\n  private readonly reverse_: boolean;\n\n  /**\n   * @param {!QueryParams} params\n   */\n  constructor(params: QueryParams) {\n    this.rangedFilter_ = new RangedFilter(params);\n    this.index_ = params.getIndex();\n    this.limit_ = params.getLimit();\n    this.reverse_ = !params.isViewFromLeft();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateChild(\n    snap: Node,\n    key: string,\n    newChild: Node,\n    affectedPath: Path,\n    source: CompleteChildSource,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (!this.rangedFilter_.matches(new NamedNode(key, newChild))) {\n      newChild = ChildrenNode.EMPTY_NODE;\n    }\n    if (snap.getImmediateChild(key).equals(newChild)) {\n      // No change\n      return snap;\n    } else if (snap.numChildren() < this.limit_) {\n      return this.rangedFilter_\n        .getIndexedFilter()\n        .updateChild(\n          snap,\n          key,\n          newChild,\n          affectedPath,\n          source,\n          optChangeAccumulator\n        );\n    } else {\n      return this.fullLimitUpdateChild_(\n        snap,\n        key,\n        newChild,\n        source,\n        optChangeAccumulator\n      );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateFullNode(\n    oldSnap: Node,\n    newSnap: Node,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    let filtered;\n    if (newSnap.isLeafNode() || newSnap.isEmpty()) {\n      // Make sure we have a children node with the correct index, not a leaf node;\n      filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\n    } else {\n      if (\n        this.limit_ * 2 < newSnap.numChildren() &&\n        newSnap.isIndexed(this.index_)\n      ) {\n        // Easier to build up a snapshot, since what we're given has more than twice the elements we want\n        filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\n        // anchor to the startPost, endPost, or last element as appropriate\n        let iterator;\n        if (this.reverse_) {\n          iterator = (newSnap as ChildrenNode).getReverseIteratorFrom(\n            this.rangedFilter_.getEndPost(),\n            this.index_\n          );\n        } else {\n          iterator = (newSnap as ChildrenNode).getIteratorFrom(\n            this.rangedFilter_.getStartPost(),\n            this.index_\n          );\n        }\n        let count = 0;\n        while (iterator.hasNext() && count < this.limit_) {\n          const next = iterator.getNext();\n          let inRange;\n          if (this.reverse_) {\n            inRange =\n              this.index_.compare(this.rangedFilter_.getStartPost(), next) <= 0;\n          } else {\n            inRange =\n              this.index_.compare(next, this.rangedFilter_.getEndPost()) <= 0;\n          }\n          if (inRange) {\n            filtered = filtered.updateImmediateChild(next.name, next.node);\n            count++;\n          } else {\n            // if we have reached the end post, we cannot keep adding elemments\n            break;\n          }\n        }\n      } else {\n        // The snap contains less than twice the limit. Faster to delete from the snap than build up a new one\n        filtered = newSnap.withIndex(this.index_);\n        // Don't support priorities on queries\n        filtered = filtered.updatePriority(\n          ChildrenNode.EMPTY_NODE\n        ) as ChildrenNode;\n        let startPost;\n        let endPost;\n        let cmp;\n        let iterator;\n        if (this.reverse_) {\n          iterator = filtered.getReverseIterator(this.index_);\n          startPost = this.rangedFilter_.getEndPost();\n          endPost = this.rangedFilter_.getStartPost();\n          const indexCompare = this.index_.getCompare();\n          cmp = (a: NamedNode, b: NamedNode) => indexCompare(b, a);\n        } else {\n          iterator = filtered.getIterator(this.index_);\n          startPost = this.rangedFilter_.getStartPost();\n          endPost = this.rangedFilter_.getEndPost();\n          cmp = this.index_.getCompare();\n        }\n\n        let count = 0;\n        let foundStartPost = false;\n        while (iterator.hasNext()) {\n          let next = iterator.getNext();\n          if (!foundStartPost && cmp(startPost, next) <= 0) {\n            // start adding\n            foundStartPost = true;\n          }\n          let inRange =\n            foundStartPost && count < this.limit_ && cmp(next, endPost) <= 0;\n          if (inRange) {\n            count++;\n          } else {\n            filtered = filtered.updateImmediateChild(\n              next.name,\n              ChildrenNode.EMPTY_NODE\n            );\n          }\n        }\n      }\n    }\n    return this.rangedFilter_\n      .getIndexedFilter()\n      .updateFullNode(oldSnap, filtered, optChangeAccumulator);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updatePriority(oldSnap: Node, newPriority: Node): Node {\n    // Don't support priorities on queries\n    return oldSnap;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  filtersNodes(): boolean {\n    return true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndexedFilter(): IndexedFilter {\n    return this.rangedFilter_.getIndexedFilter();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndex(): Index {\n    return this.index_;\n  }\n\n  /**\n   * @param {!Node} snap\n   * @param {string} childKey\n   * @param {!Node} childSnap\n   * @param {!CompleteChildSource} source\n   * @param {?ChildChangeAccumulator} changeAccumulator\n   * @return {!Node}\n   * @private\n   */\n  private fullLimitUpdateChild_(\n    snap: Node,\n    childKey: string,\n    childSnap: Node,\n    source: CompleteChildSource,\n    changeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    // TODO: rename all cache stuff etc to general snap terminology\n    let cmp;\n    if (this.reverse_) {\n      const indexCmp = this.index_.getCompare();\n      cmp = (a: NamedNode, b: NamedNode) => indexCmp(b, a);\n    } else {\n      cmp = this.index_.getCompare();\n    }\n    const oldEventCache = snap as ChildrenNode;\n    assert(oldEventCache.numChildren() == this.limit_, '');\n    const newChildNamedNode = new NamedNode(childKey, childSnap);\n    const windowBoundary = this.reverse_\n      ? oldEventCache.getFirstChild(this.index_)\n      : (oldEventCache.getLastChild(this.index_) as NamedNode);\n    const inRange = this.rangedFilter_.matches(newChildNamedNode);\n    if (oldEventCache.hasChild(childKey)) {\n      const oldChildSnap = oldEventCache.getImmediateChild(childKey);\n      let nextChild = source.getChildAfterChild(\n        this.index_,\n        windowBoundary,\n        this.reverse_\n      );\n      while (\n        nextChild != null &&\n        (nextChild.name == childKey || oldEventCache.hasChild(nextChild.name))\n      ) {\n        // There is a weird edge case where a node is updated as part of a merge in the write tree, but hasn't\n        // been applied to the limited filter yet. Ignore this next child which will be updated later in\n        // the limited filter...\n        nextChild = source.getChildAfterChild(\n          this.index_,\n          nextChild,\n          this.reverse_\n        );\n      }\n      const compareNext =\n        nextChild == null ? 1 : cmp(nextChild, newChildNamedNode);\n      const remainsInWindow =\n        inRange && !childSnap.isEmpty() && compareNext >= 0;\n      if (remainsInWindow) {\n        if (changeAccumulator != null) {\n          changeAccumulator.trackChildChange(\n            Change.childChangedChange(childKey, childSnap, oldChildSnap)\n          );\n        }\n        return oldEventCache.updateImmediateChild(childKey, childSnap);\n      } else {\n        if (changeAccumulator != null) {\n          changeAccumulator.trackChildChange(\n            Change.childRemovedChange(childKey, oldChildSnap)\n          );\n        }\n        const newEventCache = oldEventCache.updateImmediateChild(\n          childKey,\n          ChildrenNode.EMPTY_NODE\n        );\n        const nextChildInRange =\n          nextChild != null && this.rangedFilter_.matches(nextChild);\n        if (nextChildInRange) {\n          if (changeAccumulator != null) {\n            changeAccumulator.trackChildChange(\n              Change.childAddedChange(nextChild.name, nextChild.node)\n            );\n          }\n          return newEventCache.updateImmediateChild(\n            nextChild.name,\n            nextChild.node\n          );\n        } else {\n          return newEventCache;\n        }\n      }\n    } else if (childSnap.isEmpty()) {\n      // we're deleting a node, but it was not in the window, so ignore it\n      return snap;\n    } else if (inRange) {\n      if (cmp(windowBoundary, newChildNamedNode) >= 0) {\n        if (changeAccumulator != null) {\n          changeAccumulator.trackChildChange(\n            Change.childRemovedChange(windowBoundary.name, windowBoundary.node)\n          );\n          changeAccumulator.trackChildChange(\n            Change.childAddedChange(childKey, childSnap)\n          );\n        }\n        return oldEventCache\n          .updateImmediateChild(childKey, childSnap)\n          .updateImmediateChild(windowBoundary.name, ChildrenNode.EMPTY_NODE);\n      } else {\n        return snap;\n      }\n    } else {\n      return snap;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { MIN_NAME, MAX_NAME } from '../util/util';\nimport { KEY_INDEX } from '../snap/indexes/KeyIndex';\nimport { PRIORITY_INDEX } from '../snap/indexes/PriorityIndex';\nimport { VALUE_INDEX } from '../snap/indexes/ValueIndex';\nimport { PathIndex } from '../snap/indexes/PathIndex';\nimport { IndexedFilter } from './filter/IndexedFilter';\nimport { LimitedFilter } from './filter/LimitedFilter';\nimport { RangedFilter } from './filter/RangedFilter';\nimport { stringify } from '@firebase/util';\nimport { NodeFilter } from './filter/NodeFilter';\nimport { Index } from '../snap/indexes/Index';\n\n/**\n * This class is an immutable-from-the-public-api struct containing a set of query parameters defining a\n * range to be returned for a particular location. It is assumed that validation of parameters is done at the\n * user-facing API level, so it is not done here.\n * @constructor\n */\nexport class QueryParams {\n  private limitSet_ = false;\n  private startSet_ = false;\n  private startNameSet_ = false;\n  private endSet_ = false;\n  private endNameSet_ = false;\n\n  private limit_ = 0;\n  private viewFrom_ = '';\n  private indexStartValue_: any | null = null;\n  private indexStartName_ = '';\n  private indexEndValue_: any | null = null;\n  private indexEndName_ = '';\n\n  private index_ = PRIORITY_INDEX;\n\n  /**\n   * Wire Protocol Constants\n   * @const\n   * @enum {string}\n   * @private\n   */\n  private static readonly WIRE_PROTOCOL_CONSTANTS_ = {\n    INDEX_START_VALUE: 'sp',\n    INDEX_START_NAME: 'sn',\n    INDEX_END_VALUE: 'ep',\n    INDEX_END_NAME: 'en',\n    LIMIT: 'l',\n    VIEW_FROM: 'vf',\n    VIEW_FROM_LEFT: 'l',\n    VIEW_FROM_RIGHT: 'r',\n    INDEX: 'i'\n  };\n\n  /**\n   * REST Query Constants\n   * @const\n   * @enum {string}\n   * @private\n   */\n  private static readonly REST_QUERY_CONSTANTS_ = {\n    ORDER_BY: 'orderBy',\n    PRIORITY_INDEX: '$priority',\n    VALUE_INDEX: '$value',\n    KEY_INDEX: '$key',\n    START_AT: 'startAt',\n    END_AT: 'endAt',\n    LIMIT_TO_FIRST: 'limitToFirst',\n    LIMIT_TO_LAST: 'limitToLast'\n  };\n\n  /**\n   * Default, empty query parameters\n   * @type {!QueryParams}\n   * @const\n   */\n  static readonly DEFAULT = new QueryParams();\n\n  /**\n   * @return {boolean}\n   */\n  hasStart(): boolean {\n    return this.startSet_;\n  }\n\n  /**\n   * @return {boolean} True if it would return from left.\n   */\n  isViewFromLeft(): boolean {\n    if (this.viewFrom_ === '') {\n      // limit(), rather than limitToFirst or limitToLast was called.\n      // This means that only one of startSet_ and endSet_ is true. Use them\n      // to calculate which side of the view to anchor to. If neither is set,\n      // anchor to the end.\n      return this.startSet_;\n    } else {\n      return (\n        this.viewFrom_ === QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT\n      );\n    }\n  }\n\n  /**\n   * Only valid to call if hasStart() returns true\n   * @return {*}\n   */\n  getIndexStartValue(): any {\n    assert(this.startSet_, 'Only valid if start has been set');\n    return this.indexStartValue_;\n  }\n\n  /**\n   * Only valid to call if hasStart() returns true.\n   * Returns the starting key name for the range defined by these query parameters\n   * @return {!string}\n   */\n  getIndexStartName(): string {\n    assert(this.startSet_, 'Only valid if start has been set');\n    if (this.startNameSet_) {\n      return this.indexStartName_;\n    } else {\n      return MIN_NAME;\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasEnd(): boolean {\n    return this.endSet_;\n  }\n\n  /**\n   * Only valid to call if hasEnd() returns true.\n   * @return {*}\n   */\n  getIndexEndValue(): any {\n    assert(this.endSet_, 'Only valid if end has been set');\n    return this.indexEndValue_;\n  }\n\n  /**\n   * Only valid to call if hasEnd() returns true.\n   * Returns the end key name for the range defined by these query parameters\n   * @return {!string}\n   */\n  getIndexEndName(): string {\n    assert(this.endSet_, 'Only valid if end has been set');\n    if (this.endNameSet_) {\n      return this.indexEndName_;\n    } else {\n      return MAX_NAME;\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasLimit(): boolean {\n    return this.limitSet_;\n  }\n\n  /**\n   * @return {boolean} True if a limit has been set and it has been explicitly anchored\n   */\n  hasAnchoredLimit(): boolean {\n    return this.limitSet_ && this.viewFrom_ !== '';\n  }\n\n  /**\n   * Only valid to call if hasLimit() returns true\n   * @return {!number}\n   */\n  getLimit(): number {\n    assert(this.limitSet_, 'Only valid if limit has been set');\n    return this.limit_;\n  }\n\n  /**\n   * @return {!Index}\n   */\n  getIndex(): Index {\n    return this.index_;\n  }\n\n  /**\n   * @return {!QueryParams}\n   * @private\n   */\n  private copy_(): QueryParams {\n    const copy = new QueryParams();\n    copy.limitSet_ = this.limitSet_;\n    copy.limit_ = this.limit_;\n    copy.startSet_ = this.startSet_;\n    copy.indexStartValue_ = this.indexStartValue_;\n    copy.startNameSet_ = this.startNameSet_;\n    copy.indexStartName_ = this.indexStartName_;\n    copy.endSet_ = this.endSet_;\n    copy.indexEndValue_ = this.indexEndValue_;\n    copy.endNameSet_ = this.endNameSet_;\n    copy.indexEndName_ = this.indexEndName_;\n    copy.index_ = this.index_;\n    copy.viewFrom_ = this.viewFrom_;\n    return copy;\n  }\n\n  /**\n   * @param {!number} newLimit\n   * @return {!QueryParams}\n   */\n  limit(newLimit: number): QueryParams {\n    const newParams = this.copy_();\n    newParams.limitSet_ = true;\n    newParams.limit_ = newLimit;\n    newParams.viewFrom_ = '';\n    return newParams;\n  }\n\n  /**\n   * @param {!number} newLimit\n   * @return {!QueryParams}\n   */\n  limitToFirst(newLimit: number): QueryParams {\n    const newParams = this.copy_();\n    newParams.limitSet_ = true;\n    newParams.limit_ = newLimit;\n    newParams.viewFrom_ = QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT;\n    return newParams;\n  }\n\n  /**\n   * @param {!number} newLimit\n   * @return {!QueryParams}\n   */\n  limitToLast(newLimit: number): QueryParams {\n    const newParams = this.copy_();\n    newParams.limitSet_ = true;\n    newParams.limit_ = newLimit;\n    newParams.viewFrom_ = QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT;\n    return newParams;\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {?string=} key\n   * @return {!QueryParams}\n   */\n  startAt(indexValue: any, key?: string | null): QueryParams {\n    const newParams = this.copy_();\n    newParams.startSet_ = true;\n    if (indexValue === undefined) {\n      indexValue = null;\n    }\n    newParams.indexStartValue_ = indexValue;\n    if (key != null) {\n      newParams.startNameSet_ = true;\n      newParams.indexStartName_ = key;\n    } else {\n      newParams.startNameSet_ = false;\n      newParams.indexStartName_ = '';\n    }\n    return newParams;\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {?string=} key\n   * @return {!QueryParams}\n   */\n  endAt(indexValue: any, key?: string | null): QueryParams {\n    const newParams = this.copy_();\n    newParams.endSet_ = true;\n    if (indexValue === undefined) {\n      indexValue = null;\n    }\n    newParams.indexEndValue_ = indexValue;\n    if (key !== undefined) {\n      newParams.endNameSet_ = true;\n      newParams.indexEndName_ = key;\n    } else {\n      newParams.endNameSet_ = false;\n      newParams.indexEndName_ = '';\n    }\n    return newParams;\n  }\n\n  /**\n   * @param {!Index} index\n   * @return {!QueryParams}\n   */\n  orderBy(index: Index): QueryParams {\n    const newParams = this.copy_();\n    newParams.index_ = index;\n    return newParams;\n  }\n\n  /**\n   * @return {!Object}\n   */\n  getQueryObject(): Object {\n    const WIRE_PROTOCOL_CONSTANTS = QueryParams.WIRE_PROTOCOL_CONSTANTS_;\n    const obj: { [k: string]: any } = {};\n    if (this.startSet_) {\n      obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_VALUE] = this.indexStartValue_;\n      if (this.startNameSet_) {\n        obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_NAME] = this.indexStartName_;\n      }\n    }\n    if (this.endSet_) {\n      obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_VALUE] = this.indexEndValue_;\n      if (this.endNameSet_) {\n        obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_NAME] = this.indexEndName_;\n      }\n    }\n    if (this.limitSet_) {\n      obj[WIRE_PROTOCOL_CONSTANTS.LIMIT] = this.limit_;\n      let viewFrom = this.viewFrom_;\n      if (viewFrom === '') {\n        if (this.isViewFromLeft()) {\n          viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_LEFT;\n        } else {\n          viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_RIGHT;\n        }\n      }\n      obj[WIRE_PROTOCOL_CONSTANTS.VIEW_FROM] = viewFrom;\n    }\n    // For now, priority index is the default, so we only specify if it's some other index\n    if (this.index_ !== PRIORITY_INDEX) {\n      obj[WIRE_PROTOCOL_CONSTANTS.INDEX] = this.index_.toString();\n    }\n    return obj;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  loadsAllData(): boolean {\n    return !(this.startSet_ || this.endSet_ || this.limitSet_);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isDefault(): boolean {\n    return this.loadsAllData() && this.index_ == PRIORITY_INDEX;\n  }\n\n  /**\n   * @return {!NodeFilter}\n   */\n  getNodeFilter(): NodeFilter {\n    if (this.loadsAllData()) {\n      return new IndexedFilter(this.getIndex());\n    } else if (this.hasLimit()) {\n      return new LimitedFilter(this);\n    } else {\n      return new RangedFilter(this);\n    }\n  }\n\n  /**\n   * Returns a set of REST query string parameters representing this query.\n   *\n   * @return {!Object.<string,*>} query string parameters\n   */\n  toRestQueryStringParameters(): { [k: string]: any } {\n    const REST_CONSTANTS = QueryParams.REST_QUERY_CONSTANTS_;\n    const qs: { [k: string]: string | number } = {};\n\n    if (this.isDefault()) {\n      return qs;\n    }\n\n    let orderBy;\n    if (this.index_ === PRIORITY_INDEX) {\n      orderBy = REST_CONSTANTS.PRIORITY_INDEX;\n    } else if (this.index_ === VALUE_INDEX) {\n      orderBy = REST_CONSTANTS.VALUE_INDEX;\n    } else if (this.index_ === KEY_INDEX) {\n      orderBy = REST_CONSTANTS.KEY_INDEX;\n    } else {\n      assert(this.index_ instanceof PathIndex, 'Unrecognized index type!');\n      orderBy = this.index_.toString();\n    }\n    qs[REST_CONSTANTS.ORDER_BY] = stringify(orderBy);\n\n    if (this.startSet_) {\n      qs[REST_CONSTANTS.START_AT] = stringify(this.indexStartValue_);\n      if (this.startNameSet_) {\n        qs[REST_CONSTANTS.START_AT] += ',' + stringify(this.indexStartName_);\n      }\n    }\n\n    if (this.endSet_) {\n      qs[REST_CONSTANTS.END_AT] = stringify(this.indexEndValue_);\n      if (this.endNameSet_) {\n        qs[REST_CONSTANTS.END_AT] += ',' + stringify(this.indexEndName_);\n      }\n    }\n\n    if (this.limitSet_) {\n      if (this.isViewFromLeft()) {\n        qs[REST_CONSTANTS.LIMIT_TO_FIRST] = this.limit_;\n      } else {\n        qs[REST_CONSTANTS.LIMIT_TO_LAST] = this.limit_;\n      }\n    }\n\n    return qs;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { OnDisconnect } from './onDisconnect';\nimport { TransactionResult } from './TransactionResult';\nimport { warn } from '../core/util/util';\nimport { nextPushId } from '../core/util/NextPushId';\nimport { Query } from './Query';\nimport { Repo } from '../core/Repo';\nimport { Path } from '../core/util/Path';\nimport { QueryParams } from '../core/view/QueryParams';\nimport {\n  validateRootPathString,\n  validatePathString,\n  validateFirebaseMergeDataArg,\n  validateBoolean,\n  validatePriority,\n  validateFirebaseDataArg,\n  validateWritablePath\n} from '../core/util/validation';\nimport { validateArgCount, validateCallback } from '@firebase/util';\nimport { Deferred } from '@firebase/util';\nimport { SyncPoint } from '../core/SyncPoint';\nimport { Database } from './Database';\nimport { DataSnapshot } from './DataSnapshot';\nimport * as types from '@firebase/database-types';\n\nexport interface ReferenceConstructor {\n  new (repo: Repo, path: Path): Reference;\n}\n\nexport class Reference extends Query implements types.Reference {\n  public then: (a?: any) => Promise<any>;\n  public catch: (a?: Error) => Promise<any>;\n\n  /**\n   * Call options:\n   *   new Reference(Repo, Path) or\n   *   new Reference(url: string, string|RepoManager)\n   *\n   * Externally - this is the firebase.database.Reference type.\n   *\n   * @param {!Repo} repo\n   * @param {(!Path)} path\n   * @extends {Query}\n   */\n  constructor(repo: Repo, path: Path) {\n    if (!(repo instanceof Repo)) {\n      throw new Error(\n        'new Reference() no longer supported - use app.database().'\n      );\n    }\n\n    // call Query's constructor, passing in the repo and path.\n    super(repo, path, QueryParams.DEFAULT, false);\n  }\n\n  /** @return {?string} */\n  getKey(): string | null {\n    validateArgCount('Reference.key', 0, 0, arguments.length);\n\n    if (this.path.isEmpty()) return null;\n    else return this.path.getBack();\n  }\n\n  /**\n   * @param {!(string|Path)} pathString\n   * @return {!Reference}\n   */\n  child(pathString: string | Path): Reference {\n    validateArgCount('Reference.child', 1, 1, arguments.length);\n    if (typeof pathString === 'number') {\n      pathString = String(pathString);\n    } else if (!(pathString instanceof Path)) {\n      if (this.path.getFront() === null)\n        validateRootPathString('Reference.child', 1, pathString, false);\n      else validatePathString('Reference.child', 1, pathString, false);\n    }\n\n    return new Reference(this.repo, this.path.child(pathString));\n  }\n\n  /** @return {?Reference} */\n  getParent(): Reference | null {\n    validateArgCount('Reference.parent', 0, 0, arguments.length);\n\n    const parentPath = this.path.parent();\n    return parentPath === null ? null : new Reference(this.repo, parentPath);\n  }\n\n  /** @return {!Reference} */\n  getRoot(): Reference {\n    validateArgCount('Reference.root', 0, 0, arguments.length);\n\n    let ref = this as any;\n    while (ref.getParent() !== null) {\n      ref = ref.getParent();\n    }\n    return ref;\n  }\n\n  /** @return {!Database} */\n  databaseProp(): Database {\n    return this.repo.database;\n  }\n\n  /**\n   * @param {*} newVal\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  set(newVal: any, onComplete?: (a: Error | null) => void): Promise<any> {\n    validateArgCount('Reference.set', 1, 2, arguments.length);\n    validateWritablePath('Reference.set', this.path);\n    validateFirebaseDataArg('Reference.set', 1, newVal, this.path, false);\n    validateCallback('Reference.set', 2, onComplete, true);\n\n    const deferred = new Deferred();\n    this.repo.setWithPriority(\n      this.path,\n      newVal,\n      /*priority=*/ null,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {!Object} objectToMerge\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  update(\n    objectToMerge: Object,\n    onComplete?: (a: Error | null) => void\n  ): Promise<any> {\n    validateArgCount('Reference.update', 1, 2, arguments.length);\n    validateWritablePath('Reference.update', this.path);\n\n    if (Array.isArray(objectToMerge)) {\n      const newObjectToMerge: { [k: string]: any } = {};\n      for (let i = 0; i < objectToMerge.length; ++i) {\n        newObjectToMerge['' + i] = objectToMerge[i];\n      }\n      objectToMerge = newObjectToMerge;\n      warn(\n        'Passing an Array to Firebase.update() is deprecated. ' +\n          'Use set() if you want to overwrite the existing data, or ' +\n          'an Object with integer keys if you really do want to ' +\n          'only update some of the children.'\n      );\n    }\n    validateFirebaseMergeDataArg(\n      'Reference.update',\n      1,\n      objectToMerge,\n      this.path,\n      false\n    );\n    validateCallback('Reference.update', 2, onComplete, true);\n    const deferred = new Deferred();\n    this.repo.update(\n      this.path,\n      objectToMerge,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {*} newVal\n   * @param {string|number|null} newPriority\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  setWithPriority(\n    newVal: any,\n    newPriority: string | number | null,\n    onComplete?: (a: Error | null) => void\n  ): Promise<any> {\n    validateArgCount('Reference.setWithPriority', 2, 3, arguments.length);\n    validateWritablePath('Reference.setWithPriority', this.path);\n    validateFirebaseDataArg(\n      'Reference.setWithPriority',\n      1,\n      newVal,\n      this.path,\n      false\n    );\n    validatePriority('Reference.setWithPriority', 2, newPriority, false);\n    validateCallback('Reference.setWithPriority', 3, onComplete, true);\n\n    if (this.getKey() === '.length' || this.getKey() === '.keys')\n      throw 'Reference.setWithPriority failed: ' +\n        this.getKey() +\n        ' is a read-only object.';\n\n    const deferred = new Deferred();\n    this.repo.setWithPriority(\n      this.path,\n      newVal,\n      newPriority,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  remove(onComplete?: (a: Error | null) => void): Promise<any> {\n    validateArgCount('Reference.remove', 0, 1, arguments.length);\n    validateWritablePath('Reference.remove', this.path);\n    validateCallback('Reference.remove', 1, onComplete, true);\n\n    return this.set(null, onComplete);\n  }\n\n  /**\n   * @param {function(*):*} transactionUpdate\n   * @param {(function(?Error, boolean, ?DataSnapshot))=} onComplete\n   * @param {boolean=} applyLocally\n   * @return {!Promise}\n   */\n  transaction(\n    transactionUpdate: (a: any) => any,\n    onComplete?: (a: Error | null, b: boolean, c: DataSnapshot | null) => void,\n    applyLocally?: boolean\n  ): Promise<TransactionResult> {\n    validateArgCount('Reference.transaction', 1, 3, arguments.length);\n    validateWritablePath('Reference.transaction', this.path);\n    validateCallback('Reference.transaction', 1, transactionUpdate, false);\n    validateCallback('Reference.transaction', 2, onComplete, true);\n    // NOTE: applyLocally is an internal-only option for now.  We need to decide if we want to keep it and how\n    // to expose it.\n    validateBoolean('Reference.transaction', 3, applyLocally, true);\n\n    if (this.getKey() === '.length' || this.getKey() === '.keys')\n      throw 'Reference.transaction failed: ' +\n        this.getKey() +\n        ' is a read-only object.';\n\n    if (applyLocally === undefined) applyLocally = true;\n\n    const deferred = new Deferred<TransactionResult>();\n    if (typeof onComplete === 'function') {\n      deferred.promise.catch(() => {});\n    }\n\n    const promiseComplete = function(\n      error: Error,\n      committed: boolean,\n      snapshot: DataSnapshot\n    ) {\n      if (error) {\n        deferred.reject(error);\n      } else {\n        deferred.resolve(new TransactionResult(committed, snapshot));\n      }\n      if (typeof onComplete === 'function') {\n        onComplete(error, committed, snapshot);\n      }\n    };\n    this.repo.startTransaction(\n      this.path,\n      transactionUpdate,\n      promiseComplete,\n      applyLocally\n    );\n\n    return deferred.promise;\n  }\n\n  /**\n   * @param {string|number|null} priority\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  setPriority(\n    priority: string | number | null,\n    onComplete?: (a: Error | null) => void\n  ): Promise<any> {\n    validateArgCount('Reference.setPriority', 1, 2, arguments.length);\n    validateWritablePath('Reference.setPriority', this.path);\n    validatePriority('Reference.setPriority', 1, priority, false);\n    validateCallback('Reference.setPriority', 2, onComplete, true);\n\n    const deferred = new Deferred();\n    this.repo.setWithPriority(\n      this.path.child('.priority'),\n      priority,\n      null,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {*=} value\n   * @param {function(?Error)=} onComplete\n   * @return {!Reference}\n   */\n  push(value?: any, onComplete?: (a: Error | null) => void): Reference {\n    validateArgCount('Reference.push', 0, 2, arguments.length);\n    validateWritablePath('Reference.push', this.path);\n    validateFirebaseDataArg('Reference.push', 1, value, this.path, true);\n    validateCallback('Reference.push', 2, onComplete, true);\n\n    const now = this.repo.serverTime();\n    const name = nextPushId(now);\n\n    // push() returns a ThennableReference whose promise is fulfilled with a regular Reference.\n    // We use child() to create handles to two different references. The first is turned into a\n    // ThennableReference below by adding then() and catch() methods and is used as the\n    // return value of push(). The second remains a regular Reference and is used as the fulfilled\n    // value of the first ThennableReference.\n    const thennablePushRef = this.child(name);\n    const pushRef = this.child(name);\n\n    let promise;\n    if (value != null) {\n      promise = thennablePushRef.set(value, onComplete).then(() => pushRef);\n    } else {\n      promise = Promise.resolve(pushRef);\n    }\n\n    thennablePushRef.then = promise.then.bind(promise);\n    thennablePushRef.catch = promise.then.bind(promise, undefined);\n\n    if (typeof onComplete === 'function') {\n      promise.catch(() => {});\n    }\n\n    return thennablePushRef;\n  }\n\n  /**\n   * @return {!OnDisconnect}\n   */\n  onDisconnect(): OnDisconnect {\n    validateWritablePath('Reference.onDisconnect', this.path);\n    return new OnDisconnect(this.repo, this.path);\n  }\n\n  get database(): Database {\n    return this.databaseProp();\n  }\n\n  get key(): string | null {\n    return this.getKey();\n  }\n\n  get parent(): Reference | null {\n    return this.getParent();\n  }\n\n  get root(): Reference {\n    return this.getRoot();\n  }\n}\n\n/**\n * Define reference constructor in various modules\n *\n * We are doing this here to avoid several circular\n * dependency issues\n */\nQuery.__referenceConstructor = Reference;\nSyncPoint.__referenceConstructor = Reference;\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Path } from './Path';\nimport { contains, safeGet } from '@firebase/util';\nimport { each } from './util';\n\n/**\n * Node in a Tree.\n */\nexport class TreeNode<T> {\n  // TODO: Consider making accessors that create children and value lazily or\n  // separate Internal / Leaf 'types'.\n  children: { [name: string]: TreeNode<T> } = {};\n  childCount = 0;\n  value: T | null = null;\n}\n\n/**\n * A light-weight tree, traversable by path.  Nodes can have both values and children.\n * Nodes are not enumerated (by forEachChild) unless they have a value or non-empty\n * children.\n */\nexport class Tree<T> {\n  /**\n   * @template T\n   * @param {string=} name_ Optional name of the node.\n   * @param {Tree=} parent_ Optional parent node.\n   * @param {TreeNode=} node_ Optional node to wrap.\n   */\n  constructor(\n    private name_: string = '',\n    private parent_: Tree<T> | null = null,\n    private node_: TreeNode<T> = new TreeNode<T>()\n  ) {}\n\n  /**\n   * Returns a sub-Tree for the given path.\n   *\n   * @param {!(string|Path)} pathObj Path to look up.\n   * @return {!Tree.<T>} Tree for path.\n   */\n  subTree(pathObj: string | Path): Tree<T> {\n    // TODO: Require pathObj to be Path?\n    let path = pathObj instanceof Path ? pathObj : new Path(pathObj);\n    let child = this as Tree<T>,\n      next;\n    while ((next = path.getFront()) !== null) {\n      const childNode = safeGet(child.node_.children, next) || new TreeNode();\n      child = new Tree(next, child, childNode);\n      path = path.popFront();\n    }\n\n    return child;\n  }\n\n  /**\n   * Returns the data associated with this tree node.\n   *\n   * @return {?T} The data or null if no data exists.\n   */\n  getValue(): T | null {\n    return this.node_.value;\n  }\n\n  /**\n   * Sets data to this tree node.\n   *\n   * @param {!T} value Value to set.\n   */\n  setValue(value: T) {\n    assert(typeof value !== 'undefined', 'Cannot set value to undefined');\n    this.node_.value = value;\n    this.updateParents_();\n  }\n\n  /**\n   * Clears the contents of the tree node (its value and all children).\n   */\n  clear() {\n    this.node_.value = null;\n    this.node_.children = {};\n    this.node_.childCount = 0;\n    this.updateParents_();\n  }\n\n  /**\n   * @return {boolean} Whether the tree has any children.\n   */\n  hasChildren(): boolean {\n    return this.node_.childCount > 0;\n  }\n\n  /**\n   * @return {boolean} Whether the tree is empty (no value or children).\n   */\n  isEmpty(): boolean {\n    return this.getValue() === null && !this.hasChildren();\n  }\n\n  /**\n   * Calls action for each child of this tree node.\n   *\n   * @param {function(!Tree.<T>)} action Action to be called for each child.\n   */\n  forEachChild(action: (tree: Tree<T>) => void) {\n    each(this.node_.children, (child: string, childTree: TreeNode<T>) => {\n      action(new Tree<T>(child, this, childTree));\n    });\n  }\n\n  /**\n   * Does a depth-first traversal of this node's descendants, calling action for each one.\n   *\n   * @param {function(!Tree.<T>)} action Action to be called for each child.\n   * @param {boolean=} includeSelf Whether to call action on this node as well. Defaults to\n   *   false.\n   * @param {boolean=} childrenFirst Whether to call action on children before calling it on\n   *   parent.\n   */\n  forEachDescendant(\n    action: (tree: Tree<T>) => void,\n    includeSelf?: boolean,\n    childrenFirst?: boolean\n  ) {\n    if (includeSelf && !childrenFirst) action(this);\n\n    this.forEachChild(function(child) {\n      child.forEachDescendant(action, /*includeSelf=*/ true, childrenFirst);\n    });\n\n    if (includeSelf && childrenFirst) action(this);\n  }\n\n  /**\n   * Calls action on each ancestor node.\n   *\n   * @param {function(!Tree.<T>)} action Action to be called on each parent; return\n   *   true to abort.\n   * @param {boolean=} includeSelf Whether to call action on this node as well.\n   * @return {boolean} true if the action callback returned true.\n   */\n  forEachAncestor(\n    action: (tree: Tree<T>) => unknown,\n    includeSelf?: boolean\n  ): boolean {\n    let node = includeSelf ? this : this.parent();\n    while (node !== null) {\n      if (action(node)) {\n        return true;\n      }\n      node = node.parent();\n    }\n    return false;\n  }\n\n  /**\n   * Does a depth-first traversal of this node's descendants.  When a descendant with a value\n   * is found, action is called on it and traversal does not continue inside the node.\n   * Action is *not* called on this node.\n   *\n   * @param {function(!Tree.<T>)} action Action to be called for each child.\n   */\n  forEachImmediateDescendantWithValue(action: (tree: Tree<T>) => void) {\n    this.forEachChild(function(child) {\n      if (child.getValue() !== null) action(child);\n      else child.forEachImmediateDescendantWithValue(action);\n    });\n  }\n\n  /**\n   * @return {!Path} The path of this tree node, as a Path.\n   */\n  path(): Path {\n    return new Path(\n      this.parent_ === null\n        ? this.name_\n        : this.parent_.path() + '/' + this.name_\n    );\n  }\n\n  /**\n   * @return {string} The name of the tree node.\n   */\n  name(): string {\n    return this.name_;\n  }\n\n  /**\n   * @return {?Tree} The parent tree node, or null if this is the root of the tree.\n   */\n  parent(): Tree<T> | null {\n    return this.parent_;\n  }\n\n  /**\n   * Adds or removes this child from its parent based on whether it's empty or not.\n   *\n   * @private\n   */\n  private updateParents_() {\n    if (this.parent_ !== null) this.parent_.updateChild_(this.name_, this);\n  }\n\n  /**\n   * Adds or removes the passed child to this tree node, depending on whether it's empty.\n   *\n   * @param {string} childName The name of the child to update.\n   * @param {!Tree.<T>} child The child to update.\n   * @private\n   */\n  private updateChild_(childName: string, child: Tree<T>) {\n    const childEmpty = child.isEmpty();\n    const childExists = contains(this.node_.children, childName);\n    if (childEmpty && childExists) {\n      delete this.node_.children[childName];\n      this.node_.childCount--;\n      this.updateParents_();\n    } else if (!childEmpty && !childExists) {\n      this.node_.children[childName] = child.node_;\n      this.node_.childCount++;\n      this.updateParents_();\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Reference } from '../api/Reference';\nimport { DataSnapshot } from '../api/DataSnapshot';\nimport { Path } from './util/Path';\nimport { Tree } from './util/Tree';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { Node } from './snap/Node';\nimport { LUIDGenerator, warn, exceptionGuard } from './util/util';\nimport { resolveDeferredValueSnapshot } from './util/ServerValues';\nimport { isValidPriority, validateFirebaseData } from './util/validation';\nimport { contains, safeGet } from '@firebase/util';\nimport { nodeFromJSON } from './snap/nodeFromJSON';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { Repo } from './Repo';\nimport { Event } from './view/Event';\n\n// TODO: This is pretty messy.  Ideally, a lot of this would move into FirebaseData, or a transaction-specific\n// component used by FirebaseData, but it has ties to user callbacks (transaction update and onComplete) as well\n// as the realtime connection (to send transactions to the server).  So that all needs to be decoupled first.\n// For now it's part of Repo, but in its own file.\n\n/**\n * @enum {number}\n */\nexport enum TransactionStatus {\n  // We've run the transaction and updated transactionResultData_ with the result, but it isn't currently sent to the\n  // server. A transaction will go from RUN -> SENT -> RUN if it comes back from the server as rejected due to\n  // mismatched hash.\n  RUN,\n\n  // We've run the transaction and sent it to the server and it's currently outstanding (hasn't come back as accepted\n  // or rejected yet).\n  SENT,\n\n  // Temporary state used to mark completed transactions (whether successful or aborted).  The transaction will be\n  // removed when we get a chance to prune completed ones.\n  COMPLETED,\n\n  // Used when an already-sent transaction needs to be aborted (e.g. due to a conflicting set() call that was made).\n  // If it comes back as unsuccessful, we'll abort it.\n  SENT_NEEDS_ABORT,\n\n  // Temporary state used to mark transactions that need to be aborted.\n  NEEDS_ABORT\n}\n\n/**\n * If a transaction does not succeed after 25 retries, we abort it.  Among other things this ensure that if there's\n * ever a bug causing a mismatch between client / server hashes for some data, we won't retry indefinitely.\n * @type {number}\n * @const\n * @private\n */\n(Repo as any).MAX_TRANSACTION_RETRIES_ = 25;\n\n/**\n * @typedef {{\n *   path: !Path,\n *   update: function(*):*,\n *   onComplete: ?function(?Error, boolean, ?DataSnapshot),\n *   status: ?TransactionStatus,\n *   order: !number,\n *   applyLocally: boolean,\n *   retryCount: !number,\n *   unwatcher: function(),\n *   abortReason: ?string,\n *   currentWriteId: !number,\n *   currentInputSnapshot: ?Node,\n *   currentOutputSnapshotRaw: ?Node,\n *   currentOutputSnapshotResolved: ?Node\n * }}\n */\ntype Transaction = {\n  path: Path;\n  update: (a: any) => any;\n  onComplete: (a: Error | null, b: boolean, c: DataSnapshot | null) => void;\n  status: TransactionStatus;\n  order: number;\n  applyLocally: boolean;\n  retryCount: number;\n  unwatcher: () => void;\n  abortReason: string | null;\n  currentWriteId: number;\n  currentInputSnapshot: Node | null;\n  currentOutputSnapshotRaw: Node | null;\n  currentOutputSnapshotResolved: Node | null;\n};\n\n/**\n * Setup the transaction data structures\n * @private\n */\n(Repo.prototype as any).transactions_init_ = function() {\n  /**\n   * Stores queues of outstanding transactions for Firebase locations.\n   *\n   * @type {!Tree.<Array.<!Transaction>>}\n   * @private\n   */\n  this.transactionQueueTree_ = new Tree<Transaction[]>();\n};\n\ndeclare module './Repo' {\n  interface Repo {\n    startTransaction(\n      path: Path,\n      transactionUpdate: (a: any) => void,\n      onComplete: ((a: Error, b: boolean, c: DataSnapshot) => void) | null,\n      applyLocally: boolean\n    ): void;\n  }\n}\n\n/**\n * Creates a new transaction, adds it to the transactions we're tracking, and sends it to the server if possible.\n *\n * @param {!Path} path Path at which to do transaction.\n * @param {function(*):*} transactionUpdate Update callback.\n * @param {?function(?Error, boolean, ?DataSnapshot)} onComplete Completion callback.\n * @param {boolean} applyLocally Whether or not to make intermediate results visible\n */\nRepo.prototype.startTransaction = function(\n  path: Path,\n  transactionUpdate: (a: any) => any,\n  onComplete: ((a: Error, b: boolean, c: DataSnapshot) => void) | null,\n  applyLocally: boolean\n) {\n  this.log_('transaction on ' + path);\n\n  // Add a watch to make sure we get server updates.\n  const valueCallback = function() {};\n  const watchRef = new Reference(this, path);\n  watchRef.on('value', valueCallback);\n  const unwatcher = function() {\n    watchRef.off('value', valueCallback);\n  };\n\n  // Initialize transaction.\n  const transaction: Transaction = {\n    path,\n    update: transactionUpdate,\n    onComplete,\n\n    // One of TransactionStatus enums.\n    status: null,\n\n    // Used when combining transactions at different locations to figure out which one goes first.\n    order: LUIDGenerator(),\n\n    // Whether to raise local events for this transaction.\n    applyLocally: applyLocally,\n\n    // Count of how many times we've retried the transaction.\n    retryCount: 0,\n\n    // Function to call to clean up our .on() listener.\n    unwatcher,\n\n    // Stores why a transaction was aborted.\n    abortReason: null,\n\n    currentWriteId: null,\n\n    currentInputSnapshot: null,\n\n    currentOutputSnapshotRaw: null,\n\n    currentOutputSnapshotResolved: null\n  };\n\n  // Run transaction initially.\n  const currentState = this.getLatestState_(path);\n  transaction.currentInputSnapshot = currentState;\n  const newVal = transaction.update(currentState.val());\n  if (newVal === undefined) {\n    // Abort transaction.\n    transaction.unwatcher();\n    transaction.currentOutputSnapshotRaw = null;\n    transaction.currentOutputSnapshotResolved = null;\n    if (transaction.onComplete) {\n      // We just set the input snapshot, so this cast should be safe\n      const snapshot = new DataSnapshot(\n        transaction.currentInputSnapshot,\n        new Reference(this, transaction.path),\n        PRIORITY_INDEX\n      );\n      transaction.onComplete(null, false, snapshot);\n    }\n  } else {\n    validateFirebaseData(\n      'transaction failed: Data returned ',\n      newVal,\n      transaction.path\n    );\n\n    // Mark as run and add to our queue.\n    transaction.status = TransactionStatus.RUN;\n    const queueNode = this.transactionQueueTree_.subTree(path);\n    const nodeQueue = queueNode.getValue() || [];\n    nodeQueue.push(transaction);\n\n    queueNode.setValue(nodeQueue);\n\n    // Update visibleData and raise events\n    // Note: We intentionally raise events after updating all of our transaction state, since the user could\n    // start new transactions from the event callbacks.\n    let priorityForNode;\n    if (\n      typeof newVal === 'object' &&\n      newVal !== null &&\n      contains(newVal, '.priority')\n    ) {\n      priorityForNode = safeGet(newVal, '.priority');\n      assert(\n        isValidPriority(priorityForNode),\n        'Invalid priority returned by transaction. ' +\n          'Priority must be a valid string, finite number, server value, or null.'\n      );\n    } else {\n      const currentNode =\n        this.serverSyncTree_.calcCompleteEventCache(path) ||\n        ChildrenNode.EMPTY_NODE;\n      priorityForNode = currentNode.getPriority().val();\n    }\n    priorityForNode /** @type {null|number|string} */ = priorityForNode;\n\n    const serverValues = this.generateServerValues();\n    const newNodeUnresolved = nodeFromJSON(newVal, priorityForNode);\n    const newNode = resolveDeferredValueSnapshot(\n      newNodeUnresolved,\n      currentState,\n      serverValues\n    );\n    transaction.currentOutputSnapshotRaw = newNodeUnresolved;\n    transaction.currentOutputSnapshotResolved = newNode;\n    transaction.currentWriteId = this.getNextWriteId_();\n\n    const events = this.serverSyncTree_.applyUserOverwrite(\n      path,\n      newNode,\n      transaction.currentWriteId,\n      transaction.applyLocally\n    );\n    this.eventQueue_.raiseEventsForChangedPath(path, events);\n\n    this.sendReadyTransactions_();\n  }\n};\n\n/**\n * @param {!Path} path\n * @param {Array.<number>=} excludeSets A specific set to exclude\n * @return {Node}\n * @private\n */\n(Repo.prototype as any).getLatestState_ = function(\n  path: Path,\n  excludeSets?: number[]\n): Node {\n  return (\n    this.serverSyncTree_.calcCompleteEventCache(path, excludeSets) ||\n    ChildrenNode.EMPTY_NODE\n  );\n};\n\n/**\n * Sends any already-run transactions that aren't waiting for outstanding transactions to\n * complete.\n *\n * Externally it's called with no arguments, but it calls itself recursively with a particular\n * transactionQueueTree node to recurse through the tree.\n *\n * @param {Tree.<Array.<Transaction>>=} node  transactionQueueTree node to start at.\n * @private\n */\n(Repo.prototype as any).sendReadyTransactions_ = function(\n  node: Tree<Transaction[]> = this.transactionQueueTree_\n) {\n  // Before recursing, make sure any completed transactions are removed.\n  if (!node) {\n    this.pruneCompletedTransactionsBelowNode_(node);\n  }\n\n  if (node.getValue() !== null) {\n    const queue = this.buildTransactionQueue_(node);\n    assert(queue.length > 0, 'Sending zero length transaction queue');\n\n    const allRun = queue.every(\n      (transaction: Transaction) => transaction.status === TransactionStatus.RUN\n    );\n\n    // If they're all run (and not sent), we can send them.  Else, we must wait.\n    if (allRun) {\n      this.sendTransactionQueue_(node.path(), queue);\n    }\n  } else if (node.hasChildren()) {\n    node.forEachChild(childNode => {\n      this.sendReadyTransactions_(childNode);\n    });\n  }\n};\n\n/**\n * Given a list of run transactions, send them to the server and then handle the result (success or failure).\n *\n * @param {!Path} path The location of the queue.\n * @param {!Array.<Transaction>} queue Queue of transactions under the specified location.\n * @private\n */\n(Repo.prototype as any).sendTransactionQueue_ = function(\n  path: Path,\n  queue: Array<Transaction>\n) {\n  // Mark transactions as sent and increment retry count!\n  const setsToIgnore = queue.map(function(txn) {\n    return txn.currentWriteId;\n  });\n  const latestState = this.getLatestState_(path, setsToIgnore);\n  let snapToSend = latestState;\n  const latestHash = latestState.hash();\n  for (let i = 0; i < queue.length; i++) {\n    const txn = queue[i];\n    assert(\n      txn.status === TransactionStatus.RUN,\n      'tryToSendTransactionQueue_: items in queue should all be run.'\n    );\n    txn.status = TransactionStatus.SENT;\n    txn.retryCount++;\n    const relativePath = Path.relativePath(path, txn.path);\n    // If we've gotten to this point, the output snapshot must be defined.\n    snapToSend = snapToSend.updateChild(\n      relativePath /**@type {!Node} */,\n      txn.currentOutputSnapshotRaw\n    );\n  }\n\n  const dataToSend = snapToSend.val(true);\n  const pathToSend = path;\n\n  // Send the put.\n  this.server_.put(\n    pathToSend.toString(),\n    dataToSend,\n    (status: string) => {\n      this.log_('transaction put response', {\n        path: pathToSend.toString(),\n        status\n      });\n\n      let events: Event[] = [];\n      if (status === 'ok') {\n        // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\n        // the callback could trigger more transactions or sets.\n        const callbacks = [];\n        for (let i = 0; i < queue.length; i++) {\n          queue[i].status = TransactionStatus.COMPLETED;\n          events = events.concat(\n            this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId)\n          );\n          if (queue[i].onComplete) {\n            // We never unset the output snapshot, and given that this transaction is complete, it should be set\n            const node = queue[i].currentOutputSnapshotResolved as Node;\n            const ref = new Reference(this, queue[i].path);\n            const snapshot = new DataSnapshot(node, ref, PRIORITY_INDEX);\n            callbacks.push(\n              queue[i].onComplete.bind(null, null, true, snapshot)\n            );\n          }\n          queue[i].unwatcher();\n        }\n\n        // Now remove the completed transactions.\n        this.pruneCompletedTransactionsBelowNode_(\n          this.transactionQueueTree_.subTree(path)\n        );\n        // There may be pending transactions that we can now send.\n        this.sendReadyTransactions_();\n\n        this.eventQueue_.raiseEventsForChangedPath(path, events);\n\n        // Finally, trigger onComplete callbacks.\n        for (let i = 0; i < callbacks.length; i++) {\n          exceptionGuard(callbacks[i]);\n        }\n      } else {\n        // transactions are no longer sent.  Update their status appropriately.\n        if (status === 'datastale') {\n          for (let i = 0; i < queue.length; i++) {\n            if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT)\n              queue[i].status = TransactionStatus.NEEDS_ABORT;\n            else queue[i].status = TransactionStatus.RUN;\n          }\n        } else {\n          warn(\n            'transaction at ' + pathToSend.toString() + ' failed: ' + status\n          );\n          for (let i = 0; i < queue.length; i++) {\n            queue[i].status = TransactionStatus.NEEDS_ABORT;\n            queue[i].abortReason = status;\n          }\n        }\n\n        this.rerunTransactions_(path);\n      }\n    },\n    latestHash\n  );\n};\n\n/**\n * Finds all transactions dependent on the data at changedPath and reruns them.\n *\n * Should be called any time cached data changes.\n *\n * Return the highest path that was affected by rerunning transactions.  This is the path at which events need to\n * be raised for.\n *\n * @param {!Path} changedPath The path in mergedData that changed.\n * @return {!Path} The rootmost path that was affected by rerunning transactions.\n * @private\n */\n(Repo.prototype as any).rerunTransactions_ = function(changedPath: Path): Path {\n  const rootMostTransactionNode = this.getAncestorTransactionNode_(changedPath);\n  const path = rootMostTransactionNode.path();\n\n  const queue = this.buildTransactionQueue_(rootMostTransactionNode);\n  this.rerunTransactionQueue_(queue, path);\n\n  return path;\n};\n\n/**\n * Does all the work of rerunning transactions (as well as cleans up aborted transactions and whatnot).\n *\n * @param {Array.<Transaction>} queue The queue of transactions to run.\n * @param {!Path} path The path the queue is for.\n * @private\n */\n(Repo.prototype as any).rerunTransactionQueue_ = function(\n  queue: Array<Transaction>,\n  path: Path\n) {\n  if (queue.length === 0) {\n    return; // Nothing to do!\n  }\n\n  // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\n  // the callback could trigger more transactions or sets.\n  const callbacks = [];\n  let events: Event[] = [];\n  // Ignore all of the sets we're going to re-run.\n  const txnsToRerun = queue.filter(function(q) {\n    return q.status === TransactionStatus.RUN;\n  });\n  const setsToIgnore = txnsToRerun.map(function(q) {\n    return q.currentWriteId;\n  });\n  for (let i = 0; i < queue.length; i++) {\n    const transaction = queue[i];\n    const relativePath = Path.relativePath(path, transaction.path);\n    let abortTransaction = false,\n      abortReason;\n    assert(\n      relativePath !== null,\n      'rerunTransactionsUnderNode_: relativePath should not be null.'\n    );\n\n    if (transaction.status === TransactionStatus.NEEDS_ABORT) {\n      abortTransaction = true;\n      abortReason = transaction.abortReason;\n      events = events.concat(\n        this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true)\n      );\n    } else if (transaction.status === TransactionStatus.RUN) {\n      if (transaction.retryCount >= (Repo as any).MAX_TRANSACTION_RETRIES_) {\n        abortTransaction = true;\n        abortReason = 'maxretry';\n        events = events.concat(\n          this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true)\n        );\n      } else {\n        // This code reruns a transaction\n        const currentNode = this.getLatestState_(\n          transaction.path,\n          setsToIgnore\n        );\n        transaction.currentInputSnapshot = currentNode;\n        const newData = queue[i].update(currentNode.val());\n        if (newData !== undefined) {\n          validateFirebaseData(\n            'transaction failed: Data returned ',\n            newData,\n            transaction.path\n          );\n          let newDataNode = nodeFromJSON(newData);\n          const hasExplicitPriority =\n            typeof newData === 'object' &&\n            newData != null &&\n            contains(newData, '.priority');\n          if (!hasExplicitPriority) {\n            // Keep the old priority if there wasn't a priority explicitly specified.\n            newDataNode = newDataNode.updatePriority(currentNode.getPriority());\n          }\n\n          const oldWriteId = transaction.currentWriteId;\n          const serverValues = this.generateServerValues();\n          const newNodeResolved = resolveDeferredValueSnapshot(\n            newDataNode,\n            currentNode,\n            serverValues\n          );\n\n          transaction.currentOutputSnapshotRaw = newDataNode;\n          transaction.currentOutputSnapshotResolved = newNodeResolved;\n          transaction.currentWriteId = this.getNextWriteId_();\n          // Mutates setsToIgnore in place\n          setsToIgnore.splice(setsToIgnore.indexOf(oldWriteId), 1);\n          events = events.concat(\n            this.serverSyncTree_.applyUserOverwrite(\n              transaction.path,\n              newNodeResolved,\n              transaction.currentWriteId,\n              transaction.applyLocally\n            )\n          );\n          events = events.concat(\n            this.serverSyncTree_.ackUserWrite(oldWriteId, true)\n          );\n        } else {\n          abortTransaction = true;\n          abortReason = 'nodata';\n          events = events.concat(\n            this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true)\n          );\n        }\n      }\n    }\n    this.eventQueue_.raiseEventsForChangedPath(path, events);\n    events = [];\n    if (abortTransaction) {\n      // Abort.\n      queue[i].status = TransactionStatus.COMPLETED;\n\n      // Removing a listener can trigger pruning which can muck with mergedData/visibleData (as it prunes data).\n      // So defer the unwatcher until we're done.\n      (function(unwatcher) {\n        setTimeout(unwatcher, Math.floor(0));\n      })(queue[i].unwatcher);\n\n      if (queue[i].onComplete) {\n        if (abortReason === 'nodata') {\n          const ref = new Reference(this, queue[i].path);\n          // We set this field immediately, so it's safe to cast to an actual snapshot\n          const lastInput /** @type {!Node} */ = queue[i].currentInputSnapshot;\n          const snapshot = new DataSnapshot(lastInput, ref, PRIORITY_INDEX);\n          callbacks.push(queue[i].onComplete.bind(null, null, false, snapshot));\n        } else {\n          callbacks.push(\n            queue[i].onComplete.bind(null, new Error(abortReason), false, null)\n          );\n        }\n      }\n    }\n  }\n\n  // Clean up completed transactions.\n  this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);\n\n  // Now fire callbacks, now that we're in a good, known state.\n  for (let i = 0; i < callbacks.length; i++) {\n    exceptionGuard(callbacks[i]);\n  }\n\n  // Try to send the transaction result to the server.\n  this.sendReadyTransactions_();\n};\n\n/**\n * Returns the rootmost ancestor node of the specified path that has a pending transaction on it, or just returns\n * the node for the given path if there are no pending transactions on any ancestor.\n *\n * @param {!Path} path The location to start at.\n * @return {!Tree.<Array.<!Transaction>>} The rootmost node with a transaction.\n * @private\n */\n(Repo.prototype as any).getAncestorTransactionNode_ = function(\n  path: Path\n): Tree<Transaction[]> {\n  let front;\n\n  // Start at the root and walk deeper into the tree towards path until we find a node with pending transactions.\n  let transactionNode = this.transactionQueueTree_;\n  while (\n    (front = path.getFront()) !== null &&\n    transactionNode.getValue() === null\n  ) {\n    transactionNode = transactionNode.subTree(front);\n    path = path.popFront();\n  }\n\n  return transactionNode;\n};\n\n/**\n * Builds the queue of all transactions at or below the specified transactionNode.\n *\n * @param {!Tree.<Array.<Transaction>>} transactionNode\n * @return {Array.<Transaction>} The generated queue.\n * @private\n */\n(Repo.prototype as any).buildTransactionQueue_ = function(\n  transactionNode: Tree<Transaction[]>\n): Array<Transaction> {\n  // Walk any child transaction queues and aggregate them into a single queue.\n  const transactionQueue: Transaction[] = [];\n  this.aggregateTransactionQueuesForNode_(transactionNode, transactionQueue);\n\n  // Sort them by the order the transactions were created.\n  transactionQueue.sort(function(a, b) {\n    return a.order - b.order;\n  });\n\n  return transactionQueue;\n};\n\n/**\n * @param {!Tree.<Array.<Transaction>>} node\n * @param {Array.<Transaction>} queue\n * @private\n */\n(Repo.prototype as any).aggregateTransactionQueuesForNode_ = function(\n  node: Tree<Transaction[]>,\n  queue: Array<Transaction>\n) {\n  const nodeQueue = node.getValue();\n  if (nodeQueue !== null) {\n    for (let i = 0; i < nodeQueue.length; i++) {\n      queue.push(nodeQueue[i]);\n    }\n  }\n\n  node.forEachChild(child => {\n    this.aggregateTransactionQueuesForNode_(child, queue);\n  });\n};\n\n/**\n * Remove COMPLETED transactions at or below this node in the transactionQueueTree_.\n *\n * @param {!Tree.<Array.<!Transaction>>} node\n * @private\n */\n(Repo.prototype as any).pruneCompletedTransactionsBelowNode_ = function(\n  node: Tree<Transaction[]>\n) {\n  const queue = node.getValue();\n  if (queue) {\n    let to = 0;\n    for (let from = 0; from < queue.length; from++) {\n      if (queue[from].status !== TransactionStatus.COMPLETED) {\n        queue[to] = queue[from];\n        to++;\n      }\n    }\n    queue.length = to;\n    node.setValue(queue.length > 0 ? queue : null);\n  }\n\n  node.forEachChild(childNode => {\n    this.pruneCompletedTransactionsBelowNode_(childNode);\n  });\n};\n\n/**\n * Aborts all transactions on ancestors or descendants of the specified path.  Called when doing a set() or update()\n * since we consider them incompatible with transactions.\n *\n * @param {!Path} path Path for which we want to abort related transactions.\n * @return {!Path}\n * @private\n */\n(Repo.prototype as any).abortTransactions_ = function(path: Path): Path {\n  const affectedPath = this.getAncestorTransactionNode_(path).path();\n\n  const transactionNode = this.transactionQueueTree_.subTree(path);\n\n  transactionNode.forEachAncestor((node: Tree<Transaction[]>) => {\n    this.abortTransactionsOnNode_(node);\n  });\n\n  this.abortTransactionsOnNode_(transactionNode);\n\n  transactionNode.forEachDescendant((node: Tree<Transaction[]>) => {\n    this.abortTransactionsOnNode_(node);\n  });\n\n  return affectedPath;\n};\n\n/**\n * Abort transactions stored in this transaction queue node.\n *\n * @param {!Tree.<Array.<Transaction>>} node Node to abort transactions for.\n * @private\n */\n(Repo.prototype as any).abortTransactionsOnNode_ = function(\n  node: Tree<Transaction[]>\n) {\n  const queue = node.getValue();\n  if (queue !== null) {\n    // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\n    // the callback could trigger more transactions or sets.\n    const callbacks = [];\n\n    // Go through queue.  Any already-sent transactions must be marked for abort, while the unsent ones\n    // can be immediately aborted and removed.\n    let events: Event[] = [];\n    let lastSent = -1;\n    for (let i = 0; i < queue.length; i++) {\n      if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT) {\n        // Already marked.  No action needed.\n      } else if (queue[i].status === TransactionStatus.SENT) {\n        assert(\n          lastSent === i - 1,\n          'All SENT items should be at beginning of queue.'\n        );\n        lastSent = i;\n        // Mark transaction for abort when it comes back.\n        queue[i].status = TransactionStatus.SENT_NEEDS_ABORT;\n        queue[i].abortReason = 'set';\n      } else {\n        assert(\n          queue[i].status === TransactionStatus.RUN,\n          'Unexpected transaction status in abort'\n        );\n        // We can abort it immediately.\n        queue[i].unwatcher();\n        events = events.concat(\n          this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId, true)\n        );\n        if (queue[i].onComplete) {\n          const snapshot: DataSnapshot | null = null;\n          callbacks.push(\n            queue[i].onComplete.bind(null, new Error('set'), false, snapshot)\n          );\n        }\n      }\n    }\n    if (lastSent === -1) {\n      // We're not waiting for any sent transactions.  We can clear the queue.\n      node.setValue(null);\n    } else {\n      // Remove the transactions we aborted.\n      queue.length = lastSent + 1;\n    }\n\n    // Now fire the callbacks.\n    this.eventQueue_.raiseEventsForChangedPath(node.path(), events);\n    for (let i = 0; i < callbacks.length; i++) {\n      exceptionGuard(callbacks[i]);\n    }\n  }\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp } from '@firebase/app-types';\nimport { safeGet } from '@firebase/util';\nimport { Repo } from './Repo';\nimport { fatal } from './util/util';\nimport { parseRepoInfo } from './util/libs/parser';\nimport { validateUrl } from './util/validation';\nimport './Repo_transaction';\nimport { Database } from '../api/Database';\nimport { RepoInfo } from './RepoInfo';\nimport { FirebaseAuthInternalName } from '@firebase/auth-interop-types';\nimport { Provider } from '@firebase/component';\n\n/** @const {string} */\nconst DATABASE_URL_OPTION = 'databaseURL';\n\n/**\n * This variable is also defined in the firebase node.js admin SDK. Before\n * modifying this definition, consult the definition in:\n *\n * https://github.com/firebase/firebase-admin-node\n *\n * and make sure the two are consistent.\n */\nconst FIREBASE_DATABASE_EMULATOR_HOST_VAR = 'FIREBASE_DATABASE_EMULATOR_HOST';\n\nlet _staticInstance: RepoManager;\n\n/**\n * Creates and caches Repo instances.\n */\nexport class RepoManager {\n  /**\n   * @private {!Object.<string, Object<string, !fb.core.Repo>>}\n   */\n  private repos_: {\n    [appName: string]: {\n      [dbUrl: string]: Repo;\n    };\n  } = {};\n\n  /**\n   * If true, new Repos will be created to use ReadonlyRestClient (for testing purposes).\n   * @private {boolean}\n   */\n  private useRestClient_: boolean = false;\n\n  static getInstance(): RepoManager {\n    if (!_staticInstance) {\n      _staticInstance = new RepoManager();\n    }\n    return _staticInstance;\n  }\n\n  // TODO(koss): Remove these functions unless used in tests?\n  interrupt() {\n    for (const appName in this.repos_) {\n      for (const dbUrl in this.repos_[appName]) {\n        this.repos_[appName][dbUrl].interrupt();\n      }\n    }\n  }\n\n  resume() {\n    for (const appName in this.repos_) {\n      for (const dbUrl in this.repos_[appName]) {\n        this.repos_[appName][dbUrl].resume();\n      }\n    }\n  }\n\n  /**\n   * This function should only ever be called to CREATE a new database instance.\n   *\n   * @param {!FirebaseApp} app\n   * @return {!Database}\n   */\n  databaseFromApp(\n    app: FirebaseApp,\n    authProvider: Provider<FirebaseAuthInternalName>,\n    url?: string\n  ): Database {\n    let dbUrl: string | undefined = url || app.options[DATABASE_URL_OPTION];\n    if (dbUrl === undefined) {\n      fatal(\n        \"Can't determine Firebase Database URL.  Be sure to include \" +\n          DATABASE_URL_OPTION +\n          ' option when calling firebase.initializeApp().'\n      );\n    }\n\n    let parsedUrl = parseRepoInfo(dbUrl);\n    let repoInfo = parsedUrl.repoInfo;\n\n    let dbEmulatorHost: string | undefined = undefined;\n    if (typeof process !== 'undefined') {\n      dbEmulatorHost = process.env[FIREBASE_DATABASE_EMULATOR_HOST_VAR];\n    }\n    if (dbEmulatorHost) {\n      dbUrl = `http://${dbEmulatorHost}?ns=${repoInfo.namespace}`;\n      parsedUrl = parseRepoInfo(dbUrl);\n      repoInfo = parsedUrl.repoInfo;\n    }\n\n    validateUrl('Invalid Firebase Database URL', 1, parsedUrl);\n    if (!parsedUrl.path.isEmpty()) {\n      fatal(\n        'Database URL must point to the root of a Firebase Database ' +\n          '(not including a child path).'\n      );\n    }\n\n    const repo = this.createRepo(repoInfo, app, authProvider);\n\n    return repo.database;\n  }\n\n  /**\n   * Remove the repo and make sure it is disconnected.\n   *\n   * @param {!Repo} repo\n   */\n  deleteRepo(repo: Repo) {\n    const appRepos = safeGet(this.repos_, repo.app.name);\n    // This should never happen...\n    if (!appRepos || safeGet(appRepos, repo.repoInfo_.toURLString()) !== repo) {\n      fatal(\n        `Database ${repo.app.name}(${repo.repoInfo_}) has already been deleted.`\n      );\n    }\n    repo.interrupt();\n    delete appRepos[repo.repoInfo_.toURLString()];\n  }\n\n  /**\n   * Ensures a repo doesn't already exist and then creates one using the\n   * provided app.\n   *\n   * @param {!RepoInfo} repoInfo The metadata about the Repo\n   * @param {!FirebaseApp} app\n   * @return {!Repo} The Repo object for the specified server / repoName.\n   */\n  createRepo(\n    repoInfo: RepoInfo,\n    app: FirebaseApp,\n    authProvider: Provider<FirebaseAuthInternalName>\n  ): Repo {\n    let appRepos = safeGet(this.repos_, app.name);\n\n    if (!appRepos) {\n      appRepos = {};\n      this.repos_[app.name] = appRepos;\n    }\n\n    let repo = safeGet(appRepos, repoInfo.toURLString());\n    if (repo) {\n      fatal(\n        'Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.'\n      );\n    }\n    repo = new Repo(repoInfo, this.useRestClient_, app, authProvider);\n    appRepos[repoInfo.toURLString()] = repo;\n\n    return repo;\n  }\n\n  /**\n   * Forces us to use ReadonlyRestClient instead of PersistentConnection for new Repos.\n   * @param {boolean} forceRestClient\n   */\n  forceRestClient(forceRestClient: boolean) {\n    this.useRestClient_ = forceRestClient;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { fatal } from '../core/util/util';\nimport { parseRepoInfo } from '../core/util/libs/parser';\nimport { Path } from '../core/util/Path';\nimport { Reference } from './Reference';\nimport { Repo } from '../core/Repo';\nimport { RepoManager } from '../core/RepoManager';\nimport { validateArgCount } from '@firebase/util';\nimport { validateUrl } from '../core/util/validation';\nimport { FirebaseApp } from '@firebase/app-types';\nimport { FirebaseService } from '@firebase/app-types/private';\nimport { RepoInfo } from '../core/RepoInfo';\nimport { FirebaseDatabase } from '@firebase/database-types';\n\n/**\n * Class representing a firebase database.\n * @implements {FirebaseService}\n */\nexport class Database implements FirebaseService, FirebaseDatabase {\n  INTERNAL: DatabaseInternals;\n  private root_: Reference;\n\n  static readonly ServerValue = {\n    TIMESTAMP: {\n      '.sv': 'timestamp'\n    },\n    _increment: (x: number) => {\n      return {\n        '.sv': {\n          'increment': x\n        }\n      };\n    }\n  };\n\n  /**\n   * The constructor should not be called by users of our public API.\n   * @param {!Repo} repo_\n   */\n  constructor(private repo_: Repo) {\n    if (!(repo_ instanceof Repo)) {\n      fatal(\n        \"Don't call new Database() directly - please use firebase.database().\"\n      );\n    }\n\n    /** @type {Reference} */\n    this.root_ = new Reference(repo_, Path.Empty);\n\n    this.INTERNAL = new DatabaseInternals(this);\n  }\n\n  get app(): FirebaseApp {\n    return this.repo_.app;\n  }\n\n  /**\n   * Returns a reference to the root or to the path specified in the provided\n   * argument.\n\n   * @param {string|Reference=} path The relative string path or an existing\n   * Reference to a database location.\n   * @throws If a Reference is provided, throws if it does not belong to the\n   * same project.\n   * @return {!Reference} Firebase reference.\n   **/\n  ref(path?: string): Reference;\n  ref(path?: Reference): Reference;\n  ref(path?: string | Reference): Reference {\n    this.checkDeleted_('ref');\n    validateArgCount('database.ref', 0, 1, arguments.length);\n\n    if (path instanceof Reference) {\n      return this.refFromURL(path.toString());\n    }\n\n    return path !== undefined ? this.root_.child(path) : this.root_;\n  }\n\n  /**\n   * Returns a reference to the root or the path specified in url.\n   * We throw a exception if the url is not in the same domain as the\n   * current repo.\n   * @param {string} url\n   * @return {!Reference} Firebase reference.\n   */\n  refFromURL(url: string): Reference {\n    /** @const {string} */\n    const apiName = 'database.refFromURL';\n    this.checkDeleted_(apiName);\n    validateArgCount(apiName, 1, 1, arguments.length);\n    const parsedURL = parseRepoInfo(url);\n    validateUrl(apiName, 1, parsedURL);\n\n    const repoInfo = parsedURL.repoInfo;\n    if (repoInfo.host !== ((this.repo_ as any).repoInfo_ as RepoInfo).host) {\n      fatal(\n        apiName +\n          ': Host name does not match the current database: ' +\n          '(found ' +\n          repoInfo.host +\n          ' but expected ' +\n          ((this.repo_ as any).repoInfo_ as RepoInfo).host +\n          ')'\n      );\n    }\n\n    return this.ref(parsedURL.path.toString());\n  }\n\n  /**\n   * @param {string} apiName\n   */\n  private checkDeleted_(apiName: string) {\n    if (this.repo_ === null) {\n      fatal('Cannot call ' + apiName + ' on a deleted database.');\n    }\n  }\n\n  // Make individual repo go offline.\n  goOffline() {\n    validateArgCount('database.goOffline', 0, 0, arguments.length);\n    this.checkDeleted_('goOffline');\n    this.repo_.interrupt();\n  }\n\n  goOnline() {\n    validateArgCount('database.goOnline', 0, 0, arguments.length);\n    this.checkDeleted_('goOnline');\n    this.repo_.resume();\n  }\n}\n\nexport class DatabaseInternals {\n  /** @param {!Database} database */\n  constructor(public database: Database) {}\n\n  /** @return {Promise<void>} */\n  async delete(): Promise<void> {\n    (this.database as any).checkDeleted_('delete');\n    RepoManager.getInstance().deleteRepo((this.database as any).repo_ as Repo);\n\n    (this.database as any).repo_ = null;\n    (this.database as any).root_ = null;\n    this.database.INTERNAL = null;\n    this.database = null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { WebSocketConnection } from '../realtime/WebSocketConnection';\nimport { BrowserPollConnection } from '../realtime/BrowserPollConnection';\nimport { Reference } from './Reference';\n\n/**\n * INTERNAL methods for internal-use only (tests, etc.).\n *\n * Customers shouldn't use these or else should be aware that they could break at any time.\n *\n * @const\n */\n\nexport const forceLongPolling = function() {\n  WebSocketConnection.forceDisallow();\n  BrowserPollConnection.forceAllow();\n};\n\nexport const forceWebSockets = function() {\n  BrowserPollConnection.forceDisallow();\n};\n\n/* Used by App Manager */\nexport const isWebSocketsAvailable = function(): boolean {\n  return WebSocketConnection['isAvailable']();\n};\n\nexport const setSecurityDebugCallback = function(\n  ref: Reference,\n  callback: (a: Object) => void\n) {\n  (ref.repo.persistentConnection_ as any).securityDebugCallback_ = callback;\n};\n\nexport const stats = function(ref: Reference, showDelta?: boolean) {\n  ref.repo.stats(showDelta);\n};\n\nexport const statsIncrementCounter = function(ref: Reference, metric: string) {\n  ref.repo.statsIncrementCounter(metric);\n};\n\nexport const dataUpdateCount = function(ref: Reference): number {\n  return ref.repo.dataUpdateCount;\n};\n\nexport const interceptServerData = function(\n  ref: Reference,\n  callback: ((a: string, b: any) => void) | null\n) {\n  return ref.repo.interceptServerData_(callback);\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RepoInfo } from '../core/RepoInfo';\nimport { PersistentConnection } from '../core/PersistentConnection';\nimport { RepoManager } from '../core/RepoManager';\nimport { Connection } from '../realtime/Connection';\nimport { Query } from './Query';\n\nexport const DataConnection = PersistentConnection;\n\n/**\n * @param {!string} pathString\n * @param {function(*)} onComplete\n */\n(PersistentConnection.prototype as any).simpleListen = function(\n  pathString: string,\n  onComplete: (a: any) => void\n) {\n  this.sendRequest('q', { p: pathString }, onComplete);\n};\n\n/**\n * @param {*} data\n * @param {function(*)} onEcho\n */\n(PersistentConnection.prototype as any).echo = function(\n  data: any,\n  onEcho: (a: any) => void\n) {\n  this.sendRequest('echo', { d: data }, onEcho);\n};\n\n// RealTimeConnection properties that we use in tests.\nexport const RealTimeConnection = Connection;\n\n/**\n * @param {function(): string} newHash\n * @return {function()}\n */\nexport const hijackHash = function(newHash: () => string) {\n  const oldPut = PersistentConnection.prototype.put;\n  PersistentConnection.prototype.put = function(\n    pathString,\n    data,\n    opt_onComplete,\n    opt_hash\n  ) {\n    if (opt_hash !== undefined) {\n      opt_hash = newHash();\n    }\n    oldPut.call(this, pathString, data, opt_onComplete, opt_hash);\n  };\n  return function() {\n    PersistentConnection.prototype.put = oldPut;\n  };\n};\n\n/**\n * @type {function(new:RepoInfo, !string, boolean, !string, boolean): undefined}\n */\nexport const ConnectionTarget = RepoInfo;\n\n/**\n * @param {!Query} query\n * @return {!string}\n */\nexport const queryIdentifier = function(query: Query) {\n  return query.queryIdentifier();\n};\n\n/**\n * Forces the RepoManager to create Repos that use ReadonlyRestClient instead of PersistentConnection.\n *\n * @param {boolean} forceRestClient\n */\nexport const forceRestClient = function(forceRestClient: boolean) {\n  RepoManager.getInstance().forceRestClient(forceRestClient);\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n"],"sourceRoot":""}